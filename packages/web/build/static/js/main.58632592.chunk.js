(this["webpackJsonp@datapali/web"]=this["webpackJsonp@datapali/web"]||[]).push([[0],{479:function(e,t,n){e.exports=n(823)},484:function(e,t,n){},488:function(e,t,n){},644:function(e,t,n){},823:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(8),i=n.n(r),s=(n(484),n(27)),l=n(26),c=n(38),u=n(37),d=n(39),p=n(29),h=n(446),m=n(267),f=n(60),v=n(104),g=n(99),b=n(417),y=(n(488),n(48)),E=n(840),C=n(190),O="add-filled-form",S="add-available-form",k="replace-available-forms",w="delete-available-form",j="set-user",N="logout";function T(e){return{type:j,payload:e}}var I=n(845),F=n(16),A=I.a.confirm;var x=n(54),D=n(336),P=n(422),q=n.n(P),R=n(414),G=n(178),M={byId:{},ids:[]};var V=n(105);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var U,Q,_={byId:{},ids:[]};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}!function(e){e.SURVEYOR="surveyor",e.ADMIN="admin"}(U||(U={})),function(e){e.DARK="dark",e.LIGHT="light"}(Q||(Q={}));var B={filledForms:[],availableForms:[],firstName:"",id:"",lastName:"",token:"",accountType:U.SURVEYOR,createdForms:[]};var $,H=Object(x.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(V.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t.payload);default:return e}},rootForms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(G.a)(e,(function(e){var n=t.payload;e.ids.includes(n.id)||e.ids.push(n.id),e.byId[n.id]=n.root}));case k:var n=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(V.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{byId:n.roots,ids:Object.keys(n)});case w:default:return e}},filledForms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:var n=t.payload,a=n.id,o=n.filledForm;return Object(G.a)(e,(function(e){e.byId[a]=o,e.ids.includes(o.id)||e.ids.push(o.id)}));default:return e}},form:R.a}),K={rootForms:_,user:B,filledForms:M,form:{}},z={key:"root",storage:q.a},Y=Object(D.a)(z,(function(e,t){return t.type===N&&(e=K),H(e,t)})),Z=Object(x.c)(Y),W=Object(D.b)(Z),X=Object(f.b)((function(e,t){return{}}),(function(e){return{onLogoutClick:function(){e({type:N,payload:void 0}),W.purge()}}}))((function(e){var t=function(){e.onLogoutClick&&e.onLogoutClick()};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(F.a,{style:{fontSize:20,color:"black"},className:"trigger",type:e.isSidebarCollapsed?"menu-unfold":"menu-fold",onClick:function(t){return e.setSidebarCollapsed(!e.isSidebarCollapsed)}})),o.a.createElement("div",null,o.a.createElement(F.a,{onClick:function(){return e=t,void A({title:"Sign Out",content:"Are you sure you want to sign out?",onOk:function(){e()},onCancel:function(){}});var e},style:{color:"black",fontSize:20,alignSelf:"flex-end"},type:"logout"})))})),ee=n(110),te=n.n(ee),ne=function(){function e(){Object(s.a)(this,e),this.literals=Array()}return Object(l.a)(e,[{key:"setLiterals",value:function(e){return this.literals=e,this}},{key:"getClause",value:function(){var e=this,t="";return this.literals.forEach((function(n,a){t+="l".concat(a).concat(a===e.literals.length-1?n.followingOperator:"")})),t}},{key:"addLiteral",value:function(e){this.literals.push(e),console.log(this.literals)}},{key:"deleteLiteral",value:function(e){return this.literals.splice(e,1),this}},{key:"Literals",get:function(){return this.literals}}],[{key:"fromJSON",value:function(t){if(!t)return new e;var n=new e,a=t.literals;return n.setLiterals(a),n}},{key:"toJSON",value:function(e){if(e)return{literals:JSON.parse(JSON.stringify(e.literals))}}},{key:"checkIfValid",value:function(e){if(!e.literals)return!1;var t=!0;return e.literals.forEach((function(e){Object.values(e).every((function(e){return!te.a.isNil(e)}))||(t=!1)})),t}},{key:"Clone",value:function(t){return new e}}]),e}();function ae(e){if(e)return{name:e.name,ofType:re(e.ofType)}}function oe(e){return{name:e.name,ofType:ae(e.ofType)}}function re(e){if(e)return{name:e.name,ofType:re(e.ofType)}}function ie(e){return{name:e.name,ofType:re(e.ofType)}}!function(e){e.OR="||",e.AND="&"}($||($={}));var se=function(){function e(){Object(s.a)(this,e),this.optionsMap={},this.optionGroupMap={},this.options=[],this.opt_count=0,this.group_count=0}return Object(l.a)(e,[{key:"addOption",value:function(e){e||(e={id:"opt-"+this.opt_count,value:void 0,groupName:void 0}),this.optionsMap[e.id]=e;var t=e.groupName;if(t){var n=this.optionGroupMap[t];n||(n={id:"opt-grp-"+this.group_count,name:t,appearingCondition:void 0,members:[e]},this.optionGroupMap[t]=n,this.group_count++);var a=null;e&&e.id&&(a=n.members.find((function(t){return!!e&&t.id===e.id}))),a||n.members.push(e)}return this.opt_count++,this}},{key:"addGroup",value:function(e){var t={id:"opt-grp"+this.group_count,name:e||"group-".concat(this.group_count),appearingCondition:void 0,members:[]};return this.optionGroupMap[t.name]=t,this.group_count++,t}},{key:"setValueForOption",value:function(e,t){var n=this.optionsMap[e];return n&&(n.value=t),this}},{key:"deleteOption",value:function(e){var t=this.optionsMap[e];if(t){delete this.optionsMap[e];var n=t.groupName;if(n){var a=this.optionGroupMap[n];if(a){var o=a.members.findIndex((function(t){return t.id===e}));o>-1&&a.members.splice(o,1)}}}return this}},{key:"assignOptionToGroup",value:function(e,t){var n=this,a=this.optionGroupMap[t];a||(a=this.addGroup(t),this.optionGroupMap[a.name]=a);for(var o=function(t){var o=e[t],r=n.optionsMap[o],i=r.groupName&&n.optionGroupMap[r.groupName];if(a.members.find((function(e){return e.id===o})))return"continue";if(i){var s=i.members.findIndex((function(e){return e.id===r.id}));s>-1&&i.members.splice(s,1)}r.groupName=a.name,a.members.push(r)},r=0;r<e.length;r++)o(r);return this}},{key:"setConditionForOption",value:function(e,t){var n=this.optionsMap[e];return n&&(n.appearingCondition=t),this}},{key:"setConditionForGroup",value:function(e,t){var n=this.optionGroupMap[e];return n&&(n.appearingCondition=t),this}},{key:"unassignGroup",value:function(e){var t=this;e.forEach((function(e){var n=t.optionsMap[e],a=n.groupName;if(n&&a){var o=t.optionGroupMap[a];if(o){var r=o.members.findIndex((function(t){return t.id===e}));o.members.splice(r,1)}}n&&(n.groupName=void 0)}))}},{key:"changeGroupName",value:function(e,t){var n=this,a=this.optionGroupMap[e],o=a.members.map((function(e){return e.id}));if(o&&o.forEach((function(e){var a=n.optionsMap[e];a&&(a.groupName=t)})),a){a.name=t;var r=te.a.clone(a);delete this.optionGroupMap[e],this.optionGroupMap[t]=r}}},{key:"deleteGroup",value:function(e){var t=this,n=this.optionGroupMap[e];if(!n)return this;var a=n.members.map((function(e){return e.id}));a&&a.forEach((function(e){var n=t.optionsMap[e];n&&(n.groupName=void 0)})),delete this.optionGroupMap[e]}},{key:"setOptionTypeFor",value:function(e,t){var n=this.optionsMap[e];n&&(n.type=t,n.value=void 0)}},{key:"SortedOptions",get:function(){var e=Object.values(this.optionsMap).filter((function(e){return!e.groupName}));return{groups:Object.values(this.optionGroupMap),rootOptions:e}}}],[{key:"toJSON",value:function(e){return{optionsMap:e&&e.optionsMap?te.a.mapValues(e.optionsMap,(function(e){return le(e)})):{},optionGroupMap:e&&e.optionGroupMap?te.a.mapValues(e.optionGroupMap,(function(e){return function(e){return{id:e.id,name:e.name,appearingCondition:ne.toJSON(e.appearingCondition),members:e.members.map((function(e){return le(e)}))}}(e)})):{}}}},{key:"fromJSON",value:function(t){var n=new e;return n.optionsMap=t.optionsMap?te.a.mapValues(t.optionsMap,(function(e){return function(e){var t={groupName:e.groupName,appearingCondition:ne.fromJSON(e.appearingCondition),id:e.id,value:e.value};e.type&&(t.type=ie(e.type));return t}(e)})):{},n.optionGroupMap=t.optionGroupMap?te.a.mapValues(t.optionGroupMap,(function(e){return{id:e.id,name:e.name,appearingCondition:ne.fromJSON(e.appearingCondition),members:e.members.map((function(e){return n.optionsMap[e.id]}))}})):{},n}}]),e}();function le(e){return{appearingCondition:ne.toJSON(e.appearingCondition),type:e.type?oe(e.type):void 0,id:e.id,value:e.value,groupName:e.groupName}}var ce,ue,de,pe;!function(e){e.Less_Than_Or_Equal="<=",e.Greater_Than_Or_Equal=">=",e.Less_Than="<",e.Greater_Than=">",e.Equal="=="}(ce||(ce={})),function(e){e.String="String",e.Boolean="Boolean",e.Date="Date",e.Time="Time",e.Number="Number",e.Select="Select"}(ue||(ue={})),function(e){e.String="string",e.html="html"}(de||(de={})),function(e){e.BOOLEAN="boolean",e.STRING="string",e.DATE="date",e.TIME="time",e.NUMBER="number",e.RANGE="range",e.SELECT="select",e.GEOLOCATION="geolocation"}(pe||(pe={}));var he=function(){function e(){Object(s.a)(this,e),this.consts={},this.count=0}return Object(l.a)(e,[{key:"getConstant",value:function(e){return te.a.cloneDeep(this.consts[e])}},{key:"addConstant",value:function(e){return e||(e={name:"",id:"constant-"+this.count,type:void 0,value:""}),this.consts[e.id]=e,this}},{key:"removeConstant",value:function(e){return this.consts[e]&&delete this.consts[e],this}},{key:"ConstantsArray",get:function(){return Object.values(this.consts)}}],[{key:"fromJSON",value:function(e){}},{key:"toJSON",value:function(e){}}]),e}();function me(e){return{isEnabled:e.isEnabled,condition:ne.toJSON(e.condition),duplicateTimes:{value:e.duplicateTimes.value,type:e.duplicateTimes.type}}}function fe(e){return e.slice(1).map((function(e){return e+1})).join(".")}function ve(e){e||(e="");var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e+(t()+t()+"-")+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var ge=function(){function e(){Object(s.a)(this,e),this.content=[],this.customId="",this.autoAnswer={isEnabled:!1,answeringConditions:[]},this.options=new se,this.id=ve("q-"),this.questionContent={content:"",type:de.String}}return Object(l.a)(e,[{key:"updateFromQuestion",value:function(e){return this.isRequired=e.isRequired,this.appearingCondition=e.appearingCondition,this.questionContent=e.questionContent,this.autoAnswer=e.autoAnswer,this.options=e.options,this.answerType=e.answerType,this}},{key:"setIsRequired",value:function(e){return this.isRequired=e,this}},{key:"setAppearingCondition",value:function(e){return this.appearingCondition=e,this}},{key:"setAutoAnswer",value:function(e){return this.autoAnswer=e,this}},{key:"setQuestionContent",value:function(e){return this.questionContent=e,this}},{key:"setCreationDate",value:function(e){return this.creationDate=e||(new Date).getTime(),this}},{key:"setAutoAnswerEnabled",value:function(e){return this.autoAnswer.isEnabled=e||!0,this}},{key:"addAutoAnswerCondition",value:function(e){return this.autoAnswer.answeringConditions.push(e),this}},{key:"setAnswerType",value:function(e){return this.answerType=e,this}},{key:"setOptions",value:function(e){return this.options=e,this}}],[{key:"toJSON",value:function(e){return{id:e.id,isRequired:e.isRequired,appearingCondition:ne.toJSON(e.appearingCondition),questionContent:{content:e.questionContent.content,type:e.questionContent.type},autoAnswer:be(e.autoAnswer),options:se.toJSON(e.options),answerType:e.answerType?oe(e.answerType):void 0,customId:e.customId}}},{key:"fromJSON",value:function(t){var n=new e;return n.id=t.id,n.isRequired=t.isRequired,n.appearingCondition=ne.fromJSON(t.appearingCondition),n.questionContent=t.questionContent,t.options&&(n.options=se.fromJSON(t.options)),t.answerType&&(n.answerType=ie(t.answerType)),t.autoAnswer&&(n.autoAnswer=function(e){return{isEnabled:e.isEnabled,answeringConditions:e.answeringConditions.map((function(e){return function(e){return{condition:ne.fromJSON(e.condition),ifFalse:e.ifFalse,ifTrue:e.ifTrue}}(e)}))}}(t.autoAnswer)),t.customId=n.customId||"",n}}]),e}();function be(e){if(e)return{isEnabled:e.isEnabled,answeringConditions:e.answeringConditions.map((function(e){return function(e){return{condition:ne.toJSON(e.condition),ifTrue:e.ifTrue,ifFalse:e.ifFalse}}(e)}))}}var ye,Ee=function(){function e(){Object(s.a)(this,e),this.customId="",this.id=ve("ss-"),this.duplicatingSettings={condition:void 0,isEnabled:!1,duplicateTimes:{value:"",type:"number"}},this.content=[],this.appearingCondition=new ne}return Object(l.a)(e,[{key:"setID",value:function(e){return this.id=e,this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setContent",value:function(e){return this.content=e,this}},{key:"addContent",value:function(e){return this.content.push(e),this}},{key:"deleteContent",value:function(e){var t=this.content.findIndex((function(t){return t.id===e}));t>-1&&this.content.splice(t,1)}},{key:"setDuplicatingSettings",value:function(e){return this.duplicatingSettings=e,this}}],[{key:"toJSON",value:function(t){return{name:t.name,id:t.id,appearingCondition:ne.toJSON(t.appearingCondition),customId:t.customId,content:t.content.map((function(t){return t instanceof e?e.toJSON(t):t instanceof ge?ge.toJSON(t):void 0})),duplicatingSettings:me(t.duplicatingSettings)}}}]),e}(),Ce=n(67),Oe=n.n(Ce),Se=function(){function e(){Object(s.a)(this,e),this.questions={},this.sections={},this.content=[],this.name="",this.id=ve("root-")}return Object(l.a)(e,[{key:"setName",value:function(e){return this.name=e,this}},{key:"descendants",value:function(e){!function t(n,a){for(var o=0;o<n.content.length;o++){var r=n.content[o];if(r){var i=e(r,a.concat(o),n);r instanceof Ee&&(Object(ee.isNil)(i)||!0===i)&&t(r,a.concat(o))}}}(this,[0])}},{key:"addQuestion",value:function(t,n){n||(n=[new ge]);for(var a=e.getFromPath(t,[this]),o=0;o<n.length;o++){var r=n[o];if(this.questions[r.id])throw new Error("Question id conflict");this.questions[r.id]=r,!a||a instanceof ge||a.content.push(r)}return this}},{key:"addSection",value:function(t,n){n||(n=[new Ee]);for(var a=e.getFromPath(t,[this]),o=0;o<n.length;o++){var r=n[o];if(this.questions[r.id])throw new Error("Section id conflict");this.sections[r.id]=r,!a||a instanceof ge||a.content.push(r)}return this}},{key:"removeQuestion",value:function(t,n){var a=e.getFromPath(n.slice(0,n.length-1),[this]);if(a&&!(a instanceof ge)){var o=a.content.findIndex((function(e){return e.id===t}));o>-1&&(a.content.splice(o,1),delete this.questions[t])}return this}},{key:"removeSection",value:function(t,n){var a=e.getFromPath(n.slice(0,n.length-1),[this]);if(a&&!(a instanceof ge)){var o=a.content.findIndex((function(e){return e.id===t}));o>-1&&(a.content.splice(o,1),delete this.sections[t])}return this}},{key:"moveItem",value:function(t,n){var a=e.getFromPath(t,[this]),o=n.slice(0,n.length-1),r=t.slice(0,t.length-1),i=e.getFromPath(o,[this]),s=e.getFromPath(r,[this]);if(s&&i&&a){var l=s.content.findIndex((function(e){return e.id===a.id}));if(l>-1&&!(s instanceof ge)){var c=s.content.splice(l,1);if(!(i instanceof ge)){var u=n[n.length-1];c[0]instanceof Ee?i.content.splice(u,0,this.sections[c[0].id]):c[0]instanceof ge&&i.content.splice(u,0,this.questions[c[0].id])}return this}}}},{key:"Iterator2",value:Oe.a.mark((function t(n,a,o){var r,i,s,l,c,u,d,p,h,m,f,v,g,b;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.length){t.next=2;break}return t.abrupt("return",!0);case 2:if(!(r=e.getFromPath(n,[this]))||r instanceof ge){t.next=75;break}case 4:if(!(a<r.content.length)){t.next=46;break}if(!((i=r.content[a])instanceof ge)){t.next=13;break}if(o!==ye.QUESTION&&o){t.next=10;break}return t.next=10,{path:n.concat(a),data:i};case 10:a++,t.next=44;break;case 13:if(!(i instanceof Ee)){t.next=44;break}if(o!==ye.SECTION&&o){t.next=17;break}return t.next=17,{path:n.concat(a),data:i};case 17:a++,s=!0,l=!1,c=void 0,t.prev=21,u=this.Iterator2(n.concat(a),0,o)[Symbol.iterator]();case 23:if(s=(d=u.next()).done){t.next=30;break}return p=d.value,t.next=27,p;case 27:s=!0,t.next=23;break;case 30:t.next=36;break;case 32:t.prev=32,t.t0=t.catch(21),l=!0,c=t.t0;case 36:t.prev=36,t.prev=37,s||null==u.return||u.return();case 39:if(t.prev=39,!l){t.next=42;break}throw c;case 42:return t.finish(39);case 43:return t.finish(36);case 44:t.next=4;break;case 46:if(!(n&&n.length>0)){t.next=74;break}a=n[n.length-1]+1,h=!0,m=!1,f=void 0,t.prev=51,v=this.Iterator2(n,a,o)[Symbol.iterator]();case 53:if(h=(g=v.next()).done){t.next=60;break}return b=g.value,t.next=57,b;case 57:h=!0,t.next=53;break;case 60:t.next=66;break;case 62:t.prev=62,t.t1=t.catch(51),m=!0,f=t.t1;case 66:t.prev=66,t.prev=67,h||null==v.return||v.return();case 69:if(t.prev=69,!m){t.next=72;break}throw f;case 72:return t.finish(69);case 73:return t.finish(66);case 74:return t.abrupt("return",!0);case 75:case"end":return t.stop()}}),t,this,[[21,32,36,44],[37,,39,43],[51,62,66,74],[67,,69,73]])}))}],[{key:"getFromPath",value:function(t,n){var a=n[t[0]];return 1===t.length?a:a.content?e.getFromPath(t.slice(1),a.content):void 0}},{key:"Entries",value:function(t,n,a,o){var r=[],i=[],s=n.slice(0);r.push({path:n,startIndex:a});for(var l=0;l<n.length-1;l++)r.push({path:s.slice(0,s.length-1),startIndex:s[s.length-1]+1}),s.pop();for(;r.length>0;){var c=r.shift();if(c){var u=e.getFromPath(c.path,[t]);if(u)for(var d=c.startIndex;d<u.content.length;d++){var p=u.content[d];p instanceof ge?o&&o!==ye.QUESTION||i.push({path:c.path.concat(d),data:p}):(o&&o!==ye.SECTION||i.push({path:c.path.concat(d),data:p}),r.push({path:c.path.concat(d),startIndex:0}))}}}return i}},{key:"toJSON",value:function(e){return{id:e.id,name:e.name,content:e.content.map((function(e){return e instanceof Ee?Ee.toJSON(e):e instanceof ge?ge.toJSON(e):void 0}))}}},{key:"fromJSON",value:function(t){var n=new e;n.id=t.id,n.name=t.name;var a=[0],o=function e(t,a,o){if(t.hasOwnProperty("content")){var r=new Ee;r.id=t.id,r.name=t.name,r.customId=t.customId||"",t.customId&&(r.customId=t.customId),t.appearingCondition&&(r.appearingCondition=ne.fromJSON(t.appearingCondition)),r.duplicatingSettings=function(e){return{isEnabled:e.isEnabled,duplicateTimes:{value:e.duplicateTimes.value,type:e.duplicateTimes.type},condition:ne.fromJSON(e.condition)}}(t.duplicatingSettings),n.addSection(a,[r]),t.content.forEach((function(t,n){return e(t,a.concat(o),n)}))}else{var i=ge.fromJSON(t);n.addQuestion(a,[i])}};return t.content&&t.content.forEach((function(e,t){return o(e,a,t)})),n}}]),e}();!function(e){e[e.QUESTION=1]="QUESTION",e[e.SECTION=2]="SECTION"}(ye||(ye={}));var ke=n(839),we=n(851),je=n(847),Ne=n(855),Te=n(445),Ie=n.n(Te),Fe=n(58),Ae=n(61),xe=n(844),De=n(260),Pe=n(852),qe=n(830),Re=n(80),Ge=n(848),Me=n(429),Ve=n(53),Le=n.n(Ve);function Ue(){var e=Object(Fe.a)(["\nquery{\n    getFilledForms{\n      id\n      filledBy\n      formId\n    }\n  }"]);return Ue=function(){return e},e}var Qe=Le()(Ue());var _e=n(106),Je=n(85),Be=n(434),$e=n(180),He=n(825),Ke=n(831),ze=n(131),Ye=n(837),Ze=n(832),We=n(30),Xe=n.n(We),et=n(70),tt=n(430),nt=n(836),at=n(835),ot=n(834),rt=n(432),it=n.n(rt);function st(e){var t=document.getElementById("dp-modal");t||((t=document.createElement("div")).setAttribute("id","dp-modal"),document.body.appendChild(t)),i.a.render(e,t)}function lt(){var e=document.getElementById("dp-modal");e&&i.a.unmountComponentAtNode(e)}var ct=n(833),ut=n(4);function dt(e){e||(e="");var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e+(t()+t()+"-")+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var pt,ht=n(212),mt=n(853),ft=n(213),vt=n(854),gt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"parseRangeValue",value:function(e){var t=e.split("-");return{min:t[0],max:t[1]}}},{key:"handleInputChange",value:function(e){var t=e.min+"-"+e.max;switch(this.props.type&&this.props.type.name){case pe.TIME:case pe.DATE:case pe.NUMBER:default:this.props.onChange&&this.props.onChange(t)}}},{key:"render",value:function(){var e=this,t=null,n=this.props.type?this.props.type.name:void 0,a=this.parseRangeValue(this.props.value);switch(n){case pe.TIME:t=o.a.createElement(Ct,{range:a,onChange:this.handleInputChange});break;case pe.DATE:var r=a.min?new Date(a.min):void 0,i=a.max?new Date(a.max):void 0;t=o.a.createElement(mt.a,{shortcuts:!1,defaultValue:[r,i],onChange:function(t){return e.handleInputChange({min:t[0]?t[0].toString():"",max:t[1]?t[1].toString():""})}});break;case pe.NUMBER:t=o.a.createElement(yt,{range:a,onChange:function(t){return e.handleInputChange}})}return t}}]),t}(o.a.Component),bt={range:{min:"",max:""},onChange:function(){}},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=Object(a.useState)(e?e.range.min:""),n=Object(y.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(e?e.range.max:""),l=Object(y.a)(s,2),c=l[0],u=l[1];return o.a.createElement(Be.a,null,o.a.createElement("input",{className:"form-control",defaultValue:e&&e.range.min&&e.range.min.toString(),onChange:function(t){i(t.target.value),e&&e.onChange&&e.onChange({min:r,max:c})},placeholder:"Minimum",id:"numberRange-min",type:"number"}),o.a.createElement(He.a,null),o.a.createElement("input",{className:"form-control",defaultValue:e&&e.range.max&&e.range.max.toString(),onChange:function(t){u(t.target.value),e&&e.onChange&&e.onChange({min:r,max:c})},placeholder:"Maximum",id:"numberRange-max",type:"number"}))},Et={range:{min:"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time",max:"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time"},onChange:function(){}},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=Object(a.useState)(e?e.range.min:void 0),n=Object(y.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)(e?e.range.max:void 0),l=Object(y.a)(s,2),c=l[0],u=l[1];return console.log(c),console.log(r),o.a.createElement(Be.a,{className:"bp3-dark"},o.a.createElement(ft.a,{precision:ft.b.MINUTE,useAmPm:!0,defaultValue:r?new Date(r):void 0,onChange:function(t){i(t.toLocaleDateString()),e.onChange&&e.onChange({min:r,max:c})}}),o.a.createElement(He.a,null),o.a.createElement(ft.a,{precision:ft.b.MINUTE,useAmPm:!0,defaultValue:c?new Date(c):void 0,onChange:function(t){u(t.toLocaleDateString()),e.onChange({min:r,max:c})}}))},Ot=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,null,[{key:"defaultProps",get:function(){return{defaultValue:"",onChange:function(e){console.log(e)},type:{name:pe.STRING}}}}]),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=null;switch(this.props.type.name){case pe.NUMBER:t=o.a.createElement(Ke.a,{defaultValue:this.props.defaultValue,className:"form-control",type:"number",onChange:function(t){e.props.onChange&&e.props.onChange({value:t.target.value})}});break;case pe.SELECT:t=o.a.createElement(St,{type:this.props.type.ofType,defaultValue:this.props.defaultValue,options:this.props.options,onChange:function(t){e.props.onChange&&e.props.onChange(t)}});break;case pe.BOOLEAN:var n=[{value:"true",label:"YES"},{value:"false",label:"No"}],a=n.find((function(t){return t.value===e.props.defaultValue}));t=o.a.createElement(et.a,{styles:Ft,defaultValue:a,options:n,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.value})}});break;case pe.DATE:var r=this.props.defaultValue?new Date(this.props.defaultValue):void 0;t=o.a.createElement(vt.a,{formatDate:function(e){return e.toLocaleDateString()},parseDate:function(e){return new Date(e)},closeOnSelection:!0,defaultValue:r,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.toLocaleDateString()})}});break;case pe.RANGE:this.props.type.ofType&&(t=o.a.createElement(gt,{value:this.props.defaultValue,type:this.props.type.ofType,onChange:function(t){e.props.onChange&&e.props.onChange({value:t})}}));break;case pe.STRING:t=o.a.createElement(Ke.a,{className:"form-control",type:"text",defaultValue:this.props.defaultValue,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.target.value})}});break;case pe.TIME:var i=this.props.defaultValue?new Date(this.props.defaultValue):void 0;t=o.a.createElement(ft.a,{precision:ft.b.MINUTE,useAmPm:!0,defaultValue:i,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.toString()})}})}return t}}]),t}(o.a.Component),St=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=[];if(this.props.options){var t,n=this.props.options.SortedOptions,a=n.rootOptions,r=n.groups,i=[];r&&r.length>0&&(i=r.map((function(e){return{label:e.name,options:e.members.map((function(e){return{label:e.value,value:e.id}}))}}))),t=a.map((function(e){return{label:e.value,value:e.id}})),e=[].concat(Object(ht.a)(i),Object(ht.a)(t))}var s=function(e,t){for(var n=null,a=0;a<e.length;a++){var o=e[a];if(o.options&&o.options.length>0){if(n=o.options.find((function(e){return e.value===t})))break}else if(n=o&&o.value===t?o:void 0)break}return n}(e,this.props.defaultValue);return o.a.createElement(et.a,{styles:Ft,options:e,onChange:this.handleChange.bind(this),defaultValue:s})}}]),t}(o.a.Component);!function(e){e[e.QuestionRef=1]="QuestionRef",e[e.ComparisonOperator=2]="ComparisonOperator",e[e.ComparisonValue=3]="ComparisonValue",e[e.FollowingOperator=4]="FollowingOperator"}(pt||(pt={}));var kt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={literals:n.props.condition?n.props.condition.literals:[]},n.columns=[{dataField:"id",text:"Literal ID"},{dataField:"questionRef",text:"Question Reference"},{dataField:"comparisonOperator",text:"Comparison Operator"},{dataField:"comparisonValue",text:"Comparison Value"},{dataField:"followingOperator",text:"Following Operator"}],n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setLiteralsSetter&&this.props.setLiteralsSetter(this.setLiterals.bind(this))}},{key:"setLiterals",value:function(e){this.setState({literals:e})}},{key:"addLiteral",value:function(e){var t=this;e||(e={literalId:dt("lit-"),questionRef:void 0,comparisonOperator:void 0,comparisonValue:void 0,followingOperator:void 0}),this.setState((function(t){var n=Xe.a.clone(t.literals);return e&&n.push(e),{literals:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.literals)}))}},{key:"moveLiteralUp",value:function(e){this.setState((function(t){var n=Xe.a.clone(t.literals),a=function(e,t){var n;return((e-1)%(n=t)+n)%n}(e,n.length),o=[n[a],n[e]];return n[e]=o[0],n[a]=o[1],{literals:n}}),this.forceUpdate.bind(this))}},{key:"handleDataChange",value:function(e,t,n){var a=this;this.setState((function(a){var o=Xe.a.clone(a.literals),r=o[e];switch(t){case pt.QuestionRef:r.questionRef=n&&n.value?n.value:void 0;break;case pt.ComparisonOperator:var i,s;for(i in ce)if(ce[i]===n.value){s=i,r.comparisonOperator=ce[s];break}break;case pt.ComparisonValue:var l={content:n.value,type:de.String};r.comparisonValue=l;break;case pt.FollowingOperator:r.followingOperator=n.value===$.AND?$.AND:$.OR}return{literals:o}}),(function(){a.props.onChange&&a.props.onChange(a.state.literals)}))}},{key:"getQuestion",value:function(e){return e&&this.props.definedQuestions&&!Xe.a.isEmpty(this.props.definedQuestions)?this.props.definedQuestions[e]:null}},{key:"removeLiteral",value:function(e){var t=this;this.setState((function(t){var n=Xe.a.clone(t.literals);return n.splice(e,1),{literals:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.literals)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ze.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{key:"th-first"},""),this.columns.map((function(e,t){return o.a.createElement("th",{key:t},e.text)})),o.a.createElement("th",{key:"th-last"},""))),o.a.createElement("tbody",null,this.state.literals.map((function(t,n){var a=e.props.definedQuestions?Object.values(e.props.definedQuestions).map((function(e){return{value:e.id,label:e.questionContent.content}})):[],r=o.a.createElement(et.a,{key:"literalq-".concat(n,"-").concat(t.literalId),styles:Ft,options:a,value:a.find((function(e){return e.value===t.questionRef})),onChange:function(t){return e.handleDataChange(n,pt.QuestionRef,t)}}),i=function(e){var t=Object.values(ce);switch(e&&e.name){case pe.BOOLEAN:case pe.DATE:case pe.STRING:case pe.TIME:return t.filter((function(e){return e===ce.Equal}));case pe.NUMBER:default:return t}}(t.questionRef&&e.props.definedQuestions&&e.props.definedQuestions[t.questionRef]?e.props.definedQuestions[t.questionRef].answerType:void 0).map((function(e,t){return{value:e,label:e}})),s=o.a.createElement(et.a,{key:"literalo-".concat(n,"-").concat(t.literalId),styles:Ft,options:i,value:i.find((function(e,n){return e.value===t.comparisonOperator})),onChange:e.handleDataChange.bind(e,n,pt.ComparisonOperator)}),l=e.getQuestion(t.questionRef),c=l?l.answerType:void 0,u=l&&l.options?l.options:void 0,d=o.a.createElement(Ot,{options:u,key:"literalv-".concat(n,"-").concat(t.literalId),onChange:e.handleDataChange.bind(e,n,pt.ComparisonValue),defaultValue:t.comparisonValue&&t.comparisonValue.content,type:c}),p=Object.keys($).map((function(e){return{label:e,value:"AND"===e?$.AND:"OR"===e?$.OR:""}})),h=o.a.createElement(et.a,{key:"literalfo-".concat(n,"-").concat(t.literalId),styles:Ft,options:p,value:p.find((function(e){return e.value===t.followingOperator})),onChange:e.handleDataChange.bind(e,n,pt.FollowingOperator)});return o.a.createElement("tr",{key:"tr_"+n},o.a.createElement("td",null,o.a.createElement(ze.b,{icon:"arrow-up",onClick:function(){return e.moveLiteralUp(n)}})),o.a.createElement("td",null,"l",o.a.createElement("sub",null,n)),o.a.createElement("td",{className:"questionRef"},r),o.a.createElement("td",{className:"comparisonOperator"},s),o.a.createElement("td",{className:"comparisonValue"},d),o.a.createElement("td",{className:"followingOperator"},h),o.a.createElement("td",null,o.a.createElement(ze.b,{icon:"cross",onClick:function(){e.removeLiteral(n)}})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(ze.b,{onClick:function(){return e.addLiteral()},icon:"plus"})),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)))))}}],[{key:"defaultProps",get:function(){return{onChange:function(){}}}}]),t}(o.a.Component),wt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({errors:[],literals:e})},n.primaryButtonHandler=function(){var e=(new ne).setLiterals(n.state.literals);ne.checkIfValid(e)?n.props.onSubmit&&n.props.onSubmit(n.state.literals):n.setState({errors:[{message:"Condition is not valid!"}]})},n.secondaryButtonHandler=function(){n.props.onCancel&&n.props.onCancel(n.state.literals)},n.state={isOpen:n.props.isOpen,literals:n.props.condition&&n.props.condition.literals?n.props.condition.literals:[],errors:[]},n.createCondition_=o.a.createRef(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(ct.a,{isCloseButtonShown:!1,title:"Add/Edit Condition",style:{width:900},isOpen:this.props.isOpen},o.a.createElement("div",{style:{maxHeight:500,overflow:"auto",minHeight:500},className:ut.a.DIALOG_BODY},this.props.isOpen&&o.a.createElement(kt,{definedQuestions:this.props.definedQuestions,condition:this.props.condition?this.props.condition:void 0,ref:this.createCondition_,onChange:function(t){return e.handleChange(t)}}),o.a.createElement("div",{className:"btn-danger"},this.state.errors.map((function(e){return e.message})))),o.a.createElement("div",{className:ut.a.DIALOG_FOOTER},o.a.createElement("div",{className:ut.a.DIALOG_FOOTER_ACTIONS},o.a.createElement(ze.b,{color:"primary",onClick:this.primaryButtonHandler},"Submit"),o.a.createElement(ze.b,{color:"secondary",onClick:this.secondaryButtonHandler},"Cancel"))))}}]),t}(o.a.Component);wt.defaultProps={isOpen:!1,condition:new ne};var jt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={aConditions:n.props.autoAnswer.answeringConditions||[],isEnabled:n.props.autoAnswer.isEnabled},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"editIfTrueFalseValue",value:function(e,t,n){var a=this;this.setState((function(o){var r=void 0,i=Xe.a.clone(o.aConditions),s=i[t];return a.props.options&&a.props.answerType.name===pe.SELECT?(r=a.props.options.optionsMap[n],"true"===e?s.ifTrue=r.id:"false"===e&&(s.ifFalse=r.id)):("true"===e&&(s.ifTrue=n),"false"===e&&(s.ifFalse=n)),{aConditions:i}}),(function(){a.props.onChange&&a.props.onChange({isEnabled:a.state.isEnabled,answeringConditions:a.state.aConditions})}))}},{key:"openConditionModal",value:function(e){var t=this.state.aConditions[e];st(o.a.createElement(wt,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.editCondition.bind(this,e),onCancel:lt.bind(this),condition:t.condition}))}},{key:"changeEnabled",value:function(){var e=this;this.setState((function(e){return{isEnabled:!e.isEnabled}}),(function(){e.props.onChange&&e.props.onChange({isEnabled:e.state.isEnabled,answeringConditions:e.state.aConditions})}))}},{key:"addAutoFillCondition",value:function(){var e=this;this.setState((function(e){var t=Xe.a.clone(e.aConditions),n={condition:new ne,ifTrue:void 0,ifFalse:void 0};return t.push(n),{aConditions:t}}),(function(){e.props.onChange&&e.props.onChange({isEnabled:e.state.isEnabled,answeringConditions:e.state.aConditions})}))}},{key:"editCondition",value:function(e,t){var n=this,a=Xe.a.clone(this.state.aConditions);a[e].condition||(a[e].condition=new ne),a[e].condition.setLiterals(t),this.setState({aConditions:a},(function(){lt(),n.props.onChange&&n.props.onChange({isEnabled:n.state.isEnabled,answeringConditions:n.state.aConditions})}))}},{key:"removeAutofillCondition",value:function(e){var t=this;this.setState((function(t){var n=Xe.a.clone(t.aConditions);return n.splice(e,1),{aConditions:n}}),(function(){t.props.onChange&&t.props.onChange({isEnabled:t.state.isEnabled,answeringConditions:t.state.aConditions})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(ot.a,{checked:this.state.isEnabled,onChange:this.changeEnabled.bind(this),label:"Enabled"}),o.a.createElement(Ze.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Condition"),o.a.createElement("th",null," if True"),o.a.createElement("th",null," if False"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.state.aConditions.map((function(t,n){var a=function(a){return o.a.createElement(Ot,{key:a,onChange:function(t){return e.editIfTrueFalseValue(a,n,t.value)},options:e.props.options,defaultValue:"true"===a?t.ifTrue:t.ifFalse&&t.ifFalse,type:e.props.answerType})};return o.a.createElement("tr",{key:"af".concat(n)},o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement(ze.b,{icon:"key",onClick:function(){return e.openConditionModal(n)}})),o.a.createElement("td",null,a("true")),o.a.createElement("td",null,a("false")),o.a.createElement("td",null,o.a.createElement(ze.b,{icon:"cross",onClick:function(){e.removeAutofillCondition(n)}})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(ze.b,{icon:"plus",onClick:function(){return e.addAutoFillCondition()},type:"button"})),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)))))}}]),t}(o.a.Component);function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nt(n,!0).forEach((function(t){Object(V.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It=document.getElementById("root")||document.body;it.a.setAppElement(It);var Ft={container:function(e,t){return Tt({},e,{border:(t.isFocused,null),background:"transparent",transition:"border-color 0.2s ease, box-shadow 0.2s ease, padding 0.2s ease","&:hover":{boxShadow:"0 2px 4px 0 rgba(41, 56, 78, 0.1)"}})},control:function(e,t){return Tt({},e,{background:"transparent",borderColor:t.isFocused?At:e.borderColor,"&:hover":{borderColor:t.isFocused?At:e.borderColor}})},valueContainer:function(e,t){return Tt({},e,{background:"transparent",color:"white"})},menu:function(e,t){return Tt({},e,{background:"black",borderColor:"#e14eca",position:"absolute",zIndex:"999999999999999999 !important"})},menuList:function(e,t){return console.log(t),Tt({},e,{background:"#525f7f",color:"white"})},singleValue:function(e,t){return Tt({},e,{color:"white"})},input:function(e,t){return Tt({},e,{color:"white"})},option:function(e,t){return Tt({},e,{background:t.isSelected?"lightblue":t.isFocused?"hotpink":"#525f7f"})}},At="#46beed",xt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={question:n.props.question},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(){this.props.onChange&&this.props.onChange(this.state.question)}},{key:"handleRequiredChange",value:function(e){this.setState((function(e){var t=We.clone(e.question);return t.setIsRequired(!t.isRequired),{question:t}}),this.handleChange.bind(this))}},{key:"openAppearingConditionModal",value:function(){st(o.a.createElement(wt,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.editAppearingCondition.bind(this),onCancel:lt.bind(this),condition:this.state.question.appearingCondition}))}},{key:"editAppearingCondition",value:function(e){var t=this;this.setState((function(t){var n=We.clone(t.question);return n.appearingCondition||n.setAppearingCondition(new ne),n.appearingCondition.setLiterals(e),console.log(ne.toJSON(n.appearingCondition)),{question:n}}),(function(){lt(),t.handleChange()}))}},{key:"handleQuestionChange",value:function(e){this.setState((function(t){var n=We.clone(t.question);return n.setQuestionContent({type:de.String,content:e}),{question:n}}),this.handleChange.bind(this))}},{key:"handleAnswerTypeChange",value:function(e){this.setState((function(t){var n=We.clone(t.question);return n.setAnswerType(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleOptionsChange",value:function(e){this.setState((function(t){var n=We.clone(t.question);return n.setOptions(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleAutoFillChange",value:function(e){this.setState((function(t){var n=We.clone(t.question);return n.setAutoAnswer(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleCustomIdChange",value:function(e){this.setState((function(t){var n=We.clone(t.question);return n.customId=e,{question:n}}),this.handleChange.bind(this))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(at.a,null,o.a.createElement("h5",{className:"title"},"Add Question"),o.a.createElement(nt.a,null,o.a.createElement($e.d,{htmlFor:"customid"},"Custom ID"),o.a.createElement(Ke.a,{defaultValue:this.state.question.customId,className:"form-control",onChange:function(t){return e.handleCustomIdChange(t.target.value)},id:"custom_id",name:"custom_id",placeholder:"Custom id"})),o.a.createElement(nt.a,null,o.a.createElement($e.d,{htmlFor:"question"},"Question"),o.a.createElement(Ye.a,{fill:!0,defaultValue:this.state.question.questionContent.content,className:"form-control",onChange:function(t){return e.handleQuestionChange(t.target.value)},id:"question",name:"question",placeholder:""})),o.a.createElement(nt.a,null,o.a.createElement(ot.a,{defaultChecked:this.state.question.isRequired,label:"Required",onChange:this.handleRequiredChange.bind(this)})),o.a.createElement(nt.a,null,o.a.createElement(Mt,{answerType:this.state.question.answerType,onChange:this.handleAnswerTypeChange.bind(this)})),this.state.question.answerType&&this.state.question.answerType.name===pe.SELECT&&this.state.question.answerType.ofType&&o.a.createElement(nt.a,null,o.a.createElement("label",null,"Add Options"),o.a.createElement(at.a,null,o.a.createElement(Vt,{constants:this.props.constants,definedQuestions:this.props.definedQuestions,onChange:this.handleOptionsChange.bind(this),defaultOptionType:this.state.question.answerType,options:this.state.question.options}))),o.a.createElement(nt.a,null,o.a.createElement($e.d,{htmlFor:"type"},"Appearing Condition"),o.a.createElement(ze.b,{type:"button",large:!0,icon:"key",fill:!1,onClick:this.openAppearingConditionModal.bind(this)})),o.a.createElement(nt.a,null,o.a.createElement(nt.a,{label:"Add AutoFill condition"},o.a.createElement(jt,{autoAnswer:this.state.question.autoAnswer,definedQuestions:this.props.definedQuestions,onChange:this.handleAutoFillChange.bind(this),answerType:this.state.question.answerType,options:this.state.question.options})))))}}]),t}(o.a.Component);xt.defaultProps={question:new ge};var Dt,Pt=[{value:pe.BOOLEAN,label:"YES/NO"},{value:pe.STRING,label:"Text"},{value:pe.TIME,label:"Time"},{value:pe.DATE,label:"Date"},{value:pe.NUMBER,label:"Number"},{value:pe.RANGE,label:"Range"},{value:pe.SELECT,label:"Multiple Choice"},{value:pe.GEOLOCATION,label:"Geo location"}],qt=Pt.filter((function(e){return e.value&&e.value!==pe.SELECT})),Rt=[pe.TIME,pe.NUMBER,pe.DATE,pe.TIME],Gt=Pt.filter((function(e){return Rt.includes(e.value)})),Mt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={answerType:n.props.answerType},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleAnswerTypeChange",value:function(e){var t=this;this.setState((function(t){var n=Xe.a.clone(t.answerType);return n.name=e.value,n.ofType=void 0,{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"handleSecondSelectChange",value:function(e){var t=this;this.setState((function(t){var n=Xe.a.clone(t.answerType);return n.ofType={name:e.value,ofType:void 0},n.ofType.ofType&&(n.ofType.ofType=void 0),{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"handleThirdSelectChange",value:function(e){var t=this;this.setState((function(t){var n=Xe.a.clone(t.answerType);return n.ofType&&(n.ofType.ofType=e.value),{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"render",value:function(){var e=this,t=this.state.answerType.name===pe.SELECT||this.state.answerType.name===pe.RANGE,n=this.state.answerType.ofType&&this.state.answerType.ofType.name===pe.RANGE,a=this.state.answerType.name===pe.SELECT?qt:this.state.answerType.name===pe.RANGE?Gt:[],r=this.state.answerType.ofType&&this.state.answerType.ofType.name===pe.RANGE?Gt:[];return o.a.createElement(o.a.Fragment,null,o.a.createElement(nt.a,{label:"Value Type"},o.a.createElement(et.a,{onChange:this.handleAnswerTypeChange.bind(this),styles:Ft,options:Pt,value:Pt.find((function(t){return t.value===e.state.answerType.name}))})),t&&o.a.createElement(nt.a,{label:"of Type"},o.a.createElement(et.a,{onChange:this.handleSecondSelectChange.bind(this),styles:Ft,options:a,value:a.find((function(t){return e.state.answerType.ofType&&t.value===e.state.answerType.ofType.name}))})),n&&o.a.createElement(nt.a,{label:"of Type"},o.a.createElement(et.a,{onChange:this.handleThirdSelectChange.bind(this),styles:Ft,options:r,value:r.find((function(t){return e.state.answerType.ofType&&e.state.answerType.ofType.ofType&&t.value===e.state.answerType.ofType.ofType.name}))})))}}]),t}(o.a.Component);Mt.defaultProps={answerType:{name:void 0,ofType:void 0}},function(e){e[e.OPTION=1]="OPTION",e[e.GROUP=2]="GROUP"}(Dt||(Dt={}));var Vt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).constantNameInputRef=null,n.makeFromTextInputRef=null,n.state={options:n.props.options||new se},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"makeConstant",value:function(){var e="const";this.constantNameInputRef&&(e=this.constantNameInputRef.value),this.props.constants.addConstant({id:ve("const-"),name:e,type:{name:pe.SELECT,ofType:{name:pe.STRING}},value:se.fromJSON(se.toJSON(this.state.options))})}},{key:"makeOptionsFromText",value:function(){var e=this;if(this.makeFromTextInputRef){var t=this.makeFromTextInputRef.value.split("\n");this.setState((function(n){var a=Xe.a.clone(n.options);return t.forEach((function(t){a.addOption({id:"opt-"+Object.keys(a.optionsMap).length,appearingCondition:void 0,groupName:void 0,type:e.props.defaultOptionType.ofType,value:t})})),{options:a}}))}}},{key:"handleChange",value:function(){this.props.onChange&&this.props.onChange(this.state.options)}},{key:"handleAddNewOption",value:function(){var e=this;this.setState((function(t){var n=Xe.a.clone(t.options),a={id:"opt-"+Object.keys(t.options.optionsMap).length,appearingCondition:void 0,groupName:void 0,type:e.props.defaultOptionType.ofType,value:void 0};return n.addOption(a),{options:n}}),this.handleChange.bind(this))}},{key:"handleGroupNameChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.options);return a.changeGroupName(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupDelete",value:function(e){this.setState((function(t){var n=Xe.a.clone(t.options);return n.deleteGroup(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionTypeChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.options);return a.setOptionTypeFor(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupAssignment",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.options);return a.assignOptionToGroup(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupUnassignment",value:function(e){this.setState((function(t){var n=Xe.a.clone(t.options);return n.unassignGroup(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionDelete",value:function(e){this.setState((function(t){var n=Xe.a.clone(t.options);return n.deleteOption(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionValueChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.options);return a.setValueForOption(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleAddGroup",value:function(){this.setState((function(e){var t=Xe.a.clone(e.options);return t.addGroup(),{options:t}}),this.handleChange.bind(this))}},{key:"handleConditionClick",value:function(e,t){var n;n=e===Dt.GROUP?this.state.options.optionGroupMap[t].appearingCondition:this.state.options.optionsMap[t].appearingCondition,st(o.a.createElement(wt,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.setCondition.bind(this,t,e),onCancel:lt.bind(this),condition:n}))}},{key:"setCondition",value:function(e,t,n){var a=this;this.setState((function(a){var o=Xe.a.clone(a.options);if(t===Dt.GROUP){var r=o.optionGroupMap[e];r.appearingCondition||(r.appearingCondition=new ne),r.appearingCondition.setLiterals(n)}else if(t===Dt.OPTION){var i=o.optionsMap[e];i.appearingCondition||(i.appearingCondition=new ne),i.appearingCondition.setLiterals(n)}return{options:o}}),(function(){lt(),a.handleChange()}))}},{key:"handleImportFromConstant",value:function(e){var t=this.props.constants.getConstant(e.value);console.log(e),console.log(t),t&&t.value instanceof se&&this.setState({options:se.fromJSON(se.toJSON(t.value))},this.handleChange.bind(this))}},{key:"render",value:function(){var e=this,t=this.props.constants.ConstantsArray.map((function(e){return{label:e.name,value:e.id}}));return o.a.createElement(Be.a,{fill:!0,vertical:!0},o.a.createElement($e.b,null,"Import From Constant "),o.a.createElement(et.a,{styles:Ft,options:t,onChange:this.handleImportFromConstant.bind(this)}),o.a.createElement(He.a,null),o.a.createElement($e.b,null,"Export To Constant"),o.a.createElement(Ke.a,{placeholder:"Constant name",inputRef:function(t){return e.constantNameInputRef=t}}),o.a.createElement(ze.b,{onClick:this.makeConstant.bind(this)},"Export"),o.a.createElement(He.a,null),o.a.createElement($e.b,null,"Make From Text"),o.a.createElement(Ye.a,{inputRef:function(t){return e.makeFromTextInputRef=t}}),o.a.createElement(ze.b,{onClick:this.makeOptionsFromText.bind(this)},"Make From Text"),o.a.createElement(Lt,{defaultType:this.props.defaultOptionType,groups:this.state.options.optionGroupMap?Object.values(this.state.options.optionGroupMap):[],handleGroupAssignment:this.handleGroupAssignment.bind(this),handleOptionTypeChange:this.handleOptionTypeChange.bind(this),handleAddNewOption:this.handleAddNewOption.bind(this),handleOptionDelete:this.handleOptionDelete.bind(this),handleConditionClick:this.handleConditionClick.bind(this,Dt.OPTION),handleOptionValueChange:this.handleOptionValueChange.bind(this),options:this.state.options.optionsMap?Object.values(this.state.options.optionsMap):[]}),o.a.createElement(He.a,null),o.a.createElement(Ut,{handleAddGroup:this.handleAddGroup.bind(this),handleGroupUnassignment:this.handleGroupUnassignment.bind(this),handleGroupAssignment:this.handleGroupAssignment.bind(this),handleGroupNameChange:this.handleGroupNameChange.bind(this),handleGroupDelete:this.handleGroupDelete.bind(this),handleGroupConditionClick:this.handleConditionClick.bind(this,Dt.GROUP),options:this.state.options.optionsMap?Object.values(this.state.options.optionsMap):[],groups:this.state.options.optionGroupMap?Object.values(this.state.options.optionGroupMap):[]}))}}]),t}(o.a.Component),Lt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={options:n.props.options},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.options.length!==this.props.options.length||e.groups.length!==this.props.groups.length}},{key:"generateAddGroupInput",value:function(e){var t=this,n=this.props.groups.map((function(e){return{value:e.name,label:e.name}})),a=n.find((function(t){return t.value===e.groupName}));return o.a.createElement(tt.a,{value:a||null,styles:Ft,options:n,onChange:function(n){t.props.handleGroupAssignment&&t.props.handleGroupAssignment([e.id],n.value)}})}},{key:"handleAddNewOption",value:function(){this.props.handleAddNewOption&&this.props.handleAddNewOption()}},{key:"handleConditionEdit",value:function(e){this.props.handleConditionClick&&this.props.handleConditionClick(e)}},{key:"handleAddGroupInput",value:function(e){}},{key:"handleOptionDelete",value:function(e){this.props.handleOptionDelete&&this.props.handleOptionDelete(e)}},{key:"handleOptionTypeChange",value:function(e,t){this.props.handleOptionTypeChange&&this.props.handleOptionTypeChange(e,t)}},{key:"handleOptionValueChange",value:function(e,t){this.props.handleOptionValueChange&&this.props.handleOptionValueChange(e,t.value)}},{key:"render",value:function(){var e=this;return o.a.createElement(Ze.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Id"),o.a.createElement("th",null,"Type"),o.a.createElement("th",null,"Value"),o.a.createElement("th",null,"Condition"),o.a.createElement("th",null,"Group"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.props.options.map((function(t,n){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null),o.a.createElement("td",null,t.id),o.a.createElement("td",null,o.a.createElement(Mt,{answerType:t.type,onChange:function(n){return e.handleOptionTypeChange(t.id,n)}})),o.a.createElement("td",null,o.a.createElement(Ot,{onChange:e.handleOptionValueChange.bind(e,t.id),defaultValue:t.value,type:t.type})),o.a.createElement("td",null,o.a.createElement(ze.b,{onClick:e.handleConditionEdit.bind(e,t.id),style:{color:"red",width:20},icon:"key"})),o.a.createElement("td",null,e.generateAddGroupInput(t)),o.a.createElement("td",null,o.a.createElement(ze.b,{style:{width:20},onClick:e.handleOptionDelete.bind(e,t.id),icon:"cross"})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(ze.b,{style:{width:20},icon:"add",onClick:this.handleAddNewOption.bind(this)})),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null))))}}]),t}(o.a.Component);Lt.defaultProps={options:[],groups:[]};var Ut=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleGroupAssignment",value:function(e,t){if(e){var n=e.map((function(e){return e.value}));console.log(n),this.props.handleGroupAssignment&&this.props.handleGroupAssignment(n,t)}}},{key:"render",value:function(){var e=this;return o.a.createElement(Ze.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Group Name"),o.a.createElement("th",null,"Group Items"),o.a.createElement("th",null,"Appearing Condition"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.props.groups.map((function(t,n){var a=e.props.options.map((function(e){return{value:e.id,label:e.id}})),r=t.members.map((function(e){return e.id})),i=a.filter((function(e){return r.includes(e.value)}));return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement(Ke.a,{key:t.id,type:"text",className:"form-control",defaultValue:t.name,onChange:function(n){e.props.handleGroupNameChange&&e.props.handleGroupNameChange(t.name,n.target.value)}})),o.a.createElement("td",null,o.a.createElement(et.a,{styles:Ft,onChange:function(n,a){if("remove-value"===a.action){var o=a.removedValue.value;e.props.handleGroupUnassignment&&e.props.handleGroupUnassignment([o])}e.handleGroupAssignment(n,t.name)},value:i,isMulti:!0,options:a})),o.a.createElement("td",null,o.a.createElement(ze.b,{style:{width:20},icon:"key",onClick:function(){e.props.handleGroupConditionClick&&e.props.handleGroupConditionClick(t.name)}})),o.a.createElement("td",null,o.a.createElement(ze.b,{style:{width:20},icon:"cross",onClick:function(){e.props.handleGroupDelete&&e.props.handleGroupDelete(t.name)}})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(ze.b,{style:{width:20},icon:"add",onClick:function(){e.props.handleAddGroup&&e.props.handleAddGroup()}})),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null))))}}]),t}(o.a.Component),Qt=n(146),_t=n(858),Jt=n(857),Bt=n(435),$t=n.n(Bt),Ht="http://datapali.com/graphql",Kt=n(838),zt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(Kt.a,{isOpen:this.props.isOpen})}}]),t}(o.a.Component),Yt=n(856),Zt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleNodeClick=function(e,t,a){n.props.handleNodeClick&&n.props.handleNodeClick(e,t,a)},n.handleNodeCollapse=function(e,t,a){n.props.handleNodeCollapse&&n.props.handleNodeCollapse(e,t,a)},n.handleNodeExpand=function(e,t,a){n.props.handleNodeExpand&&n.props.handleNodeExpand(e,t,a)},n.state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getNodeFromQuestionOrSection",value:function(e,t,n,a){var o=this,r={id:e.id,icon:void 0,label:"",isSelected:n.includes(e.id),isExpanded:a.includes(e.id)};return e instanceof ge?(r.icon="document",r.label="".concat(t," ").concat(e.questionContent.content||"Question")):e instanceof Ee&&(r.icon="folder-close",r.label="".concat(t," ").concat(e.name||"Section"),r.childNodes=e.content.map((function(e,r){return o.getNodeFromQuestionOrSection(e,t+"."+(r+1),n,a)}))),r}},{key:"generateITNodeTree",value:function(e,t,n){var a=this;return[{id:e.id,hasCaret:!0,icon:"folder-close",label:"Root",isExpanded:n.includes(e.id),isSelected:t.includes(e.id),childNodes:e.content.map((function(e,o){return a.getNodeFromQuestionOrSection(e,(o+1).toString(),t,n)}))}]}},{key:"render",value:function(){return console.log(this.props.root_),o.a.createElement(Yt.a,{contents:this.generateITNodeTree(this.props.root_,this.props.selectedNodes,this.props.expandedNodes),onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeCollapse,onNodeExpand:this.handleNodeExpand,className:ut.a.ELEVATION_0})}}]),t}(o.a.Component),Wt=n(437),Xt=n.n(Wt),en=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isEnabled:n.props.isEnabled,condition:n.props.condition,duplicateTimes:n.props.duplicateTimes},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleQuestionRefChange",value:function(e){this.setState({duplicateTimes:{value:e.value,type:"questionRef"}})}},{key:"handleNumberTimesChange",value:function(e){this.setState({duplicateTimes:{value:e,type:"number"}})}},{key:"handleTypeChange",value:function(e){this.setState((function(t){return{duplicateTimes:{value:"",type:e.value}}}))}},{key:"handleEnabledChange",value:function(){this.setState((function(e){return{isEnabled:!e.isEnabled}}))}},{key:"generateValueComponent",value:function(e){var t=this;if("questionRef"===e){var n=Object.values(this.props.definedQuestions).map((function(e){return{value:e.id,label:e.questionContent.content}})),a="questionRef"===this.state.duplicateTimes.type?n.find((function(e){return e.value===t.state.duplicateTimes.value})):void 0;return o.a.createElement(et.a,{styles:Ft,options:n,defaultValue:a,onChange:this.handleQuestionRefChange.bind(this)})}return o.a.createElement("input",{defaultValue:"number"===this.state.duplicateTimes.type?this.state.duplicateTimes.value:"",type:"number",className:"form-control",onChange:function(e){return t.handleNumberTimesChange(e.target.value)}})}},{key:"handleSave",value:function(){Xe.a.values(this.state).every(Xe.a.isEmpty)||this.props.handleSave({isEnabled:this.state.isEnabled,condition:this.state.condition,duplicateTimes:this.state.duplicateTimes})}},{key:"render",value:function(){var e=this,t=[{value:"number",label:"Number"},{value:"questionRef",label:"AnswerValue"}],n=t.find((function(t){return t.value===e.state.duplicateTimes.type}));return o.a.createElement(Be.a,{className:Xt()(ut.a.ELEVATION_2,ut.a.DARK),vertical:!0,fill:!0},o.a.createElement(ot.a,{onChange:this.handleEnabledChange.bind(this),defaultChecked:this.props.isEnabled},"Enabled"),o.a.createElement(He.a,null),o.a.createElement(et.a,{menuContainerStyle:{zIndex:99999},styles:Ft,onChange:function(t){return e.handleTypeChange(t)},options:t,defaultValue:n}),this.generateValueComponent(this.state.duplicateTimes.type),o.a.createElement(He.a,null),o.a.createElement(Be.a,{fill:!0},o.a.createElement(ze.b,{onClick:this.handleSave.bind(this)},"Save"),o.a.createElement(ze.b,{onClick:this.props.handleCancel},"Cancel")))}}]),t}(o.a.Component),tn=n(436),nn=function(e){var t=Object(a.useState)(!1),n=Object(y.a)(t,2),r=n[0],i=n[1];return o.a.createElement(Be.a,{className:"bp3-dark",style:{paddingBottom:"20px"},fill:!0,vertical:!0},o.a.createElement(Be.a,null,o.a.createElement(ze.b,{onClick:function(){return e.handleMoveUp(e.questionId,e.path)},style:{height:50,width:20},icon:"arrow-up"}),o.a.createElement(ze.b,{style:{height:50},onClick:function(){return i(!r)},alignText:"left",rightIcon:r?"chevron-up":"chevron-down"},"Q ",o.a.createElement("span",null,e.readablePath," ")," ",o.a.createElement("span",null," ",e.questionTitle," ")),o.a.createElement(ze.b,{onClick:function(){return e.handleDeletion(e.questionId,e.path)},style:{height:50,width:20},alignText:"left",rightIcon:"cross"})),o.a.createElement(tn.a,{keepChildrenMounted:!1,isOpen:r},e.children))},an=n(850),on=n(203),rn=function(e){var t=Object(a.useState)(!1),n=Object(y.a)(t,2),r=n[0],i=n[1];return o.a.createElement(Be.a,{className:"bp3-dark",style:{paddingBottom:"20px"},fill:!0,vertical:!0},o.a.createElement(Be.a,null,o.a.createElement(ze.b,{style:{width:20},icon:"arrow-up",onClick:function(){return e.handleMoveUp(e.sectionId,e.path)}}),o.a.createElement(an.a,null,o.a.createElement(an.a.Group,{align:on.a.LEFT},o.a.createElement($e.b,null,o.a.createElement("span",null,e.readablePath," "),o.a.createElement(Jt.a,{onChange:e.handleSectionNameChange,placeholder:"Section",defaultValue:e.sectionName}," "))),o.a.createElement(an.a.Group,{align:on.a.RIGHT},o.a.createElement(Jt.a,{onChange:e.handleCustomIdChange,placeholder:"Custom Id",defaultValue:e.customId}," "),o.a.createElement(ze.b,{icon:"key",onClick:function(){return e.handleOpenConditionSettings()}}),o.a.createElement(ze.b,{onClick:function(){return i(!r)},icon:"cog"}),o.a.createElement(ze.b,{icon:"folder-open",onClick:function(){return e.onClick(e.sectionId,e.path)}}))),o.a.createElement(ze.b,{style:{width:20},icon:"cross",onClick:function(){return e.handleDeletion(e.sectionId,e.path)}})),o.a.createElement(tn.a,{isOpen:r,keepChildrenMounted:!1},e.children))},sn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleQuestionChange",value:function(e,t){this.props.handleQuestionChange&&this.props.handleQuestionChange(e,t)}},{key:"handleDuplicatingSettingsSave",value:function(e,t){this.props.handleSectionDuplicatingSettingsChange&&this.props.handleSectionDuplicatingSettingsChange(e,t)}},{key:"handleDuplicatingSettingsCancel",value:function(){}},{key:"openConditionSettings",value:function(e){var t=this,n=e.appearingCondition;st(o.a.createElement(wt,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:function(n){t.props.handleSectionConditionChange(e.id,n),lt()},onCancel:lt.bind(this),condition:n}))}},{key:"render",value:function(){var e,t=this,n=fe(this.props.parentPath);return n&&(n+="."),e=this.props.section.content.map((function(e,a){var r=t.props.parentPath.concat(a);return e instanceof ge?o.a.createElement(nn,{questionTitle:e.questionContent.content,handleMoveUp:t.props.handleMoveUp,path:r,questionId:e.id,handleDeletion:t.props.handleDeleteChildSectionOrQuestion,readablePath:n+(a+1),key:e.id,isExpanded:!1},o.a.createElement(xt,{constants:t.props.constants,definedQuestions:t.props.definedQuestions,onChange:function(e){return t.handleQuestionChange(e,r)},question:e})):e instanceof Ee?o.a.createElement(rn,{customId:e.customId,handleCustomIdChange:function(n){return t.props.handleSectionCustomIdChange(e.id,n)},handleMoveUp:t.props.handleMoveUp,sectionName:e.name,handleSectionNameChange:function(n){return t.props.handleSectionNameChange(e.id,n)},path:r,handleDeletion:t.props.handleDeleteChildSectionOrQuestion,sectionId:e.id,readablePath:n+(a+1),handleOpenConditionSettings:function(){return t.openConditionSettings(e)},key:e.id,onClick:t.props.handleSectionClick},o.a.createElement(en,Object.assign({definedQuestions:t.props.definedQuestions,handleSave:function(n){return t.handleDuplicatingSettingsSave(e.id,n)},handleCancel:t.handleDuplicatingSettingsCancel},e.duplicatingSettings))):null})),o.a.createElement(Be.a,{fill:!0,vertical:!0},e)}}]),t}(o.a.Component),ln=[{type:"button",name:"up-one-level",icon:"arrow-up",text:""},{type:"button",name:"save-root",icon:"floppy-disk",text:"Save Form"},{type:"button",name:"add-section",icon:"box",text:"Add Section"},{type:"button",name:"add-question",icon:"document",text:"Add Question"},{type:"button",name:"copy-state",icon:"clipboard",text:"Copy State"}],cn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){this.props.handleItemClick&&this.props.handleItemClick(e)}},{key:"render",value:function(){var e=this;return o.a.createElement(an.a,{className:"bp3-dark",fixedToTop:!0},o.a.createElement(an.a.Group,{align:on.a.LEFT},this.props.children,ln.map((function(t){return o.a.createElement(ze.b,{onClick:e.handleClick.bind(e,t.name),key:t.name,icon:t.icon,text:t.text,className:"bp3-minimal"})}))))}}]),t}(o.a.Component),un=(n(644),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selectedNodes:[],expandedNodes:[n.props.root.id],root:n.props.root||new Se,activeSection:n.props.root,activeSectionPath:[0],constants:new he},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"loadForm",value:function(){var e=this,t=this.props.token;return function(e,t,n,a,o){var r={"Content-Type":"application/json"};return o&&(r.Authorization=o),fetch(e,{method:"POST",body:JSON.stringify(n),headers:r}).then((function(e){if(200!==e.status)throw new Error(a||"Failed");return e.json()})).then((function(e){if(e.errors)throw e.errors[0];if(e.data&&e.data[t])return e.data[t]})).catch((function(e){throw e}))}(Ht,"forms",{query:"\n            query GetForm($formId: [String]!){\n                forms(id: $formId){\n                  id\n                  name\n                  content\n                }\n              }",variables:{formId:"root-53c37497-3808-cfd8-c886-1361dbaab171"}},"Could not delete the game file",t).then((function(t){if(t=t[0]){t.content=JSON.parse(t.content),console.log(t.id);var n=Se.fromJSON(t),a=e.getAllEntries([0,1],6,n,null,!0,[]);console.log(a),e.setState({root:n,activeSection:n,activeSectionPath:[0]})}}))}},{key:"getAllEntries",value:function(e,t,n,a){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5?arguments[5]:void 0;if(r||(r=[]),!(e.length<=0)){var i=Se.getFromPath(e,[n]);if(i){for(var s=t;s<i.content.length;s++){var l=i.content[s];l instanceof ge?a!==ye.QUESTION&&a||r.push(l):l instanceof Ee&&(a!==ye.SECTION&&a||r.push(l),this.getAllEntries(e.concat(s),0,n,a,!1,r))}if(o){var c=e.slice(0),u=c.pop();"number"===typeof u&&this.getAllEntries(c,u,n,a,!0,r)}return r}}}},{key:"handleAddSection",value:function(){var e=this;this.setState((function(t){var n=Xe.a.clone(t.root);return n.addSection(e.state.activeSectionPath),{root:n}}),(function(){e.props.onChange&&e.props.onChange(e.state.root)}))}},{key:"handleAddQuestion",value:function(){var e=this;this.setState((function(t){var n=Xe.a.clone(t.root);return n.addQuestion(e.state.activeSectionPath),{root:n}}),(function(){e.props.onChange&&e.props.onChange(e.state.root)}))}},{key:"handleDeleteQuestionOrSection",value:function(e,t){var n=this;this.setState((function(a){var o=a.activeSection,r=a.activeSectionPath,i=t.slice(0,t.length-1),s=Xe.a.clone(a.root),l=Se.getFromPath(t,[n.state.root]);if(l&&e!==l.id)throw new Error("cannot delete, id mismatch");if(l instanceof ge)s.removeQuestion(l.id,t);else if(l instanceof Ee&&(s.removeSection(l.id,t),l.id===a.activeSection.id)){var c=Se.getFromPath(i,[n.state.root]);!c||c instanceof ge||(o=c,r=i)}return{root:s,activeSection:o,activeSectionPath:r}}),(function(){n.props.onChange&&n.props.onChange(n.state.root)}))}},{key:"handleUpOneLevel",value:function(){if(this.state.activeSectionPath.length>1){var e=this.state.activeSectionPath.slice(0,this.state.activeSectionPath.length-1),t=Se.getFromPath(e,[this.state.root]);!t||t instanceof ge||this.setState((function(n){return{activeSection:t?t instanceof ge?n.activeSection:t:n.activeSection,activeSectionPath:e}}))}}},{key:"handleSave",value:function(){this.props.onSave&&this.props.onSave(this.state.root)}},{key:"handleToolbarItemClick",value:function(e){switch(e){case"add-section":this.handleAddSection();break;case"add-question":this.handleAddQuestion();break;case"up-one-level":this.handleUpOneLevel();break;case"save-root":this.handleSave();break;case"copy-state":var t=JSON.stringify(Se.toJSON(this.state.root));$t()(t);var n={message:"Copied state to clipboard",icon:"tick",intent:Qt.a.SUCCESS};this.toasterRef.show(n)}}},{key:"handleQuestionUpdate",value:function(e,t){var n=this;this.setState((function(a){var o=Xe.a.clone(a.root),r=t.slice(0,t.length-1);Se.getFromPath(r,[o])instanceof ge||n.state.root.questions[e.id].updateFromQuestion(e);return{root:o}}),(function(){n.props.onChange&&n.props.onChange(n.state.root)}))}},{key:"handleFormTreeNodeExpand",value:function(e,t,n){e.isExpanded=!0;var a=Se.getFromPath(t,[this.state.root]);a&&this.setState((function(e){return{expandedNodes:a?Xe.a.union([a.id],e.expandedNodes):e.expandedNodes}}))}},{key:"handleFormTreeNodeCollapse",value:function(e){this.setState((function(t){return{expandedNodes:t.expandedNodes.filter((function(t){return e.id!==t}))}}))}},{key:"handleFormTreeNodeClick",value:function(e,t,n){var a=Se.getFromPath(t,[this.state.root]);!a||a instanceof ge?a&&this.setState((function(e){var n=t.length>1?t.slice(0,t.length-1):t,a=Se.getFromPath(n,[e.root]),o=Se.getFromPath(t,[e.root]),r=e.expandedNodes,i=o?[o.id]:e.selectedNodes;return!a||a instanceof ge||(r=Xe.a.union([a.id],r),i.push(a.id)),{expandedNodes:r,selectedNodes:i,activeSection:!a||a instanceof ge?e.activeSection:a,activeSectionPath:n}})):this.setState((function(e){var n=a?Xe.a.union([a.id],e.expandedNodes):e.expandedNodes;return{selectedNodes:a?[a.id]:e.selectedNodes,expandedNodes:n,activeSection:!a||a instanceof ge?e.activeSection:a,activeSectionPath:t}}))}},{key:"handleRootNameChange",value:function(e){var t=this;this.setState((function(t){var n=Xe.a.clone(t.root);return n.name=e,{root:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.root)}))}},{key:"handleSectionChange",value:function(e,t){this.setState((function(e){var n=Se.getFromPath(t,[e.root]),a=e.expandedNodes,o=[];return n&&n instanceof Ee&&(a=Xe.a.union([n.id],a),o.push(n.id)),{expandedNodes:a,selectedNodes:o,activeSection:!n||n instanceof ge?e.activeSection:n,activeSectionPath:t}}))}},{key:"handleDuplicatingSettingsChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.root);return a.sections[e].setDuplicatingSettings(t),{root:a}}))}},{key:"handleSectionNameChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.root);return a.sections[e].name=t,{root:a}}))}},{key:"handleMoveUp",value:function(e,t){this.setState((function(e){var n=Xe.a.clone(e.root),a=Xe.a.clone(t);return a[a.length-1]>0&&(a[a.length-1]=a[a.length-1]-1),n.moveItem(t,a),{root:n}}))}},{key:"handleSectionConditionChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.root);return a.sections[e].appearingCondition.setLiterals(t),{root:a}}))}},{key:"handleSectionCustomIdChange",value:function(e,t){this.setState((function(n){var a=Xe.a.clone(n.root);return a.sections[e].customId=t,{root:a}}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(_t.a,{ref:function(t){return t?e.toasterRef=t:null}}),o.a.createElement(zt,{isOpen:!1}),o.a.createElement(cn,{handleItemClick:this.handleToolbarItemClick.bind(this)},o.a.createElement(Jt.a,{value:this.state.root.name,onChange:this.handleRootNameChange.bind(this)})),o.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:16},className:"builder-container"},o.a.createElement("div",{style:{background:"transparent",marginRight:20},className:"builder-sidebar"},o.a.createElement("div",{className:"sidebar-wrapper"},o.a.createElement(Zt,{expandedNodes:this.state.expandedNodes,selectedNodes:this.state.selectedNodes,handleNodeExpand:this.handleFormTreeNodeExpand.bind(this),handleNodeCollapse:this.handleFormTreeNodeCollapse.bind(this),handleNodeClick:this.handleFormTreeNodeClick.bind(this),root_:this.state.root}))),o.a.createElement("div",{style:{width:"100%"},className:""},o.a.createElement(sn,{handleSectionCustomIdChange:this.handleSectionCustomIdChange.bind(this),handleSectionConditionChange:this.handleSectionConditionChange.bind(this),handleMoveUp:this.handleMoveUp.bind(this),constants:this.state.constants,handleSectionNameChange:this.handleSectionNameChange.bind(this),definedQuestions:this.state.root.questions,handleSectionDuplicatingSettingsChange:this.handleDuplicatingSettingsChange.bind(this),handleSectionClick:this.handleSectionChange.bind(this),handleDeleteChildSectionOrQuestion:this.handleDeleteQuestionOrSection.bind(this),parentPath:this.state.activeSectionPath,handleQuestionChange:this.handleQuestionUpdate.bind(this),section:this.state.activeSection}))))}}]),t}(o.a.Component)),dn=(o.a.Component,n(849)),pn=n(192),hn=n(191);function mn(){var e=Object(Fe.a)(["\n    mutation SaveForm($saveFile: FormFileInput!){\n        saveForm(form: $saveFile){\n          id\n        }\n      }"]);return mn=function(){return e},e}function fn(){var e=Object(Fe.a)(["\n    query GetForm($formId:[String!]){\n        forms(id: $formId){\n          id\n          name\n          content\n        }\n      } \n"]);return fn=function(){return e},e}var vn=Le()(fn()),gn=Le()(mn());var bn=n(449),yn=n(447),En=n(841),Cn=n(269),On=n(843);function Sn(e){switch(e.question.type.name){case pe.NUMBER:return o.a.createElement(yn.a,{key:"form-input"+e.fieldProps.input.name,value:e.fieldProps.input.value,onChange:e.fieldProps.input.onChange,type:"number"});case pe.STRING:return o.a.createElement(yn.a,{key:"form-input"+e.fieldProps.input.name,value:e.fieldProps.input.value,onChange:e.fieldProps.input.onChange,type:"text"});case pe.GEOLOCATION:return o.a.createElement(yn.a,{key:"form-input"+e.fieldProps.input.name,value:e.fieldProps.input.value,onChange:e.fieldProps.input.onChange,type:"number"});case pe.DATE:return o.a.createElement(En.a,Object.assign({key:"form-input"+e.fieldProps.input.name},e.fieldProps.input));case pe.SELECT:return o.a.createElement(wn,{value:e.fieldProps.input.value,key:"form-input"+e.fieldProps.input.name,options:e.question.options,onChange:e.fieldProps.input.onChange})}}var kn={display:"block",height:"30px",lineHeight:"30px"};function wn(e){return o.a.createElement(Cn.a.Group,{value:e.value,onChange:e.onChange},e.options.map((function(e){return o.a.createElement(Cn.a,{style:kn,key:e.id,value:e.id},e.text)})))}var jn=n(102),Nn=n(413),Tn=n(246),In=n(162);function Fn(e){return o.a.createElement(In.a,{placement:"top",title:e.title},o.a.createElement(Re.a,{onClick:e.onClick,className:"float ".concat(e.className),type:e.type,shape:e.shape,icon:e.icon}))}var An=n(335);function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(n,!0).forEach((function(t){Object(V.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"checkIfQuestionHasCondition",value:function(e){if(e.appearingCondition.literals.length>0)return!0;var t=e.options&&e.options.SortedOptions,n=t.groups,a=t.rootOptions;return!!n.find((function(e){return e.appearingCondition.literals.length>0}))||!!a.find((function(e){return e.appearingCondition.literals.length>0}))}},{key:"makeTree",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n[t.id]=Dn({},t,{childNodes:[],_type:t instanceof Ee?"section":"root"}),n[t.id].childNodes=[];for(var a=0;a<n[t.id].content.length;a++){var o=n[t.id].content[a];o.hasOwnProperty("content")?(e.makeTree(o,n),n[t.id].childNodes.push(o.id)):(n[o.id]=Dn({},o,{_type:"question"}),n[t.id].childNodes.push(o.id))}return delete n[t.id].content,n}},{key:"transformValueToType",value:function(e,t){switch(e.name){case pe.BOOLEAN:return Boolean(t);case pe.DATE:return new Date(t);case pe.NUMBER:return parseFloat(t);case pe.STRING:return t;case pe.TIME:return new Date(t)}return t}},{key:"evaluateCondition",value:function(t,n,a){var o=!0,r=null;return t?(t.literals&&t.literals.forEach((function(t){var i=e.isLiteralValid(t,n,a);if(r){if(r)switch(r){case $.AND:o=o&&i;break;case $.OR:o=o||i}}else o=i,r=t.followingOperator})),o):o}},{key:"findValue",value:function(t,n){if(t)for(var a=Object.keys(t),o=0;o<a.length;o++){var r=a[o],i=t[r];if(Array.isArray(i)){var s=e.findValue(i[i.length-1],n);if(s)return s}else if(r===n)return i}}},{key:"getProgress",value:function(e){var t=0,n=0;return Object.keys(e).forEach((function(a){var o=e[a];t+=o.filled,n+=o.required})),t/n}},{key:"getDupeTimes",value:function(t,n){if(!t)return-1;if(t.isEnabled){var a=t.duplicateTimes;if("number"===a.type)return parseInt(a.value);var o=a.value,r=e.findValue(n,o);return r?parseInt(r):0}return-1}},{key:"collectDependencies",value:function(e){var t=[],n=[],a=[],o=[],r=null;if(e instanceof ge||"question"===e._type){t=e&&e.appearingCondition&&e.appearingCondition.literals?e.appearingCondition.literals.map((function(e){return e.questionRef})):void 0,e.autoAnswer.answeringConditions.forEach((function(e){return e.condition.literals.forEach((function(e){return o.push(e.questionRef)}))}));var i=Object.values(e.options.optionsMap).filter((function(e){return!e.groupName}));Object.values(e.options.optionGroupMap).forEach((function(e){return e.appearingCondition&&e.appearingCondition.literals.forEach((function(e){return n.push(e.questionRef)}))})),i.forEach((function(e){return e.appearingCondition&&e.appearingCondition.literals.forEach((function(e){return a.push(e.questionRef)}))}))}else if(e instanceof Ee||"section"===e._type){t=e&&e.appearingCondition&&e.appearingCondition.literals?e.appearingCondition.literals.map((function(e){return e.questionRef})):void 0,r=e.duplicatingSettings.isEnabled&&"questionRef"===e.duplicatingSettings.duplicateTimes.type?e.duplicatingSettings.duplicateTimes.value:null}var s=new Set([].concat(t,n,a,r?[r]:[]));return{all:Array.from(s),autoFillConditions:Array.from(new Set(t)),groupConditions:Array.from(new Set(n)),rootOptionConditions:Array.from(new Set(a)),duplicationRef:r}}}]),e}();Pn.isLiteralValid=function(e,t,n){var a=!0,o=t[e.questionRef],r=n[e.questionRef];if(!r)throw new Error("No question was provided");var i=Pn.transformValueToType(r.answerType,e.comparisonValue.content),s=Pn.transformValueToType(r.answerType,o);switch(e.comparisonOperator){case ce.Equal:a=s===i;break;case ce.Greater_Than:a=s>i;break;case ce.Greater_Than_Or_Equal:a=s>=i;break;case ce.Less_Than:a=s<i;break;case ce.Less_Than_Or_Equal:a=s>=i}return a};var qn=n(412);var Rn=n(148),Gn=n.n(Rn),Mn=n(415),Vn=n(45),Ln=function(e,t){return e.rootForms},Un=function(e,t){return t.rootId},Qn=function(e,t){return e.filledForms},_n=function(e,t){return e},Jn=function(e,t){return t.valueLocationName||t.locationName},Bn=Object(Vn.createSelector)([Qn,function(e,t,n){return t.formId||n}],(function(e,t){return e.byId[t]})),$n=n(331),Hn=n.n($n),Kn=function(e){return e?void 0:"Required field."},zn=Object(Vn.createSelector)([Ln,Un],(function(e,t){return e.byId[t]})),Yn=(Object(Vn.createSelector)([zn],(function(e){return e.questions})),Object(Vn.createSelector)([zn],(function(e){return e.sections}))),Zn=Object(Vn.createSelector)([Yn,function(e,t){return t.sectionId}],(function(e,t){return e[t]})),Wn=(Object(Vn.createSelector)([Zn],(function(e){return e.duplicatingSetings})),Hn()([Un,Qn],(function(e,t){var n=[];return Object.values(t.byId).forEach((function(t){t.formId===e&&n.push(t.id)})),n}))((function(e,t){return t.rootId}))),Xn=Object(Vn.createSelector)([function(e,t){return t.formId},_n],(function(e,t){return Object(Mn.a)(e)(t)})),ea=Object(Vn.createSelector)([zn,function(e,t){return t.questionId||t.id}],(function(e,t){return e[t]})),ta=Object(Vn.createSelector)([ea],(function(e){return e.options})),na=Object(Vn.createSelector)([ta],(function(e){return{rootOptions:Object.values(e.optionsMap).filter((function(e){return!e.groupName})),groups:Object.values(e.optionGroupMap)}})),aa=Object(Vn.createSelector)([na],(function(e){var t=e.groups,n=e.rootOptions,a=[];return t.forEach((function(e){a=a.concat(e.appearingCondition?e.appearingCondition.literals.map((function(e){return e.questionRef})):[])})),n.forEach((function(e){a=a.concat(e.appearingCondition?e.appearingCondition.literals.map((function(e){return e.questionRef})):[])})),Array.from(new Set(a))})),oa=Object(Vn.createSelector)([Jn,aa,Xn],(function(e,t,n){var a={};if(!n)return a;var o=Gn.a.toPath(e);return t.forEach((function(e){var t=function e(t,n,a){if(0!==n.length){var o=n.slice(0);o.splice(n.length-1,1,a);var r=Gn.a.get(t,o);return r||(o.splice(o.length-1,1),e(t,o,a))}}(n,o,e);t&&(a[e]=t)})),a})),ra=(Object(Vn.createSelector)([ea],(function(e){return e.questionContent.content})),Object(Vn.createSelector)([ea],(function(e){return e.answerType})),Object(Vn.createSelector)([na,oa,zn],(function(e,t,n){var a=e.groups,o=e.rootOptions;return{groups:a.filter((function(e){return Pn.evaluateCondition(e.appearingCondition,t,n)})),rootOptions:o.filter((function(e){return Pn.evaluateCondition(e.appearingCondition,t,n)}))}}))),ia=Object(Vn.createSelector)(ra,(function(e){var t=e.groups,n=e.rootOptions,a=[];return t.forEach((function(e){return e.members.forEach((function(e){a.push({id:e.id,text:e.value})}))})),n.forEach((function(e){a.push({id:e.id,text:e.value})})),a})),sa=Hn()([Jn,_n,Wn],(function(e,t,n){var a=[];n.forEach((function(e){a.push(Object(Mn.a)(e)(t))}));var o=Gn.a.toPath(e),r={};return a.forEach((function(e){var t=Gn.a.get(e,o);t&&(t=t.trim(),r[t]?r[t].strength++:r[t]={text:t,strength:1})})),Object.values(r).sort((function(e,t){return t.strength-e.strength}))}))((function(e,t){return t.locationName})),la=(Object(Vn.createSelector)(ea,(function(e){var t=[];return e.isRequired&&t.push(Kn),t})),Object(Vn.createSelector)([Bn,Ln],(function(e,t){var n=e.formId;return t.byId[n]}))),ca=Object(Vn.createSelector)([la,function(e,t,n){return n||t.id||t.sectionId||t.questionId}],(function(e,t){return e[t]})),ua=Object(Vn.createSelector)([ca],(function(e){return e._type})),da=(Object(Vn.createSelector)([ca],(function(e){return e.name})),Object(Vn.createSelector)([ca],(function(e){return e.childNodes}))),pa=Object(Vn.createSelector)([Bn,la],(function(e,t){return t[e.formId]})),ha=(Object(Vn.createSelector)([pa],(function(e){return e.childNodes})),Object(Vn.createSelector)([ca],(function(e){return e.duplicatingSettings}))),ma=Object(Vn.createSelector)([ha,Jn,Xn],(function(e,t,n){if(e&&e.isEnabled){var a=e.duplicateTimes;if("number"===a.type)return parseInt(a.value);var o=function e(t,n){if(!t)return;for(var a=Object.keys(t),o=0;o<a.length;o++){var r=a[o],i=t[r];if(Array.isArray(i)){var s=e(i[i.length-1],n);if(s)return s}else if(r===n)return i}return}(n,a.value);return o?parseInt(o):0}return-1})),fa=Object(Vn.createSelector)([la,Xn,Un],(function(e,t,n){var a={};return function e(t,n,a,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!t.appearingCondition||Pn.evaluateCondition(t.appearingCondition,n,a);r[t.id]||(r[t.id]={filled:0,required:0,unfilled:[],dupe:-1});if(s){var l=Pn.getDupeTimes(t.duplicatingSettings,n),c=-1===l?1:l;r[t.id].dupe=l;for(var u=function(s){t.childNodes.forEach((function(l,c){var u=i?[l]:Gn.a.toPath(o).concat(s.toString(),l);"question"===a[l]._type?!a[l].isRequired||(!!Gn.a.get(n,u)?r[t.id].filled++:r[t.id].unfilled.push(u),r[t.id].required++):e(a[l],n,a,u,r)}))},d=0;d<c;d++)u(d)}}(e[n],t,e,"",a,!0),a}));Object(Vn.createSelector)([Qn,_n,Ln],(function(e,t,n){return Object.keys(e.byId).map((function(a){var o=e.byId[a].formId,r=Object(Mn.a)(a)(t),i=n.byId[o].name;return{formId:a,rootId:o,startedDate:e.byId[a].startedDate,count:fa(t,{formId:a,rootId:o}),submitted:e.byId[a].submitted,values:r,formName:i||"Main Form"}}))}));var va=Object(Vn.createSelector)([_n,function(e,t){return t}],(function(e,t){return function(n){return ua(e,t,n)}})),ga=Object(f.b)((function(e,t){var n=ca(e,t),a=n.answerType,o=n.questionContent.content,r=Pn.collectDependencies(n);return{isRequired:n.isRequired,autoCompleteData:sa(e,t),isDependent:r.all.length>0,dependencies:r,title:o,type:a,options:a.name===pe.SELECT?ia(e,t):[]}}),null)((function(e){var t=Object(a.useContext)(xa),n=e.isRequired,r=e.autoCompleteData,i=e.options,s=e.type,l=e.dependencies,c=e.title,u=e.path;return o.a.createElement(qn.a,{key:"field"+e.locationName,name:e.locationName,props:{isRequired:n,autoCompleteData:r,options:i,type:s,dependencies:l,title:c,path:u},component:t.renderQuestion})})),ba=function(e){var t=e.formId,n=e.rootId,a=e.typeChecker,r=e.path,i=e.locationName,s=e.id,l=e.index,c=e.iteration,u=e.hideIterationInPath,d=e.isInRootNode,p=u?r.concat(l):r.concat(c,l),h=d?s:i.concat("[".concat(c,"].").concat(s));return"section"===a(s)?o.a.createElement(Oa,{formId:t,rootId:n,key:h,id:s,path:p,locationName:h}):o.a.createElement(ga,{key:h,formId:t,rootId:n,id:s,path:p,locationName:h})},ya=function(e,t,n,a,o,r,i){var s=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return r.map((function(r,c){return ba({formId:e,rootId:t,typeChecker:n,path:a,locationName:o,id:r,index:c,iteration:i,hideIterationInPath:s,isInRootNode:l})}))},Ea=function(e,t,n,a,r,i,s){var l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return o.a.createElement(An.a,{defaultActiveKey:"0",tabPosition:"top"},Object(ht.a)(Array(a).keys()).map((function(a){return o.a.createElement(An.a.TabPane,{tab:"Record-".concat(a),key:a.toString()},o.a.createElement("div",{style:{maxHeight:580,overflow:"auto"}},ya(e,t,n,i,s,r,a,!1,l)))})))};function Ca(){return o.a.createElement(pn.a,{image:pn.a.PRESENTED_IMAGE_SIMPLE,description:"Not Required to Fill"})}var Oa=Object(f.b)((function(e,t){var n=ma(e,t),a=ca(e,t,t.id);return{childNodes:da(e,t),name:a.name,duplicateTimes:n,typeChecker:va(e,t)}}),null)((function(e){var t,n=Object(a.useContext)(xa);return o.a.createElement(we.a,{style:{marginTop:16}},n.renderSectionHeader(e.name,e.path,e.rootId===e.id?"root":"section"),-1!==(t=e.duplicateTimes)?0===t?o.a.createElement(Ca,{key:"nr"+e.locationName}):Ea(e.formId,e.rootId,e.typeChecker,t,e.childNodes,e.path,e.locationName,e.id===e.formId):ya(e.formId,e.rootId,e.typeChecker,e.path,e.locationName,e.childNodes,0,!0,e.rootId===e.id))}));function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(n,!0).forEach((function(t){Object(V.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wa(){var e=Object(Fe.a)(["\nquery GetForm($id: [String]!){\n    forms(id:$id){\n      id\n      content\n      name\n      \n  \n    }\n  }\n  "]);return wa=function(){return e},e}function ja(){var e=Object(Fe.a)(["\nquery getFilled($ids: [String]!){\n    getFilledFormById(ids:$ids){\n      id\n      formId\n      answerStore\n      completedDate\n      startedDate\n      filledBy\n    }\n  }"]);return ja=function(){return e},e}function Na(){var e=Object(Fe.a)(["\nmutation SaveForm($filledForm: FilledFormInput!){\n    saveFilledForm(filledForm: $filledForm){\n        completedDate\n    }\n}"]);return Na=function(){return e},e}var Ta=Le()(Na()),Ia=Le()(ja()),Fa=Le()(wa());var Aa=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).client=void 0,n.state={isSaveConfirmVisible:!1},n.toggleSaveConfirmVisibility=function(){n.setState({isSaveConfirmVisible:!n.state.isSaveConfirmVisible})},n.saveForm=function(){n.props.handleSubmit((function(e){var t=Object(G.a)(n.props.filledForm,(function(t){delete t.filledBy,t.answerStore=JSON.stringify(e)}));n.client.mutate({mutation:Ta,variables:{filledForm:t}}).then((function(e){dn.a.success("Form has been submitted."),n.toggleSaveConfirmVisibility()})).catch((function(e){throw dn.a.error("Something went wrong, try again later!"),new Tn.a({_error:"Could not save the form!"})}))}))()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=new URLSearchParams(this.props.location.search),n=t.get("rootId"),a=t.get("formId");Promise.all([this.client.query({query:Ia,variables:{ids:[a]}}),this.client.query({query:Fa,variables:{id:[n]}})]).then((function(t){var o=t[0].data,r=t[1].data;if(o.getFilledFormById[0]&&r.forms){var i=r.forms[0];"string"===typeof i.content&&(i.content=JSON.parse(i.content));var s=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ka({},t,{_type:t instanceof Ee?"section":"root",childNodes:[]}),o=0;o<t.content.length;o++){var r=t.content[o];if(r instanceof Ee)a.childNodes.push(r.id),e(r,n);else{a.childNodes.push(r.id);var i=ka({},r,{_type:"question"});n[r.id]=i}}return n[t.id]=a,n}(Se.fromJSON(i));e.handleRootFormAdd(n,s);var l=o.getFilledFormById[0];"string"===typeof l.answerStore&&(l.answerStore=JSON.parse(l.answerStore)),e.initializeForm(a,l.answerStore);var c={formId:l.formId,id:l.id,completedDate:l.completedDate,filledBy:l.filledBy,startedDate:l.startedDate};e.handleFilledFormAdd(a,c)}}))}},{key:"render",value:function(){var e=this,t=new URLSearchParams(this.props.location.search),n=t.get("rootId"),a=t.get("formId"),r=this.props,i="";if(r.rootForm&&r.rootForm[n]){var s=r.rootForm[n];"root"===s._type&&(i=s.name)}return o.a.createElement(Je.a,null,(function(t){return e.client=t,o.a.createElement(xa.Provider,{value:{renderQuestion:r.renderQuestion,renderSectionHeader:r.renderSectionHeader}},r.filledForm&&r.rootForm&&r.renderRootSectionHeader&&r.renderRootSectionHeader(r.filledForm,i),o.a.createElement(De.a,{spinning:!r.filledForm||!r.rootForm},r.filledForm&&r.rootForm&&o.a.createElement(Oa,{rootId:n,id:n,formId:a,path:[0],locationName:""})),o.a.createElement(qe.a,{title:"Are you sure you want to make the changes?",visible:e.state.isSaveConfirmVisible,onConfirm:e.saveForm,onCancel:e.toggleSaveConfirmVisibility,placement:"left"},o.a.createElement(Fn,{onClick:e.toggleSaveConfirmVisibility,title:"Save Form",type:"primary",shape:"circle",icon:"save"})))}))}}]),t}(o.a.Component),xa=o.a.createContext({renderSectionHeader:function(e,t){return null},renderQuestion:function(){return null}}),Da=Object(Nn.a)({destroyOnUnmount:!1})(Aa),Pa=Object(f.b)((function(e,t){var n=new URLSearchParams(t.location.search),a=n.get("formId"),o=n.get("rootId");return{form:a,filledForm:e.filledForms.byId[a],rootForm:e.rootForms.byId[o]}}),(function(e){return{handleRootFormAdd:function(t,n){return e({type:S,payload:{id:t,root:n}})},handleFilledFormAdd:function(t,n){return e(function(e,t){return{type:O,payload:{id:e,filledForm:t}}}(t,n))},initializeForm:function(t,n){return e(Object(jn.b)(t,n))}}}))(Da),qa=Object(g.i)(Pa),Ra=n(116),Ga=n(448),Ma=n(334),Va=n.n(Ma),La=n(846);function Ua(){var e=Object(Fe.a)(["\n    mutation MakeUnavailable($formIds:[String]!,$surveyors:[String]!){\n        makeFormsUnavailableFor(formIds:$formIds, surveyorEmails:$surveyors){\n            message\n        }\n    }\n"]);return Ua=function(){return e},e}function Qa(){var e=Object(Fe.a)(["\n    mutation MakeAvailable($formIds:[String]!,$surveyors:[String]!){\n        makeFormsAvailableFor(formIds:$formIds, surveyorEmails:$surveyors){\n            message\n        }\n    }\n"]);return Qa=function(){return e},e}function _a(){var e=Object(Fe.a)(["\n    query($ids: [String]){\n        forms(id: $ids){\n          name\n          assignedTo{\n              _id\n              email\n             \n          }\n        }\n      } \n"]);return _a=function(){return e},e}function Ja(){var e=Object(Fe.a)(["query{\n    users{\n      _id\n      firstName\n      lastName\n      email\n      accountType\n      availableForms{\n        id\n        name\n      }\n    }\n  }"]);return Ja=function(){return e},e}var Ba=Le()(Ja()),$a=Le()(_a()),Ha=Le()(Qa()),Ka=Le()(Ua());function za(e){var t=Object(a.useState)([]),n=Object(y.a)(t,2),r=n[0],i=n[1],s=Object(a.useState)([]),l=Object(y.a)(s,2),c=l[0],u=l[1],d=Object(Ae.b)(Ba,{}),p=d.data,h=(d.error,d.loading),m=Object(Ae.b)($a,{variables:{ids:[e.formId]},onCompleted:function(e){u(e.forms[0]?e.forms[0].assignedTo.map((function(e){return e.email})):[]),i(e.forms[0]?e.forms[0].assignedTo.map((function(e){return e.email})):[])}}),f=m.data,v=(m.error,m.loading),g=Object(Ae.a)(Ha),b=Object(y.a)(g,1)[0],E=Object(Ae.a)(Ka),C=Object(y.a)(E,1)[0],O=function(){var t=Object(_e.a)(Oe.a.mark((function t(){var n,a,o,i;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r,a=[],c.forEach((function(e){n.includes(e)||a.push(e)})),o=b({variables:{formIds:[e.formId],surveyors:n}}),i=C({variables:{formIds:[e.formId],surveyors:a}}),Promise.all([o,i]).then((function(t){dn.a.success("Sucessfully made changes."),e.onOk&&e.onOk()})).catch((function(e){dn.a.error("Something went wrong, please try again later.")}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.createElement(I.a,{visible:e.visible,onCancel:function(){e.onCancel&&e.onCancel()},onOk:O},o.a.createElement(De.a,{spinning:h||v},o.a.createElement(La.a,{titles:["All Users","Available To"],dataSource:f&&p?p.users.filter((function(e){return"surveyor"===e.accountType})).map((function(e){return{key:e.email,title:e.firstName+" "+e.lastName,email:e.email}})):[],targetKeys:r,onChange:function(e){i(e)},render:function(e){return o.a.createElement(In.a,{placement:"top",title:e.email},o.a.createElement(xe.a.Text,null,e.title))}})))}var Ya=function(e){var t=Object(a.useState)(null),n=Object(y.a)(t,2),r=n[0],i=n[1],s=Object(Ae.a)(gn),l=Object(y.a)(s,2),c=l[0],u=(l[1].data,Object(a.useState)("")),d=Object(y.a)(u,2),p=(d[0],d[1]),h=function(){var t=Object(_e.a)(Oe.a.mark((function t(){var n,a,o,s,l;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=r)||p("Form Name cannot be empty"),a=(new Se).setName(n),(o=Se.toJSON(a)).content=JSON.stringify(o.content),t.next=7,c({variables:{saveFile:o}});case 7:if(s=t.sent,l=s.errors,s.data,!l){t.next=13;break}return e.onCreationFailed&&e.onCreationFailed(l),t.abrupt("return");case 13:i(""),e.onCreationSuccess&&e.onCreationSuccess(a.id);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.createElement(I.a,{destroyOnClose:!0,centered:!0,okText:"Create",title:"Create New Form",onCancel:function(){i(""),e.onCancel&&e.onCancel()},onOk:h,visible:e.isOpen},o.a.createElement(On.a.Item,{label:"Form Name"},o.a.createElement(yn.a,{onChange:function(e){return i(e.currentTarget.value)}})))};function Za(){var e=Object(Fe.a)(["\n      mutation($formIds: [String]!){\n          deleteForm(id:$formIds){\n              message\n          }\n      }\n"]);return Za=function(){return e},e}function Wa(){var e=Object(Fe.a)(["\n    query{\n        forms{\n          id\n          name\n          createdAt\n          updatedAt\n          assignedTo{\n              _id\n              firstName\n              lastName\n          }\n        }\n      } \n\n"]);return Wa=function(){return e},e}var Xa=Le()(Wa()),eo=Le()(Za());function to(e){return o.a.createElement(pn.a,{image:pn.a.PRESENTED_IMAGE_DEFAULT,description:o.a.createElement("span",null,"No Forms found!")},o.a.createElement(Re.a,{onClick:e.onCreateClick,type:"primary"},"Create Form"))}var no=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Statisctics"))}}]),t}(a.Component),ao=n(842);n(782);function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(n,!0).forEach((function(t){Object(V.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(){var e=Object(Fe.a)(["mutation(\n    $email: String!\n    $firstName: String!\n    $lastName: String!\n    $password: String!\n    $createdBy: String!\n  ) {\n    register(\n      user: {\n        email: $email\n        firstName: $firstName\n        lastName: $lastName\n        password: $password\n        accountType: "," \n        createdBy: $createdBy\n      }\n    ) {\n      _id\n    }\n  }\n  "]);return io=function(){return e},e}var so=function(e){return Le()(io(),e)};var lo=function(e){var t=e.input,n=e.label,a=e.type,r=e.meta,i=r.touched,s=r.error,l=r.warning;return o.a.createElement(On.a.Item,null,o.a.createElement(yn.a,Object.assign({placeholder:n,autoComplete:"autocomplete_off_hack_xfr4!k"},t,{type:a})),i&&(s&&o.a.createElement("span",{style:{color:"red",top:0,bottom:0}},s)||l&&o.a.createElement("span",null,l)))};var co=Object(f.b)((function(e,t){return{userId:e.user.id}}),null)((function(e){var t=Object(Ae.a)(so(e.signUpType),{errorPolicy:"none"}),n=Object(y.a)(t,2),a=n[0],r=(n[1],e.handleSubmit),i=(e.pristine,e.reset,e.submitting),s=function(){var t=Object(_e.a)(Oe.a.mark((function t(n){var o;return Oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=ro({},n,{createdBy:e.userId}),t.abrupt("return",a({variables:o}).then((function(e){return dn.a.success("".concat(o.firstName," has been signed up!")),!0})).catch((function(e){throw new Tn.a({_error:e.message.split(":")[1]})})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(we.a,null,o.a.createElement(De.a,{spinning:i},o.a.createElement("form",{onSubmit:r(s)},o.a.createElement(qn.a,{name:"firstName",label:"First Name",type:"text",component:lo}),o.a.createElement(qn.a,{name:"lastName",type:"text",label:"Last Name",component:lo}),o.a.createElement(qn.a,{name:"email",component:lo,type:"text",label:"Email Address"}),o.a.createElement(qn.a,{name:"password",label:"Password",type:"password",component:lo}),e.error&&o.a.createElement("strong",{className:"error"},e.error),o.a.createElement(Re.a,{style:{width:"100%"},disabled:i,htmlType:"submit",icon:"user-add"},"Submit"))))})),uo=Object(Nn.a)({form:"signUpUser",validate:function(e){var t={};return e.firstName?e.firstName.length<2&&(t.firstName="Must be 2 characters or more"):t.firstName="Required",e.lastName||(t.lastName="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},asyncBlurFields:["firstName","lastName","email","password"]})(co);function po(){var e=Object(Fe.a)(["query{\n    users{\n      _id\n      firstName\n      lastName\n      email\n      accountType\n      filledForms{\n        id\n        \n      }\n      createdForms{\n        id\n        name\n      }\n      availableForms{\n        id\n        name\n      }\n    }\n  }"]);return po=function(){return e},e}var ho,mo,fo=xe.a.Paragraph,vo=Le()(po());!function(e){e.ADMIN="admin",e.SURVEYOR="surveyor"}(ho||(ho={})),function(e){e.ADMIN="admin",e.SURVEYOR="surveyor",e.ALL="all"}(mo||(mo={}));var go=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={selectedTab:ho.SURVEYOR,signUpType:ho.SURVEYOR,isSignUpDialogOpen:!1,filterType:mo.ALL},n.handleTabChange=function(e){n.setState({selectedTab:e})},n.toggleSignUpDialog=function(){n.setState((function(e){return{isSignUpDialogOpen:!e.isSignUpDialogOpen}}))},n.handleAddUserClick=function(e){n.setState({signUpType:e},(function(){n.toggleSignUpDialog()}))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getAddUserButton",value:function(){return o.a.createElement(Re.a,{onClick:this.toggleSignUpDialog,icon:"user"},"admin"===this.state.selectedTab?"Add Admin":"Add Surveyor")}},{key:"filterUsersByType",value:function(e){this.setState({filterType:e})}},{key:"render",value:function(){var e=this;return o.a.createElement(we.a,{style:{width:"100%",height:"100%"}},o.a.createElement(je.a,{title:"Users",style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[o.a.createElement(Re.a,{onClick:function(){return e.handleAddUserClick(ho.SURVEYOR)},icon:"user-add",type:"primary",key:"3"},"Add Surveyor"),o.a.createElement(Re.a,{onClick:function(){return e.handleAddUserClick(ho.ADMIN)},icon:"user-add",type:"primary",key:"2"},"Add Admin")],avatar:{src:"https://avatars1.githubusercontent.com/u/8186664?s=460&v=4"}},o.a.createElement("div",null,this.Content)),o.a.createElement(o.a.Fragment,null,o.a.createElement(bo,{filterUsersByType:this.state.filterType})),o.a.createElement(I.a,{centered:!0,destroyOnClose:!0,onCancel:this.toggleSignUpDialog,visible:this.state.isSignUpDialogOpen,title:"Create ".concat(this.state.selectedTab)},o.a.createElement(uo,{signUpType:this.state.signUpType})))}},{key:"Content",get:function(){return o.a.createElement("div",{className:"user-content"},o.a.createElement(fo,null,"Create surveyor and assign them the forms you created."),o.a.createElement(fo,null,"Or create admin users who can collaborate with you on creating forms and managing the collected data."),o.a.createElement(hn.a,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},o.a.createElement(Ra.a,{span:12},o.a.createElement(yn.a.Search,{type:"",size:"large",placeholder:"Find Users..."}))))}}]),t}(a.Component);function bo(e){var t=Object(Ae.b)(vo,{pollInterval:2e3}),n=t.loading,a=t.data,r=(t.error,[{key:"name",title:"Name",dataIndex:"name",sorter:function(e,t){return e.name.length-t.name.length},ellipsis:!0},{key:"email",title:"Email",dataIndex:"email",sorter:function(e,t){return e.name.length-t.name.length},filteredValue:[e.filterUsersByType]},{key:"role",title:"Role",dataIndex:"role",filters:[{text:"Admins",value:"admin"},{text:"Surveyors",value:"surveyor"}],onFilter:function(e,t){return t.role.includes(e)}},{key:"filledforms",title:"Filled Forms",dataIndex:"filledFormsCount"},{key:"assignedForms",title:"Assigned Forms",dataIndex:"assignedForms",render:function(e,t,n){return o.a.createElement("span",{key:"assignedForms"+n},e.map((function(e){return o.a.createElement(Ga.a,{key:e.id,title:e.name},e.name)})))}}]);return function(){var e=[];return a&&a.users&&(e=a.users.map((function(e){return{name:e.firstName+" "+e.lastName,email:e.email,filledFormsCount:e.filledForms.length,assignedForms:e.availableForms,role:e.accountType}}))),o.a.createElement(De.a,{spinning:n},o.a.createElement(ao.a,{pagination:{pageSize:50},scroll:{y:600},key:"surveyorstable",rowKey:function(e){return e._id},columns:r,dataSource:e}))}()}var yo=[{title:"Forms",routeKey:"/forms",icon:"form",component:o.a.createElement((function(e){var t=Object(Ae.b)(Xa,{pollInterval:1e3}),n=t.loading,r=t.error,i=t.data,s=Object(Ae.a)(eo),l=Object(y.a)(s,2),c=l[0],u=(l[1].data,Object(a.useState)(!1)),d=Object(y.a)(u,2),p=d[0],h=d[1],m=Object(a.useState)(null),f=Object(y.a)(m,2),g=f[0],b=f[1],E=function(){var e=Object(_e.a)(Oe.a.mark((function e(t){var n;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{formIds:t}});case 2:n=e.sent,n.data,n.errors?dn.a.error("Could not delete the form file, try again later!"):dn.a.success("Successfully deleted!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=o.a.createElement("div",{className:"form-content"},o.a.createElement(Va.a,null,"Manage your forms and assign or unassign to your surveyors."),o.a.createElement(Va.a,null),o.a.createElement(hn.a,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},o.a.createElement(Ra.a,{span:12},o.a.createElement(yn.a.Search,{type:"",size:"large",placeholder:"Find Users..."}))));return n||!r&&i&&0!==i.forms.length?o.a.createElement(o.a.Fragment,null,o.a.createElement(za,{onOk:function(){return b(null)},onCancel:function(){return b(null)},formId:g,visible:!!g}),o.a.createElement(Ya,{onCancel:function(){return h(!1)},isOpen:p,onCreationSuccess:function(){h(!1)}}),o.a.createElement(we.a,null,o.a.createElement(je.a,{title:"Forms",style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[o.a.createElement(Re.a,{onClick:function(){return h(!0)},icon:"file",type:"primary",key:"3"},"Create Form")],avatar:{icon:"file"}},o.a.createElement("div",null,C)),o.a.createElement(Pe.a,{loading:n,itemLayout:"horizontal",dataSource:i&&i.forms||[],renderItem:function(e){return o.a.createElement(Pe.a.Item,{actions:[o.a.createElement(Re.a,{onClick:function(){b(e.id)},type:"primary",icon:"user-add",key:"add-user"}),o.a.createElement(qe.a,{placement:"left",arrowPointAtCenter:!0,title:"Are you sure you want to delete this form?",onCancel:function(){},onConfirm:function(){return E([e.id])}},o.a.createElement(Re.a,{type:"danger",icon:"delete",key:"delete"}))]},o.a.createElement(Ge.a,{loading:n,active:!0,avatar:!0},o.a.createElement(Pe.a.Item.Meta,{avatar:o.a.createElement(Me.a,{shape:"square",size:64,icon:"file-text"}),title:o.a.createElement(v.b,{to:"/formbuilder?id=".concat(e.id)},e.name),description:new Date(parseInt(e.updatedAt)).toLocaleTimeString()}),o.a.createElement("div",null,e.assignedTo.map((function(e){return o.a.createElement(Ga.a,{key:e._id},e.firstName+" "+e.lastName)})))))}}))):o.a.createElement(to,{onCreateClick:function(){return h(!0)}})}),null),children:[]},{title:"Surveyors",routeKey:"/surveyors",icon:"user",component:o.a.createElement(go,null),children:[]},{title:"Statistics",routeKey:"/statistics",icon:"pie-chart",component:o.a.createElement(no,null),children:[]},{title:"Form Builder",routeKey:"/formbuilder",hideOnSidebar:!0,icon:"form",children:[],component:o.a.createElement((function(){var e=new URLSearchParams(Object(g.h)().search),t=Object(Ae.a)(gn),n=Object(y.a)(t,2),r=n[0],i=(n[1].data,Object(a.useState)(!1)),s=Object(y.a)(i,2),l=s[0],c=s[1],u=Object(g.g)(),d=function(){var e=Object(_e.a)(Oe.a.mark((function e(t){var n,a;return Oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=11;break}return(n=Se.toJSON(t)).content=JSON.stringify(n.content),c(!0),e.next=6,r({variables:{saveFile:n}});case 6:a=e.sent,a.data,a.errors?dn.a.error("Form could not be saved"):dn.a.success("Form has been saved"),c(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=e.get("id"),h=Object(Ae.b)(vn,{variables:{formId:[p]}}),m=h.data,f=h.loading,v=h.error;return o.a.createElement(Je.a,null,(function(e){return o.a.createElement(De.a,{spinning:f},function(e){if(!f&&(v||!m))return o.a.createElement(pn.a,{image:pn.a.PRESENTED_IMAGE_DEFAULT,description:"Please create a new Form by going back to Home"},o.a.createElement(Re.a,{icon:"home",onClick:function(){return u.replace("/forms")}}," Home"));if(f)return o.a.createElement(hn.a,{style:{marginTop:60}});var t;if(0===m.forms.length)dn.a.success("Started a new form!"),t=new Se;else{var n=m.forms[0];n.content="string"===typeof n.content?JSON.parse(n.content):n.content,t=Se.fromJSON(n)}return o.a.createElement(un,{token:"",onChange:function(){},onSave:d,root:t})}())}))}),null)},{title:"Filled Forms",routeKey:"/filledForms",hideOnSidebar:!1,icon:"form",children:[],component:o.a.createElement((function(e){var t=Object(Ae.b)(Qe),n=t.data,a=t.loading;return t.error,o.a.createElement(o.a.Fragment,null,o.a.createElement(we.a,null,o.a.createElement(je.a,{title:"Filled forms",style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[],avatar:{icon:"file"}},o.a.createElement("div",null,o.a.createElement(xe.a.Paragraph,null,"Review submitted forms and make changes to the form if necessary."))),o.a.createElement(De.a,{spinning:a},o.a.createElement(Pe.a,{loading:a,itemLayout:"horizontal",dataSource:n&&n.getFilledForms||[],renderItem:function(e){return o.a.createElement(Pe.a.Item,{actions:[o.a.createElement(qe.a,{placement:"left",arrowPointAtCenter:!0,title:"Are you sure you want to delete this form?",onCancel:function(){},onConfirm:function(){e.id}},o.a.createElement(Re.a,{type:"danger",icon:"delete",key:"delete"}))]},o.a.createElement(Ge.a,{loading:a,active:!0,avatar:!0},o.a.createElement(Pe.a.Item.Meta,{avatar:o.a.createElement(Me.a,{shape:"square",size:64,icon:"file-text"}),title:o.a.createElement(v.b,{to:"/formviewer?formId=".concat(e.id,"&rootId=").concat(e.formId)},e.id),description:new Date(parseInt(e.updatedAt)).toLocaleTimeString()}),o.a.createElement("div",null)))}}))))}),null)},{title:"Form Builder",routeKey:"/formviewer",hideOnSidebar:!0,icon:"form",children:[],component:o.a.createElement(qa,{renderSectionHeader:function(e,t,n){return"root"===n?null:o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},o.a.createElement(Ie.a,{level:"section"===n?4:3},"".concat(fe(t)," ").concat(e)),o.a.createElement(ke.a,{type:"horizontal"}))},renderQuestion:function(e){e.input,e.meta;var t=Object(bn.a)(e,["input","meta"]),n=o.a.createElement("div",null,o.a.createElement("strong",null,fe(t.path)," ",t.title));return o.a.createElement(On.a.Item,{key:"form-item"+e.input.name},n,o.a.createElement(Sn,{key:"form-question"+e.input.name,question:t,path:t.path,fieldProps:e}))},renderRootSectionHeader:function(e,t){return console.log(e),o.a.createElement(we.a,null,o.a.createElement(je.a,{title:t,style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[],avatar:{icon:"file"}},o.a.createElement("div",null,o.a.createElement(Ne.a,{title:"Surveyor Information"},o.a.createElement(Ne.a.Item,{label:"Name"},"Zhou Maomao"),o.a.createElement(Ne.a.Item,{label:"Started Date"},new Date(parseInt("".concat(e.startedDate))).toLocaleDateString()),o.a.createElement(Ne.a.Item,{label:"Completed Date"},new Date(parseInt("".concat(e.completedDate))).toLocaleDateString())))))}})}],Eo=C.a.SubMenu;xe.a.Title;function Co(e){return e.isVisible?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement(xe.a.Title,{ellipsis:!0,style:{color:"white"}},"Datapali")),o.a.createElement(C.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},function e(t){return t.items.map((function(n){return n.hideOnSidebar?null:n.children.length>0?o.a.createElement(Eo,{key:t.parentRouteKey+n.routeKey,title:n.title},e({parentRouteKey:t.parentRouteKey+n.routeKey,items:n.children})):o.a.createElement(C.a.Item,{key:t.parentRouteKey+n.routeKey},o.a.createElement(F.a,{type:n.icon}),o.a.createElement("span",null,n.title),o.a.createElement(v.b,{to:t.parentRouteKey+n.routeKey}))}))}({parentRouteKey:"",items:yo}))):o.a.createElement(o.a.Fragment,null)}var Oo=E.a.Header,So=E.a.Footer,ko=E.a.Sider,wo=E.a.Content;C.a.SubMenu;function jo(e){var t=Object(g.h)(),n=Object(a.useState)(!1),r=Object(y.a)(n,2),i=r[0],s=r[1];t.pathname;return o.a.createElement(v.a,null,o.a.createElement(E.a,null,o.a.createElement(ko,{trigger:null,collapsible:!0,collapsed:i},o.a.createElement(Co,{isVisible:!0})),o.a.createElement(E.a,null,o.a.createElement(Oo,{hasSider:!0,style:{background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between"}},o.a.createElement(X,{isSidebarCollapsed:i,setSidebarCollapsed:s})),o.a.createElement(wo,{style:{padding:16}},function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.forEach((function(t){var r=a+t.routeKey;n.push(o.a.createElement(g.b,{key:t.routeKey,exact:!0,path:r,children:t.component||o.a.createElement("h2",null,t.routeKey)})),t.children.length>0&&e(t.children,n,r)})),n}(yo)),o.a.createElement(So,null))))}var No={serverURL:"https://datapali.com/graphql",localServerURL:"http://localhost:5000/graphql"};var To=Object(f.b)((function(e,t){return{authToken:e.user.token}}),null)((function(e){var t=new m.a({uri:No.serverURL,request:function(t){t.setContext({headers:{authorization:e.authToken||""}})}});return o.a.createElement(Je.b,{client:t},e.children)})),Io=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showPassword:!1,hasError:!1},n.togglePasswordHide=function(){n.setState((function(e){return{showPassword:!e.showPassword}}))},n.createSubmitFunction=function(e){return function(t){var a=n.props,o=a.handleSubmit,r=a.customSubmit;r&&o(r(e))().then((function(e){n.props.onLoggedIn&&n.props.onLoggedIn(e)})),t.preventDefault()}},n.clearErrors=function(){n.state.hasError&&n.setState({hasError:!1})},n.renderEmailInput=function(e){return o.a.createElement(yn.a,Object.assign({tabIndex:2,prefix:o.a.createElement(F.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",type:"email"},e.input))},n.renderPasswordInput=function(e){return o.a.createElement(yn.a,Object.assign({tabIndex:2,prefix:o.a.createElement(F.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password",type:n.state.showPassword?"text":"password"},e.input))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.authToken&&this.props.onLoggedIn&&this.props.onLoggedIn(this.props.authToken)}},{key:"renderPasswordHideButton",value:function(){return o.a.createElement(In.a,{title:"".concat(this.state.showPassword?"Hide":"Show"," Password")},o.a.createElement(Re.a,{icon:this.state.showPassword?"eye-open":"eye-off",tabIndex:99,onClick:this.togglePasswordHide}))}},{key:"render",value:function(){var e=this;return o.a.createElement(Je.a,null,(function(t){return o.a.createElement(we.a,{className:"login-form"},o.a.createElement("h5",null,"Login"),o.a.createElement("form",{onSubmit:e.createSubmitFunction(t)},o.a.createElement(On.a.Item,null,o.a.createElement(qn.a,{name:"email",type:"text",component:e.renderEmailInput})),o.a.createElement(On.a.Item,null,o.a.createElement(qn.a,{name:"password",type:"password",component:e.renderPasswordInput})),e.props.error&&o.a.createElement("strong",{className:"error"},"Incorrect email or password"),o.a.createElement(On.a.Item,null,o.a.createElement(Re.a,{style:{width:"100%"},type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))))}))}}]),t}(o.a.Component);function Fo(){var e=Object(Fe.a)(["\nquery Login($email: String!, $password: String!){\n    login(email: $email, password: $password){\n      token\n      user{\n          _id\n          firstName\n          lastName\n          accountType\n        availableForms{\n          name\n          id\n          content\n        }\n        filledForms{\n          id\n          startedDate\n          completedDate\n          formId\n          filledBy\n          answerStore\n        }\n      }\n    }\n  }\n"]);return Fo=function(){return e},e}var Ao=Le()(Fo()),xo=Object(f.b)((function(e,t){return{authToken:e.user.token}}),(function(e){return{customSubmit:function(t){return function(){var n=Object(_e.a)(Oe.a.mark((function n(a){return Oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.query({query:Ao,variables:{email:a.email,password:a.password},errorPolicy:"none"}).then((function(t){var n=t.data.login,a={id:n.user._id,token:n.token,availableForms:n.user.availableForms.map((function(e){return e.id})),firstName:n.user.firstName,lastName:n.user.lastName,filledForms:n.user.filledForms.map((function(e){return e.id})),accountType:n.user.accountType,createdForms:n.user.createdForms?n.user.createdForms.map((function(e){return e.id})):[]},o={};n.user.availableForms.forEach((function(e){"string"===typeof e.content&&(e.content=JSON.parse(e.content)),o[e.id]=e.content}));var r={};return n.user.filledForms.forEach((function(e){"string"===typeof e.answerStore&&(e.answerStore=JSON.parse(e.answerStore)),r[e.id]={completedDate:parseInt(e.completedDate),filledBy:e.filledBy,formId:e.formId,id:e.id,startedDate:parseInt(e.startedDate),submitted:!0}})),e(T(a)),n.user.token})).catch((function(e){throw new Tn.a({_error:"Incorrect email or password"})})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}}))(Io),Do=Object(Nn.a)({form:"login",onChange:function(e,t,n){return t(Object(jn.a)("login"))}})(xo),Po=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.props.authToken)return o.a.createElement(g.b,this.props);return o.a.createElement(g.b,Object.assign({},this.props,{component:function(){return o.a.createElement(g.a,{to:{pathname:"/login"}})},render:void 0}))}}]),t}(g.b),qo=Object(f.b)((function(e,t){return{authToken:e.user.token}}),(function(){return{}}))(Po),Ro=new m.a({uri:No.serverURL}),Go=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={theme:Q.DARK},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"changeTheme",value:function(e){this.setState({theme:e})}},{key:"render",value:function(){return o.a.createElement(v.a,null,o.a.createElement(f.a,{store:Z},o.a.createElement(b.a,{onBeforeLift:function(){return console.log(Z.getState())},loading:null,persistor:W},o.a.createElement(To,{client:Ro},o.a.createElement(p.b,{locale:h.a},o.a.createElement("div",{className:"main-wrapper ".concat(this.Theme)},o.a.createElement(g.d,null,o.a.createElement(g.b,{path:"/login",render:function(e){var t=e.history,n=e.location;return o.a.createElement(Do,{onLoggedIn:function(){var e=(n.state||{from:{pathname:"/"}}).from;t.replace(e)}})}}),o.a.createElement(g.b,{path:"/"},o.a.createElement(qo,{component:jo})))),o.a.createElement("div",{id:"modal-container"}))))))}},{key:"Theme",get:function(){switch(this.state.theme){case Q.DARK:return"bp3-dark";case Q.LIGHT:return""}}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Go,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[479,1,2]]]);
//# sourceMappingURL=main.58632592.chunk.js.map