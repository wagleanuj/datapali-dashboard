{"version":3,"sources":["actions/index.ts","actions/actions.ts","components/navBar.component.tsx","reducers/filledFormReducer.ts","reducers/rootFormsReducer.ts","types/index.ts","reducers/userReducer.ts","reducers/rootReducer.ts","../../dpform/lib/condition.js","configureStore.ts","containers/navBar.container.tsx","../../dpform/lib/valueType.js","../../dpform/lib/AnswerOptions.js","../../dpform/lib/answer.js","../../dpform/lib/answerTypes.js","../../dpform/lib/constants.js","../../dpform/lib/duplicateSettings.js","../../dpform/lib/util.js","../../dpform/lib/question.js","../../dpform/lib/questionSection.js","../../dpform/lib/rootSection.js","components/filledFormsPage.component.tsx","../../formbuilder/lib/utils/index.js","../../formbuilder/lib/utils/getRandomId.js","../../formbuilder/lib/CreateCondition.js","../../formbuilder/lib/ValInput.js","../../formbuilder/lib/DPFormItem.js","../../formbuilder/lib/CreateConditionModal.js","../../formbuilder/lib/AutofillCondition.js","../../formbuilder/lib/AnswerType.js","../../formbuilder/lib/AddOptions.js","../../formbuilder/lib/APPCONFIG.js","../../formbuilder/lib/constants.js","../../formbuilder/lib/formtree.js","../../formbuilder/lib/duplicateSettings.js","../../formbuilder/lib/questionButton.js","../../formbuilder/lib/sectionButton.js","../../formbuilder/lib/section.js","../../formbuilder/lib/Toolbar.js","../../formbuilder/lib/SurveyForm.js","../../formbuilder/lib/ValueInput.js","components/formbuilder.component.tsx","components/formfiller/formItem.component.tsx","components/fab.component.tsx","helper.ts","components/formfiller/selectors/shared.ts","components/formfiller/selectors/filledFormSelectors.ts","components/formfiller/selectors/questionSelector.ts","components/formfiller/selectors/nodeSelector.ts","components/formfiller/questionNode.container.tsx","components/formfiller/questionNode.component.tsx","components/formfiller/sectionNode.component.tsx","components/formfiller/sectionNode.container.tsx","components/formfiller/formviewer.component.tsx","components/formfiller/FormViewer.container.tsx","components/assignUser.component.tsx","components/newFormDialog.component.tsx","components/forms.component.tsx","components/statistics.component.tsx","components/signup.component.tsx","containers/signUp.container.tsx","components/surveyors.component.tsx","routes.tsx","components/sidebar.component.tsx","components/sidenav.component.tsx","components/dashboard.component.tsx","config.ts","containers/apollo.provider.tsx","components/apollo.component.tsx","components/login.component.tsx","containers/login.container.tsx","components/protectedRoute.tsx","containers/protectedRoute.container.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ADD_FILLED_FORM","ADD_ROOT_FORM","REPLACE_ROOT_FORMS","DELETE_ROOT_FORM","SET_USER","LOGOUT","handleSetUser","user","type","payload","confirm","Modal","initialFilledFormsState","byId","ids","EUserType","EAppTheme","initialRootFormsState","initialUserState","filledForms","availableForms","firstName","id","lastName","token","accountType","SURVEYOR","createdForms","QAFollowingOperator","combinedReducers","combineReducers","state","action","rootForms","produce","draft","includes","push","root","roots","Object","keys","filledForm","form","reducer","initialAppState","persistConfig","key","storage","persistedReducer","persistReducer","store","createStore","persistor","persistStore","ConnectedNavBar","connect","props","dispatch","onLogoutClick","undefined","purge","onConfirmLogout","style","fontSize","color","className","isSidebarCollapsed","onClick","e","setSidebarCollapsed","onConfirm","title","content","onOk","onCancel","alignSelf","QACondition","this","literals","Array","value","newLiterals","_this","clause","forEach","literal","concat","length","followingOperator","console","log","literalIndex","splice","get","data","c","setLiterals","JSON","parse","stringify","condition","isValid","values","every","x","isNil","ofTypeToJSON","t","name","ofType","ofTypeFromJSON","answerTypeToJSON","a","answerTypeFromJSON","AnswerOptions","optionsMap","optionGroupMap","options","opt_count","group_count","option","groupName","groupname","group","appearingCondition","members","optionExistInGroup","find","item","newValue","opt","ind","findIndex","optionIds","existingGroup","addGroup","_loop","i","optionId","option_group","_this2","opt_groupname","optgroup","oldname","newname","_this3","members_ids","map","newGroup","clone","_this4","newType","grouplessOptions","filter","groups","rootOptions","mapValues","v","optionToJSON","toJSON","optionGroupToJSON","d","r","fromJSON","optionFromJSON","QAComparisonOperator","AnswerType","QAType","ANSWER_TYPES","Constants","consts","count","constname","cloneDeep","constant","dupeSettingsToJSON","isEnabled","duplicateTimes","getReadablePath","nu","slice","join","getRandomId","startingText","S4","Math","random","toString","substring","QAQuestion","customId","autoAnswer","answeringConditions","questionContent","String","q","isRequired","answerType","bool","cond","creationDate","Date","getTime","aaCond","autoAnswerToJSON","ifFalse","ifTrue","answerConditionFromJSON","autoAnswerFromJSON","answerConditionToJSON","QORS","QuestionSection","duplicatingSettings","contentId","found","dupe","RootSection","questions","sections","callback","iterate","node","path","current","cont","parentPath","section","getFromPath","Error","questionId","parentSection","foundIndex","sectionId","prevPath","newPath","itemAtPath","newParentPath","oldParentPath","newParent","oldParent","removed","pos","mark","Iterator2","sectionPath","index","fetchType","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","_q","wrap","_context","prev","next","abrupt","QUESTION","SECTION","Symbol","iterator","done","t0","return","finish","t1","stop","el","startIndex","stack","rt","cloned","pop","p","shift","_i","handleSectionAdd","hasOwnProperty","dupeSettingsFromJSON","addSection","question","addQuestion","GET_FILLED_FORMS","gql","openModal","com","document","getElementById","createElement","setAttribute","body","appendChild","render","destroyModal","unmountComponentAtNode","TableFieldType","_React$Component","RangeInput","call","range","split","min","max","transformed","TIME","DATE","NUMBER","onChange","comp","parsed","parseRangeValue","handleInputChange","dateMin","dateMax","shortcuts","defaultValue","selectedDates","Component","defaultNumberRangeProps","arguments","_useState","_useState2","minValue","setMin","_useState3","_useState4","maxValue","setMax","target","placeholder","defaultTimeRangeProps","_useState5","_useState6","_useState7","_useState8","precision","MINUTE","useAmPm","newTime","toLocaleDateString","_React$Component2","ValInput","STRING","SELECT","newVal","BOOLEAN","label","def","styles","customStyles","defaultDate","formatDate","date","parseDate","str","closeOnSelection","RANGE","defaulttime","_React$Component3","SelInput","_this5","allOptions","rootOptions_","_this$props$options$S","SortedOptions","groupOptions_","defaultvalue","options_","findValue","findOption","handleChange","bind","CreateCondition","columns","dataField","text","setLiteralsSetter","setState","literalId","questionRef","comparisonOperator","comparisonValue","prevState","newIndex","n","get_new_index","_ref","forceUpdate","valueField","QuestionRef","ComparisonOperator","prop","accessProp","ComparisonValue","newComparisonValue","FollowingOperator","AND","OR","definedQuestions","isEmpty","Fragment","questions_","questionselect","selecteOption","handleDataChange","comparisionOPOptions_","valueType","allOperators","Equal","getOperatorForType","val","comparisonOpSelect","op","question_","getQuestion","qAnswerType","qOptions","comparisonValueSelect","followingOperatorOptions_","followingOperatorSelect","icon","moveLiteralUp","removeLiteral","addLiteral","CreateConditionModal","errors","primaryButtonHandler","newCondition","checkIfValid","onSubmit","message","secondaryButtonHandler","isOpen","createCondition_","createRef","isCloseButtonShown","width","maxHeight","overflow","minHeight","DIALOG_BODY","ref","DIALOG_FOOTER","DIALOG_FOOTER_ACTIONS","defaultProps","AutofillCondition","aConditions","newConditions","selected","editCondition","answerCondition","_this6","_this7","checked","changeEnabled","ifFalseOrTrue","editIfTrueFalseValue","openConditionModal","removeAutofillCondition","addAutoFillCondition","object","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","apply","source","getOwnPropertyDescriptors","defineProperties","defineProperty","setAppElement","container","base","border","isFocused","background","transition","boxShadow","control","borderColor","brandColor","valueContainer","menu","position","zIndex","menuList","singleValue","input","isSelected","DPFormItem","setIsRequired","editAppearingCondition","setAppearingCondition","setQuestionContent","setAnswerType","setOptions","autoanswer","setAutoAnswer","newId","htmlFor","handleCustomIdChange","fill","handleQuestionChange","defaultChecked","handleRequiredChange","handleAnswerTypeChange","constants","handleOptionsChange","defaultOptionType","large","openAppearingConditionModal","handleAutoFillChange","OPTION_OR_GROUP","ValueSelectOptions","GEOLOCATION","OptionsForSelect","includedInRange","OptionsForRange","AnswerTypeInput","newAnswerType","shouldDisplaySecondSelect","shouldDisplayThirdSelect","optionsForSecondSelect","OptionsForThirdSelect","handleSecondSelectChange","handleThirdSelectChange","QAAddOptions","constantNameInputRef","makeFromTextInputRef","addConstant","optionsText","addOption","newOption","changeGroupName","deleteGroup","setOptionTypeFor","assignOptionToGroup","unassignGroup","deleteOption","setValueForOption","GROUP","setCondition","idOrname","OPTION","getConstant","constantsOptions","ConstantsArray","vertical","handleImportFromConstant","inputRef","makeConstant","makeOptionsFromText","defaultType","handleGroupAssignment","handleOptionTypeChange","handleAddNewOption","handleOptionDelete","handleConditionClick","handleOptionValueChange","handleAddGroup","handleGroupUnassignment","handleGroupNameChange","handleGroupDelete","handleGroupConditionClick","QAOptionSection","nextProps","nextState","creatableOptions","option_id","_this8","handleConditionEdit","generateAddGroupInput","QAAddGroupSection","_this9","_this10","memberids","removedid","removedValue","isMulti","CONFIG","ConstantDefinitions","FormTree","handleNodeClick","nodeData","_nodePath","handleNodeCollapse","handleNodeExpand","sectionNumber","selectedNodes","expandedNodes","isExpanded","childNodes","it","getNodeFromQuestionOrSection","hasCaret","root_","contents","generateITNodeTree","onNodeClick","onNodeCollapse","onNodeExpand","ELEVATION_0","DuplicateSettings","handleQuestionRefChange","handleNumberTimesChange","handleSave","typeOptions","ELEVATION_2","DARK","handleEnabledChange","menuContainerStyle","handleTypeChange","generateValueComponent","handleCancel","setIsExpanded","paddingBottom","handleMoveUp","height","alignText","rightIcon","readablePath","questionTitle","handleDeletion","keepChildrenMounted","children","Group","align","LEFT","handleSectionNameChange","sectionName","RIGHT","handleOpenConditionSettings","SectionC","handleSectionDuplicatingSettingsChange","l","handleSectionConditionChange","childPath","handleDeleteChildSectionOrQuestion","handleSectionCustomIdChange","openConditionSettings","handleSectionClick","assign","handleDuplicatingSettingsSave","handleDuplicatingSettingsCancel","toolbarItems","Toolbar","handleItemClick","fixedToTop","handleClick","SurveyForm","activeSection","activeSectionPath","API_URL","queryName","requestBody","onErrorMessage","headers","Authorization","fetch","method","then","res","status","json","resData","catch","err","request","query","variables","formId","file","iterated","getAllEntries","startSectionPath","first","returnbag","deleteid","path_","parent","removeQuestion","removeSection","newSectionPath","newSection","onSave","handleAddSection","handleAddQuestion","handleUpOneLevel","toast","intent","SUCCESS","toasterRef","show","updateFromQuestion","union","selectedQuestion","newName","setDuplicatingSettings","moveItem","handleToolbarItemClick","handleRootNameChange","display","flexDirection","padding","marginRight","handleFormTreeNodeExpand","handleFormTreeNodeCollapse","handleFormTreeNodeClick","handleDuplicatingSettingsChange","handleSectionChange","handleDeleteQuestionOrSection","handleQuestionUpdate","GET_FORM","Save_Form","QuestionItem","fieldProps","SelectInput","radioStyle","lineHeight","FAB","placement","shape","Helper","tree","_type","makeTree","Boolean","parseFloat","answerStore","questionStore","finalResult","pendingOperator","currentResult","isLiteralValid","curr","isArray","counts","filled","required","settings","times","parseInt","apConditionRef","groupConditionRefs","rootOptionConditionRefs","autoFillConditionRefs","duplicationRef","lit","ac","ns","Set","all","from","autoFillConditions","groupConditions","rootOptionConditions","result","answer","c2","transformValueToType","c1","Greater_Than","Greater_Than_Or_Equal","Less_Than","Less_Than_Or_Equal","$getRootForm","$getRootFormId","rootId","$getFilledForms","$getState","$getValueLocationName","valueLocationName","locationName","getFilledFormById","createSelector","getRootFormById","getRootFormSection","getRootFormSectionById","getAllFilledFormIdsOfRootForm","duplicatingSetings","createCachedSelector","rid","bag","getFilledFormValues","fid","getFormValues","getQuestionById","getQuestionOptions","getSortedOptions","getDependenciesOfOptions","dependencies","getValuesOfDependencies","location","deps","vals","depValues","locationToPath","_","toPath","dep","foundValue","checkForValue","getValidOptions","evaluateCondition","getTransformedValidOptions","getAutoCompleteDataForQuestion","fids","f","trim","strength","sort","b","getRootFormOfFilledForm","validators","getNodeOfRootForm","nodeId","getNodeTypeFromId","getChildrenOfSectionFromId","getRootNodeOfFilledFormById","ff","rootForm","getDupeSettingsForSectionNode","rootNode","getDupeTimesForSectionNode","getValidQuestionsNumber","checkSection","sectionLocation","isRoot","appears","unfilled","getDupeTimes","dupeTimes","formName","startedDate","submitted","getTypeChecker","ConnectedQuestionNode","collectDependencies","autoCompleteData","isDependent","renderContext","useContext","FormRenderContext","Field","component","renderQuestion","getChild","typeChecker","iteration","hideIterationInPath","isInRootNode","newLocation","ConnectedSectionNode","getChildren","getTabbedView","defaultActiveKey","tabPosition","TabPane","tab","NotRequiredSectionPage","image","Empty","PRESENTED_IMAGE_SIMPLE","description","marginTop","renderSectionHeader","SAVE_FILLED_FORM","GET_FILLED_FORM_BY_ID","GET_ROOT_FORM","FormViewer","client","isSaveConfirmVisible","toggleSaveConfirmVisibility","saveForm","handleSubmit","mutate","mutation","success","error","SubmissionError","_error","params","URLSearchParams","search","Promise","rData","forms","formTree","handleRootFormAdd","initializeForm","completedDate","filledBy","handleFilledFormAdd","rootName","Provider","renderRootSectionHeader","spinning","visible","React","createContext","InjectedFormViewer","reduxForm","destroyOnUnmount","ConnectedFormViewer","handleAddNewForm","formValues","initialize","FormViewerW","withRouter","GET_USERS","MAKE_AVAILABLE","MAKE_UNAVAILABLE","AssignUser","useState","targetUsers","setTargetUsers","initialUsers","setInitialUsers","useQuery","usersData","usersLoading","loading","onCompleted","resultForm","assignedTo","email","formData","formLoading","useMutation","makeAvailable","makeUnavailable","onOK","newUsers","unavailTo","formIds","surveyors","u","titles","dataSource","users","targetKeys","Text","NewFormDialog","newFormName","setNewFormName","setError","onCreateNewForm","newForm","setName","formJson","saveFile","onCreationFailed","onCreationSuccess","destroyOnClose","centered","okText","Item","currentTarget","GET_FORMS","DELETE_FORMS","NonIdealFormsState","PRESENTED_IMAGE_DEFAULT","onCreateClick","Statistics","SIGN_UP","renderField","meta","touched","warning","autoComplete","top","bottom","ConnectedSignUpForm","userId","signUpType","errorPolicy","createUser","submitting","pristine","reset","signUp","submissionData","createdBy","disabled","htmlType","SignUpForm","validate","test","asyncBlurFields","UserTypes","FilterTypes","Paragraph","Typography","Users","selectedTab","isSignUpDialogOpen","filterType","ALL","handleTabChange","tabId","toggleSignUpDialog","handleAddUserClick","subTitle","extra","ADMIN","avatar","src","Content","UsersTable","filterUsersByType","justifyContent","span","Search","size","pollInterval","dataIndex","sorter","ellipsis","filteredValue","filters","onFilter","record","role","transformedData","filledFormsCount","assignedForms","pagination","pageSize","scroll","y","rowKey","_id","tabs","routeKey","deleteForm","isWizardOpen","setWizardOpen","assigningForm","setAssigningForm","onFormDeleteConfirm","toDeleteForms","itemLayout","renderItem","actions","arrowPointAtCenter","active","Meta","to","updatedAt","toLocaleTimeString","hideOnSidebar","useLocation","isSaving","setSaving","history","useHistory","replace","getFilledForms","level","custom","SubMenu","Menu","Title","SideNav","isVisible","textAlign","theme","defaultSelectedKeys","mode","SidebarMenu","items","parentRouteKey","Header","Layout","Footer","Sider","DashboardComponent","pathname","trigger","collapsible","collapsed","hasSider","alignItems","getRoutesComponents","currentPath","exact","serverURL","localServerURL","ConnectedApolloProvider","authToken","ApolloClient","uri","operation","setContext","authorization","LoginComponent","showPassword","hasError","togglePasswordHide","createSubmitFunction","customSubmit","onLoggedIn","preventDefault","clearErrors","renderEmailInput","tabIndex","prefix","renderPasswordInput","LOGIN","ConnectedLoginForm","password","login","LoginForm","clearSubmitErrors","ProtectedRoute","Route","ConnectedProtectedRoute","App","newTheme","onBeforeLift","getState","locale","ne_NP","Theme","LIGHT","window","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yZAoCaA,EAAkB,kBAsElBC,EAAgB,qBAShBC,EAAqB,0BAQrBC,EAAmB,wBAWnBC,EAAW,WAUXC,EAAS,SCjEf,SAASC,EAAcC,GAC1B,MAAO,CACHC,KAAMJ,EACNK,QAASF,G,qBChFTG,EAAYC,IAAZD,Q,yDCGKE,EAA6C,CACtDC,KAAM,GACNC,IAAK,I,2OCJF,ICgBKC,EA2BAC,ED3CCC,EAAyC,CAClDJ,KAAM,GACNC,IAAK,I,wOCcGC,K,oBAAAA,E,eAAAA,M,cA2BAC,K,YAAAA,E,eAAAA,M,KC3CL,IAAME,EAA0B,CACnCC,YAAa,GACbC,eAAgB,GAChBC,UAAW,GACXC,GAAI,GACJC,SAAU,GACVC,MAAO,GACPC,YAAaV,EAAUW,SACvBC,aAAa,ICHV,IC0FIC,ED1FEC,EAAmBC,YAA2B,CACvDvB,KDIG,WAAqE,IAAhDwB,EAA+C,uDAAvCb,EAAkBc,EAAqB,uCACvE,OAAQA,EAAOxB,MACX,KAAKJ,EAED,O,yVAAO,IAAK2B,EAAZ,GADgBC,EAAOvB,SAE3B,QACI,OAAOsB,ICTfE,UHHG,WAGa,IAFhBF,EAEe,uDAFPd,EACRe,EACe,uCACf,OAAQA,EAAOxB,MACX,KAAKP,EACD,OAAOiC,YAAQH,GAAO,SAAAI,GAClB,IAAM1B,EAAUuB,EAAOvB,QAClB0B,EAAMrB,IAAIsB,SAAS3B,EAAQa,KAC5Ba,EAAMrB,IAAIuB,KAAK5B,EAAQa,IAE3Ba,EAAMtB,KAAKJ,EAAQa,IAAMb,EAAQ6B,QAGzC,KAAKpC,EACD,IAAMO,EAAUuB,EAAOvB,QACvB,O,yVAAO,CAAP,GAAYsB,EAAZ,CAAmBlB,KAAMJ,EAAQ8B,MAAOzB,IAAK0B,OAAOC,KAAKhC,KAC7D,KAAKN,EAGL,QACI,OAAO4B,IGjBfZ,YJDG,WAAwF,IAA7DY,EAA4D,uDAApDnB,EAAyBoB,EAA2B,uCAC1F,OAAQA,EAAOxB,MACX,KAAKR,EAAL,MAC+BgC,EAAOvB,QAA1Ba,EADZ,EACYA,GAAIoB,EADhB,EACgBA,WAEZ,OAAOR,YAAQH,GAAO,SAAAI,GAClBA,EAAMtB,KAAKS,GAAMoB,EACZP,EAAMrB,IAAIsB,SAASM,EAAWpB,KAAKa,EAAMrB,IAAIuB,KAAKK,EAAWpB,OAG1E,QACI,OAAOS,IITfY,KAAMC,MAGGC,EAA6B,CACtCZ,UAAWhB,EACXV,KAAMW,EACNC,YAAaP,EACb+B,KAAM,IEdJG,EAAgB,CAClBC,IAAK,OACLC,QAASA,KAGPC,EAAmBC,YAAeJ,GFYZ,SAACf,EAAkBC,GAI3C,OAHIA,EAAOxB,OAASH,IAChB0B,EAAQc,GAELhB,EAAiBE,EAAOC,MEftBmB,EAAQC,YAAYH,GACpBI,EAAYC,YAAaH,GCSzBI,EAAkBC,aAdP,SAACzB,EAAkB0B,GACvC,MAAO,MAIgB,SAACC,GACxB,MAAO,CACHC,cAAe,WACXD,ETqFD,CACHlD,KAAMH,EACNI,aAASmD,IStFLP,EAAUQ,YAKSL,ERDxB,SAAgBC,GACnB,IAAMK,EAAkB,WAChBL,EAAME,eAAeF,EAAME,iBAGnC,OACI,oCACI,6BACI,kBAAC,IAAD,CACII,MAAO,CAAEC,SAAU,GAAIC,MAAO,SAC9BC,UAAU,UACV1D,KAAMiD,EAAMU,mBAAqB,cAAgB,YACjDC,QAAS,SAAAC,GAAC,OAAIZ,EAAMa,qBAAqBb,EAAMU,wBAGvD,6BACI,kBAAC,IAAD,CAAMC,QAAS,kBAhCVG,EAgC4BT,OA/B7CpD,EAAQ,CACJ8D,MAAO,WACPC,QAAS,qCACTC,KAHI,WAIAH,KAEJI,SANI,eADZ,IAAqBJ,GAgC8CR,MAAO,CAACE,MAAM,QAASD,SAAU,GAAIY,UAAW,YAAcpE,KAAK,gB,qBMjC3H,GAEX,WACE,SAASqE,IACP,YAAgBC,KAAMD,GAEtBC,KAAKC,SAAWC,QAuFlB,OApFA,YAAaH,EAAa,CAAC,CACzB9B,IAAK,cACLkC,MAAO,SAAqBC,GAE1B,OADAJ,KAAKC,SAAWG,EACTJ,OAER,CACD/B,IAAK,YACLkC,MAAO,WACL,IAAIE,EAAQL,KAERM,EAAS,GAIb,OAHAN,KAAKC,SAASM,SAAQ,SAAUC,EAASvC,GACvCqC,GAAU,IAAIG,OAAOxC,GAAKwC,OAAOxC,IAAQoC,EAAMJ,SAASS,OAAS,EAAIF,EAAQG,kBAAoB,OAE5FL,IAER,CACDrC,IAAK,aACLkC,MAAO,SAAoBK,GACzBR,KAAKC,SAAS1C,KAAKiD,GACnBI,QAAQC,IAAIb,KAAKC,YAElB,CACDhC,IAAK,gBACLkC,MAAO,SAAuBW,GAE5B,OADAd,KAAKC,SAASc,OAAOD,EAAc,GAC5Bd,OAER,CACD/B,IAAK,WACL+C,IAAK,WACH,OAAOhB,KAAKC,YAEZ,CAAC,CACHhC,IAAK,WACLkC,MAAO,SAAkBc,GACvB,IAAKA,EACH,OAAO,IAAIlB,EAGb,IAAImB,EAAI,IAAInB,EACRE,EAAWgB,EAAKhB,SAEpB,OADAiB,EAAEC,YAAYlB,GACPiB,IAER,CACDjD,IAAK,SACLkC,MAAO,SAAgBc,GACrB,GAAKA,EAIL,MAAO,CACLhB,SAAUmB,KAAKC,MAAMD,KAAKE,UAAUL,EAAKhB,cAG5C,CACDhC,IAAK,eACLkC,MAAO,SAAsBoB,GAC3B,IAAKA,EAAUtB,SACb,OAAO,EAGT,IAAIuB,GAAU,EAUd,OATAD,EAAUtB,SAASM,SAAQ,SAAUC,GACpB9C,OAAO+D,OAAOjB,GAASkB,OAAM,SAAUC,GACpD,OAAQ,KAAEC,MAAMD,QAIhBH,GAAU,MAGPA,IAER,CACDvD,IAAK,QACLkC,MAAO,SAAeoB,GAEpB,OADmB,IAAIxB,MAKpBA,EA3FT,GGLO,SAAS8B,GAAaC,GAC3B,GAAKA,EAIL,MAAO,CACLC,KAAMD,EAAEC,KACRC,OAAQC,GAAeH,EAAEE,SAGtB,SAASE,GAAiBJ,GAC/B,MAAO,CACLC,KAAMD,EAAEC,KACRC,OAAQH,GAAaC,EAAEE,SAGpB,SAASC,GAAeE,GAC7B,GAAKA,EAQL,MAJQ,CACNJ,KAAMI,EAAEJ,KACRC,OAAQC,GAAeE,EAAEH,SAItB,SAASI,GAAmBD,GAKjC,MAJQ,CACNJ,KAAMI,EAAEJ,KACRC,OAAQC,GAAeE,EAAEH,UHsE7B,SAAWlF,GACTA,EAAwB,GAAI,KAC5BA,EAAyB,IAAI,IAF/B,CAGGA,IAAwBA,EAAsB,KIlG1C,IAAI,GAEX,WACE,SAASuF,IACP,YAAgBrC,KAAMqC,GAEtBrC,KAAKsC,WAAa,GAClBtC,KAAKuC,eAAiB,GACtBvC,KAAKwC,QAAU,GACfxC,KAAKyC,UAAY,EACjBzC,KAAK0C,YAAc,EAkTrB,OA/SA,YAAaL,EAAe,CAAC,CAC3BpE,IAAK,YACLkC,MAAO,SAAmBwC,GACnBA,IACHA,EAAS,CACPnG,GAAI,OAASwD,KAAKyC,UAClBtC,WAAOrB,EACP8D,eAAW9D,IAIfkB,KAAKsC,WAAWK,EAAOnG,IAAMmG,EAC7B,IAAIE,EAAYF,EAAOC,UAEvB,GAAIC,EAAW,CACb,IAAIC,EAAQ9C,KAAKuC,eAAeM,GAE3BC,IACHA,EAAQ,CACNtG,GAAI,WAAawD,KAAK0C,YACtBX,KAAMc,EACNE,wBAAoBjE,EACpBkE,QAAS,CAACL,IAEZ3C,KAAKuC,eAAeM,GAAaC,EACjC9C,KAAK0C,eAGP,IAAIO,EAAqB,KAErBN,GAAUA,EAAOnG,KACnByG,EAAqBH,EAAME,QAAQE,MAAK,SAAUC,GAChD,QAAIR,GACKQ,EAAK3G,KAAOmG,EAAOnG,OAO3ByG,GACHH,EAAME,QAAQzF,KAAKoF,GAKvB,OADA3C,KAAKyC,YACEzC,OAER,CACD/B,IAAK,WACLkC,MAAO,SAAkB0C,GACvB,IAAIC,EAAQ,CACVtG,GAAI,UAAYwD,KAAK0C,YACrBX,KAAMc,GAAa,SAASpC,OAAOT,KAAK0C,aACxCK,wBAAoBjE,EACpBkE,QAAS,IAIX,OAFAhD,KAAKuC,eAAeO,EAAMf,MAAQe,EAClC9C,KAAK0C,cACEI,IAER,CACD7E,IAAK,oBACLkC,MAAO,SAA2B3D,EAAI4G,GACpC,IAAIT,EAAS3C,KAAKsC,WAAW9F,GAM7B,OAJImG,IACFA,EAAOxC,MAAQiD,GAGVpD,OAER,CACD/B,IAAK,eACLkC,MAAO,SAAsB3D,GAC3B,IAAI6G,EAAMrD,KAAKsC,WAAW9F,GAE1B,GAAI6G,EAAK,QACArD,KAAKsC,WAAW9F,GACvB,IAAIqG,EAAYQ,EAAIT,UAEpB,GAAIC,EAAW,CACb,IAAIC,EAAQ9C,KAAKuC,eAAeM,GAEhC,GAAIC,EAAO,CACT,IAAIQ,EAAMR,EAAME,QAAQO,WAAU,SAAUJ,GAC1C,OAAOA,EAAK3G,KAAOA,KAGjB8G,GAAO,GACTR,EAAME,QAAQjC,OAAOuC,EAAK,KAMlC,OAAOtD,OAER,CACD/B,IAAK,sBACLkC,MAAO,SAA6BqD,EAAWZ,GAC7C,IAAIvC,EAAQL,KAERyD,EAAgBzD,KAAKuC,eAAeK,GAEnCa,IACHA,EAAgBzD,KAAK0D,SAASd,GAC9B5C,KAAKuC,eAAekB,EAAc1B,MAAQ0B,GA6B5C,IA1BA,IAAIE,EAAQ,SAAeC,GACzB,IAAIC,EAAWL,EAAUI,GACrBjB,EAAStC,EAAMiC,WAAWuB,GAC1BC,EAAenB,EAAOC,WAAavC,EAAMkC,eAAeI,EAAOC,WAEnE,GAAIa,EAAcT,QAAQE,MAAK,SAAUC,GACvC,OAAOA,EAAK3G,KAAOqH,KAEnB,MAAO,WAIT,GAAIC,EAAc,CAChB,IAAIZ,EAAOY,EAAad,QAAQO,WAAU,SAAUJ,GAClD,OAAOA,EAAK3G,KAAOmG,EAAOnG,MAGxB0G,GAAQ,GACVY,EAAad,QAAQjC,OAAOmC,EAAM,GAItCP,EAAOC,UAAYa,EAAc1B,KACjC0B,EAAcT,QAAQzF,KAAKoF,IAGpBiB,EAAI,EAAGA,EAAIJ,EAAU9C,OAAQkD,IACzBD,EAAMC,GAKnB,OAAO5D,OAER,CACD/B,IAAK,wBACLkC,MAAO,SAA+B0D,EAAUtC,GAC9C,IAAIoB,EAAS3C,KAAKsC,WAAWuB,GAM7B,OAJIlB,IACFA,EAAOI,mBAAqBxB,GAGvBvB,OAER,CACD/B,IAAK,uBACLkC,MAAO,SAA8B0C,EAAWtB,GAC9C,IAAIuB,EAAQ9C,KAAKuC,eAAeM,GAMhC,OAJIC,IACFA,EAAMC,mBAAqBxB,GAGtBvB,OAER,CACD/B,IAAK,gBACLkC,MAAO,SAAuBnE,GAC5B,IAAI+H,EAAS/D,KAEbhE,EAAIuE,SAAQ,SAAU/D,GACpB,IAAImG,EAASoB,EAAOzB,WAAW9F,GAC3BwH,EAAgBrB,EAAOC,UAE3B,GAAID,GAAUqB,EAAe,CAC3B,IAAIC,EAAWF,EAAOxB,eAAeyB,GAErC,GAAIC,EAAU,CACZ,IAAIX,EAAMW,EAASjB,QAAQO,WAAU,SAAUJ,GAC7C,OAAOA,EAAK3G,KAAOA,KAErByH,EAASjB,QAAQjC,OAAOuC,EAAK,IAI7BX,IACFA,EAAOC,eAAY9D,QAIxB,CACDb,IAAK,kBACLkC,MAAO,SAAyB+D,EAASC,GACvC,IAAIC,EAASpE,KAET8C,EAAQ9C,KAAKuC,eAAe2B,GAC5BG,EAAcvB,EAAME,QAAQsB,KAAI,SAAUnB,GAC5C,OAAOA,EAAK3G,MAad,GAVI6H,GACFA,EAAY9D,SAAQ,SAAU/D,GAC5B,IAAImG,EAASyB,EAAO9B,WAAW9F,GAE3BmG,IACFA,EAAOC,UAAYuB,MAKrBrB,EAAO,CACTA,EAAMf,KAAOoC,EAEb,IAAII,EAAW,KAAEC,MAAM1B,UAEhB9C,KAAKuC,eAAe2B,GAC3BlE,KAAKuC,eAAe4B,GAAWI,KAGlC,CACDtG,IAAK,cACLkC,MAAO,SAAqB4B,GAC1B,IAAI0C,EAASzE,KAET8C,EAAQ9C,KAAKuC,eAAeR,GAEhC,IAAKe,EACH,OAAO9C,KAGT,IAAIqE,EAAcvB,EAAME,QAAQsB,KAAI,SAAUnB,GAC5C,OAAOA,EAAK3G,MAGV6H,GACFA,EAAY9D,SAAQ,SAAU/D,GAC5B,IAAImG,EAAS8B,EAAOnC,WAAW9F,GAE3BmG,IACFA,EAAOC,eAAY9D,aAKlBkB,KAAKuC,eAAeR,KAE5B,CACD9D,IAAK,mBACLkC,MAAO,SAA0B0D,EAAUa,GACzC,IAAIrB,EAAMrD,KAAKsC,WAAWuB,GAEtBR,IACFA,EAAI3H,KAAOgJ,EACXrB,EAAIlD,WAAQrB,KAGf,CACDb,IAAK,gBACL+C,IAAK,WACH,IAAI2D,EAAmBjH,OAAO+D,OAAOzB,KAAKsC,YAAYsC,QAAO,SAAUzB,GACrE,OAAQA,EAAKP,aAGf,MAAO,CACLiC,OAFWnH,OAAO+D,OAAOzB,KAAKuC,gBAG9BuC,YAAaH,MAGf,CAAC,CACH1G,IAAK,SACLkC,MAAO,SAAgBgC,GACrB,MAAO,CACLG,WAAYH,GAAKA,EAAEG,WAAa,KAAEyC,UAAU5C,EAAEG,YAAY,SAAU0C,GAClE,OAAOC,GAAaD,MACjB,GACLzC,eAAgBJ,GAAKA,EAAEI,eAAiB,KAAEwC,UAAU5C,EAAEI,gBAAgB,SAAUyC,GAC9E,OA4BH,SAA2B7C,GAChC,MAAO,CACL3F,GAAI2F,EAAE3F,GACNuF,KAAMI,EAAEJ,KACRgB,mBAAoB,GAAYmC,OAAO/C,EAAEY,oBACzCC,QAASb,EAAEa,QAAQsB,KAAI,SAAUnB,GAC/B,OAAO8B,GAAa9B,OAlCTgC,CAAkBH,MACtB,MAGR,CACD/G,IAAK,WACLkC,MAAO,SAAkBiF,GACvB,IAAIC,EAAI,IAAIhD,EAeZ,OAdAgD,EAAE/C,WAAa8C,EAAE9C,WAAa,KAAEyC,UAAUK,EAAE9C,YAAY,SAAU0C,GAChE,OA6BD,SAAwB7C,GAC7B,IAAIQ,EAAS,CACXC,UAAWT,EAAES,UACbG,mBAAoB,GAAYuC,SAASnD,EAAEY,oBAC3CvG,GAAI2F,EAAE3F,GACN2D,MAAOgC,EAAEhC,OAEPgC,EAAEzG,OAAMiH,EAAOjH,KAAO0G,GAAmBD,EAAEzG,OAC/C,OAAOiH,EArCM4C,CAAeP,MACnB,GACLK,EAAE9C,eAAiB6C,EAAE7C,eAAiB,KAAEwC,UAAUK,EAAE7C,gBAAgB,SAAUyC,GAS5E,MARS,CACPxI,GAAIwI,EAAExI,GACNuF,KAAMiD,EAAEjD,KACRgB,mBAAoB,GAAYuC,SAASN,EAAEjC,oBAC3CC,QAASgC,EAAEhC,QAAQsB,KAAI,SAAUnB,GAC/B,OAAOkC,EAAE/C,WAAWa,EAAK3G,WAI1B,GACE6I,MAIJhD,EA1TT,GAgVO,SAAS4C,GAAa9C,GAC3B,MAAO,CACLY,mBAAoB,GAAYmC,OAAO/C,EAAEY,oBACzCrH,KAAMyG,EAAEzG,KAAOwG,GAAiBC,EAAEzG,WAAQoD,EAC1CtC,GAAI2F,EAAE3F,GACN2D,MAAOgC,EAAEhC,MACTyC,UAAWT,EAAES,WC3VV,IAmCI4C,GAUAC,GAWAC,GC1DAC,IDuCX,SAAWH,GACTA,EAAyC,mBAAI,KAC7CA,EAA4C,sBAAI,KAChDA,EAAgC,UAAI,IACpCA,EAAmC,aAAI,IACvCA,EAA4B,MAAI,KALlC,CAMGA,KAAyBA,GAAuB,KAInD,SAAWC,GACTA,EAAmB,OAAI,SACvBA,EAAoB,QAAI,UACxBA,EAAiB,KAAI,OACrBA,EAAiB,KAAI,OACrBA,EAAmB,OAAI,SACvBA,EAAmB,OAAI,SANzB,CAOGA,KAAeA,GAAa,KAI/B,SAAWC,GACTA,EAAe,OAAI,SACnBA,EAAa,KAAI,OAFnB,CAGGA,KAAWA,GAAS,KC7DvB,SAAWC,GACTA,EAAsB,QAAI,UAC1BA,EAAqB,OAAI,SACzBA,EAAmB,KAAI,OACvBA,EAAmB,KAAI,OACvBA,EAAqB,OAAI,SACzBA,EAAoB,MAAI,QACxBA,EAAqB,OAAI,SACzBA,EAA0B,YAAI,cARhC,CASGA,KAAiBA,GAAe,KCR5B,IAAI,GAEX,WACE,SAASC,IACP,YAAgB5F,KAAM4F,GAEtB5F,KAAK6F,OAAS,GACd7F,KAAK8F,MAAQ,EA6Cf,OA1CA,YAAaF,EAAW,CAAC,CACvB3H,IAAK,cACLkC,MAAO,SAAqB4F,GAC1B,OAAO,KAAEC,UAAUhG,KAAK6F,OAAOE,MAEhC,CACD9H,IAAK,cACLkC,MAAO,SAAqB8F,GAW1B,OAVKA,IACHA,EAAW,CACTlE,KAAM,GACNvF,GAAI,YAAcwD,KAAK8F,MACvBpK,UAAMoD,EACNqB,MAAO,KAIXH,KAAK6F,OAAOI,EAASzJ,IAAMyJ,EACpBjG,OAER,CACD/B,IAAK,iBACLkC,MAAO,SAAwB3D,GAK7B,OAJIwD,KAAK6F,OAAOrJ,WACPwD,KAAK6F,OAAOrJ,GAGdwD,OAER,CACD/B,IAAK,iBACL+C,IAAK,WACH,OAAOtD,OAAO+D,OAAOzB,KAAK6F,WAE1B,CAAC,CACH5H,IAAK,WACLkC,MAAO,SAAkBgC,MACxB,CACDlE,IAAK,SACLkC,MAAO,SAAgBgC,QAGlByD,EAlDT,GCJO,SAASM,GAAmB/D,GACjC,MAAO,CACLgE,UAAWhE,EAAEgE,UACb5E,UAAW,GAAY2D,OAAO/C,EAAEZ,WAChC6E,eAAgB,CACdjG,MAAOgC,EAAEiE,eAAejG,MACxBzE,KAAMyG,EAAEiE,eAAe1K,OCsBtB,SAAS2K,GAAgBC,GAC9B,OAAOA,EAAGC,MAAM,GAAGjC,KAAI,SAAUnB,GAC/B,OAAOA,EAAO,KACbqD,KAAK,KAEH,SAASC,GAAYC,GACrBA,IACHA,EAAe,IAGjB,IAAIC,EAAK,WACP,OAA8B,OAArB,EAAIC,KAAKC,UAAsB,GAAGC,SAAS,IAAIC,UAAU,IAGpE,OAAOL,GAAgBC,IAAOA,IAAO,KAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,ICpC3F,IAAI,GAEX,WACE,SAASK,IACP,YAAgBhH,KAAMgH,GAEtBhH,KAAKL,QAAU,GACfK,KAAKiH,SAAW,GAChBjH,KAAKkH,WAAa,CAChBf,WAAW,EACXgB,oBAAqB,IAEvBnH,KAAKwC,QAAU,IAAI,GACnBxC,KAAKxD,GAAKiK,GAAY,MACtBzG,KAAKoH,gBAAkB,CACrBzH,QAAS,GACTjE,KAAMgK,GAAO2B,QA2HjB,OAvHA,YAAaL,EAAY,CAAC,CACxB/I,IAAK,qBACLkC,MAAO,SAA4BmH,GAOjC,OANAtH,KAAKuH,WAAaD,EAAEC,WACpBvH,KAAK+C,mBAAqBuE,EAAEvE,mBAC5B/C,KAAKoH,gBAAkBE,EAAEF,gBACzBpH,KAAKkH,WAAaI,EAAEJ,WACpBlH,KAAKwC,QAAU8E,EAAE9E,QACjBxC,KAAKwH,WAAaF,EAAEE,WACbxH,OAER,CACD/B,IAAK,gBACLkC,MAAO,SAAuBsH,GAE5B,OADAzH,KAAKuH,WAAaE,EACXzH,OAER,CACD/B,IAAK,wBACLkC,MAAO,SAA+BuH,GAEpC,OADA1H,KAAK+C,mBAAqB2E,EACnB1H,OAER,CACD/B,IAAK,gBACLkC,MAAO,SAAuBgC,GAE5B,OADAnC,KAAKkH,WAAa/E,EACXnC,OAER,CACD/B,IAAK,qBACLkC,MAAO,SAA4BR,GAEjC,OADAK,KAAKoH,gBAAkBzH,EAChBK,OAER,CACD/B,IAAK,kBACLkC,MAAO,SAAyBwH,GAO9B,OAHE3H,KAAK2H,aAHFA,IACiB,IAAIC,MAAOC,UAK1B7H,OAER,CACD/B,IAAK,uBACLkC,MAAO,SAA8BsH,GAOnC,OAHEzH,KAAKkH,WAAWf,UAHbsB,IACyB,EAKvBzH,OAER,CACD/B,IAAK,yBACLkC,MAAO,SAAgC2H,GAErC,OADA9H,KAAKkH,WAAWC,oBAAoB5J,KAAKuK,GAClC9H,OAER,CACD/B,IAAK,gBACLkC,MAAO,SAAuBzE,GAE5B,OADAsE,KAAKwH,WAAa9L,EACXsE,OAER,CACD/B,IAAK,aACLkC,MAAO,SAAoBkD,GAEzB,OADArD,KAAKwC,QAAUa,EACRrD,QAEP,CAAC,CACH/B,IAAK,SACLkC,MAAO,SAAgBgC,GAcrB,MAbQ,CACN3F,GAAI2F,EAAE3F,GACN+K,WAAYpF,EAAEoF,WACdxE,mBAAoB,GAAYmC,OAAO/C,EAAEY,oBACzCqE,gBAAiB,CACfzH,QAASwC,EAAEiF,gBAAgBzH,QAC3BjE,KAAMyG,EAAEiF,gBAAgB1L,MAE1BwL,WAAYa,GAAiB5F,EAAE+E,YAC/B1E,QAAS,GAAc0C,OAAO/C,EAAEK,SAChCgF,WAAYrF,EAAEqF,WAAatF,GAAiBC,EAAEqF,iBAAc1I,EAC5DmI,SAAU9E,EAAE8E,YAIf,CACDhJ,IAAK,WACLkC,MAAO,SAAkBgC,GACvB,IAAImF,EAAI,IAAIN,EAmBZ,OAlBAM,EAAE9K,GAAK2F,EAAE3F,GACT8K,EAAEC,WAAapF,EAAEoF,WACjBD,EAAEvE,mBAAqB,GAAYuC,SAASnD,EAAEY,oBAC9CuE,EAAEF,gBAAkBjF,EAAEiF,gBAElBjF,EAAEK,UACJ8E,EAAE9E,QAAU,GAAc8C,SAASnD,EAAEK,UAGnCL,EAAEqF,aACJF,EAAEE,WAAapF,GAAmBD,EAAEqF,aAGlCrF,EAAE+E,aACJI,EAAEJ,WAqCH,SAA4B/E,GAOjC,MANQ,CACNgE,UAAWhE,EAAEgE,UACbgB,oBAAqBhF,EAAEgF,oBAAoB7C,KAAI,SAAUnB,GACvD,OAxBC,SAAiChB,GAMtC,MALQ,CACNZ,UAAW,GAAY+D,SAASnD,EAAEZ,WAClCyG,QAAS7F,EAAE6F,QACXC,OAAQ9F,EAAE8F,QAoBDC,CAAwB/E,OAzCdgF,CAAmBhG,EAAE+E,aAGtC/E,EAAE8E,SAAWK,EAAEL,UAAY,GACpBK,MAIJN,EAzIT,GA0JO,SAASe,GAAiB5F,GAC/B,GAAKA,EAIL,MAAO,CACLgE,UAAWhE,EAAEgE,UACbgB,oBAAqBhF,EAAEgF,oBAAoB7C,KAAI,SAAUnB,GACvD,OAvBC,SAA+BhB,GACpC,MAAO,CACLZ,UAAW,GAAY2D,OAAO/C,EAAEZ,WAChC0G,OAAQ9F,EAAE8F,OACVD,QAAS7F,EAAE6F,SAmBFI,CAAsBjF,OCrK5B,IC2eIkF,GD3eA,GAEX,WACE,SAASC,IACP,YAAgBtI,KAAMsI,GAEtBtI,KAAKiH,SAAW,GAChBjH,KAAKxD,GAAKiK,GAAY,OACtBzG,KAAKuI,oBAAsB,CACzBhH,eAAWzC,EACXqH,WAAW,EACXC,eAAgB,CACdjG,MAAO,GACPzE,KAAM,WAGVsE,KAAKL,QAAU,GACfK,KAAK+C,mBAAqB,IAAI,GAgEhC,OA7DA,YAAauF,EAAiB,CAAC,CAC7BrK,IAAK,QACLkC,MAAO,SAAe3D,GAEpB,OADAwD,KAAKxD,GAAKA,EACHwD,OAER,CACD/B,IAAK,UACLkC,MAAO,SAAiB4B,GAEtB,OADA/B,KAAK+B,KAAOA,EACL/B,OAER,CACD/B,IAAK,aACLkC,MAAO,SAAoBR,GAEzB,OADAK,KAAKL,QAAUA,EACRK,OAER,CACD/B,IAAK,aACLkC,MAAO,SAAoBR,GAEzB,OADAK,KAAKL,QAAQpC,KAAKoC,GACXK,OAER,CACD/B,IAAK,gBACLkC,MAAO,SAAuBqI,GAC5B,IAAIC,EAAQzI,KAAKL,QAAQ4D,WAAU,SAAUJ,GAC3C,OAAOA,EAAK3G,KAAOgM,KAGjBC,GAAS,GACXzI,KAAKL,QAAQoB,OAAO0H,EAAO,KAG9B,CACDxK,IAAK,yBACLkC,MAAO,SAAgCuI,GAErC,OADA1I,KAAKuI,oBAAsBG,EACpB1I,QAEP,CAAC,CACH/B,IAAK,SACLkC,MAAO,SAAgBgC,GACrB,MAAO,CACLJ,KAAMI,EAAEJ,KACRvF,GAAI2F,EAAE3F,GACNuG,mBAAoB,GAAYmC,OAAO/C,EAAEY,oBACzCkE,SAAU9E,EAAE8E,SACZtH,QAASwC,EAAExC,QAAQ2E,KAAI,SAAUnB,GAC/B,OAAIA,aAAgBmF,EACXA,EAAgBpD,OAAO/B,GACrBA,aAAgB,GAClB,GAAW+B,OAAO/B,QADpB,KAIToF,oBAAqBrC,GAAmB/D,EAAEoG,0BAKzCD,EA/ET,G,oBCCW,GAEX,WACE,SAASK,IACP,YAAgB3I,KAAM2I,GAEtB3I,KAAK4I,UAAY,GACjB5I,KAAK6I,SAAW,GAChB7I,KAAKL,QAAU,GACfK,KAAK+B,KAAO,GACZ/B,KAAKxD,GAAKiK,GAAY,SA4dxB,OAzdA,YAAakC,EAAa,CAAC,CACzB1K,IAAK,UACLkC,MAAO,SAAiB4B,GAEtB,OADA/B,KAAK+B,KAAOA,EACL/B,OAER,CACD/B,IAAK,cACLkC,MAAO,SAAqB2I,IACZ,SAASC,EAAQC,EAAMC,GACnC,IAAK,IAAIrF,EAAI,EAAGA,EAAIoF,EAAKrJ,QAAQe,OAAQkD,IAAK,CAC5C,IAAIsF,EAAUF,EAAKrJ,QAAQiE,GAE3B,GAAIsF,EAAS,CACX,IAAIC,EAAOL,EAASI,EAASD,EAAKxI,OAAOmD,GAAIoF,GAEzCE,aAAmB,KAAoB,iBAAMC,KAAkB,IAATA,IACxDJ,EAAQG,EAASD,EAAKxI,OAAOmD,MAMrCmF,CAAQ/I,KAAM,CAAC,MAEhB,CACD/B,IAAK,cACLkC,MAAO,SAAqBiJ,EAAY9B,GACjCA,IACHA,EAAI,CAAC,IAAI,KAKX,IAFA,IAAI+B,EAAUV,EAAYW,YAAYF,EAAY,CAACpJ,OAE1C4D,EAAI,EAAGA,EAAI0D,EAAE5G,OAAQkD,IAAK,CACjC,IAAIsF,EAAU5B,EAAE1D,GAEhB,GAAI5D,KAAK4I,UAAUM,EAAQ1M,IACzB,MAAM,IAAI+M,MAAM,wBAGlBvJ,KAAK4I,UAAUM,EAAQ1M,IAAM0M,GAEzBG,GAAaA,aAAmB,IAClCA,EAAQ1J,QAAQpC,KAAK2L,GAIzB,OAAOlJ,OAER,CACD/B,IAAK,aACLkC,MAAO,SAAoBiJ,EAAY9B,GAChCA,IACHA,EAAI,CAAC,IAAI,KAKX,IAFA,IAAI+B,EAAUV,EAAYW,YAAYF,EAAY,CAACpJ,OAE1C4D,EAAI,EAAGA,EAAI0D,EAAE5G,OAAQkD,IAAK,CACjC,IAAIsF,EAAU5B,EAAE1D,GAEhB,GAAI5D,KAAK4I,UAAUM,EAAQ1M,IACzB,MAAM,IAAI+M,MAAM,uBAGlBvJ,KAAK6I,SAASK,EAAQ1M,IAAM0M,GAExBG,GAAaA,aAAmB,IAClCA,EAAQ1J,QAAQpC,KAAK2L,GAIzB,OAAOlJ,OAER,CACD/B,IAAK,iBACLkC,MAAO,SAAwBqJ,EAAYP,GACzC,IAAIQ,EAAgBd,EAAYW,YAAYL,EAAK1C,MAAM,EAAG0C,EAAKvI,OAAS,GAAI,CAACV,OAE7E,GAAIyJ,KAAmBA,aAAyB,IAAa,CAC3D,IAAIC,EAAaD,EAAc9J,QAAQ4D,WAAU,SAAUJ,GACzD,OAAOA,EAAK3G,KAAOgN,KAGjBE,GAAc,IAChBD,EAAc9J,QAAQoB,OAAO2I,EAAY,UAClC1J,KAAK4I,UAAUY,IAI1B,OAAOxJ,OAER,CACD/B,IAAK,gBACLkC,MAAO,SAAuBwJ,EAAWV,GACvC,IAAIQ,EAAgBd,EAAYW,YAAYL,EAAK1C,MAAM,EAAG0C,EAAKvI,OAAS,GAAI,CAACV,OAE7E,GAAIyJ,KAAmBA,aAAyB,IAAa,CAC3D,IAAIC,EAAaD,EAAc9J,QAAQ4D,WAAU,SAAUJ,GACzD,OAAOA,EAAK3G,KAAOmN,KAGjBD,GAAc,IAChBD,EAAc9J,QAAQoB,OAAO2I,EAAY,UAClC1J,KAAK6I,SAASc,IAIzB,OAAO3J,OAER,CACD/B,IAAK,WACLkC,MAAO,SAAkByJ,EAAUC,GACjC,IAAIC,EAAanB,EAAYW,YAAYM,EAAU,CAAC5J,OAChD+J,EAAgBF,EAAQtD,MAAM,EAAGsD,EAAQnJ,OAAS,GAClDsJ,EAAgBJ,EAASrD,MAAM,EAAGqD,EAASlJ,OAAS,GACpDuJ,EAAYtB,EAAYW,YAAYS,EAAe,CAAC/J,OACpDkK,EAAYvB,EAAYW,YAAYU,EAAe,CAAChK,OAExD,GAAIkK,GAAaD,GAAaH,EAAY,CACxC,IAAIJ,EAAaQ,EAAUvK,QAAQ4D,WAAU,SAAUJ,GACrD,OAAOA,EAAK3G,KAAOsN,EAAWtN,MAGhC,GAAIkN,GAAc,KAAOQ,aAAqB,IAAa,CACzD,IAAIC,EAAUD,EAAUvK,QAAQoB,OAAO2I,EAAY,GAEnD,KAAMO,aAAqB,IAAa,CACtC,IAAIG,EAAMP,EAAQA,EAAQnJ,OAAS,GAE/ByJ,EAAQ,aAAc,GACxBF,EAAUtK,QAAQoB,OAAOqJ,EAAK,EAAGpK,KAAK6I,SAASsB,EAAQ,GAAG3N,KACjD2N,EAAQ,aAAc,IAC/BF,EAAUtK,QAAQoB,OAAOqJ,EAAK,EAAGpK,KAAK4I,UAAUuB,EAAQ,GAAG3N,KAI/D,OAAOwD,SAIZ,CACD/B,IAAK,YACLkC,MAEA,KAAoBkK,MAAK,SAASC,EAAUC,EAAaC,EAAOC,GAC9D,IAAIpB,EAASH,EAASwB,EAA2BC,EAAmBC,EAAgBC,EAAWC,EAAOxD,EAAGyD,EAA4BC,EAAoBC,EAAiBC,EAAYC,EAAQC,EAE9L,OAAO,KAAoBC,MAAK,SAAoBC,GAClD,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EACH,GAA6B,IAAvBjB,EAAY7J,OAAe,CAC/B4K,EAASE,KAAO,EAChB,MAGF,OAAOF,EAASG,OAAO,UAAU,GAEnC,KAAK,EAGH,KAFApC,EAAUV,EAAYW,YAAYiB,EAAa,CAACvK,SAE7BqJ,aAAmB,GAAc,CAClDiC,EAASE,KAAO,GAChB,MAGJ,KAAK,EACH,KAAMhB,EAAQnB,EAAQ1J,QAAQe,QAAS,CACrC4K,EAASE,KAAO,GAChB,MAKF,MAFAtC,EAAUG,EAAQ1J,QAAQ6K,cAED,IAAa,CACpCc,EAASE,KAAO,GAChB,MAGF,GAAMf,IAAcpC,GAAKqD,UAAajB,EAAY,CAChDa,EAASE,KAAO,GAChB,MAIF,OADAF,EAASE,KAAO,GACT,CACLvC,KAAMsB,EAAY9J,OAAO+J,GACzBvJ,KAAMiI,GAGV,KAAK,GACHsB,IACAc,EAASE,KAAO,GAChB,MAEF,KAAK,GACH,KAAMtC,aAAmB,IAAkB,CACzCoC,EAASE,KAAO,GAChB,MAGF,GAAMf,IAAcpC,GAAKsD,SAAYlB,EAAY,CAC/Ca,EAASE,KAAO,GAChB,MAIF,OADAF,EAASE,KAAO,GACT,CACLvC,KAAMsB,EAAY9J,OAAO+J,GACzBvJ,KAAMiI,GAGV,KAAK,GACHsB,IACAE,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiB9L,EACjBwM,EAASC,KAAO,GAChBV,EAAY7K,KAAKsK,UAAUC,EAAY9J,OAAO+J,GAAQ,EAAGC,GAAWmB,OAAOC,YAE7E,KAAK,GACH,GAAInB,GAA6BI,EAAQD,EAAUW,QAAQM,KAAM,CAC/DR,EAASE,KAAO,GAChB,MAKF,OAFAlE,EAAIwD,EAAM3K,MACVmL,EAASE,KAAO,GACTlE,EAET,KAAK,GACHoD,GAA4B,EAC5BY,EAASE,KAAO,GAChB,MAEF,KAAK,GACHF,EAASE,KAAO,GAChB,MAEF,KAAK,GACHF,EAASC,KAAO,GAChBD,EAASS,GAAKT,EAAgB,MAAE,IAChCX,GAAoB,EACpBC,EAAiBU,EAASS,GAE5B,KAAK,GACHT,EAASC,KAAO,GAChBD,EAASC,KAAO,GAEXb,GAAiD,MAApBG,EAAUmB,QAC1CnB,EAAUmB,SAGd,KAAK,GAGH,GAFAV,EAASC,KAAO,IAEXZ,EAAmB,CACtBW,EAASE,KAAO,GAChB,MAGF,MAAMZ,EAER,KAAK,GACH,OAAOU,EAASW,OAAO,IAEzB,KAAK,GACH,OAAOX,EAASW,OAAO,IAEzB,KAAK,GACHX,EAASE,KAAO,EAChB,MAEF,KAAK,GACH,KAAMjB,GAAeA,EAAY7J,OAAS,GAAI,CAC5C4K,EAASE,KAAO,GAChB,MAGFhB,EAAQD,EAAYA,EAAY7J,OAAS,GAAK,EAC9CqK,GAA6B,EAC7BC,GAAqB,EACrBC,OAAkBnM,EAClBwM,EAASC,KAAO,GAChBL,EAAalL,KAAKsK,UAAUC,EAAaC,EAAOC,GAAWmB,OAAOC,YAEpE,KAAK,GACH,GAAId,GAA8BI,EAASD,EAAWM,QAAQM,KAAM,CAClER,EAASE,KAAO,GAChB,MAKF,OAFAJ,EAAKD,EAAOhL,MACZmL,EAASE,KAAO,GACTJ,EAET,KAAK,GACHL,GAA6B,EAC7BO,EAASE,KAAO,GAChB,MAEF,KAAK,GACHF,EAASE,KAAO,GAChB,MAEF,KAAK,GACHF,EAASC,KAAO,GAChBD,EAASY,GAAKZ,EAAgB,MAAE,IAChCN,GAAqB,EACrBC,EAAkBK,EAASY,GAE7B,KAAK,GACHZ,EAASC,KAAO,GAChBD,EAASC,KAAO,GAEXR,GAAmD,MAArBG,EAAWc,QAC5Cd,EAAWc,SAGf,KAAK,GAGH,GAFAV,EAASC,KAAO,IAEXP,EAAoB,CACvBM,EAASE,KAAO,GAChB,MAGF,MAAMP,EAER,KAAK,GACH,OAAOK,EAASW,OAAO,IAEzB,KAAK,GACH,OAAOX,EAASW,OAAO,IAEzB,KAAK,GACH,OAAOX,EAASG,OAAO,UAAU,GAEnC,KAAK,GACL,IAAK,MACH,OAAOH,EAASa,UAGrB7B,EAAWtK,KAAM,CAAC,CAAC,GAAI,GAAI,GAAI,IAAK,CAAC,GAAG,CAAE,GAAI,IAAK,CAAC,GAAI,GAAI,GAAI,IAAK,CAAC,GAAG,CAAE,GAAI,WAElF,CAAC,CACH/B,IAAK,cACLkC,MAAO,SAAqB8I,EAAMzL,GAChC,IAAI4O,EAAK5O,EAAKyL,EAAK,IAEnB,OAAoB,IAAhBA,EAAKvI,OACA0L,EAGLA,EAAGzM,QACEgJ,EAAYW,YAAYL,EAAK1C,MAAM,GAAI6F,EAAGzM,cADnD,IAID,CACD1B,IAAK,UACLkC,MAAO,SAAiB3C,EAAM+M,EAAa8B,EAAY5B,GACrD,IAAI6B,EAAQ,GACRC,EAAK,GACLC,EAASjC,EAAYhE,MAAM,GAC/B+F,EAAM/O,KAAK,CACT0L,KAAMsB,EACN8B,WAAYA,IAGd,IAAK,IAAIzI,EAAI,EAAGA,EAAI2G,EAAY7J,OAAS,EAAGkD,IAC1C0I,EAAM/O,KAAK,CACT0L,KAAMuD,EAAOjG,MAAM,EAAGiG,EAAO9L,OAAS,GACtC2L,WAAYG,EAAOA,EAAO9L,OAAS,GAAK,IAE1C8L,EAAOC,MAGT,KAAOH,EAAM5L,OAAS,GAAG,CACvB,IAAIgM,EAAIJ,EAAMK,QAEd,GAAID,EAAG,CACL,IAAIrD,EAAUV,EAAYW,YAAYoD,EAAEzD,KAAM,CAACzL,IAE/C,GAAI6L,EACF,IAAK,IAAIuD,EAAKF,EAAEL,WAAYO,EAAKvD,EAAQ1J,QAAQe,OAAQkM,IAAM,CAC7D,IAAIzJ,EAAOkG,EAAQ1J,QAAQiN,GAEvBzJ,aAAgB,GACbsH,GAAaA,IAAcpC,GAAKqD,UACnCa,EAAGhP,KAAK,CACN0L,KAAMyD,EAAEzD,KAAKxI,OAAOmM,GACpB3L,KAAMkC,KAILsH,GAAaA,IAAcpC,GAAKsD,SACnCY,EAAGhP,KAAK,CACN0L,KAAMyD,EAAEzD,KAAKxI,OAAOmM,GACpB3L,KAAMkC,IAIVmJ,EAAM/O,KAAK,CACT0L,KAAMyD,EAAEzD,KAAKxI,OAAOmM,GACpBP,WAAY,OAQxB,OAAOE,IAER,CACDtO,IAAK,SACLkC,MAAO,SAAgBgC,GAYrB,MAXQ,CACN3F,GAAI2F,EAAE3F,GACNuF,KAAMI,EAAEJ,KACRpC,QAASwC,EAAExC,QAAQ2E,KAAI,SAAUnB,GAC/B,OAAIA,aAAgB,GACX,GAAgB+B,OAAO/B,GACrBA,aAAgB,GAClB,GAAW+B,OAAO/B,QADpB,QAOZ,CACDlF,IAAK,WACLkC,MAAO,SAAkBgC,GACvB,IAAIkD,EAAI,IAAIsD,EACZtD,EAAE7I,GAAK2F,EAAE3F,GACT6I,EAAEtD,KAAOI,EAAEJ,KACX,IAAIkH,EAAO,CAAC,GAER4D,EAAmB,SAASA,EAAiB1K,EAAGiH,EAAYoB,GAC9D,GAAIrI,EAAE2K,eAAe,WAAY,CAC/B,IAAIzD,EAAU,IAAI,GAClBA,EAAQ7M,GAAK2F,EAAE3F,GACf6M,EAAQtH,KAAOI,EAAEJ,KACjBsH,EAAQpC,SAAW9E,EAAE8E,UAAY,GAC7B9E,EAAE8E,WAAUoC,EAAQpC,SAAW9E,EAAE8E,UAEjC9E,EAAEY,qBACJsG,EAAQtG,mBAAqB,GAAYuC,SAASnD,EAAEY,qBAGtDsG,EAAQd,oBJ/cX,SAA8BpG,GASnC,MARQ,CACNgE,UAAWhE,EAAEgE,UACbC,eAAgB,CACdjG,MAAOgC,EAAEiE,eAAejG,MACxBzE,KAAMyG,EAAEiE,eAAe1K,MAEzB6F,UAAW,GAAY+D,SAASnD,EAAEZ,YIwcEwL,CAAqB5K,EAAEoG,qBACrDlD,EAAE2H,WAAW5D,EAAY,CAACC,IAC1BlH,EAAExC,QAAQY,SAAQ,SAAU4C,EAAMS,GAChC,OAAOiJ,EAAiB1J,EAAMiG,EAAW3I,OAAO+J,GAAQ5G,UAErD,CACL,IAAIqJ,EAAW,GAAW3H,SAASnD,GACnCkD,EAAE6H,YAAY9D,EAAY,CAAC6D,MAU/B,OANI9K,EAAExC,SACJwC,EAAExC,QAAQY,SAAQ,SAAU4C,EAAMqH,GAChC,OAAOqC,EAAiB1J,EAAM8F,EAAMuB,MAIjCnF,MAIJsD,EApeT,IAweA,SAAWN,GACTA,EAAKA,EAAe,SAAI,GAAK,WAC7BA,EAAKA,EAAc,QAAI,GAAK,UAF9B,CAGGA,KAASA,GAAO,K,qUCjfnB,IAAM8E,GAAmBC,KAAH,M,uLCJf,SAASC,GAAUC,GACxB,IAAIlB,EAAKmB,SAASC,eAAe,YAE5BpB,KACHA,EAAKmB,SAASE,cAAc,QACzBC,aAAa,KAAM,YACtBH,SAASI,KAAKC,YAAYxB,IAG5B,IAASyB,OAAOP,EAAKlB,GAEhB,SAAS0B,KACd,IAAI1B,EAAKmB,SAASC,eAAe,YAC7BpB,GAAI,IAAS2B,uBAAuB3B,G,sBCdnC,SAAS,GAAY1F,GACrBA,IAAcA,EAAe,IAElC,IAAIC,EAAK,WACP,OAA8B,OAArB,EAAIC,KAAKC,UAAsB,GAAGC,SAAS,IAAIC,UAAU,IAGpE,OAAOL,GAAgBC,IAAOA,IAAO,KAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,I,ICM9FqH,G,wCCAO,GAEX,SAAUC,GAGR,SAASC,EAAWvP,GAClB,IAAI0B,EAMJ,OAJA,YAAgBL,KAAMkO,IAEtB7N,EAAQ,YAA2BL,KAAM,YAAgBkO,GAAYC,KAAKnO,KAAMrB,KAC1E1B,MAAQ,GACPoD,EAkFT,OA3FA,YAAU6N,EAAYD,GAYtB,YAAaC,EAAY,CAAC,CACxBjQ,IAAK,kBACLkC,MAAO,SAAyBiO,GAC9B,IAAIhJ,EAAIgJ,EAAMC,MAAM,KACpB,MAAO,CACLC,IAAKlJ,EAAE,GACPmJ,IAAKnJ,EAAE,MAGV,CACDnH,IAAK,oBACLkC,MAAO,SAA2Bc,GAChC,IAAIuN,EAAcvN,EAAKqN,IAAM,IAAMrN,EAAKsN,IAExC,OAAQvO,KAAKrB,MAAMjD,MAAQsE,KAAKrB,MAAMjD,KAAKqG,MAEzC,KAAK4D,GAAa8I,KAIlB,KAAK9I,GAAa+I,KAIlB,KAAK/I,GAAagJ,OAIlB,QACM3O,KAAKrB,MAAMiQ,UAAU5O,KAAKrB,MAAMiQ,SAASJ,MAIlD,CACDvQ,IAAK,SACLkC,MAAO,WACL,IAAI4D,EAAS/D,KAET6O,EAAO,KACPnT,EAAOsE,KAAKrB,MAAMjD,KAAOsE,KAAKrB,MAAMjD,KAAKqG,UAAOjD,EAChDgQ,EAAS9O,KAAK+O,gBAAgB/O,KAAKrB,MAAMwB,OAE7C,OAAQzE,GACN,KAAKiK,GAAa8I,KAChBI,EAAO,IAAMpB,cAAc,GAAW,CACpCW,MAAOU,EACPF,SAAU5O,KAAKgP,oBAEjB,MAEF,KAAKrJ,GAAa+I,KAChB,IAAIO,EAAUH,EAAOR,IAAM,IAAI1G,KAAKkH,EAAOR,UAAOxP,EAC9CoQ,EAAUJ,EAAOP,IAAM,IAAI3G,KAAKkH,EAAOP,UAAOzP,EAClD+P,EAAO,IAAMpB,cAAc,KAAiB,CAC1C0B,WAAW,EACXC,aAAc,CAACH,EAASC,GACxBN,SAAU,SAAkBS,GAC1B,OAAOtL,EAAOiL,kBAAkB,CAC9BV,IAAKe,EAAc,GAAKA,EAAc,GAAGvI,WAAa,GACtDyH,IAAKc,EAAc,GAAKA,EAAc,GAAGvI,WAAa,QAI5D,MAEF,KAAKnB,GAAagJ,OAChBE,EAAO,IAAMpB,cAAc,GAAa,CACtCW,MAAOU,EACPF,SAAU,SAAkBxJ,GAC1B,OAAOrB,EAAOiL,qBAMtB,OAAOH,MAIJX,EA5FT,CA6FE,IAAMoB,WACJC,GAA0B,CAC5BnB,MAAO,CACLE,IAAK,GACLC,IAAK,IAEPK,SAAU,cAGR,GAAc,WAChB,IAAIjQ,EAAQ6Q,UAAU9O,OAAS,QAAsB5B,IAAjB0Q,UAAU,GAAmBA,UAAU,GAAKD,GAE5EE,EAAY,mBAAS9Q,EAAQA,EAAMyP,MAAME,IAAM,IAC/CoB,EAAa,YAAeD,EAAW,GACvCE,EAAWD,EAAW,GACtBE,EAASF,EAAW,GAEpBG,EAAa,mBAASlR,EAAQA,EAAMyP,MAAMG,IAAM,IAChDuB,EAAa,YAAeD,EAAY,GACxCE,EAAWD,EAAW,GACtBE,EAASF,EAAW,GAExB,OAAO,IAAMrC,cAAc,KAAa,KAAM,IAAMA,cAAc,QAAS,CACzErO,UAAW,eACXgQ,aAAczQ,GAASA,EAAMyP,MAAME,KAAO3P,EAAMyP,MAAME,IAAIxH,WAC1D8H,SAAU,SAAkBrP,GAC1BqQ,EAAOrQ,EAAE0Q,OAAO9P,OACZxB,GAASA,EAAMiQ,UAAUjQ,EAAMiQ,SAAS,CAC1CN,IAAKqB,EACLpB,IAAKwB,KAGTG,YAAa,UACb1T,GAAI,kBACJd,KAAM,WACJ,IAAM+R,cAAc,KAAS,MAAO,IAAMA,cAAc,QAAS,CACnErO,UAAW,eACXgQ,aAAczQ,GAASA,EAAMyP,MAAMG,KAAO5P,EAAMyP,MAAMG,IAAIzH,WAC1D8H,SAAU,SAAkBrP,GAC1ByQ,EAAOzQ,EAAE0Q,OAAO9P,OACZxB,GAASA,EAAMiQ,UAAUjQ,EAAMiQ,SAAS,CAC1CN,IAAKqB,EACLpB,IAAKwB,KAGTG,YAAa,UACb1T,GAAI,kBACJd,KAAM,aAINyU,GAAwB,CAC1B/B,MAAO,CACLE,IAAK,gEACLC,IAAK,iEAEPK,SAAU,cAGR,GAAY,WACd,IAAIjQ,EAAQ6Q,UAAU9O,OAAS,QAAsB5B,IAAjB0Q,UAAU,GAAmBA,UAAU,GAAKW,GAE5EC,EAAa,mBAASzR,EAAQA,EAAMyP,MAAME,SAAMxP,GAChDuR,EAAa,YAAeD,EAAY,GACxCT,EAAWU,EAAW,GACtBT,EAASS,EAAW,GAEpBC,EAAa,mBAAS3R,EAAQA,EAAMyP,MAAMG,SAAMzP,GAChDyR,EAAa,YAAeD,EAAY,GACxCP,EAAWQ,EAAW,GACtBP,EAASO,EAAW,GAIxB,OAFA3P,QAAQC,IAAIkP,GACZnP,QAAQC,IAAI8O,GACL,IAAMlC,cAAc,KAAa,CACtCrO,UAAW,YACV,IAAMqO,cAAc,KAAY,CACjC+C,UAAW,KAAcC,OACzBC,SAAS,EACTtB,aAAcO,EAAW,IAAI/H,KAAK+H,QAAY7Q,EAC9C8P,SAAU,SAAkB+B,GAC1Bf,EAAOe,EAAQC,sBACXjS,EAAMiQ,UAAUjQ,EAAMiQ,SAAS,CACjCN,IAAKqB,EACLpB,IAAKwB,OAGP,IAAMtC,cAAc,KAAS,MAAO,IAAMA,cAAc,KAAY,CACtE+C,UAAW,KAAcC,OACzBC,SAAS,EACTtB,aAAcW,EAAW,IAAInI,KAAKmI,QAAYjR,EAC9C8P,SAAU,SAAkB+B,GAC1BX,EAAOW,EAAQC,sBACfjS,EAAMiQ,SAAS,CACbN,IAAKqB,EACLpB,IAAKwB,SAMF,GAEX,SAAUc,GAkBR,SAASC,EAASnS,GAChB,IAAIyF,EAMJ,OAJA,YAAgBpE,KAAM8Q,IAEtB1M,EAAS,YAA2BpE,KAAM,YAAgB8Q,GAAU3C,KAAKnO,KAAMrB,KACxE1B,MAAQ,GACRmH,EA4HT,OApJA,YAAU0M,EAAUD,GAEpB,YAAaC,EAAU,KAAM,CAAC,CAC5B7S,IAAK,eACL+C,IAAK,WACH,MAAO,CACLoO,aAAc,GACdR,SAAU,SAAkBrP,GAC1BqB,QAAQC,IAAItB,IAEd7D,KAAM,CACJqG,KAAM4D,GAAaoL,aAgB3B,YAAaD,EAAU,CAAC,CACtB7S,IAAK,SACLkC,MAAO,WACL,IAAIsE,EAASzE,KAET6O,EAAO,KAEX,OAAQ7O,KAAKrB,MAAMjD,KAAKqG,MACtB,KAAK4D,GAAagJ,OAChBE,EAAO,IAAMpB,cAAc,KAAY,CACrC2B,aAAcpP,KAAKrB,MAAMyQ,aACzBhQ,UAAW,eACX1D,KAAM,SACNkT,SAAU,SAAkBrP,GACtBkF,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzO,MAAOZ,EAAE0Q,OAAO9P,WAItB,MAEF,KAAKwF,GAAaqL,OAChBnC,EAAO,IAAMpB,cAAc,GAAU,CACnC/R,KAAMsE,KAAKrB,MAAMjD,KAAKsG,OACtBoN,aAAcpP,KAAKrB,MAAMyQ,aACzB5M,QAASxC,KAAKrB,MAAM6D,QACpBoM,SAAU,SAAkBqC,GACtBxM,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAASqC,MAIrD,MAEF,KAAKtL,GAAauL,QAChB,IAAI7N,EAAM,CAAC,CACTlD,MAAO,OACPgR,MAAO,OACN,CACDhR,MAAO,QACPgR,MAAO,OAELC,EAAM/N,EAAIH,MAAK,SAAUC,GAC3B,OAAOA,EAAKhD,QAAUsE,EAAO9F,MAAMyQ,gBAErCP,EAAO,IAAMpB,cAAc,KAAQ,CACjC4D,OAAQC,GACRlC,aAAcgC,EACd5O,QAASa,EACTuL,SAAU,SAAkBqC,GACtBxM,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzO,MAAO8Q,EAAO9Q,WAIpB,MAEF,KAAKwF,GAAa+I,KAChB,IAAI6C,EAAcvR,KAAKrB,MAAMyQ,aAAe,IAAIxH,KAAK5H,KAAKrB,MAAMyQ,mBAAgBtQ,EAChF+P,EAAO,IAAMpB,cAAc,KAAW,CACpC+D,WAAY,SAAoBC,GAC9B,OAAOA,EAAKb,sBAEdc,UAAW,SAAmBC,GAC5B,OAAO,IAAI/J,KAAK+J,IAElBC,kBAAkB,EAClBxC,aAAcmC,EACd3C,SAAU,SAAkBrP,GACtBkF,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzO,MAAOZ,EAAEqR,0BAIf,MAEF,KAAKjL,GAAakM,MACZ7R,KAAKrB,MAAMjD,KAAKsG,SAClB6M,EAAO,IAAMpB,cAAc,GAAY,CACrCtN,MAAOH,KAAKrB,MAAMyQ,aAClB1T,KAAMsE,KAAKrB,MAAMjD,KAAKsG,OACtB4M,SAAU,SAAkBrP,GACtBkF,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzO,MAAOZ,QAMf,MAEF,KAAKoG,GAAaoL,OAChBlC,EAAO,IAAMpB,cAAc,KAAY,CACrCrO,UAAW,eACX1D,KAAM,OACN0T,aAAcpP,KAAKrB,MAAMyQ,aACzBR,SAAU,SAAkBrP,GACtBkF,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzO,MAAOZ,EAAE0Q,OAAO9P,WAItB,MAEF,KAAKwF,GAAa8I,KAChB,IAAIqD,EAAc9R,KAAKrB,MAAMyQ,aAAe,IAAIxH,KAAK5H,KAAKrB,MAAMyQ,mBAAgBtQ,EAChF+P,EAAO,IAAMpB,cAAc,KAAY,CACrC+C,UAAW,KAAcC,OACzBC,SAAS,EACTtB,aAAc0C,EACdlD,SAAU,SAAkB+B,GACtBlM,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzO,MAAOwQ,EAAQ7J,gBAMzB,OAAO+H,MAIJiC,EArJT,CAsJE,IAAMxB,WACG,GAEX,SAAUyC,GAGR,SAASC,EAASrT,GAChB,IAAIsT,EAMJ,OAJA,YAAgBjS,KAAMgS,IAEtBC,EAAS,YAA2BjS,KAAM,YAAgBgS,GAAU7D,KAAKnO,KAAMrB,KACxE1B,MAAQ,GACRgV,EAyET,OAlFA,YAAUD,EAAUD,GAYpB,YAAaC,EAAU,CAAC,CACtB/T,IAAK,eACLkC,MAAO,SAAsBiF,GACvBpF,KAAKrB,MAAMiQ,UAAU5O,KAAKrB,MAAMiQ,SAASxJ,KAE9C,CACDnH,IAAK,SACLkC,MAAO,WACL,IAAI+R,EAAa,GAEjB,GAAIlS,KAAKrB,MAAM6D,QAAS,CACtB,IAII2P,EAJAC,EAAwBpS,KAAKrB,MAAM6D,QAAQ6P,cAC3CvN,EAAcsN,EAAsBtN,YACpCD,EAASuN,EAAsBvN,OAC/ByN,EAAgB,GAGhBzN,GAAUA,EAAOnE,OAAS,IAC5B4R,EAAgBzN,EAAOP,KAAI,SAAUnB,GACnC,MAAO,CACLgO,MAAOhO,EAAKpB,KACZS,QAASW,EAAKH,QAAQsB,KAAI,SAAUV,GAClC,MAAO,CACLuN,MAAOvN,EAAEzD,MACTA,MAAOyD,EAAEpH,YAOnB2V,EAAerN,EAAYR,KAAI,SAAUV,GACvC,MAAO,CACLuN,MAAOvN,EAAEzD,MACTA,MAAOyD,EAAEpH,OAGb0V,EAAa,GAAGzR,OAAO,aAAmB6R,GAAgB,aAAmBH,IAG/E,IAoBII,EApBa,SAAoBC,EAAUC,GAG7C,IAFA,IAAIhK,EAAQ,KAEH7E,EAAI,EAAGA,EAAI4O,EAAS9R,OAAQkD,IAAK,CACxC,IAAIpB,EAAUgQ,EAAS5O,GAEvB,GAAIpB,EAAQA,SAAWA,EAAQA,QAAQ9B,OAAS,GAI9C,GAHA+H,EAAQjG,EAAQA,QAAQU,MAAK,SAAUC,GACrC,OAAOA,EAAKhD,QAAUsS,KAEb,WAGX,GADAhK,EAAQjG,GAAWA,EAAQrC,QAAUsS,EAAYjQ,OAAU1D,EAChD,MAIf,OAAO2J,EAGUiK,CAAWR,EAAYlS,KAAKrB,MAAMyQ,cACrD,OAAO,IAAM3B,cAAc,KAAQ,CACjC4D,OAAQC,GACR9O,QAAS0P,EACTtD,SAAU5O,KAAK2S,aAAaC,KAAK5S,MACjCoP,aAAcmD,QAKbP,EAnFT,CAoFE,IAAM1C,YDjbR,SAAWtB,GACTA,EAAeA,EAA4B,YAAI,GAAK,cACpDA,EAAeA,EAAmC,mBAAI,GAAK,qBAC3DA,EAAeA,EAAgC,gBAAI,GAAK,kBACxDA,EAAeA,EAAkC,kBAAI,GAAK,oBAJ5D,CAKGA,KAAmBA,GAAiB,KAEhC,IAAI,GAEX,SAAUC,GAGR,SAAS4E,EAAgBlU,GACvB,IAAI0B,EAwBJ,OAtBA,YAAgBL,KAAM6S,IAEtBxS,EAAQ,YAA2BL,KAAM,YAAgB6S,GAAiB1E,KAAKnO,KAAMrB,KAC/E1B,MAAQ,CACZgD,SAAUI,EAAM1B,MAAM4C,UAAYlB,EAAM1B,MAAM4C,UAAUtB,SAAW,IAErEI,EAAMyS,QAAU,CAAC,CACfC,UAAW,KACXC,KAAM,cACL,CACDD,UAAW,cACXC,KAAM,sBACL,CACDD,UAAW,qBACXC,KAAM,uBACL,CACDD,UAAW,kBACXC,KAAM,oBACL,CACDD,UAAW,oBACXC,KAAM,uBAED3S,EAgQT,OA3RA,YAAUwS,EAAiB5E,GA8B3B,YAAa4E,EAAiB,CAAC,CAC7B5U,IAAK,oBACLkC,MAAO,WACDH,KAAKrB,MAAMsU,mBACbjT,KAAKrB,MAAMsU,kBAAkBjT,KAAKmB,YAAYyR,KAAK5S,SAGtD,CACD/B,IAAK,cACLkC,MAAO,SAAqBC,GAC1BJ,KAAKkT,SAAS,CACZjT,SAAUG,MAGb,CACDnC,IAAK,aACLkC,MAAO,SAAoBK,GACzB,IAAIuD,EAAS/D,KAERQ,IAASA,EAAU,CACtB2S,UAAW,GAAY,QACvBC,iBAAatU,EACbuU,wBAAoBvU,EACpBwU,qBAAiBxU,EACjB6B,uBAAmB7B,IAErBkB,KAAKkT,UAAS,SAAUK,GACtB,IAAInT,EAAc,KAAEoE,MAAM+O,EAAUtT,UAGpC,OADIO,GAASJ,EAAY7C,KAAKiD,GACvB,CACLP,SAAUG,MAEX,WACG2D,EAAOpF,MAAMiQ,UACf7K,EAAOpF,MAAMiQ,SAAS7K,EAAO9G,MAAMgD,eAIxC,CACDhC,IAAK,gBACLkC,MAAO,SAAuBqK,GAC5BxK,KAAKkT,UAAS,SAAUK,GACtB,IAAInT,EAAc,KAAEoE,MAAM+O,EAAUtT,UAUhCuT,EARgB,SAAuB5P,EAAGlD,GAC5C,IAA0B+S,EAI1B,QAAW7P,EAAI,IAJW6P,EAIR/S,GAHA+S,GAAKA,EAMVC,CAAclJ,EAAOpK,EAAYM,QAC5CiT,EAAO,CAACvT,EAAYoT,GAAWpT,EAAYoK,IAG/C,OAFApK,EAAYoK,GAASmJ,EAAK,GAC1BvT,EAAYoT,GAAYG,EAAK,GACtB,CACL1T,SAAUG,KAEXJ,KAAK4T,YAAYhB,KAAK5S,SAE1B,CACD/B,IAAK,mBACLkC,MAAO,SAA0BW,EAAc+S,EAAYzQ,GACzD,IAAIgB,EAASpE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAInT,EAAc,KAAEoE,MAAM+O,EAAUtT,UAEhCiJ,EAAU9I,EAAYU,GAE1B,OAAQ+S,GACN,KAAK7F,GAAe8F,YAClB5K,EAAQkK,YAAchQ,GAAYA,EAASjD,MAAQiD,EAASjD,WAAQrB,EACpE,MAEF,KAAKkP,GAAe+F,mBAClB,IAAIC,EACAC,EAEJ,IAAKD,KAAQxO,GACX,GAAIA,GAAqBwO,KAAU5Q,EAASjD,MAAO,CACjD8T,EAAaD,EACb9K,EAAQmK,mBAAqB7N,GAAqByO,GAClD,MAIJ,MAEF,KAAKjG,GAAekG,gBAClB,IAAIC,EAAqB,CACvBxU,QAASyD,EAASjD,MAClBzE,KAAMgK,GAAO2B,QAEf6B,EAAQoK,gBAAkBa,EAC1B,MAEF,KAAKnG,GAAeoG,kBAClBlL,EAAQvI,kBAAoByC,EAASjD,QAAUrD,EAAoBuX,IAAMvX,EAAoBuX,IAAMvX,EAAoBwX,GAO3H,MAAO,CACLrU,SAAUG,MAEX,WACGgE,EAAOzF,MAAMiQ,UAAUxK,EAAOzF,MAAMiQ,SAASxK,EAAOnH,MAAMgD,eAGjE,CACDhC,IAAK,cACLkC,MAAO,SAAqBiT,GAC1B,OAAIA,GAAepT,KAAKrB,MAAM4V,mBAAqB,KAAEC,QAAQxU,KAAKrB,MAAM4V,kBAC9DvU,KAAKrB,MAAM4V,iBAAiBnB,GAI/B,OAER,CACDnV,IAAK,gBACLkC,MAAO,SAAuBqK,GAC5B,IAAI/F,EAASzE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAInT,EAAc,KAAEoE,MAAM+O,EAAUtT,UAGpC,OADAG,EAAYW,OAAOyJ,EAAO,GACnB,CACLvK,SAAUG,MAEX,WACGqE,EAAO9F,MAAMiQ,UACfnK,EAAO9F,MAAMiQ,SAASnK,EAAOxH,MAAMgD,eAIxC,CACDhC,IAAK,SACLkC,MAAO,WACL,IAAI8R,EAASjS,KAEb,OAAO,IAAMyN,cAAc,IAAMgH,SAAU,KAAM,IAAMhH,cAAc,KAAW,KAAM,IAAMA,cAAc,QAAS,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,CACjLxP,IAAK,YACJ,IAAK+B,KAAK8S,QAAQxO,KAAI,SAAUnB,EAAMlF,GACvC,OAAO,IAAMwP,cAAc,KAAM,CAC/BxP,IAAKA,GACJkF,EAAK6P,SACN,IAAMvF,cAAc,KAAM,CAC5BxP,IAAK,WACJ,MAAO,IAAMwP,cAAc,QAAS,KAAMzN,KAAK/C,MAAMgD,SAASqE,KAAI,SAAUnB,EAAMlF,GACnF,IAAIyW,EAAazC,EAAOtT,MAAM4V,iBAAmB7W,OAAO+D,OAAOwQ,EAAOtT,MAAM4V,kBAAkBjQ,KAAI,SAAUnB,GAC1G,MAAO,CACLhD,MAAOgD,EAAK3G,GACZ2U,MAAOhO,EAAKiE,gBAAgBzH,YAE3B,GACDgV,EAAiB,IAAMlH,cAAc,KAAQ,CAC/CxP,IAAK,YAAYwC,OAAOxC,EAAK,KAAKwC,OAAO0C,EAAKgQ,WAC9C9B,OAAQC,GACR9O,QAASkS,EACTvU,MAAOuU,EAAWxR,MAAK,SAAUmC,GAC/B,OAAOA,EAAElF,QAAUgD,EAAKiQ,eAE1BxE,SAAU,SAAkBgG,GAC1B,OAAO3C,EAAO4C,iBAAiB5W,EAAK+P,GAAe8F,YAAac,MAIhEE,EE9ML,SAA4BC,GACjC,IAAIC,EAAetX,OAAO+D,OAAO+D,IAGjC,OAFWuP,GAAaA,EAAUhT,MAGhC,KAAK4D,GAAauL,QAClB,KAAKvL,GAAa+I,KAClB,KAAK/I,GAAaoL,OAClB,KAAKpL,GAAa8I,KAChB,OAAOuG,EAAapQ,QAAO,SAAUzB,GACnC,OAAOA,IAASqC,GAAqByP,SAGzC,KAAKtP,GAAagJ,OAClB,QACE,OAAOqG,GF+LuBE,CADD/R,EAAKiQ,aAAenB,EAAOtT,MAAM4V,kBAAoBtC,EAAOtT,MAAM4V,iBAAiBpR,EAAKiQ,aAAenB,EAAOtT,MAAM4V,iBAAiBpR,EAAKiQ,aAAa5L,gBAAa1I,GAC1HwF,KAAI,SAAU6Q,EAAK3K,GACtF,MAAO,CACLrK,MAAOgV,EACPhE,MAAOgE,MAGPC,EAAqB,IAAM3H,cAAc,KAAQ,CACnDxP,IAAK,YAAYwC,OAAOxC,EAAK,KAAKwC,OAAO0C,EAAKgQ,WAC9C9B,OAAQC,GACR9O,QAASsS,EACT3U,MAAO2U,EAAsB5R,MAAK,SAAUmS,EAAI7K,GAC9C,OAAO6K,EAAGlV,QAAUgD,EAAKkQ,sBAE3BzE,SAAUqD,EAAO4C,iBAAiBjC,KAAKX,EAAQhU,EAAK+P,GAAe+F,sBAGjEuB,EAAYrD,EAAOsD,YAAYpS,EAAKiQ,aAEpCoC,EAAcF,EAAYA,EAAU9N,gBAAa1I,EACjD2W,EAAWH,GAAaA,EAAU9S,QAAU8S,EAAU9S,aAAU1D,EAChE4W,EAAwB,IAAMjI,cAAc,GAAU,CACxDjL,QAASiT,EACTxX,IAAK,YAAYwC,OAAOxC,EAAK,KAAKwC,OAAO0C,EAAKgQ,WAC9CvE,SAAUqD,EAAO4C,iBAAiBjC,KAAKX,EAAQhU,EAAK+P,GAAekG,iBACnE9E,aAAcjM,EAAKmQ,iBAAmBnQ,EAAKmQ,gBAAgB3T,QAC3DjE,KAAM8Z,IAEJG,EAA4BjY,OAAOC,KAAKb,GAAqBwH,KAAI,SAAUrG,GAC7E,MAAO,CACLkT,MAAOlT,EACPkC,MAAe,QAARlC,EAAgBnB,EAAoBuX,IAAc,OAARpW,EAAenB,EAAoBwX,GAAK,OAGzFsB,EAA0B,IAAMnI,cAAc,KAAQ,CACxDxP,IAAK,aAAawC,OAAOxC,EAAK,KAAKwC,OAAO0C,EAAKgQ,WAC/C9B,OAAQC,GACR9O,QAASmT,EACTxV,MAAOwV,EAA0BzS,MAAK,SAAUmC,GAC9C,OAAOA,EAAElF,QAAUgD,EAAKxC,qBAE1BiO,SAAUqD,EAAO4C,iBAAiBjC,KAAKX,EAAQhU,EAAK+P,GAAeoG,qBAErE,OAAO,IAAM3G,cAAc,KAAM,CAC/BxP,IAAK,MAAQA,GACZ,IAAMwP,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC7DoI,KAAM,WACNvW,QAAS,WACP,OAAO2S,EAAO6D,cAAc7X,OAE3B,IAAMwP,cAAc,KAAM,KAAM,IAAK,IAAMA,cAAc,MAAO,KAAMxP,IAAO,IAAMwP,cAAc,KAAM,CAC1GrO,UAAW,eACVuV,GAAiB,IAAMlH,cAAc,KAAM,CAC5CrO,UAAW,sBACVgW,GAAqB,IAAM3H,cAAc,KAAM,CAChDrO,UAAW,mBACVsW,GAAwB,IAAMjI,cAAc,KAAM,CACnDrO,UAAW,qBACVwW,GAA0B,IAAMnI,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CACvFoI,KAAM,QACNvW,QAAS,WACP2S,EAAO8D,cAAc9X,WAGvB,IAAMwP,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC9FnO,QAAS,WACP,OAAO2S,EAAO+D,cAEhBH,KAAM,UACH,IAAMpI,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,aAEpM,CAAC,CACHxP,IAAK,eACL+C,IAAK,WACH,MAAO,CACL4N,SAAU,kBAKTiE,EA5RT,CA6RE,IAAMvD,WG5SG,GAEX,SAAUrB,GAGR,SAASgI,EAAqBtX,GAC5B,IAAI0B,EA4CJ,OA1CA,YAAgBL,KAAMiW,IAEtB5V,EAAQ,YAA2BL,KAAM,YAAgBiW,GAAsB9H,KAAKnO,KAAMrB,KAEpFgU,aAAe,SAAU1R,GAC7BZ,EAAM6S,SAAS,CACbgD,OAAQ,GACRjW,SAAUgB,KAIdZ,EAAM8V,qBAAuB,WAC3B,IAAIC,GAAe,IAAI,IAAcjV,YAAYd,EAAMpD,MAAMgD,UAC/C,GAAYoW,aAAaD,GAYnC/V,EAAM1B,MAAM2X,UACdjW,EAAM1B,MAAM2X,SAASjW,EAAMpD,MAAMgD,UAVjCI,EAAM6S,SAAS,CACbgD,OAAQ,CAAC,CACPK,QAAS,+BAYjBlW,EAAMmW,uBAAyB,WACzBnW,EAAM1B,MAAMkB,UACdQ,EAAM1B,MAAMkB,SAASQ,EAAMpD,MAAMgD,WAIrCI,EAAMpD,MAAQ,CACZwZ,OAAQpW,EAAM1B,MAAM8X,OACpBxW,SAAUI,EAAM1B,MAAM4C,WAAalB,EAAM1B,MAAM4C,UAAUtB,SAAWI,EAAM1B,MAAM4C,UAAUtB,SAAW,GACrGiW,OAAQ,IAEV7V,EAAMqW,iBAAmB,IAAMC,YACxBtW,EA+CT,OA9FA,YAAU4V,EAAsBhI,GAkDhC,YAAagI,EAAsB,CAAC,CAClChY,IAAK,SACLkC,MAAO,WACL,IAAI4D,EAAS/D,KAEb,OAAO,IAAMyN,cAAc,KAAQ,CACjCmJ,oBAAoB,EACpBlX,MAAO,qBACPT,MAAO,CACL4X,MAAO,KAETJ,OAAQzW,KAAKrB,MAAM8X,QAClB,IAAMhJ,cAAc,MAAO,CAC5BxO,MAAO,CACL6X,UAAW,IACXC,SAAU,OACVC,UAAW,KAEb5X,UAAW,KAAQ6X,aAClBjX,KAAKrB,MAAM8X,QAAU,IAAMhJ,cAAc,GAAiB,CAC3D8G,iBAAkBvU,KAAKrB,MAAM4V,iBAC7BhT,UAAWvB,KAAKrB,MAAM4C,UAAYvB,KAAKrB,MAAM4C,eAAYzC,EACzDoY,IAAKlX,KAAK0W,iBACV9H,SAAU,SAAkB3N,GAC1B,OAAO8C,EAAO4O,aAAa1R,MAE3B,IAAMwM,cAAc,MAAO,CAC7BrO,UAAW,cACVY,KAAK/C,MAAMiZ,OAAO5R,KAAI,SAAUnB,GACjC,OAAOA,EAAKoT,aACR,IAAM9I,cAAc,MAAO,CAC/BrO,UAAW,KAAQ+X,eAClB,IAAM1J,cAAc,MAAO,CAC5BrO,UAAW,KAAQgY,uBAClB,IAAM3J,cAAc,KAAQ,CAC7BtO,MAAO,UACPG,QAASU,KAAKmW,sBACb,UAAW,IAAM1I,cAAc,KAAQ,CACxCtO,MAAO,YACPG,QAASU,KAAKwW,wBACb,iBAIAP,EA/FT,CAgGE,IAAM3G,WACR,GAAqB+H,aAAe,CAClCZ,QAAQ,EACRlV,UAAW,IAAI,IClGV,IAAI,GAEX,SAAU0M,GAGR,SAASqJ,EAAkB3Y,GACzB,IAAI0B,EASJ,OAPA,YAAgBL,KAAMsX,IAEtBjX,EAAQ,YAA2BL,KAAM,YAAgBsX,GAAmBnJ,KAAKnO,KAAMrB,KACjF1B,MAAQ,CACZsa,YAAalX,EAAM1B,MAAMuI,WAAWC,qBAAuB,GAC3DhB,UAAW9F,EAAM1B,MAAMuI,WAAWf,WAE7B9F,EAqLT,OAjMA,YAAUiX,EAAmBrJ,GAe7B,YAAaqJ,EAAmB,CAAC,CAC/BrZ,IAAK,uBACLkC,MAAO,SAA8BzE,EAAM8O,EAAOrK,GAChD,IAAI4D,EAAS/D,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI9K,OAAQ3J,EAER0Y,EAAgB,KAAEhT,MAAM+O,EAAUgE,aAElCE,EAAWD,EAAchN,GAe7B,OAbIzG,EAAOpF,MAAM6D,SAAWuB,EAAOpF,MAAM6I,WAAWzF,OAAS4D,GAAaqL,QACxEvI,EAAQ1E,EAAOpF,MAAM6D,QAAQF,WAAWnC,GAE3B,SAATzE,EACF+b,EAASxP,OAASQ,EAAMjM,GACN,UAATd,IACT+b,EAASzP,QAAUS,EAAMjM,MAGd,SAATd,IAAiB+b,EAASxP,OAAS9H,GAC1B,UAATzE,IAAkB+b,EAASzP,QAAU7H,IAGpC,CACLoX,YAAaC,MAEd,WACGzT,EAAOpF,MAAMiQ,UACf7K,EAAOpF,MAAMiQ,SAAS,CACpBzI,UAAWpC,EAAO9G,MAAMkJ,UACxBgB,oBAAqBpD,EAAO9G,MAAMsa,mBAKzC,CACDtZ,IAAK,qBACLkC,MAAO,SAA4BqK,GACjC,IAAIjJ,EAAYvB,KAAK/C,MAAMsa,YAAY/M,GAQvC6C,GAPS,IAAMI,cAAc,GAAsB,CACjD8G,iBAAkBvU,KAAKrB,MAAM4V,iBAC7BkC,QAAQ,EACRH,SAAUtW,KAAK0X,cAAc9E,KAAK5S,KAAMwK,GACxC3K,SAAUiO,GAAa8E,KAAK5S,MAC5BuB,UAAWA,EAAUA,eAIxB,CACDtD,IAAK,gBACLkC,MAAO,WACL,IAAIiE,EAASpE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,MAAO,CACLpN,WAAYoN,EAAUpN,cAEvB,WACG/B,EAAOzF,MAAMiQ,UAAUxK,EAAOzF,MAAMiQ,SAAS,CAC/CzI,UAAW/B,EAAOnH,MAAMkJ,UACxBgB,oBAAqB/C,EAAOnH,MAAMsa,mBAIvC,CACDtZ,IAAK,uBACLkC,MAAO,WACL,IAAIsE,EAASzE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAIiE,EAAgB,KAAEhT,MAAM+O,EAAUgE,aAElCI,EAAkB,CACpBpW,UAAW,IAAI,GACf0G,YAAQnJ,EACRkJ,aAASlJ,GAGX,OADA0Y,EAAcja,KAAKoa,GACZ,CACLJ,YAAaC,MAEd,WACG/S,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAAS,CAC/CzI,UAAW1B,EAAOxH,MAAMkJ,UACxBgB,oBAAqB1C,EAAOxH,MAAMsa,mBAIvC,CACDtZ,IAAK,gBACLkC,MAAO,SAAuBqK,EAAOvJ,GACnC,IAAIgR,EAASjS,KAETwM,EAAS,KAAEhI,MAAMxE,KAAK/C,MAAMsa,aAEhB/K,EAAOhC,GAAOjJ,YAG5BiL,EAAOhC,GAAOjJ,UAAY,IAAI,IAGhCiL,EAAOhC,GAAOjJ,UAAUJ,YAAYF,GACpCjB,KAAKkT,SAAS,CACZqE,YAAa/K,IACZ,WACDsB,KACImE,EAAOtT,MAAMiQ,UAAUqD,EAAOtT,MAAMiQ,SAAS,CAC/CzI,UAAW8L,EAAOhV,MAAMkJ,UACxBgB,oBAAqB8K,EAAOhV,MAAMsa,mBAIvC,CACDtZ,IAAK,0BACLkC,MAAO,SAAiCqK,GACtC,IAAIoN,EAAS5X,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAIgE,EAAc,KAAE/S,MAAM+O,EAAUgE,aAGpC,OADAA,EAAYxW,OAAOyJ,EAAO,GACnB,CACL+M,YAAaA,MAEd,WACGK,EAAOjZ,MAAMiQ,UAAUgJ,EAAOjZ,MAAMiQ,SAAS,CAC/CzI,UAAWyR,EAAO3a,MAAMkJ,UACxBgB,oBAAqByQ,EAAO3a,MAAMsa,mBAIvC,CACDtZ,IAAK,SACLkC,MAAO,WACL,IAAI0X,EAAS7X,KAEb,OAAO,IAAMyN,cAAc,MAAO,KAAM,IAAMA,cAAc,KAAQ,CAClEqK,QAAS9X,KAAK/C,MAAMkJ,UACpByI,SAAU5O,KAAK+X,cAAcnF,KAAK5S,MAClCmR,MAAO,YACL,IAAM1D,cAAc,KAAW,KAAM,IAAMA,cAAc,QAAS,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAM,aAAc,IAAMA,cAAc,KAAM,KAAM,YAAa,IAAMA,cAAc,KAAM,KAAM,aAAc,IAAMA,cAAc,KAAM,QAAS,IAAMA,cAAc,QAAS,KAAMzN,KAAK/C,MAAMsa,YAAYjT,KAAI,SAAUnB,EAAMqH,GACrY,IAAIkL,EAAwB,SAA+BsC,GACzD,OAAO,IAAMvK,cAAc,GAAU,CACnCxP,IAAK+Z,EACLpJ,SAAU,SAAkB3N,GAC1B,OAAO4W,EAAOI,qBAAqBD,EAAexN,EAAOvJ,EAAKd,QAEhEqC,QAASqV,EAAOlZ,MAAM6D,QACtB4M,aAAgC,SAAlB4I,EAA2B7U,EAAK8E,OAAS9E,EAAK6E,SAAW7E,EAAK6E,QAC5EtM,KAAMmc,EAAOlZ,MAAM6I,cAIvB,OAAO,IAAMiG,cAAc,KAAM,CAC/BxP,IAAK,KAAKwC,OAAO+J,IAChB,IAAMiD,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC9FoI,KAAM,MACNvW,QAAS,WACP,OAAOuY,EAAOK,mBAAmB1N,OAEhC,IAAMiD,cAAc,KAAM,KAAMiI,EAAsB,SAAU,IAAMjI,cAAc,KAAM,KAAMiI,EAAsB,UAAW,IAAMjI,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAChMoI,KAAM,QACNvW,QAAS,WACPuY,EAAOM,wBAAwB3N,WAGjC,IAAMiD,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC9FoI,KAAM,OACNvW,QAAS,WACP,OAAOuY,EAAOO,wBAEhB1c,KAAM,YACH,IAAM+R,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,cAI/H6J,EAlMT,CAmME,IAAMhI,WF1MR,SAAS,GAAQ+I,EAAQC,GAAkB,IAAI3a,EAAOD,OAAOC,KAAK0a,GAAS,GAAI3a,OAAO6a,sBAAuB,CAAE,IAAIC,EAAU9a,OAAO6a,sBAAsBF,GAAaC,IAAgBE,EAAUA,EAAQ5T,QAAO,SAAU6T,GAAO,OAAO/a,OAAOgb,yBAAyBL,EAAQI,GAAKE,eAAgBhb,EAAKJ,KAAKqb,MAAMjb,EAAM6a,GAAY,OAAO7a,EAE9U,SAAS,GAAcsS,GAAU,IAAK,IAAIrM,EAAI,EAAGA,EAAI4L,UAAU9O,OAAQkD,IAAK,CAAE,IAAIiV,EAAyB,MAAhBrJ,UAAU5L,GAAa4L,UAAU5L,GAAK,GAAQA,EAAI,EAAK,GAAQiV,GAAQ,GAAMtY,SAAQ,SAAUtC,GAAO,YAAgBgS,EAAQhS,EAAK4a,EAAO5a,OAAsBP,OAAOob,0BAA6Bpb,OAAOqb,iBAAiB9I,EAAQvS,OAAOob,0BAA0BD,IAAmB,GAAQA,GAAQtY,SAAQ,SAAUtC,GAAOP,OAAOsb,eAAe/I,EAAQhS,EAAKP,OAAOgb,yBAAyBG,EAAQ5a,OAAe,OAAOgS,EAY7f,IAAI,GAAO1C,SAASC,eAAe,SAAWD,SAASI,KACvD,KAAMsL,cAAc,IAmBb,IAAI3H,GAAe,CACxB4H,UAAW,SAAmBC,EAAMlc,GAClC,OAAO,GAAc,GAAIkc,EAAM,CAC7BC,QAAQnc,EAAMoc,UAAY,MAC1BC,WAAY,cACZC,WAAY,kEACZ,UAAW,CACTC,UAAW,wCAIjBC,QAAS,SAAiBN,EAAMlc,GAC9B,OAAO,GAAc,GAAIkc,EAAM,CAC7BG,WAAY,cACZI,YAAazc,EAAMoc,UAAYM,GAAaR,EAAKO,YACjD,UAAW,CACTA,YAAazc,EAAMoc,UAAYM,GAAaR,EAAKO,gBAIvDE,eAAgB,SAAwBT,EAAMlc,GAC5C,OAAO,GAAc,GAAIkc,EAAM,CAC7BG,WAAY,cACZna,MAAO,WAGX0a,KAAM,SAAcV,EAAMlc,GACxB,OAAO,GAAc,GAAIkc,EAAM,CAC7BG,WAAY,QACZI,YAAa,UACbI,SAAU,WACVC,OAAQ,mCAGZC,SAAU,SAAkBb,EAAMlc,GAEhC,OADA2D,QAAQC,IAAI5D,GACL,GAAc,GAAIkc,EAAM,CAC7BG,WAAY,UACZna,MAAO,WAGX8a,YAAa,SAAqBd,EAAMlc,GACtC,OAAO,GAAc,GAAIkc,EAAM,CAC7Bha,MAAO,WAGX+a,MAAO,SAAef,EAAMlc,GAC1B,OAAO,GAAc,GAAIkc,EAAM,CAC7Bha,MAAO,WAGXwD,OAAQ,SAAgBwW,EAAMlc,GAC5B,OAAO,GAAc,GAAIkc,EAAM,CAC7BG,WAAYrc,EAAMkd,WAAa,YAAcld,EAAMoc,UAAY,UAAY,cAI7EM,GAAa,UACN,GAEX,SAAU1L,GAGR,SAASmM,EAAWzb,GAClB,IAAI0B,EAQJ,OANA,YAAgBL,KAAMoa,IAEtB/Z,EAAQ,YAA2BL,KAAM,YAAgBoa,GAAYjM,KAAKnO,KAAMrB,KAC1E1B,MAAQ,CACZgQ,SAAU5M,EAAM1B,MAAMsO,UAEjB5M,EAqLT,OAhMA,YAAU+Z,EAAYnM,GAiBtB,YAAamM,EAAY,CAAC,CACxBnc,IAAK,eACLkC,MAAO,WACDH,KAAKrB,MAAMiQ,UAAU5O,KAAKrB,MAAMiQ,SAAS5O,KAAK/C,MAAMgQ,YAEzD,CACDhP,IAAK,uBACLkC,MAAO,SAA8BZ,GACnCS,KAAKkT,UAAS,SAAUK,GACtB,IAAItG,EAAW,SAAQsG,EAAUtG,UAGjC,OADAA,EAASoN,eAAepN,EAAS1F,YAC1B,CACL0F,SAAUA,KAEXjN,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,8BACLkC,MAAO,WAQLkN,GAPS,IAAMI,cAAc,GAAsB,CACjD8G,iBAAkBvU,KAAKrB,MAAM4V,iBAC7BkC,QAAQ,EACRH,SAAUtW,KAAKsa,uBAAuB1H,KAAK5S,MAC3CH,SAAUiO,GAAa8E,KAAK5S,MAC5BuB,UAAWvB,KAAK/C,MAAMgQ,SAASlK,wBAIlC,CACD9E,IAAK,yBACLkC,MAAO,SAAgCC,GACrC,IAAI2D,EAAS/D,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAItG,EAAW,SAAQsG,EAAUtG,UAKjC,OAHKA,EAASlK,oBAAoBkK,EAASsN,sBAAsB,IAAI,IACrEtN,EAASlK,mBAAmB5B,YAAYf,GACxCQ,QAAQC,IAAI,GAAYqE,OAAO+H,EAASlK,qBACjC,CACLkK,SAAUA,MAEX,WACDa,KAEA/J,EAAO4O,oBAGV,CACD1U,IAAK,uBACLkC,MAAO,SAA8BZ,GACnCS,KAAKkT,UAAS,SAAUK,GACtB,IAAItG,EAAW,SAAQsG,EAAUtG,UAMjC,OAJAA,EAASuN,mBAAmB,CAC1B9e,KAAMgK,GAAO2B,OACb1H,QAASJ,IAEJ,CACL0N,SAAUA,KAEXjN,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,yBACLkC,MAAO,SAAgCzE,GACrCsE,KAAKkT,UAAS,SAAUK,GACtB,IAAItG,EAAW,SAAQsG,EAAUtG,UAGjC,OADAA,EAASwN,cAAc/e,GAChB,CACLuR,SAAUA,KAEXjN,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,sBACLkC,MAAO,SAA6BqC,GAClCxC,KAAKkT,UAAS,SAAUK,GACtB,IAAItG,EAAW,SAAQsG,EAAUtG,UAGjC,OADAA,EAASyN,WAAWlY,GACb,CACLyK,SAAUA,KAEXjN,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,uBACLkC,MAAO,SAA8Bwa,GACnC3a,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,SAAQ+G,EAAUtG,UAG/B,OADAT,EAAOoO,cAAcD,GACd,CACL1N,SAAUT,KAEXxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,uBACLkC,MAAO,SAA8B0a,GACnC7a,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,SAAQ+G,EAAUtG,UAG/B,OADAT,EAAOvF,SAAW4T,EACX,CACL5N,SAAUT,KAEXxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,SACLkC,MAAO,WACL,IAAIiE,EAASpE,KAEb,OAAO,IAAMyN,cAAc,MAAO,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,CAChGrO,UAAW,SACV,gBAAiB,IAAMqO,cAAc,KAAW,KAAM,IAAMA,cAAc,KAAO,CAClFqN,QAAS,YACR,aAAc,IAAMrN,cAAc,KAAY,CAC/C2B,aAAcpP,KAAK/C,MAAMgQ,SAAShG,SAClC7H,UAAW,eACXwP,SAAU,SAAkBrP,GAC1B,OAAO6E,EAAO2W,qBAAqBxb,EAAE0Q,OAAO9P,QAE9C3D,GAAI,YACJuF,KAAM,YACNmO,YAAa,eACV,IAAMzC,cAAc,KAAW,KAAM,IAAMA,cAAc,KAAO,CACnEqN,QAAS,YACR,YAAa,IAAMrN,cAAc,KAAU,CAC5CuN,MAAM,EACN5L,aAAcpP,KAAK/C,MAAMgQ,SAAS7F,gBAAgBzH,QAClDP,UAAW,eACXwP,SAAU,SAAkBrP,GAC1B,OAAO6E,EAAO6W,qBAAqB1b,EAAE0Q,OAAO9P,QAE9C3D,GAAI,WACJuF,KAAM,WACNmO,YAAa,MACV,IAAMzC,cAAc,KAAW,KAAM,IAAMA,cAAc,KAAQ,CACpEyN,eAAgBlb,KAAK/C,MAAMgQ,SAAS1F,WACpC4J,MAAO,WACPvC,SAAU5O,KAAKmb,qBAAqBvI,KAAK5S,SACtC,IAAMyN,cAAc,KAAW,KAAM,IAAMA,cAAc,GAAiB,CAC7EjG,WAAYxH,KAAK/C,MAAMgQ,SAASzF,WAChCoH,SAAU5O,KAAKob,uBAAuBxI,KAAK5S,SACxCA,KAAK/C,MAAMgQ,SAASzF,YAAcxH,KAAK/C,MAAMgQ,SAASzF,WAAWzF,OAAS4D,GAAaqL,QAAUhR,KAAK/C,MAAMgQ,SAASzF,WAAWxF,QAAU,IAAMyL,cAAc,KAAW,KAAM,IAAMA,cAAc,QAAS,KAAM,eAAgB,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,GAAc,CACvS4N,UAAWrb,KAAKrB,MAAM0c,UACtB9G,iBAAkBvU,KAAKrB,MAAM4V,iBAC7B3F,SAAU5O,KAAKsb,oBAAoB1I,KAAK5S,MACxCub,kBAAmBvb,KAAK/C,MAAMgQ,SAASzF,WACvChF,QAASxC,KAAK/C,MAAMgQ,SAASzK,YACzB,IAAMiL,cAAc,KAAW,KAAM,IAAMA,cAAc,KAAO,CACpEqN,QAAS,QACR,uBAAwB,IAAMrN,cAAc,KAAQ,CACrD/R,KAAM,SACN8f,OAAO,EACP3F,KAAM,MACNmF,MAAM,EACN1b,QAASU,KAAKyb,4BAA4B7I,KAAK5S,SAC5C,IAAMyN,cAAc,KAAW,KAAM,IAAMA,cAAc,KAAW,CACvE0D,MAAO,0BACN,IAAM1D,cAAc,GAAmB,CACxCvG,WAAYlH,KAAK/C,MAAMgQ,SAAS/F,WAChCqN,iBAAkBvU,KAAKrB,MAAM4V,iBAC7B3F,SAAU5O,KAAK0b,qBAAqB9I,KAAK5S,MACzCwH,WAAYxH,KAAK/C,MAAMgQ,SAASzF,WAChChF,QAASxC,KAAK/C,MAAMgQ,SAASzK,kBAK5B4X,EAjMT,CAkME,IAAM9K,WACR,GAAW+H,aAAe,CACxBpK,SAAU,IAAI,IG9RhB,ICKI0O,GDLAC,GAAqB,CAAC,CACxBzb,MAAOwF,GAAauL,QACpBC,MAAO,UACN,CACDhR,MAAOwF,GAAaoL,OACpBI,MAAO,QACN,CACDhR,MAAOwF,GAAa8I,KACpB0C,MAAO,QACN,CACDhR,MAAOwF,GAAa+I,KACpByC,MAAO,QACN,CACDhR,MAAOwF,GAAagJ,OACpBwC,MAAO,UACN,CACDhR,MAAOwF,GAAakM,MACpBV,MAAO,SACN,CACDhR,MAAOwF,GAAaqL,OACpBG,MAAO,mBACN,CACDhR,MAAOwF,GAAakW,YACpB1K,MAAO,iBAEL2K,GAAmBF,GAAmBhX,QAAO,SAAUzB,GACzD,OAAOA,EAAKhD,OAASgD,EAAKhD,QAAUwF,GAAaqL,UAE/C+K,GAAkB,CAACpW,GAAa8I,KAAM9I,GAAagJ,OAAQhJ,GAAa+I,KAAM/I,GAAa8I,MAC3FuN,GAAkBJ,GAAmBhX,QAAO,SAAUzB,GACxD,OAAO4Y,GAAgBze,SAAS6F,EAAKhD,UAE5B,GAEX,SAAU8N,GAGR,SAASgO,EAAgBtd,GACvB,IAAI0B,EAQJ,OANA,YAAgBL,KAAMic,IAEtB5b,EAAQ,YAA2BL,KAAM,YAAgBic,GAAiB9N,KAAKnO,KAAMrB,KAC/E1B,MAAQ,CACZuK,WAAYnH,EAAM1B,MAAM6I,YAEnBnH,EAkHT,OA7HA,YAAU4b,EAAiBhO,GAmB3B,YAAagO,EAAiB,CAAC,CAC7Bhe,IAAK,yBACLkC,MAAO,SAAgCc,GACrC,IAAI8C,EAAS/D,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI2I,EAAgB,KAAE1X,MAAM+O,EAAU/L,YAItC,OAFA0U,EAAcna,KAAOd,EAAKd,MAC1B+b,EAAcla,YAASlD,EAChB,CACL0I,WAAY0U,MAEb,WACGnY,EAAOpF,MAAMiQ,UAAU7K,EAAOpF,MAAMiQ,SAAS7K,EAAO9G,MAAMuK,iBAQjE,CACDvJ,IAAK,2BACLkC,MAAO,SAAkCc,GACvC,IAAImD,EAASpE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI2I,EAAgB,KAAE1X,MAAM+O,EAAU/L,YAOtC,OALA0U,EAAcla,OAAS,CACrBD,KAAMd,EAAKd,MACX6B,YAAQlD,GAENod,EAAcla,OAAOA,SAAQka,EAAcla,OAAOA,YAASlD,GACxD,CACL0I,WAAY0U,MAEb,WACG9X,EAAOzF,MAAMiQ,UAAUxK,EAAOzF,MAAMiQ,SAASxK,EAAOnH,MAAMuK,iBAQjE,CACDvJ,IAAK,0BACLkC,MAAO,SAAiCc,GACtC,IAAIwD,EAASzE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI2I,EAAgB,KAAE1X,MAAM+O,EAAU/L,YAMtC,OAJI0U,EAAcla,SAChBka,EAAcla,OAAOA,OAASf,EAAKd,OAG9B,CACLqH,WAAY0U,MAEb,WACGzX,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAASnK,EAAOxH,MAAMuK,iBAGjE,CACDvJ,IAAK,SACLkC,MAAO,WACL,IAAI8R,EAASjS,KAETmc,EAA4Bnc,KAAK/C,MAAMuK,WAAWzF,OAAS4D,GAAaqL,QAAUhR,KAAK/C,MAAMuK,WAAWzF,OAAS4D,GAAakM,MAC9HuK,EAA2Bpc,KAAK/C,MAAMuK,WAAWxF,QAAUhC,KAAK/C,MAAMuK,WAAWxF,OAAOD,OAAS4D,GAAakM,MAC9GwK,EAAyBrc,KAAK/C,MAAMuK,WAAWzF,OAAS4D,GAAaqL,OAAS8K,GAAmB9b,KAAK/C,MAAMuK,WAAWzF,OAAS4D,GAAakM,MAAQmK,GAAkB,GACvKM,EAAwBtc,KAAK/C,MAAMuK,WAAWxF,QAAUhC,KAAK/C,MAAMuK,WAAWxF,OAAOD,OAAS4D,GAAakM,MAAQmK,GAAkB,GACzI,OAAO,IAAMvO,cAAc,IAAMgH,SAAU,KAAM,IAAMhH,cAAc,KAAW,CAC9E0D,MAAO,cACN,IAAM1D,cAAc,KAAQ,CAC7BmB,SAAU5O,KAAKob,uBAAuBxI,KAAK5S,MAC3CqR,OAAQC,GACR9O,QAASoZ,GACTzb,MAAOyb,GAAmB1Y,MAAK,SAAUC,GACvC,OAAOA,EAAKhD,QAAU8R,EAAOhV,MAAMuK,WAAWzF,WAE7Coa,GAA6B,IAAM1O,cAAc,KAAW,CAC/D0D,MAAO,WACN,IAAM1D,cAAc,KAAQ,CAC7BmB,SAAU5O,KAAKuc,yBAAyB3J,KAAK5S,MAC7CqR,OAAQC,GACR9O,QAAS6Z,EACTlc,MAAOkc,EAAuBnZ,MAAK,SAAUC,GAC3C,OAAO8O,EAAOhV,MAAMuK,WAAWxF,QAAUmB,EAAKhD,QAAU8R,EAAOhV,MAAMuK,WAAWxF,OAAOD,WAEtFqa,GAA4B,IAAM3O,cAAc,KAAW,CAC9D0D,MAAO,WACN,IAAM1D,cAAc,KAAQ,CAC7BmB,SAAU5O,KAAKwc,wBAAwB5J,KAAK5S,MAC5CqR,OAAQC,GACR9O,QAAS8Z,EACTnc,MAAOmc,EAAsBpZ,MAAK,SAAUC,GAC1C,OAAO8O,EAAOhV,MAAMuK,WAAWxF,QAAUiQ,EAAOhV,MAAMuK,WAAWxF,OAAOA,QAAUmB,EAAKhD,QAAU8R,EAAOhV,MAAMuK,WAAWxF,OAAOA,OAAOD,gBAMxIka,EA9HT,CA+HE,IAAM3M,WACR,GAAgB+H,aAAe,CAC7B7P,WAAY,CACVzF,UAAMjD,EACNkD,YAAQlD,IC9JZ,SAAW6c,GACTA,EAAgBA,EAAwB,OAAI,GAAK,SACjDA,EAAgBA,EAAuB,MAAI,GAAK,QAFlD,CAGGA,KAAoBA,GAAkB,KAElC,IAAI,GAEX,SAAU1N,GAGR,SAASwO,EAAa9d,GACpB,IAAI0B,EAUJ,OARA,YAAgBL,KAAMyc,IAEtBpc,EAAQ,YAA2BL,KAAM,YAAgByc,GAActO,KAAKnO,KAAMrB,KAC5E+d,qBAAuB,KAC7Brc,EAAMsc,qBAAuB,KAC7Btc,EAAMpD,MAAQ,CACZuF,QAASnC,EAAM1B,MAAM6D,SAAW,IAAI,IAE/BnC,EAmST,OAhTA,YAAUoc,EAAcxO,GAgBxB,YAAawO,EAAc,CAAC,CAC1Bxe,IAAK,eACLkC,MAAO,WACL,IAAI4B,EAAO,QAEP/B,KAAK0c,uBACP3a,EAAO/B,KAAK0c,qBAAqBvc,OAGnCH,KAAKrB,MAAM0c,UAAUuB,YAAY,CAC/BpgB,GAAIiK,GAAY,UAChB1E,KAAMA,EACNrG,KAAM,CACJqG,KAAM4D,GAAaqL,OACnBhP,OAAQ,CACND,KAAM4D,GAAaoL,SAGvB5Q,MAAO,GAAcmF,SAAS,GAAcJ,OAAOlF,KAAK/C,MAAMuF,cAGjE,CACDvE,IAAK,sBACLkC,MAAO,WACL,IAAI4D,EAAS/D,KAEb,GAAIA,KAAK2c,qBAAsB,CAC7B,IACIE,EADO7c,KAAK2c,qBAAqBxc,MACdkO,MAAM,MAC7BrO,KAAKkT,UAAS,SAAUK,GACtB,IAAI/Q,EAAU,KAAEgC,MAAM+O,EAAU/Q,SAWhC,OATAqa,EAAYtc,SAAQ,SAAU4C,GAC5BX,EAAQsa,UAAU,CAChBtgB,GAAI,OAASkB,OAAOC,KAAK6E,EAAQF,YAAY5B,OAC7CqC,wBAAoBjE,EACpB8D,eAAW9D,EACXpD,KAAMqI,EAAOpF,MAAM4c,kBAAkBvZ,OACrC7B,MAAOgD,OAGJ,CACLX,QAASA,SAKhB,CACDvE,IAAK,eACLkC,MAAO,WACDH,KAAKrB,MAAMiQ,UAAU5O,KAAKrB,MAAMiQ,SAAS5O,KAAK/C,MAAMuF,WAEzD,CACDvE,IAAK,qBACLkC,MAAO,WACL,IAAIiE,EAASpE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAE3Bua,EAAY,CACdvgB,GAAI,OAASkB,OAAOC,KAAK4V,EAAU/Q,QAAQF,YAAY5B,OACvDqC,wBAAoBjE,EACpB8D,eAAW9D,EACXpD,KAAM0I,EAAOzF,MAAM4c,kBAAkBvZ,OACrC7B,WAAOrB,GAGT,OADA0N,EAAOsQ,UAAUC,GACV,CACLva,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,wBACLkC,MAAO,SAA+B+D,EAASC,GAC7CnE,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAOwQ,gBAAgB9Y,EAASC,GACzB,CACL3B,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,oBACLkC,MAAO,SAA2B4B,GAChC/B,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAOyQ,YAAYlb,GACZ,CACLS,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,yBACLkC,MAAO,SAAgC3D,EAAIkI,GACzC1E,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAO0Q,iBAAiB1gB,EAAIkI,GACrB,CACLlC,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,wBACLkC,MAAO,SAA+BnE,EAAK6G,GACzC7C,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAO2Q,oBAAoBnhB,EAAK6G,GACzB,CACLL,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,0BACLkC,MAAO,SAAiCnE,GACtCgE,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAO4Q,cAAcphB,GACd,CACLwG,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,qBACLkC,MAAO,SAA4B3D,GACjCwD,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAO6Q,aAAa7gB,GACb,CACLgG,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,0BACLkC,MAAO,SAAiC3D,EAAI4G,GAC1CpD,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAO8Q,kBAAkB9gB,EAAI4G,GACtB,CACLZ,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,iBACLkC,MAAO,WACLH,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAG/B,OADAgK,EAAO9I,WACA,CACLlB,QAASgK,KAEVxM,KAAK2S,aAAaC,KAAK5S,SAE3B,CACD/B,IAAK,uBACLkC,MAAO,SAA8BzE,EAAMqG,GAEzC,IAAIR,EAGFA,EADE7F,IAASigB,GAAgB4B,MACfvd,KAAK/C,MAAMuF,QAAQD,eAAeR,GAAMgB,mBAExC/C,KAAK/C,MAAMuF,QAAQF,WAAWP,GAAMgB,mBAUlDsK,GAPS,IAAMI,cAAc,GAAsB,CACjD8G,iBAAkBvU,KAAKrB,MAAM4V,iBAC7BkC,QAAQ,EACRH,SAAUtW,KAAKwd,aAAa5K,KAAK5S,KAAM+B,EAAMrG,GAC7CmE,SAAUiO,GAAa8E,KAAK5S,MAC5BuB,UAAWA,OAId,CACDtD,IAAK,eACLkC,MAAO,SAAsBsd,EAAU/hB,EAAMuE,GAC3C,IAAIwE,EAASzE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/Q,SAE/B,GAAI9G,IAASigB,GAAgB4B,MAAO,CAClC,IAAIza,EAAQ0J,EAAOjK,eAAekb,GAE7B3a,EAAMC,qBACTD,EAAMC,mBAAqB,IAAI,IAGjCD,EAAMC,mBAAmB5B,YAAYlB,QAChC,GAAIvE,IAASigB,GAAgB+B,OAAQ,CAC1C,IAAI/a,EAAS6J,EAAOlK,WAAWmb,GAC1B9a,EAAOI,qBAAoBJ,EAAOI,mBAAqB,IAAI,IAChEJ,EAAOI,mBAAmB5B,YAAYlB,GAGxC,MAAO,CACLuC,QAASgK,MAEV,WACDsB,KAEArJ,EAAOkO,oBAGV,CACD1U,IAAK,2BACLkC,MAAO,SAAkCgC,GACvC,IAAI8D,EAAWjG,KAAKrB,MAAM0c,UAAUsC,YAAYxb,EAAEhC,OAClDS,QAAQC,IAAIsB,GACZvB,QAAQC,IAAIoF,GAERA,GAAYA,EAAS9F,iBAAiB,IACxCH,KAAKkT,SAAS,CACZ1Q,QAAS,GAAc8C,SAAS,GAAcJ,OAAOe,EAAS9F,SAC7DH,KAAK2S,aAAaC,KAAK5S,SAG7B,CACD/B,IAAK,SACLkC,MAAO,WACL,IAAI8R,EAASjS,KAET4d,EAAmB5d,KAAKrB,MAAM0c,UAAUwC,eAAevZ,KAAI,SAAUnB,GACvE,MAAO,CACLgO,MAAOhO,EAAKpB,KACZ5B,MAAOgD,EAAK3G,OAGhB,OAAO,IAAMiR,cAAc,KAAa,CACtCuN,MAAM,EACN8C,UAAU,GACT,IAAMrQ,cAAc,KAAI,KAAM,yBAA0B,IAAMA,cAAc,KAAQ,CACrF4D,OAAQC,GACR9O,QAASob,EACThP,SAAU5O,KAAK+d,yBAAyBnL,KAAK5S,QAC3C,IAAMyN,cAAc,KAAS,MAAO,IAAMA,cAAc,KAAI,KAAM,sBAAuB,IAAMA,cAAc,KAAY,CAC3HyC,YAAa,gBACb8N,SAAU,SAAkB3Y,GAC1B,OAAO4M,EAAOyK,qBAAuBrX,KAErC,IAAMoI,cAAc,KAAQ,CAC9BnO,QAASU,KAAKie,aAAarL,KAAK5S,OAC/B,UAAW,IAAMyN,cAAc,KAAS,MAAO,IAAMA,cAAc,KAAI,KAAM,kBAAmB,IAAMA,cAAc,KAAU,CAC/HuQ,SAAU,SAAkB3Y,GAC1B,OAAO4M,EAAO0K,qBAAuBtX,KAErC,IAAMoI,cAAc,KAAQ,CAC9BnO,QAASU,KAAKke,oBAAoBtL,KAAK5S,OACtC,kBAAmB,IAAMyN,cAAc,GAAiB,CACzD0Q,YAAane,KAAKrB,MAAM4c,kBACxB1W,OAAQ7E,KAAK/C,MAAMuF,QAAQD,eAAiB7E,OAAO+D,OAAOzB,KAAK/C,MAAMuF,QAAQD,gBAAkB,GAC/F6b,sBAAuBpe,KAAKoe,sBAAsBxL,KAAK5S,MACvDqe,uBAAwBre,KAAKqe,uBAAuBzL,KAAK5S,MACzDse,mBAAoBte,KAAKse,mBAAmB1L,KAAK5S,MACjDue,mBAAoBve,KAAKue,mBAAmB3L,KAAK5S,MACjDwe,qBAAsBxe,KAAKwe,qBAAqB5L,KAAK5S,KAAM2b,GAAgB+B,QAC3Ee,wBAAyBze,KAAKye,wBAAwB7L,KAAK5S,MAC3DwC,QAASxC,KAAK/C,MAAMuF,QAAQF,WAAa5E,OAAO+D,OAAOzB,KAAK/C,MAAMuF,QAAQF,YAAc,KACtF,IAAMmL,cAAc,KAAS,MAAO,IAAMA,cAAc,GAAmB,CAC7EiR,eAAgB1e,KAAK0e,eAAe9L,KAAK5S,MACzC2e,wBAAyB3e,KAAK2e,wBAAwB/L,KAAK5S,MAC3Doe,sBAAuBpe,KAAKoe,sBAAsBxL,KAAK5S,MACvD4e,sBAAuB5e,KAAK4e,sBAAsBhM,KAAK5S,MACvD6e,kBAAmB7e,KAAK6e,kBAAkBjM,KAAK5S,MAC/C8e,0BAA2B9e,KAAKwe,qBAAqB5L,KAAK5S,KAAM2b,GAAgB4B,OAChF/a,QAASxC,KAAK/C,MAAMuF,QAAQF,WAAa5E,OAAO+D,OAAOzB,KAAK/C,MAAMuF,QAAQF,YAAc,GACxFuC,OAAQ7E,KAAK/C,MAAMuF,QAAQD,eAAiB7E,OAAO+D,OAAOzB,KAAK/C,MAAMuF,QAAQD,gBAAkB,UAK9Fka,EAjTT,CAkTE,IAAMnN,WACG,GAEX,SAAUuB,GAGR,SAASkO,EAAgBpgB,GACvB,IAAIiZ,EAQJ,OANA,YAAgB5X,KAAM+e,IAEtBnH,EAAS,YAA2B5X,KAAM,YAAgB+e,GAAiB5Q,KAAKnO,KAAMrB,KAC/E1B,MAAQ,CACbuF,QAASoV,EAAOjZ,MAAM6D,SAEjBoV,EAwGT,OAnHA,YAAUmH,EAAiBlO,GAc3B,YAAakO,EAAiB,CAAC,CAC7B9gB,IAAK,wBACLkC,MAAO,SAA+B6e,EAAWC,GAC/C,OAAID,EAAUxc,QAAQ9B,SAAWV,KAAKrB,MAAM6D,QAAQ9B,QAAUse,EAAUna,OAAOnE,SAAWV,KAAKrB,MAAMkG,OAAOnE,SAM7G,CACDzC,IAAK,wBACLkC,MAAO,SAA+BwC,GACpC,IAAIkV,EAAS7X,KAETkf,EAAmBlf,KAAKrB,MAAMkG,OAAOP,KAAI,SAAUnB,GACrD,MAAO,CACLhD,MAAOgD,EAAKpB,KACZoP,MAAOhO,EAAKpB,SAGZ5B,EAAQ+e,EAAiBhc,MAAK,SAAUC,GAC1C,OAAOA,EAAKhD,QAAUwC,EAAOC,aAE/B,OAAO,IAAM6K,cAAc,KAAW,CACpCtN,MAAOA,GAAS,KAChBkR,OAAQC,GACR9O,QAAS0c,EACTtQ,SAAU,SAAkBrP,GACtBsY,EAAOlZ,MAAMyf,uBAAuBvG,EAAOlZ,MAAMyf,sBAAsB,CAACzb,EAAOnG,IAAK+C,EAAEY,YAI/F,CACDlC,IAAK,qBACLkC,MAAO,WACDH,KAAKrB,MAAM2f,oBAAoBte,KAAKrB,MAAM2f,uBAE/C,CACDrgB,IAAK,sBACLkC,MAAO,SAA6B3D,GAC9BwD,KAAKrB,MAAM6f,sBAAsBxe,KAAKrB,MAAM6f,qBAAqBhiB,KAEtE,CACDyB,IAAK,sBACLkC,MAAO,SAA6BqK,MACnC,CACDvM,IAAK,qBACLkC,MAAO,SAA4B3D,GAC7BwD,KAAKrB,MAAM4f,oBAAoBve,KAAKrB,MAAM4f,mBAAmB/hB,KAElE,CACDyB,IAAK,yBACLkC,MAAO,SAAgCgf,EAAWza,GAC5C1E,KAAKrB,MAAM0f,wBAAwBre,KAAKrB,MAAM0f,uBAAuBc,EAAWza,KAErF,CACDzG,IAAK,0BACLkC,MAAO,SAAiC3D,EAAI4G,GACtCpD,KAAKrB,MAAM8f,yBAAyBze,KAAKrB,MAAM8f,wBAAwBjiB,EAAI4G,EAASjD,SAEzF,CACDlC,IAAK,SACLkC,MAAO,WACL,IAAIif,EAASpf,KAEb,OAAO,IAAMyN,cAAc,KAAW,KAAM,IAAMA,cAAc,QAAS,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAM,QAAS,IAAMA,cAAc,KAAM,KAAM,SAAU,IAAMA,cAAc,KAAM,KAAM,aAAc,IAAMA,cAAc,KAAM,KAAM,SAAU,IAAMA,cAAc,KAAM,QAAS,IAAMA,cAAc,QAAS,KAAMzN,KAAKrB,MAAM6D,QAAQ8B,KAAI,SAAUnB,EAAMS,GAC7c,OAAO,IAAM6J,cAAc,KAAM,CAC/BxP,IAAKkF,EAAK3G,IACT,IAAMiR,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAMtK,EAAK3G,IAAK,IAAMiR,cAAc,KAAM,KAAM,IAAMA,cAAc,GAAiB,CACjJjG,WAAYrE,EAAKzH,KACjBkT,SAAU,SAAkBrP,GAC1B,OAAO6f,EAAOf,uBAAuBlb,EAAK3G,GAAI+C,OAE7C,IAAMkO,cAAc,KAAM,KAAM,IAAMA,cAAc,GAAU,CACjEmB,SAAUwQ,EAAOX,wBAAwB7L,KAAKwM,EAAQjc,EAAK3G,IAC3D4S,aAAcjM,EAAKhD,MACnBzE,KAAMyH,EAAKzH,QACR,IAAM+R,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC/DnO,QAAS8f,EAAOC,oBAAoBzM,KAAKwM,EAAQjc,EAAK3G,IACtDyC,MAAO,CACLE,MAAO,MACP0X,MAAO,IAEThB,KAAM,SACH,IAAMpI,cAAc,KAAM,KAAM2R,EAAOE,sBAAsBnc,IAAQ,IAAMsK,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CACpIxO,MAAO,CACL4X,MAAO,IAETvX,QAAS8f,EAAOb,mBAAmB3L,KAAKwM,EAAQjc,EAAK3G,IACrDqZ,KAAM,eAEN,IAAMpI,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC9FxO,MAAO,CACL4X,MAAO,IAEThB,KAAM,MACNvW,QAASU,KAAKse,mBAAmB1L,KAAK5S,SACnC,IAAMyN,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,aAIjMsR,EApHT,CAqHE,IAAMzP,WACR,GAAgB+H,aAAe,CAC7B7U,QAAS,GACTqC,OAAQ,IAEH,IAAI,GAEX,SAAUkN,GAGR,SAASwN,EAAkB5gB,GACzB,IAAI6gB,EAMJ,OAJA,YAAgBxf,KAAMuf,IAEtBC,EAAS,YAA2Bxf,KAAM,YAAgBuf,GAAmBpR,KAAKnO,KAAMrB,KACjF1B,MAAQ,GACRuiB,EAqFT,OA9FA,YAAUD,EAAmBxN,GAY7B,YAAawN,EAAmB,CAAC,CAC/BthB,IAAK,wBACLkC,MAAO,SAA+BZ,EAAGsD,GACvC,GAAItD,EAAG,CACL,IAAIvD,EAAMuD,EAAE+E,KAAI,SAAUnB,GACxB,OAAOA,EAAKhD,SAEdS,QAAQC,IAAI7E,GACRgE,KAAKrB,MAAMyf,uBAAuBpe,KAAKrB,MAAMyf,sBAAsBpiB,EAAK6G,MAG/E,CACD5E,IAAK,SACLkC,MAAO,WACL,IAAIsf,EAAUzf,KAEd,OAAO,IAAMyN,cAAc,KAAW,KAAM,IAAMA,cAAc,QAAS,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAM,cAAe,IAAMA,cAAc,KAAM,KAAM,eAAgB,IAAMA,cAAc,KAAM,KAAM,uBAAwB,IAAMA,cAAc,KAAM,QAAS,IAAMA,cAAc,QAAS,KAAMzN,KAAKrB,MAAMkG,OAAOP,KAAI,SAAUnB,EAAMqH,GACjZ,IAAIhI,EAAUid,EAAQ9gB,MAAM6D,QAAQ8B,KAAI,SAAUnB,GAChD,MAAO,CACLhD,MAAOgD,EAAK3G,GACZ2U,MAAOhO,EAAK3G,OAIZkjB,EAAYvc,EAAKH,QAAQsB,KAAI,SAAUnB,GACzC,OAAOA,EAAK3G,MAEVib,EAAWjV,EAAQoC,QAAO,SAAUzB,GACtC,OAAOuc,EAAUpiB,SAAS6F,EAAKhD,UAEjC,OAAO,IAAMsN,cAAc,KAAM,CAC/BxP,IAAKkF,EAAK3G,IACT,IAAMiR,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAY,CAClGxP,IAAKkF,EAAK3G,GACVd,KAAM,OACN0D,UAAW,eACXgQ,aAAcjM,EAAKpB,KACnB6M,SAAU,SAAkBrP,GACtBkgB,EAAQ9gB,MAAMigB,uBAAuBa,EAAQ9gB,MAAMigB,sBAAsBzb,EAAKpB,KAAMxC,EAAE0Q,OAAO9P,WAEhG,IAAMsN,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC/D4D,OAAQC,GACR1C,SAAU,SAAkBrP,EAAGrC,GAC7B,GAAsB,iBAAlBA,EAAOA,OAA2B,CACpC,IAAIyiB,EAAYziB,EAAO0iB,aAAazf,MAChCsf,EAAQ9gB,MAAMggB,yBAAyBc,EAAQ9gB,MAAMggB,wBAAwB,CAACgB,IAGpFF,EAAQrB,sBAAsB7e,EAAG4D,EAAKpB,OAExC5B,MAAOsX,EACPoI,SAAS,EACTrd,QAASA,KACN,IAAMiL,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC/DxO,MAAO,CACL4X,MAAO,IAEThB,KAAM,MACNvW,QAAS,WACHmgB,EAAQ9gB,MAAMmgB,2BAA2BW,EAAQ9gB,MAAMmgB,0BAA0B3b,EAAKpB,UAEzF,IAAM0L,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC/DxO,MAAO,CACL4X,MAAO,IAEThB,KAAM,QACNvW,QAAS,WACHmgB,EAAQ9gB,MAAMkgB,mBAAmBY,EAAQ9gB,MAAMkgB,kBAAkB1b,EAAKpB,cAG5E,IAAM0L,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAM,KAAM,IAAMA,cAAc,KAAQ,CAC9FxO,MAAO,CACL4X,MAAO,IAEThB,KAAM,MACNvW,QAAS,WACHmgB,EAAQ9gB,MAAM+f,gBAAgBe,EAAQ9gB,MAAM+f,qBAE/C,IAAMjR,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,MAAO,IAAMA,cAAc,KAAM,aAI/H8R,EA/FT,CAgGE,IAAMjQ,W,mDC1iBGwQ,GAEI,8B,UCKJ,GAEX,SAAU7R,GAGR,SAAS8R,EAAoBphB,GAC3B,IAAI0B,EAMJ,OAJA,YAAgBL,KAAM+f,IAEtB1f,EAAQ,YAA2BL,KAAM,YAAgB+f,GAAqB5R,KAAKnO,KAAMrB,KACnF1B,MAAQ,GACPoD,EAYT,OArBA,YAAU0f,EAAqB9R,GAY/B,YAAa8R,EAAqB,CAAC,CACjC9hB,IAAK,SACLkC,MAAO,WACL,OAAO,IAAMsN,cAAc,KAAQ,CACjCgJ,OAAQzW,KAAKrB,MAAM8X,aAKlBsJ,EAtBT,CAuBE,IAAMzQ,W,UCxBG,GAEX,SAAUrB,GAGR,SAAS+R,EAASrhB,GAChB,IAAI0B,EAmBJ,OAjBA,YAAgBL,KAAMggB,IAEtB3f,EAAQ,YAA2BL,KAAM,YAAgBggB,GAAU7R,KAAKnO,KAAMrB,KAExEshB,gBAAkB,SAAUC,EAAUC,EAAW5gB,GACjDc,EAAM1B,MAAMshB,iBAAiB5f,EAAM1B,MAAMshB,gBAAgBC,EAAUC,EAAW5gB,IAGpFc,EAAM+f,mBAAqB,SAAUF,EAAUC,EAAW5gB,GACpDc,EAAM1B,MAAMyhB,oBAAoB/f,EAAM1B,MAAMyhB,mBAAmBF,EAAUC,EAAW5gB,IAG1Fc,EAAMggB,iBAAmB,SAAUH,EAAUC,EAAW5gB,GAClDc,EAAM1B,MAAM0hB,kBAAkBhgB,EAAM1B,MAAM0hB,iBAAiBH,EAAUC,EAAW5gB,IAGtFc,EAAMpD,MAAQ,GACPoD,EA6DT,OAnFA,YAAU2f,EAAU/R,GAyBpB,YAAa+R,EAAU,CAAC,CACtB/hB,IAAK,+BACLkC,MAAO,SAAsCgD,EAAMmd,EAAeC,EAAeC,GAC/E,IAAIzc,EAAS/D,KAEToR,EAAM,CACR5U,GAAI2G,EAAK3G,GACTqZ,UAAM/W,EACNqS,MAAO,GACPgJ,WAAYoG,EAAcjjB,SAAS6F,EAAK3G,IACxCikB,WAAYD,EAAcljB,SAAS6F,EAAK3G,KAc1C,OAXI2G,aAAgB,IAClBiO,EAAIyE,KAAO,WACXzE,EAAID,MAAQ,GAAG1Q,OAAO6f,EAAe,KAAK7f,OAAO0C,EAAKiE,gBAAgBzH,SAAW,aACxEwD,aAAgB,KACzBiO,EAAIyE,KAAO,eACXzE,EAAID,MAAQ,GAAG1Q,OAAO6f,EAAe,KAAK7f,OAAO0C,EAAKpB,MAAQ,WAC9DqP,EAAIsP,WAAavd,EAAKxD,QAAQ2E,KAAI,SAAUqc,EAAIrd,GAC9C,OAAOS,EAAO6c,6BAA6BD,EAAIL,EAAgB,KAAOhd,EAAM,GAAIid,EAAeC,OAI5FpP,IAER,CACDnT,IAAK,qBACLkC,MAAO,SAA4BtC,EAAM0iB,EAAeC,GACtD,IAAIpc,EAASpE,KAab,MAAO,CAXI,CACTxD,GAAIqB,EAAKrB,GACTqkB,UAAU,EACVhL,KAAM,eACN1E,MAAO,OACPsP,WAAYD,EAAcljB,SAASO,EAAKrB,IACxC2d,WAAYoG,EAAcjjB,SAASO,EAAKrB,IACxCkkB,WAAY7iB,EAAK8B,QAAQ2E,KAAI,SAAUqc,EAAIrd,GACzC,OAAOc,EAAOwc,6BAA6BD,GAAKrd,EAAM,GAAGwD,WAAYyZ,EAAeC,UAKzF,CACDviB,IAAK,SACLkC,MAAO,WAEL,OADAS,QAAQC,IAAIb,KAAKrB,MAAMmiB,OAChB,IAAMrT,cAAc,KAAM,CAC/BsT,SAAU/gB,KAAKghB,mBAAmBhhB,KAAKrB,MAAMmiB,MAAO9gB,KAAKrB,MAAM4hB,cAAevgB,KAAKrB,MAAM6hB,eACzFS,YAAajhB,KAAKigB,gBAClBiB,eAAgBlhB,KAAKogB,mBACrBe,aAAcnhB,KAAKqgB,iBACnBjhB,UAAW,KAAQgiB,kBAKlBpB,EApFT,CAqFE,IAAM1Q,W,qBCpFG,GAEX,SAAUrB,GAGR,SAASoT,EAAkB1iB,GACzB,IAAI0B,EAUJ,OARA,YAAgBL,KAAMqhB,IAEtBhhB,EAAQ,YAA2BL,KAAM,YAAgBqhB,GAAmBlT,KAAKnO,KAAMrB,KACjF1B,MAAQ,CACZkJ,UAAW9F,EAAM1B,MAAMwH,UACvB5E,UAAWlB,EAAM1B,MAAM4C,UACvB6E,eAAgB/F,EAAM1B,MAAMyH,gBAEvB/F,EAmIT,OAhJA,YAAUghB,EAAmBpT,GAgB7B,YAAaoT,EAAmB,CAAC,CAC/BpjB,IAAK,0BACLkC,MAAO,SAAiCiD,GACtCpD,KAAKkT,SAAS,CACZ9M,eAAgB,CACdjG,MAAOiD,EAASjD,MAChBzE,KAAM,mBAIX,CACDuC,IAAK,0BACLkC,MAAO,SAAiCiD,GACtCpD,KAAKkT,SAAS,CACZ9M,eAAgB,CACdjG,MAAOiD,EACP1H,KAAM,cAIX,CACDuC,IAAK,mBACLkC,MAAO,SAA0BuE,GAC/B1E,KAAKkT,UAAS,SAAUK,GACtB,MAAO,CACLnN,eAAgB,CACdjG,MAAO,GACPzE,KAAMgJ,EAAQvE,aAKrB,CACDlC,IAAK,sBACLkC,MAAO,WACLH,KAAKkT,UAAS,SAAUK,GACtB,MAAO,CACLpN,WAAYoN,EAAUpN,gBAI3B,CACDlI,IAAK,yBACLkC,MAAO,SAAgCzE,GACrC,IAAIqI,EAAS/D,KAEb,GAAa,gBAATtE,EAAwB,CAC1B,IAAI8G,EAAU9E,OAAO+D,OAAOzB,KAAKrB,MAAM4V,kBAAkBjQ,KAAI,SAAUnB,GACrE,MAAO,CACLhD,MAAOgD,EAAK3G,GACZ2U,MAAOhO,EAAKiE,gBAAgBzH,YAG5B8X,EAA8C,gBAAnCzX,KAAK/C,MAAMmJ,eAAe1K,KAAyB8G,EAAQU,MAAK,SAAUC,GACvF,OAAOA,EAAKhD,QAAU4D,EAAO9G,MAAMmJ,eAAejG,cAC/CrB,EACL,OAAO,IAAM2O,cAAc,KAAQ,CACjC4D,OAAQC,GACR9O,QAASA,EACT4M,aAAcqI,EACd7I,SAAU5O,KAAKshB,wBAAwB1O,KAAK5S,QAIhD,OAAO,IAAMyN,cAAc,QAAS,CAClC2B,aAAiD,WAAnCpP,KAAK/C,MAAMmJ,eAAe1K,KAAoBsE,KAAK/C,MAAMmJ,eAAejG,MAAQ,GAC9FzE,KAAM,SACN0D,UAAW,eACXwP,SAAU,SAAkBrP,GAC1B,OAAOwE,EAAOwd,wBAAwBhiB,EAAE0Q,OAAO9P,YAIpD,CACDlC,IAAK,aACLkC,MAAO,WACW,KAAEsB,OAAOzB,KAAK/C,OAAOyE,MAAM,KAAE8S,UAG3CxU,KAAKrB,MAAM6iB,WAAW,CACpBrb,UAAWnG,KAAK/C,MAAMkJ,UACtB5E,UAAWvB,KAAK/C,MAAMsE,UACtB6E,eAAgBpG,KAAK/C,MAAMmJ,mBAIhC,CACDnI,IAAK,SACLkC,MAAO,WACL,IAAIiE,EAASpE,KAETyhB,EAAc,CAAC,CACjBthB,MAAO,SACPgR,MAAO,UACN,CACDhR,MAAO,cACPgR,MAAO,gBAEL/B,EAAeqS,EAAYve,MAAK,SAAUC,GAC5C,OAAOA,EAAKhD,QAAUiE,EAAOnH,MAAMmJ,eAAe1K,QAEpD,OAAO,IAAM+R,cAAc,KAAa,CACtCrO,UAAW,KAAW,KAAQsiB,YAAa,KAAQC,MACnD7D,UAAU,EACV9C,MAAM,GACL,IAAMvN,cAAc,KAAQ,CAC7BmB,SAAU5O,KAAK4hB,oBAAoBhP,KAAK5S,MACxCkb,eAAgBlb,KAAKrB,MAAMwH,WAC1B,WAAY,IAAMsH,cAAc,KAAS,MAAO,IAAMA,cAAc,KAAQ,CAC7EoU,mBAAoB,CAClB9H,OAAQ,OAEV1I,OAAQC,GACR1C,SAAU,SAAkBrP,GAC1B,OAAO6E,EAAO0d,iBAAiBviB,IAEjCiD,QAASif,EACTrS,aAAcA,IACZpP,KAAK+hB,uBAAuB/hB,KAAK/C,MAAMmJ,eAAe1K,MAAO,IAAM+R,cAAc,KAAS,MAAO,IAAMA,cAAc,KAAa,CACpIuN,MAAM,GACL,IAAMvN,cAAc,KAAQ,CAC7BnO,QAASU,KAAKwhB,WAAW5O,KAAK5S,OAC7B,QAAS,IAAMyN,cAAc,KAAQ,CACtCnO,QAASU,KAAKrB,MAAMqjB,cACnB,gBAIAX,EAjJT,CAkJE,IAAM/R,W,UC5JG,GAAiB,SAAwB3Q,GAClD,IAAI8Q,EAAY,oBAAS,GACrBC,EAAa,YAAeD,EAAW,GACvCgR,EAAa/Q,EAAW,GACxBuS,EAAgBvS,EAAW,GAE/B,OAAO,IAAMjC,cAAc,KAAa,CACtCrO,UAAW,WACXH,MAAO,CACLijB,cAAe,QAEjBlH,MAAM,EACN8C,UAAU,GACT,IAAMrQ,cAAc,KAAa,KAAM,IAAMA,cAAc,KAAQ,CACpEnO,QAAS,WACP,OAAOX,EAAMwjB,aAAaxjB,EAAM6K,WAAY7K,EAAMsK,OAEpDhK,MAAO,CACLmjB,OAAQ,GACRvL,MAAO,IAEThB,KAAM,aACJ,IAAMpI,cAAc,KAAQ,CAC9BxO,MAAO,CACLmjB,OAAQ,IAEV9iB,QAAS,WACP,OAAO2iB,GAAexB,IAExB4B,UAAW,OACXC,UAAW7B,EAAa,aAAe,gBACtC,KAAM,IAAMhT,cAAc,OAAQ,KAAM9O,EAAM4jB,aAAc,KAAM,IAAK,IAAM9U,cAAc,OAAQ,KAAM,IAAK9O,EAAM6jB,cAAe,MAAO,IAAM/U,cAAc,KAAQ,CACvKnO,QAAS,WACP,OAAOX,EAAM8jB,eAAe9jB,EAAM6K,WAAY7K,EAAMsK,OAEtDhK,MAAO,CACLmjB,OAAQ,GACRvL,MAAO,IAETwL,UAAW,OACXC,UAAW,WACR,IAAM7U,cAAc,KAAU,CACjCiV,qBAAqB,EACrBjM,OAAQgK,GACP9hB,EAAMgkB,Y,oBC5CA,GAAgB,SAAuBhkB,GAChD,IAAI8Q,EAAY,oBAAS,GACrBC,EAAa,YAAeD,EAAW,GACvCgR,EAAa/Q,EAAW,GACxBuS,EAAgBvS,EAAW,GAE/B,OAAO,IAAMjC,cAAc,KAAa,CACtCrO,UAAW,WACXH,MAAO,CACLijB,cAAe,QAEjBlH,MAAM,EACN8C,UAAU,GACT,IAAMrQ,cAAc,KAAa,KAAM,IAAMA,cAAc,KAAQ,CACpExO,MAAO,CACL4X,MAAO,IAEThB,KAAM,WACNvW,QAAS,WACP,OAAOX,EAAMwjB,aAAaxjB,EAAMgL,UAAWhL,EAAMsK,SAEjD,IAAMwE,cAAc,KAAQ,KAAM,IAAMA,cAAc,KAAOmV,MAAO,CACtEC,MAAO,KAAUC,MAChB,IAAMrV,cAAc,KAAI,KAAM,IAAMA,cAAc,OAAQ,KAAM9O,EAAM4jB,aAAc,KAAM,IAAM9U,cAAc,KAAc,CAC7HmB,SAAUjQ,EAAMokB,wBAChB7S,YAAa,UACbd,aAAczQ,EAAMqkB,aACnB,OAAQ,IAAMvV,cAAc,KAAOmV,MAAO,CAC3CC,MAAO,KAAUI,OAChB,IAAMxV,cAAc,KAAc,CACnCmB,SAAUjQ,EAAMoc,qBAChB7K,YAAa,YACbd,aAAczQ,EAAMsI,UACnB,KAAM,IAAMwG,cAAc,KAAQ,CACnCoI,KAAM,MACNvW,QAAS,WACP,OAAOX,EAAMukB,iCAEb,IAAMzV,cAAc,KAAQ,CAC9BnO,QAAS,WACP,OAAO2iB,GAAexB,IAExB5K,KAAM,QACJ,IAAMpI,cAAc,KAAQ,CAC9BoI,KAAM,cACNvW,QAAS,WACP,OAAOX,EAAMW,QAAQX,EAAMgL,UAAWhL,EAAMsK,WAE1C,IAAMwE,cAAc,KAAQ,CAChCxO,MAAO,CACL4X,MAAO,IAEThB,KAAM,QACNvW,QAAS,WACP,OAAOX,EAAM8jB,eAAe9jB,EAAMgL,UAAWhL,EAAMsK,UAElD,IAAMwE,cAAc,KAAU,CACjCgJ,OAAQgK,EACRiC,qBAAqB,GACpB/jB,EAAMgkB,YChDA,GAEX,SAAU1U,GAGR,SAASkV,EAASxkB,GAChB,IAAI0B,EAMJ,OAJA,YAAgBL,KAAMmjB,IAEtB9iB,EAAQ,YAA2BL,KAAM,YAAgBmjB,GAAUhV,KAAKnO,KAAMrB,KACxE1B,MAAQ,GACPoD,EAsGT,OA/GA,YAAU8iB,EAAUlV,GAYpB,YAAakV,EAAU,CAAC,CACtBllB,IAAK,uBACLkC,MAAO,SAA8BmH,EAAG2B,GAClCjJ,KAAKrB,MAAMsc,sBAAsBjb,KAAKrB,MAAMsc,qBAAqB3T,EAAG2B,KAEzE,CACDhL,IAAK,gCACLkC,MAAO,SAAuC3D,EAAIkM,GAC5C1I,KAAKrB,MAAMykB,wCAAwCpjB,KAAKrB,MAAMykB,uCAAuC5mB,EAAIkM,KAE9G,CACDzK,IAAK,kCACLkC,MAAO,cACN,CACDlC,IAAK,wBACLkC,MAAO,SAA+BkJ,GACpC,IAAItF,EAAS/D,KAETuB,EAAY8H,EAAQtG,mBAYxBsK,GAXS,IAAMI,cAAc,GAAsB,CACjD8G,iBAAkBvU,KAAKrB,MAAM4V,iBAC7BkC,QAAQ,EACRH,SAAU,SAAkB+M,GAC1Btf,EAAOpF,MAAM2kB,6BAA6Bja,EAAQ7M,GAAI6mB,GAEtDvV,MAEFjO,SAAUiO,GAAa8E,KAAK5S,MAC5BuB,UAAWA,OAId,CACDtD,IAAK,SACLkC,MAAO,WACL,IAEI0O,EAFAzK,EAASpE,KAGTuiB,EAAelc,GAAgBrG,KAAKrB,MAAMyK,YAsD9C,OArDImZ,IAAcA,GAAgB,KAClC1T,EAAO7O,KAAKrB,MAAM0K,QAAQ1J,QAAQ2E,KAAI,SAAUnB,EAAMqH,GACpD,IAAI+Y,EAAYnf,EAAOzF,MAAMyK,WAAW3I,OAAO+J,GAE/C,OAAIrH,aAAgB,GACX,IAAMsK,cAAc,GAAgB,CACzC+U,cAAerf,EAAKiE,gBAAgBzH,QACpCwiB,aAAc/d,EAAOzF,MAAMwjB,aAC3BlZ,KAAMsa,EACN/Z,WAAYrG,EAAK3G,GACjBimB,eAAgBre,EAAOzF,MAAM6kB,mCAC7BjB,aAAcA,GAAgB/X,EAAQ,GACtCvM,IAAKkF,EAAK3G,GACVikB,YAAY,GACX,IAAMhT,cAAc,GAAY,CACjC4N,UAAWjX,EAAOzF,MAAM0c,UACxB9G,iBAAkBnQ,EAAOzF,MAAM4V,iBAC/B3F,SAAU,SAAkBtH,GAC1B,OAAOlD,EAAO6W,qBAAqB3T,EAAGic,IAExCtW,SAAU9J,KAEHA,aAAgB,GAClB,IAAMsK,cAAc,GAAe,CACxCxG,SAAU9D,EAAK8D,SACf8T,qBAAsB,SAA8B/V,GAClD,OAAOZ,EAAOzF,MAAM8kB,4BAA4BtgB,EAAK3G,GAAIwI,IAE3Dmd,aAAc/d,EAAOzF,MAAMwjB,aAC3Ba,YAAa7f,EAAKpB,KAClBghB,wBAAyB,SAAiC/d,GACxD,OAAOZ,EAAOzF,MAAMokB,wBAAwB5f,EAAK3G,GAAIwI,IAEvDiE,KAAMsa,EACNd,eAAgBre,EAAOzF,MAAM6kB,mCAC7B7Z,UAAWxG,EAAK3G,GAChB+lB,aAAcA,GAAgB/X,EAAQ,GACtC0Y,4BAA6B,WAC3B,OAAO9e,EAAOsf,sBAAsBvgB,IAEtClF,IAAKkF,EAAK3G,GACV8C,QAAS8E,EAAOzF,MAAMglB,oBACrB,IAAMlW,cAAc,GAAmB/P,OAAOkmB,OAAO,CACtDrP,iBAAkBnQ,EAAOzF,MAAM4V,iBAC/BiN,WAAY,SAAoBpc,GAC9B,OAAOhB,EAAOyf,8BAA8B1gB,EAAK3G,GAAI4I,IAEvD4c,aAAc5d,EAAO0f,iCACpB3gB,EAAKoF,uBAGH,QAEF,IAAMkF,cAAc,KAAa,CACtCuN,MAAM,EACN8C,UAAU,GACTjP,OAIAsU,EAhHT,CAiHE,IAAM7T,WC1HJyU,GAAe,CAAC,CAClBroB,KAAM,SACNqG,KAAM,eACN8T,KAAM,WACN7C,KAAM,IACL,CACDtX,KAAM,SACNqG,KAAM,YACN8T,KAAM,cACN7C,KAAM,aACL,CACDtX,KAAM,SACNqG,KAAM,cACN8T,KAAM,MACN7C,KAAM,eACL,CACDtX,KAAM,SACNqG,KAAM,eACN8T,KAAM,WACN7C,KAAM,gBACL,CACDtX,KAAM,SACNqG,KAAM,aACN8T,KAAM,YACN7C,KAAM,eAEG,GAEX,SAAU/E,GAGR,SAAS+V,EAAQrlB,GACf,IAAI0B,EAMJ,OAJA,YAAgBL,KAAMgkB,IAEtB3jB,EAAQ,YAA2BL,KAAM,YAAgBgkB,GAAS7V,KAAKnO,KAAMrB,KACvE1B,MAAQ,GACPoD,EA8BT,OAvCA,YAAU2jB,EAAS/V,GAYnB,YAAa+V,EAAS,CAAC,CACrB/lB,IAAK,cACLkC,MAAO,SAAqB4B,GACtB/B,KAAKrB,MAAMslB,iBAAiBjkB,KAAKrB,MAAMslB,gBAAgBliB,KAE5D,CACD9D,IAAK,SACLkC,MAAO,WACL,IAAI4D,EAAS/D,KAEb,OAAO,IAAMyN,cAAc,KAAQ,CACjCrO,UAAW,WACX8kB,YAAY,GACX,IAAMzW,cAAc,KAAOmV,MAAO,CACnCC,MAAO,KAAUC,MAChB9iB,KAAKrB,MAAMgkB,SAAUoB,GAAazf,KAAI,SAAUnB,GACjD,OAAO,IAAMsK,cAAc,KAAQ,CACjCnO,QAASyE,EAAOogB,YAAYvR,KAAK7O,EAAQZ,EAAKpB,MAC9C9D,IAAKkF,EAAKpB,KACV8T,KAAM1S,EAAK0S,KACX7C,KAAM7P,EAAK6P,KACX5T,UAAW,yBAMZ4kB,EAxCT,CAyCE,IAAM1U,WC5DG,I,OAEX,SAAUrB,GAGR,SAASmW,EAAWzlB,GAClB,IAAI0B,EAaJ,OAXA,YAAgBL,KAAMokB,IAEtB/jB,EAAQ,YAA2BL,KAAM,YAAgBokB,GAAYjW,KAAKnO,KAAMrB,KAC1E1B,MAAQ,CACZsjB,cAAe,GACfC,cAAe,CAACngB,EAAM1B,MAAMnB,KAAKhB,IACjCgB,KAAM6C,EAAM1B,MAAMnB,MAAQ,IAAI,GAC9B6mB,cAAehkB,EAAM1B,MAAMnB,KAC3B8mB,kBAAmB,CAAC,GACpBjJ,UAAW,IAAI,IAEVhb,EAgdT,OAheA,YAAU+jB,EAAYnW,GAmBtB,YAAamW,EAAY,CAAC,CACxBnmB,IAAK,oBACLkC,MAAO,cACN,CACDlC,IAAK,WACLkC,MAAO,WACL,IAAI4D,EAAS/D,KAQTtD,EAAQsD,KAAKrB,MAAMjC,MACvB,OtBrDC,SAAiB6nB,EAASC,EAAWC,EAAaC,EAAgBhoB,GACvE,IAAIioB,EAAU,CACZ,eAAgB,oBAOlB,OAJIjoB,IACFioB,EAAQC,cAAgBloB,GAGnBmoB,MAAMN,EAAS,CACpBO,OAAQ,OACRnX,KAAMvM,KAAKE,UAAUmjB,GACrBE,QAASA,IACRI,MAAK,SAAUC,GAChB,GAAmB,MAAfA,EAAIC,OACN,MAAM,IAAI1b,MAAMmb,GAAkB,UAGpC,OAAOM,EAAIE,UACVH,MAAK,SAAUI,GAChB,GAAIA,EAAQjP,OACV,MAAMiP,EAAQjP,OAAO,GAChB,GAAIiP,EAAQlkB,MAAQkkB,EAAQlkB,KAAKujB,GACtC,OAAOW,EAAQlkB,KAAKujB,MAErBY,OAAM,SAAUC,GACjB,MAAMA,KsB2BGC,CAAQxF,GAAoB,QAPjB,CAChByF,MAAO,qMACPC,UAAW,CACTC,OAAQ,8CAI6C,iCAAkC/oB,GAAOqoB,MAAK,SAAUW,GAG/G,GAFAA,EAAOA,EAAK,GAEF,CACRA,EAAK/lB,QAAUyB,KAAKC,MAAMqkB,EAAK/lB,SAC/BiB,QAAQC,IAAI6kB,EAAKlpB,IACjB,IAAIgB,EAAO,GAAY8H,SAASogB,GAG5BC,EAAW5hB,EAAO6hB,cAAc,CAAC,EAAG,GAAI,EAAGpoB,EAAM,MAAM,EAF9C,IAIboD,QAAQC,IAAI8kB,GAEZ5hB,EAAOmP,SAAS,CACd1V,KAAMA,EACN6mB,cAAe7mB,EACf8mB,kBAAmB,CAAC,WAK3B,CACDrmB,IAAK,gBACLkC,MAAO,SAAuB0lB,EAAkBxZ,EAAY7O,EAAMiN,GAChE,IAAIqb,IAAQtW,UAAU9O,OAAS,QAAsB5B,IAAjB0Q,UAAU,KAAmBA,UAAU,GACvEuW,EAAYvW,UAAU9O,OAAS,EAAI8O,UAAU,QAAK1Q,EAEtD,GADKinB,IAAWA,EAAY,MACxBF,EAAiBnlB,QAAU,GAA/B,CACA,IAAI2I,EAAU,GAAYC,YAAYuc,EAAkB,CAACroB,IACzD,GAAK6L,EAAL,CAEA,IAAK,IAAIzF,EAAIyI,EAAYzI,EAAIyF,EAAQ1J,QAAQe,OAAQkD,IAAK,CACxD,IAAIsF,EAAUG,EAAQ1J,QAAQiE,GAE1BsF,aAAmB,GACjBuB,IAAcpC,GAAKqD,UAAajB,GAAWsb,EAAUxoB,KAAK2L,GACrDA,aAAmB,KACxBuB,IAAcpC,GAAKsD,SAAYlB,GAAWsb,EAAUxoB,KAAK2L,GAC7DlJ,KAAK4lB,cAAcC,EAAiBplB,OAAOmD,GAAI,EAAGpG,EAAMiN,GAAW,EAAOsb,IAI9E,GAAID,EAAO,CACT,IAAItZ,EAASqZ,EAAiBtf,MAAM,GAChCiE,EAAQgC,EAAOC,MAEE,kBAAVjC,GACTxK,KAAK4lB,cAAcpZ,EAAQhC,EAAOhN,EAAMiN,GAAW,EAAMsb,GAI7D,OAAOA,MAER,CACD9nB,IAAK,mBACLkC,MAAO,WACL,IAAIiE,EAASpE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAG/B,OADAgP,EAAOQ,WAAW5I,EAAOnH,MAAMqnB,mBACxB,CACL9mB,KAAMgP,MAEP,WACGpI,EAAOzF,MAAMiQ,UAAUxK,EAAOzF,MAAMiQ,SAASxK,EAAOnH,MAAMO,WAGjE,CACDS,IAAK,oBACLkC,MAAO,WACL,IAAIsE,EAASzE,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAG/B,OADAgP,EAAOU,YAAYzI,EAAOxH,MAAMqnB,mBACzB,CACL9mB,KAAMgP,MAEP,WACG/H,EAAO9F,MAAMiQ,UAAUnK,EAAO9F,MAAMiQ,SAASnK,EAAOxH,MAAMO,WAGjE,CACDS,IAAK,gCACLkC,MAAO,SAAuC6lB,EAAUC,GACtD,IAAIhU,EAASjS,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI8Q,EAAgB9Q,EAAU8Q,cAC1BC,EAAoB/Q,EAAU+Q,kBAC9B4B,EAASD,EAAM1f,MAAM,EAAG0f,EAAMvlB,OAAS,GAEvC8L,EAAS,KAAEhI,MAAM+O,EAAU/V,MAE3B2F,EAAO,GAAYmG,YAAY2c,EAAO,CAAChU,EAAOhV,MAAMO,OACxD,GAAI2F,GAAQ6iB,IAAa7iB,EAAK3G,GAAI,MAAM,IAAI+M,MAAM,8BAElD,GAAIpG,aAAgB,GAClBqJ,EAAO2Z,eAAehjB,EAAK3G,GAAIypB,QAC1B,GAAI9iB,aAAgB,KACzBqJ,EAAO4Z,cAAcjjB,EAAK3G,GAAIypB,GAE1B9iB,EAAK3G,KAAO+W,EAAU8Q,cAAc7nB,IAAI,CAC1C,IAAIiN,EAAgB,GAAYH,YAAY4c,EAAQ,CAACjU,EAAOhV,MAAMO,QAE9DiM,GAAmBA,aAAyB,KAC9C4a,EAAgB5a,EAChB6a,EAAoB4B,GAK1B,MAAO,CACL1oB,KAAMgP,EACN6X,cAAeA,EACfC,kBAAmBA,MAEpB,WACGrS,EAAOtT,MAAMiQ,UAAUqD,EAAOtT,MAAMiQ,SAASqD,EAAOhV,MAAMO,WAGjE,CACDS,IAAK,mBACLkC,MAAO,WACL,GAAIH,KAAK/C,MAAMqnB,kBAAkB5jB,OAAS,EAAG,CAC3C,IAAI2lB,EAAiBrmB,KAAK/C,MAAMqnB,kBAAkB/d,MAAM,EAAGvG,KAAK/C,MAAMqnB,kBAAkB5jB,OAAS,GAC7F4lB,EAAa,GAAYhd,YAAY+c,EAAgB,CAACrmB,KAAK/C,MAAMO,QAEjE8oB,GAAgBA,aAAsB,IACxCtmB,KAAKkT,UAAS,SAAUK,GACtB,MAAO,CACL8Q,cAAgBiC,EAAuCA,aAAsB,GAAa/S,EAAU8Q,cAAgBiC,EAAvF/S,EAAU8Q,cACvCC,kBAAmB+B,SAM5B,CACDpoB,IAAK,aACLkC,MAAO,WAiBDH,KAAKrB,MAAM4nB,QAAQvmB,KAAKrB,MAAM4nB,OAAOvmB,KAAK/C,MAAMO,QAErD,CACDS,IAAK,yBACLkC,MAAO,SAAgC4B,GACrC,OAAQA,GACN,IAAK,cACH/B,KAAKwmB,mBACL,MAEF,IAAK,eACHxmB,KAAKymB,oBACL,MAEF,IAAK,eACHzmB,KAAK0mB,mBACL,MAEF,IAAK,YACH1mB,KAAKwhB,aACL,MAEF,IAAK,aACH,IAAIvgB,EAAOG,KAAKE,UAAU,GAAY4D,OAAOlF,KAAK/C,MAAMO,OACxD,KAAKyD,GACL,IAAI0lB,EAAQ,CACVpQ,QAAS,4BACTV,KAAM,OACN+Q,OAAQ,KAAOC,SAEjB7mB,KAAK8mB,WAAWC,KAAKJ,MAI1B,CACD1oB,IAAK,uBACLkC,MAAO,SAA8B8M,EAAUhE,GAC7C,IAAI2O,EAAS5X,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAE3B0oB,EAASjd,EAAK1C,MAAM,EAAG0C,EAAKvI,OAAS,GACrB,GAAY4I,YAAY4c,EAAQ,CAAC1Z,cAEtB,IACrBoL,EAAO3a,MAAMO,KAAKoL,UAAUqE,EAASzQ,IAC3CwqB,mBAAmB/Z,GAGvB,MAAO,CACLzP,KAAMgP,MAEP,WACGoL,EAAOjZ,MAAMiQ,UAAUgJ,EAAOjZ,MAAMiQ,SAASgJ,EAAO3a,MAAMO,WAGjE,CACDS,IAAK,2BACLkC,MAAO,SAAkC+f,EAAUC,EAAW5gB,GAC5D2gB,EAASO,YAAa,EACtB,IAAItd,EAAO,GAAYmG,YAAY6W,EAAW,CAACngB,KAAK/C,MAAMO,OAEtD2F,GACFnD,KAAKkT,UAAS,SAAUK,GAEtB,MAAO,CACLiN,cAFkBrd,EAAO,KAAE8jB,MAAM,CAAC9jB,EAAK3G,IAAK+W,EAAUiN,eAAiBjN,EAAUiN,oBAOxF,CACDviB,IAAK,6BACLkC,MAAO,SAAoC+f,GACzClgB,KAAKkT,UAAS,SAAUK,GAItB,MAAO,CACLiN,cAJkBjN,EAAUiN,cAAc5b,QAAO,SAAUzB,GAC3D,OAAO+c,EAAS1jB,KAAO2G,WAO5B,CACDlF,IAAK,0BACLkC,MAAO,SAAiC+f,EAAUC,EAAW5gB,GAC3D,IAAI4D,EAAO,GAAYmG,YAAY6W,EAAW,CAACngB,KAAK/C,MAAMO,QAEtD2F,GAAUA,aAAgB,GAWnBA,GACTnD,KAAKkT,UAAS,SAAUK,GACtB,IAAI2S,EAAS/F,EAAUzf,OAAS,EAAIyf,EAAU5Z,MAAM,EAAG4Z,EAAUzf,OAAS,GAAKyf,EAC3E1W,EAAgB,GAAYH,YAAY4c,EAAQ,CAAC3S,EAAU/V,OAC3D0pB,EAAmB,GAAY5d,YAAY6W,EAAW,CAAC5M,EAAU/V,OACjEgjB,EAAgBjN,EAAUiN,cAC1BD,EAAgB2G,EAAmB,CAACA,EAAiB1qB,IAAM+W,EAAUgN,cAOzE,OALI9W,GAAmBA,aAAyB,KAC9C+W,EAAgB,KAAEyG,MAAM,CAACxd,EAAcjN,IAAKgkB,GAC5CD,EAAchjB,KAAKkM,EAAcjN,KAG5B,CACLgkB,cAAeA,EACfD,cAAeA,EACf8D,eAAe5a,GAAmBA,aAAyB,GAA8B8J,EAAU8Q,cAA1B5a,EACzE6a,kBAAmB4B,MA3BvBlmB,KAAKkT,UAAS,SAAUK,GACtB,IAAIiN,EAAgBrd,EAAO,KAAE8jB,MAAM,CAAC9jB,EAAK3G,IAAK+W,EAAUiN,eAAiBjN,EAAUiN,cAEnF,MAAO,CACLD,cAFkBpd,EAAO,CAACA,EAAK3G,IAAM+W,EAAUgN,cAG/CC,cAAeA,EACf6D,eAAelhB,GAAUA,aAAgB,GAAqBoQ,EAAU8Q,cAAjBlhB,EACvDmhB,kBAAmBnE,QAyB1B,CACDliB,IAAK,uBACLkC,MAAO,SAA8BgnB,GACnC,IAAItP,EAAS7X,KAEbA,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAG/B,OADAgP,EAAOzK,KAAOolB,EACP,CACL3pB,KAAMgP,MAEP,WACGqL,EAAOlZ,MAAMiQ,UAAUiJ,EAAOlZ,MAAMiQ,SAASiJ,EAAO5a,MAAMO,WAGjE,CACDS,IAAK,sBACLkC,MAAO,SAA6B3D,EAAIyM,GACtCjJ,KAAKkT,UAAS,SAAUK,GACtB,IAAIlK,EAAU,GAAYC,YAAYL,EAAM,CAACsK,EAAU/V,OACnDgjB,EAAgBjN,EAAUiN,cAC1BD,EAAgB,GAOpB,OALIlX,GAAWA,aAAmB,KAChCmX,EAAgB,KAAEyG,MAAM,CAAC5d,EAAQ7M,IAAKgkB,GACtCD,EAAchjB,KAAK8L,EAAQ7M,KAGtB,CACLgkB,cAAeA,EACfD,cAAeA,EACf8D,eAAehb,GAAaA,aAAmB,GAAwBkK,EAAU8Q,cAApBhb,EAC7Dib,kBAAmBrb,QAIxB,CACDhL,IAAK,kCACLkC,MAAO,SAAyC3D,EAAIkM,GAClD1I,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAG/B,OADAgP,EAAO3D,SAASrM,GAAI4qB,uBAAuB1e,GACpC,CACLlL,KAAMgP,QAIX,CACDvO,IAAK,0BACLkC,MAAO,SAAiC3D,EAAIwI,GAC1ChF,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAI/B,OAFWgP,EAAO3D,SAASrM,GACtBuF,KAAOiD,EACL,CACLxH,KAAMgP,QAIX,CACDvO,IAAK,eACLkC,MAAO,SAAsB3D,EAAIyM,GAC/BjJ,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAE3BqM,EAAU,KAAErF,MAAMyE,GAOtB,OALIY,EAAQA,EAAQnJ,OAAS,GAAK,IAChCmJ,EAAQA,EAAQnJ,OAAS,GAAKmJ,EAAQA,EAAQnJ,OAAS,GAAK,GAG9D8L,EAAO6a,SAASpe,EAAMY,GACf,CACLrM,KAAMgP,QAIX,CACDvO,IAAK,+BACLkC,MAAO,SAAsCwJ,EAAW1J,GACtDD,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAG/B,OADAgP,EAAO3D,SAASc,GAAW5G,mBAAmB5B,YAAYlB,GACnD,CACLzC,KAAMgP,QAIX,CACDvO,IAAK,8BACLkC,MAAO,SAAqCwJ,EAAW3E,GACrDhF,KAAKkT,UAAS,SAAUK,GACtB,IAAI/G,EAAS,KAAEhI,MAAM+O,EAAU/V,MAG/B,OADAgP,EAAO3D,SAASc,GAAW1C,SAAWjC,EAC/B,CACLxH,KAAMgP,QAIX,CACDvO,IAAK,SACLkC,MAAO,WACL,IAAIif,EAASpf,KAEb,OAAO,IAAMyN,cAAc,MAAO,KAAM,IAAMA,cAAc,KAAS,CACnEyJ,IAAK,SAAa7R,GAChB,OAAOA,EAAI+Z,EAAO0H,WAAazhB,EAAI,QAEnC,IAAMoI,cAAc,GAAqB,CAC3CgJ,QAAQ,IACN,IAAMhJ,cAAc,GAAS,CAC/BwW,gBAAiBjkB,KAAKsnB,uBAAuB1U,KAAK5S,OACjD,IAAMyN,cAAc,KAAc,CACnCtN,MAAOH,KAAK/C,MAAMO,KAAKuE,KACvB6M,SAAU5O,KAAKunB,qBAAqB3U,KAAK5S,SACtC,IAAMyN,cAAc,MAAO,CAC9BxO,MAAO,CACLuoB,QAAS,OACTC,cAAe,MACfC,QAAS,IAEXtoB,UAAW,qBACV,IAAMqO,cAAc,MAAO,CAC5BxO,MAAO,CACLqa,WAAY,cACZqO,YAAa,IAEfvoB,UAAW,mBACV,IAAMqO,cAAc,MAAO,CAC5BrO,UAAW,mBACV,IAAMqO,cAAc,GAAU,CAC/B+S,cAAexgB,KAAK/C,MAAMujB,cAC1BD,cAAevgB,KAAK/C,MAAMsjB,cAC1BF,iBAAkBrgB,KAAK4nB,yBAAyBhV,KAAK5S,MACrDogB,mBAAoBpgB,KAAK6nB,2BAA2BjV,KAAK5S,MACzDigB,gBAAiBjgB,KAAK8nB,wBAAwBlV,KAAK5S,MACnD8gB,MAAO9gB,KAAK/C,MAAMO,SACd,IAAMiQ,cAAc,MAAO,CAC/BxO,MAAO,CACL4X,MAAO,QAETzX,UAAW,IACV,IAAMqO,cAAc,GAAU,CAC/BgW,4BAA6BzjB,KAAKyjB,4BAA4B7Q,KAAK5S,MACnEsjB,6BAA8BtjB,KAAKsjB,6BAA6B1Q,KAAK5S,MACrEmiB,aAAcniB,KAAKmiB,aAAavP,KAAK5S,MACrCqb,UAAWrb,KAAK/C,MAAMoe,UACtB0H,wBAAyB/iB,KAAK+iB,wBAAwBnQ,KAAK5S,MAC3DuU,iBAAkBvU,KAAK/C,MAAMO,KAAKoL,UAClCwa,uCAAwCpjB,KAAK+nB,gCAAgCnV,KAAK5S,MAClF2jB,mBAAoB3jB,KAAKgoB,oBAAoBpV,KAAK5S,MAClDwjB,mCAAoCxjB,KAAKioB,8BAA8BrV,KAAK5S,MAC5EoJ,WAAYpJ,KAAK/C,MAAMqnB,kBACvBrJ,qBAAsBjb,KAAKkoB,qBAAqBtV,KAAK5S,MACrDqJ,QAASrJ,KAAK/C,MAAMonB,uBAKnBD,EAjeT,CAkeE,IAAM9U,Y,IC5WN,IAAMA,U,ibC/HD,IAAM6Y,GAAW/a,KAAH,MAURgb,GAAYhb,KAAH,M,sDCTtB,SAASib,GAAa1pB,GAClB,OAAQA,EAAMsO,SAASvR,KAAKqG,MACxB,KAAK4D,GAAagJ,OACd,OAAO,kBAAC,KAAD,CAAO1Q,IAAK,aAAeU,EAAM2pB,WAAWpO,MAAMnY,KAAM5B,MAAOxB,EAAM2pB,WAAWpO,MAAM/Z,MAAOyO,SAAUjQ,EAAM2pB,WAAWpO,MAAMtL,SAAUlT,KAAK,WAExJ,KAAKiK,GAAaoL,OACd,OAAO,kBAAC,KAAD,CAAO9S,IAAK,aAAeU,EAAM2pB,WAAWpO,MAAMnY,KAAM5B,MAAOxB,EAAM2pB,WAAWpO,MAAM/Z,MAAOyO,SAAUjQ,EAAM2pB,WAAWpO,MAAMtL,SAAUlT,KAAK,SAExJ,KAAKiK,GAAakW,YACd,OAAO,kBAAC,KAAD,CAAO5d,IAAK,aAAeU,EAAM2pB,WAAWpO,MAAMnY,KAAM5B,MAAOxB,EAAM2pB,WAAWpO,MAAM/Z,MAAOyO,SAAUjQ,EAAM2pB,WAAWpO,MAAMtL,SAAUlT,KAAK,WAExJ,KAAKiK,GAAa+I,KACd,OAAO,kBAAC,KAAD,eAAYzQ,IAAK,aAAeU,EAAM2pB,WAAWpO,MAAMnY,MAAUpD,EAAM2pB,WAAWpO,QAG7F,KAAKvU,GAAaqL,OACd,OAAO,kBAACuX,GAAD,CAAapoB,MAAOxB,EAAM2pB,WAAWpO,MAAM/Z,MAAOlC,IAAK,aAAeU,EAAM2pB,WAAWpO,MAAMnY,KAAMS,QAAS7D,EAAMsO,SAASzK,QAASoM,SAAUjQ,EAAM2pB,WAAWpO,MAAMtL,YAQxL,IAAM4Z,GAAa,CACfhB,QAAS,QACTpF,OAAQ,OACRqG,WAAY,QAEhB,SAASF,GAAY5pB,GACjB,OACI,kBAAC,KAAMikB,MAAP,CAAaziB,MAAOxB,EAAMwB,MAAOyO,SAAUjQ,EAAMiQ,UAC5CjQ,EAAM6D,QAAQ8B,KAAI,SAAAnB,GACf,OACI,kBAAC,KAAD,CAAOlE,MAAOupB,GAAYvqB,IAAKkF,EAAK3G,GAAI2D,MAAOgD,EAAK3G,IAAK2G,EAAK6P,UAsB3E,I,wCCvDA,SAAS0V,GAAI/pB,GAChB,OACI,kBAAC,KAAD,CAASgqB,UAAU,MAAMjpB,MAAOf,EAAMe,OAClC,kBAAC,KAAD,CAAQJ,QAASX,EAAMW,QAASF,UAAS,gBAAWT,EAAMS,WAAa1D,KAAMiD,EAAMjD,KAAMktB,MAAOjqB,EAAMiqB,MAAO/S,KAAMlX,EAAMkX,Q,2kBCL9H,IAAMgT,GAAb,yHAEuC5b,GAC/B,GAAIA,EAASlK,mBAAmB9C,SAASS,OAAS,EAAG,OAAO,EAC5D,IAAI8B,EAAUyK,EAASzK,SAAWyK,EAASzK,QAAQ6P,cAC7CxN,EAAwBrC,EAAxBqC,OAAQC,EAAgBtC,EAAhBsC,YAEd,QADYD,EAAO3B,MAAK,SAAAC,GAAI,OAAIA,EAAKJ,mBAAmB9C,SAASS,OAAS,QAEtEoE,EAAY5B,MAAK,SAAAC,GAAI,OAAIA,EAAKJ,mBAAmB9C,SAASS,OAAS,OAR/E,+BAcoBlD,GAA4B,IAAjBsrB,EAAgB,uDAAJ,GACnCA,EAAKtrB,EAAKhB,IAAV,MAAqBgB,EAArB,CAA2BkjB,WAAY,GAAIqI,MAAOvrB,aAAgB8K,GAAkB,UAAY,SAChGwgB,EAAKtrB,EAAKhB,IAAIkkB,WAAa,GAC3B,IAAK,IAAI9c,EAAI,EAAGA,EAAIklB,EAAKtrB,EAAKhB,IAAImD,QAAQe,OAAQkD,IAAK,CACnD,IAAIT,EAAO2lB,EAAKtrB,EAAKhB,IAAImD,QAAQiE,GAC7BT,EAAK2J,eAAe,YACpB+b,EAAOG,SAAS7lB,EAAM2lB,GACtBA,EAAKtrB,EAAKhB,IAAIkkB,WAAWnjB,KAAK4F,EAAK3G,MAEnCssB,EAAK3lB,EAAK3G,IAAV,MAAqB2G,EAArB,CAA2B4lB,MAAO,aAClCD,EAAKtrB,EAAKhB,IAAIkkB,WAAWnjB,KAAK4F,EAAK3G,KAI3C,cADOssB,EAAKtrB,EAAKhB,IAAImD,QACdmpB,IA5Bf,2CA+BgCptB,EAAkByE,GAC1C,OAAQzE,EAAKqG,MACT,KAAK4D,GAAauL,QACd,OAAO+X,QAAQ9oB,GACnB,KAAKwF,GAAa+I,KACd,OAAO,IAAI9G,KAAKzH,GACpB,KAAKwF,GAAagJ,OACd,OAAOua,WAAW/oB,GACtB,KAAKwF,GAAaoL,OACd,OAAO5Q,EACX,KAAKwF,GAAa8I,KACd,OAAO,IAAI7G,KAAKzH,GAExB,OAAOA,IA5Cf,wCA4E6BoB,EAAwB4nB,EAAwCC,GACrF,IAAIC,GAAc,EACdC,EAAkB,KACtB,OAAK/nB,GACLA,EAAUtB,UAAYsB,EAAUtB,SAASM,SAAQ,SAAAC,GAE7C,IAAI+oB,EAAgBV,EAAOW,eAAehpB,EAAS2oB,EAAaC,GAChE,GAAKE,GAIA,GAAIA,EACL,OAAQA,GACJ,KAAKxsB,EAAoBuX,IACrBgV,EAAcA,GAAeE,EAC7B,MACJ,KAAKzsB,EAAoBwX,GACrB+U,EAAcA,GAAeE,QATrCF,EAAcE,EACdD,EAAkB9oB,EAAQG,qBAc3B0oB,GApBgBA,IA/E/B,gCAsGqB5nB,EAAQyV,GACrB,GAAKzV,EAEL,IADA,IAAI9D,EAAOD,OAAOC,KAAK8D,GACdmC,EAAI,EAAGA,EAAIjG,EAAK+C,OAAQkD,IAAK,CAClC,IAAI3F,EAAMN,EAAKiG,GACX6lB,EAAOhoB,EAAOxD,GAClB,GAAIiC,MAAMwpB,QAAQD,GAAO,CACrB,IAAItU,EAAM0T,EAAOpW,UAAUgX,EAAKA,EAAK/oB,OAAS,GAAIwW,GAClD,GAAI/B,EAAK,OAAOA,OAEhB,GAAIlX,IAAQiZ,EACR,OAAOuS,KAjH3B,kCAuHuBE,GACf,IAAIC,EAAS,EACTC,EAAW,EAMf,OALAnsB,OAAOC,KAAKgsB,GAAQppB,SAAQ,SAACtC,GACzB,IAAMiD,EAAIyoB,EAAO1rB,GACjB2rB,GAAU1oB,EAAE0oB,OACZC,GAAY3oB,EAAE2oB,YAEXD,EAASC,IA/HxB,mCAiIwBC,EAAUroB,GAC1B,IAAKqoB,EAAU,OAAQ,EACvB,GAAKA,EAAS3jB,UACT,CACD,IAAI4jB,EAAQD,EAAS1jB,eAErB,GAAmB,WAAf2jB,EAAMruB,KACN,OAAOsuB,SAASD,EAAM5pB,OAGtB,IAAI+W,EAAM6S,EAAM5pB,MAEZA,EAAQ0oB,EAAOpW,UAAUhR,EAAQyV,GACrC,OAAI/W,EACO6pB,SAAS7pB,GAET,EAdM,OAAQ,IAnIzC,0CAuJ+BgD,GACvB,IAAI8mB,EAA2B,GAC3BC,EAA+B,GAC/BC,EAAoC,GACpCC,EAAkC,GAClCC,EAAyB,KAE7B,GAAIlnB,aAAgB6D,IAA6B,aAAf7D,EAAK4lB,MAAsB,CAEzDkB,EAD8B9mB,GAAQA,EAAKJ,oBAAsBI,EAAKJ,mBAAmB9C,SAChDkD,EAAKJ,mBAAmB9C,SAASqE,KAAI,SAAAgmB,GAAG,OAAIA,EAAIlX,oBAAetU,EAExGqE,EAAK+D,WAAWC,oBAAoB5G,SAAQ,SAAAgqB,GAAE,OAAIA,EAAGhpB,UAAUtB,SAASM,SAAQ,SAAA4C,GAAI,OAAIinB,EAAsB7sB,KAAK4F,EAAKiQ,mBAGxH,IAAMtO,EAAcpH,OAAO+D,OAAO0B,EAAKX,QAAQF,YAAYsC,QAAO,SAAAzB,GAAI,OAAKA,EAAKP,aAGjElF,OAAO+D,OAAO0B,EAAKX,QAAQD,gBAGnChC,SAAQ,SAAAuC,GAAK,OAAIA,EAAMC,oBAAsBD,EAAMC,mBAAmB9C,SAASM,SAAQ,SAAA+pB,GAAG,OAAIJ,EAAmB3sB,KAAK+sB,EAAIlX,mBAGjItO,EAAYvE,SAAQ,SAAA8C,GAAG,OAAIA,EAAIN,oBAAsBM,EAAIN,mBAAmB9C,SAASM,SAAQ,SAAA+pB,GAAG,OAAIH,EAAwB5sB,KAAK+sB,EAAIlX,wBAGpI,GAAIjQ,aAAgBmF,IAAkC,YAAfnF,EAAK4lB,MAAqB,CAElEkB,EAD8B9mB,GAAQA,EAAKJ,oBAAsBI,EAAKJ,mBAAmB9C,SAChDkD,EAAKJ,mBAAmB9C,SAASqE,KAAI,SAAAgmB,GAAG,OAAIA,EAAIlX,oBAAetU,EACxGurB,EAAiBlnB,EAAKoF,oBAAoBpC,WAA8D,gBAAjDhD,EAAKoF,oBAAoBnC,eAAe1K,KAAyByH,EAAKoF,oBAAoBnC,eAAejG,MAAQ,KAE5K,IAAIqqB,EAAK,IAAIC,IAAI,GAAGhqB,OAAOwpB,EAAgBC,EAAoBC,EAAyBE,EAAiB,CAACA,GAAkB,KAC5H,MAAO,CACHK,IAAKxqB,MAAMyqB,KAAKH,GAChBI,mBAAoB1qB,MAAMyqB,KAAK,IAAIF,IAAIR,IACvCY,gBAAiB3qB,MAAMyqB,KAAK,IAAIF,IAAIP,IACpCY,qBAAsB5qB,MAAMyqB,KAAK,IAAIF,IAAIN,IACzCE,eAAgBA,OA5L5B,KAAaxB,GA+CFW,eAAiB,SAACrmB,EAAgBgmB,EAAwCC,GAC7E,IAAI2B,GAAS,EACPC,EAAS7B,EAAYhmB,EAAKiQ,aAC1BnG,EAAWmc,EAAcjmB,EAAKiQ,aACpC,IAAKnG,EAAU,MAAM,IAAI1D,MAAM,4BAC/B,IAAI0hB,EAAKpC,GAAOqC,qBAAqBje,EAASzF,WAAYrE,EAAKmQ,gBAAgB3T,SAC3EwrB,EAAKtC,GAAOqC,qBAAqBje,EAASzF,WAAYwjB,GAE1D,OAAQ7nB,EAAKkQ,oBACT,KAAK7N,GAAqByP,MACtB8V,EAASI,IAAOF,EAChB,MACJ,KAAKzlB,GAAqB4lB,aACtBL,EAASI,EAAKF,EACd,MACJ,KAAKzlB,GAAqB6lB,sBACtBN,EAASI,GAAMF,EACf,MACJ,KAAKzlB,GAAqB8lB,UACtBP,EAASI,EAAKF,EACd,MACJ,KAAKzlB,GAAqB+lB,mBACtBR,EAASI,GAAMF,EAIvB,OAAOF,G,0DChFFS,GAAe,SAACvuB,EAAO0B,GAAR,OAAkB1B,EAAME,WACvCsuB,GAAiB,SAACxuB,EAAkB0B,GAAnB,OAA6BA,EAAM+sB,QAEpDC,GAAkB,SAAC1uB,EAAkB0B,GAAnB,OAA6B1B,EAAMZ,aAIrDuvB,GAAY,SAAC3uB,EAAkB0B,GAAnB,OAA6B1B,GAEzC4uB,GAAwB,SAAC5uB,EAAO0B,GAAR,OAAkBA,EAAMmtB,mBAAqBntB,EAAMotB,cCN3EC,GAAoBC,0BAAe,CAACN,GDOvB,SAAC1uB,EAAkB0B,EAAY8mB,GAA/B,OAA0D9mB,EAAM8mB,QAAUA,KCNlG,SAACppB,EAAaopB,GAAd,OAAyBppB,EAAYN,KAAK0pB,M,qBCA/BoE,GAAW,SAAA1pB,GAAK,OAAIA,OAAQrB,EAAY,mBAMxCotB,GAAkBD,0BAAe,CAACT,GAAcC,KACzD,SAACtuB,EAAWuuB,GACR,OAAOvuB,EAAUpB,KAAK2vB,MAMjBS,IAHuBF,0BAAe,CAACC,KAChD,SAAA1uB,GAAI,OAAIA,EAAKoL,aAEiBqjB,0BAAe,CAACC,KAC9C,SAAC1uB,GAAD,OAAUA,EAAKqL,aACNujB,GAAyBH,0BAAe,CAACE,GFZzB,SAAClvB,EAAO0B,GAAR,OAAkBA,EAAMgL,aEYqC,SAACd,EAAUc,GAAX,OAAyBd,EAASc,MAK/G0iB,IAJmCJ,0BAAe,CAACG,KAC5D,SAAC/iB,GAAD,OAAaA,EAAQijB,sBAGoBC,KAAqB,CAACd,GAAgBE,KAAkB,SAACa,EAAKnwB,GACvG,IAAIowB,EAAM,GAMV,OALA/uB,OAAO+D,OAAOpF,EAAYN,MAAMwE,SAAQ,SAAC4C,GACjCA,EAAKsiB,SAAW+G,GAChBC,EAAIlvB,KAAK4F,EAAK3G,OAGfiwB,IAPkCF,EASzC,SAACtvB,EAAO0B,GAAR,OAAkBA,EAAM+sB,WAGfgB,GAAsBT,0BAAe,CFjClB,SAAChvB,EAAO0B,GAAR,OAAkBA,EAAM8mB,QEiCamG,KAAY,SAACe,EAAK1vB,GACnF,OAAO2vB,aAAcD,EAAdC,CAAmB3vB,MAEjB4vB,GAAkBZ,0BAAe,CAACC,GFtCjB,SAACjvB,EAAO0B,GAAR,OAAkBA,EAAM6K,YAAc7K,EAAMnC,MEuCtE,SAACgB,EAAWgM,GAAZ,OAAmChM,EAAKgM,MAE/BsjB,GAAqBb,0BAAe,CAACY,KAAkB,SAAC5f,GAAD,OAAcA,EAASzK,WAE9EuqB,GAAmBd,0BAAe,CAACa,KAC5C,SAACtqB,GACG,MAAO,CACHsC,YAAapH,OAAO+D,OAAOe,EAAQF,YAAYsC,QAAO,SAACzB,GAAD,OAAgBA,EAAKP,aAC3EiC,OAAQnH,OAAO+D,OAAOe,EAAQD,oBAI7ByqB,GAA2Bf,0BAAe,CAACc,KAAoB,SAAAvqB,GAAY,IAC5EqC,EAAwBrC,EAAxBqC,OAAQC,EAAgBtC,EAAhBsC,YACZmoB,EAAyB,GAQ7B,OAPApoB,EAAOtE,SAAQ,SAAC4C,GACZ8pB,EAAeA,EAAaxsB,OAAO0C,EAAKJ,mBAAqBI,EAAKJ,mBAAmB9C,SAASqE,KAAI,SAAAnB,GAAI,OAAIA,EAAKiQ,eAAe,OAElItO,EAAYvE,SAAQ,SAAC4C,GACjB8pB,EAAeA,EAAaxsB,OAAO0C,EAAKJ,mBAAqBI,EAAKJ,mBAAmB9C,SAASqE,KAAI,SAAAnB,GAAI,OAAIA,EAAKiQ,eAAe,OAG3HlT,MAAMyqB,KAAK,IAAIF,IAAIwC,OAEjBC,GAA0BjB,0BAAe,CAACJ,GAAuBmB,GAA0BN,KAAsB,SAACS,EAAUC,EAAMC,GAE3I,IAAIC,EAAY,GAChB,IAAKD,EAAM,OAAOC,EAClB,IAAIC,EAAiBC,KAAEC,OAAON,GAkB9B,OANAC,EAAK7sB,SAAQ,SAAAmtB,GACT,IAAIC,EAZc,SAAhBC,EAAiBnsB,EAAQwH,EAAM/F,GACjC,GAAoB,IAAhB+F,EAAKvI,OAAT,CACA,IAAImJ,EAAUZ,EAAK1C,MAAM,GACzBsD,EAAQ9I,OAAOkI,EAAKvI,OAAS,EAAG,EAAGwC,GACnC,IAAIiS,EAAMqY,KAAExsB,IAAIS,EAAQoI,GACxB,OAAIsL,IAGJtL,EAAQ9I,OAAO8I,EAAQnJ,OAAS,EAAG,GAC5BktB,EAAcnsB,EAAQoI,EAAS3G,KAGrB0qB,CAAcP,EAAME,EAAgBG,GACjDC,IACAL,EAAUI,GAAOC,MAGlBL,KAeEO,IAVmB5B,0BAAe,CAACY,KAC5C,SAAC5f,GAAD,OAAcA,EAAS7F,gBAAgBzH,WAEZssB,0BAAe,CAACY,KAC3C,SAAC5f,GAAD,OAAcA,EAASzF,cAMIykB,0BAAe,CAACc,GAAkBG,GAAyBhB,KACtF,SAAC1pB,EAAS6qB,EAAMzkB,GAAe,IACnB/D,EAAwBrC,EAAxBqC,OAAQC,EAAgBtC,EAAhBsC,YAGhB,MAAO,CACHD,OAHIA,EAAOD,QAAO,SAACzB,GAAD,OAAe0lB,GAAOiF,kBAAkB3qB,EAAKJ,mBAAoBsqB,EAAMzkB,MAIzF9D,YAHIA,EAAYF,QAAO,SAACzB,GAAD,OAAe0lB,GAAOiF,kBAAkB3qB,EAAKJ,mBAAoBsqB,EAAMzkB,WAQ7FmlB,GAA6B9B,0BAAe4B,IAAiB,SAAArrB,GAAY,IAC1EqC,EAAwBrC,EAAxBqC,OAAQC,EAAgBtC,EAAhBsC,YACZoN,EAA6C,GASjD,OARArN,EAAOtE,SAAQ,SAAC4C,GACZ,OAAOA,EAAKH,QAAQzC,SAAQ,SAAAoC,GACxBuP,EAAW3U,KAAK,CAAEf,GAAImG,EAAOnG,GAAIwW,KAAMrQ,EAAOxC,cAGtD2E,EAAYvE,SAAQ,SAACoC,GACjBuP,EAAW3U,KAAK,CAAEf,GAAImG,EAAOnG,GAAIwW,KAAMrQ,EAAOxC,WAE3C+R,KAGE8b,GAAiCzB,KAAqB,CAACV,GAAuBD,GAAWS,KAAgC,SAACc,EAAUlwB,EAAOgxB,GACpJ,IAAMxsB,EAAS,GACfwsB,EAAK1tB,SAAQ,SAAA2tB,GACTzsB,EAAOlE,KAAKqvB,aAAcsB,EAAdtB,CAAiB3vB,OAEjC,IAAIgM,EAAOukB,KAAEC,OAAON,GAChBpC,EAA8C,GAUlD,OATAtpB,EAAOlB,SAAQ,SAAAyE,GACX,IAAIggB,EAAMwI,KAAExsB,IAAIgE,EAAGiE,GACf+b,IACAA,EAAMA,EAAImJ,OACLpD,EAAO/F,GACP+F,EAAO/F,GAAKoJ,WADCrD,EAAO/F,GAAO,CAAEhS,KAAMgS,EAAKoJ,SAAU,OAKxD1wB,OAAO+D,OAAOspB,GAAQsD,MAAK,SAAClsB,EAAGmsB,GAAJ,OAAUA,EAAEF,SAAWjsB,EAAEisB,cAhBjB7B,EAkB1C,SAACtvB,EAAO0B,GAAR,OAAkBA,EAAMotB,gBC1IfwC,ID6IwBtC,0BAAeY,IAAiB,SAAC5f,GAClE,IAAMuhB,EAAa,GAEnB,OADIvhB,EAAS1F,YAAYinB,EAAWjxB,KAAMssB,IACnC2E,KChJ4BvC,0BAAe,CAACD,GAAmBR,KAAe,SAAC5tB,EAAyBT,GAC/G,IAAMuuB,EAAS9tB,EAAW6nB,OAC1B,OAAOtoB,EAAUpB,KAAK2vB,OAGb+C,GAAoBxC,0BAAe,CAACsC,GHFvB,SAACtxB,EAAkB0B,EAAYnC,GAA/B,OAA8CA,GAAMmC,EAAMnC,IAAMmC,EAAMgL,WAAahL,EAAM6K,cGE5B,SAAChM,EAAMkxB,GAC1F,OAAOlxB,EAAKkxB,MAEHC,GAAoB1C,0BAAe,CAACwC,KAAoB,SAACzlB,GAAD,OAAUA,EAAK+f,SAGvE6F,IADuB3C,0BAAe,CAACwC,KAAoB,SAACzlB,GAAD,OAAUA,EAAKjH,QAC7CkqB,0BAAe,CAACwC,KAAoB,SAACzlB,GAAD,OAAUA,EAAK0X,eAEhFmO,GAA8B5C,0BAAe,CAACD,GAAmBuC,KAA0B,SAACO,EAAIC,GAEzG,OAAOA,EADQD,EAAGrJ,WAKTuJ,IAFsB/C,0BAAe,CAAC4C,KAA8B,SAACI,GAAD,OAAcA,EAASvO,cAE3DuL,0BAAe,CAACwC,KAAoB,SAACzlB,GAC9E,OAAOA,EAAKT,wBAGH2mB,GAA6BjD,0BAAe,CAAC+C,GAA+BnD,GAAuBa,KAAsB,SAAC5C,EAAyBqD,EAAkB1rB,GAE9K,GAAKqoB,GAAaA,EAAS3jB,UACtB,CACD,IAAI4jB,EAAQD,EAAS1jB,eAErB,GAAmB,WAAf2jB,EAAMruB,KACN,OAAOsuB,SAASD,EAAM5pB,OAGtB,IAEIA,EAsChB,SAASsS,EAAUhR,EAAQyV,GACvB,IAAKzV,EAAQ,OAEb,IADA,IAAI9D,EAAOD,OAAOC,KAAK8D,GACdmC,EAAI,EAAGA,EAAIjG,EAAK+C,OAAQkD,IAAK,CAClC,IAAI3F,EAAMN,EAAKiG,GACX6lB,EAAOhoB,EAAOxD,GAClB,GAAIiC,MAAMwpB,QAAQD,GAAO,CACrB,IAAItU,EAAM1C,EAAUgX,EAAKA,EAAK/oB,OAAS,GAAIwW,GAC3C,GAAI/B,EAAK,OAAOA,OAEhB,GAAIlX,IAAQiZ,EACR,OAAOuS,EAInB,OArDoBhX,CAAUhR,EAFZsoB,EAAM5pB,OAGhB,OAAIA,EACO6pB,SAAS7pB,GAET,EAdmB,OAAQ,KAoBrCgvB,GAA0BlD,0BAAe,CAACsC,GAAyB7B,GAAqBjB,KAAiB,SAACjuB,EAAMiE,EAAQ+qB,GACjI,IAAM1mB,EAAQ,GAEd,OA2CJ,SAASspB,EAAa/lB,EAAS5H,EAAQjE,EAAM6xB,GAA6D,IAA5C1F,EAA2C,uDAA7B,GAAI2F,EAAyB,wDAC/FC,GAAUlmB,EAAQtG,oBAAqB8lB,GAAOiF,kBAAkBzkB,EAAQtG,mBAAoBtB,EAAQjE,GACrGmsB,EAAOtgB,EAAQ7M,MAAKmtB,EAAOtgB,EAAQ7M,IAAM,CAAEotB,OAAQ,EAAGC,SAAU,EAAG2F,SAAU,GAAI9mB,MAAO,IAC7F,GAAI6mB,EAAS,CACT,IAAM7mB,EAAOmgB,GAAO4G,aAAapmB,EAAQd,oBAAqB9G,GACxDiuB,GAAsB,IAAVhnB,EAAc,EAAIA,EACpCihB,EAAOtgB,EAAQ7M,IAAIkM,KAAOA,EAC1B,IAJS,eAIA9E,GACLyF,EAAQqX,WAAWngB,SAAQ,SAAC4C,EAAMqH,GAC9B,IAAI2iB,EAAWmC,EAAS,CAACnsB,GAAQqqB,KAAEC,OAAO4B,GAAiB5uB,OAAOmD,EAAEkD,WAAY3D,GACvD,aAArB3F,EAAK2F,GAAM4lB,OACUvrB,EAAK2F,GAAMoE,eAEXimB,KAAExsB,IAAIS,EAAQ0rB,GACjBxD,EAAOtgB,EAAQ7M,IAAIotB,SAE7BD,EAAOtgB,EAAQ7M,IAAIgzB,SAASjyB,KAAK4vB,GAErCxD,EAAOtgB,EAAQ7M,IAAIqtB,YAGvBuF,EAAa5xB,EAAK2F,GAAO1B,EAAQjE,EAAM2vB,EAAUxD,OAdpD/lB,EAAI,EAAGA,EAAI8rB,EAAW9rB,IAAM,EAA5BA,IAnDbwrB,CAAa5xB,EAAKgvB,GAAM/qB,EAAQjE,EAAM,GAAIsI,GAAO,GAC1CA,KAMkCmmB,0BAAe,CAACN,GAAiBC,GAAWJ,KACrF,SAACnvB,EAAaY,EAAOE,GACjB,OAAOO,OAAOC,KAAKtB,EAAYN,MAAMuI,KAAI,SAAAnB,GACrC,IAAMuoB,EAASrvB,EAAYN,KAAKoH,GAAMsiB,OAChChkB,EAASmrB,aAAczpB,EAAdypB,CAAoB3vB,GAC7B0yB,EAAWxyB,EAAUpB,KAAK2vB,GAAQ3pB,KACxC,MAAO,CACH0jB,OAAQtiB,EACRuoB,OAAQA,EACRkE,YAAavzB,EAAYN,KAAKoH,GAAMysB,YACpC9pB,MAAOqpB,GAAwBlyB,EAAO,CAAEwoB,OAAQtiB,EAAMuoB,OAAQA,IAC9DmE,UAAWxzB,EAAYN,KAAKoH,GAAM0sB,UAClCpuB,OAAQA,EACRkuB,SAAUA,GAAY,mBAmD/B,IAAMG,GAAiB7D,0BAAe,CAACL,GHxHrB,SAAC3uB,EAAO0B,GAAR,OAAkBA,KGwH0B,SAAE1B,EAAO0B,GAE1E,OAAO,SAASnC,GACZ,OAAOmyB,GAAkB1xB,EAAO0B,EAAOnC,OC/FlCuzB,GAAwBrxB,aAlBb,SAACzB,EAAkB0B,GACvC,IAAM+rB,EAAM+D,GAAkBxxB,EAAO0B,GAC/BjD,EAAOgvB,EAAIljB,WACX9H,EAAQgrB,EAAItjB,gBAAgBzH,QAC5BytB,EAAOvE,GAAOmH,oBAAoBtF,GACxC,MAAO,CACHnjB,WAAYmjB,EAAInjB,WAChB0oB,iBAAkBjC,GAA+B/wB,EAAO0B,GACxDuxB,YAAa9C,EAAK1C,IAAIhqB,OAAS,EAC/BusB,aAAcG,EACd1tB,MAAOA,EACPhE,KAAMA,EACN8G,QAAS9G,EAAKqG,OAAS4D,GAAaqL,OAAS+c,GAA2B9wB,EAAO0B,GAAS,MAMlC,KAAzBD,ECpB9B,SAAsBC,GACzB,IAAMwxB,EAAgBC,qBAAWC,IAEzB9oB,EAA2E5I,EAA3E4I,WAAY0oB,EAA+DtxB,EAA/DsxB,iBAAkBztB,EAA6C7D,EAA7C6D,QAAS9G,EAAoCiD,EAApCjD,KAAMuxB,EAA8BtuB,EAA9BsuB,aAAcvtB,EAAgBf,EAAhBe,MAAOuJ,EAAStK,EAATsK,KAC1E,OACI,kBAACqnB,GAAA,EAAD,CACIryB,IAAK,QAAUU,EAAMotB,aACrBhqB,KAAMpD,EAAMotB,aACZptB,MAAO,CACH4I,aACA0oB,mBACAztB,UACA9G,OACAuxB,eACAvtB,QACAuJ,QAIJsnB,UAAWJ,EAAcK,oBChB/BC,GAAW,SAAC9xB,GAAuB,IAC7B8mB,EAA6G9mB,EAA7G8mB,OAAQiG,EAAqG/sB,EAArG+sB,OAAQgF,EAA6F/xB,EAA7F+xB,YAAaznB,EAAgFtK,EAAhFsK,KAAM8iB,EAA0EptB,EAA1EotB,aAAcvvB,EAA4DmC,EAA5DnC,GAAIgO,EAAwD7L,EAAxD6L,MAAOmmB,EAAiDhyB,EAAjDgyB,UAAWC,EAAsCjyB,EAAtCiyB,oBAAqBC,EAAiBlyB,EAAjBkyB,aAC9FhnB,EAAU+mB,EAAsB3nB,EAAKxI,OAAO+J,GAASvB,EAAKxI,OAAOkwB,EAAWnmB,GAC5EsmB,EAAcD,EAAer0B,EAAKuvB,EAAatrB,OAAb,WAAwBkwB,EAAxB,aAAsCn0B,IAC9E,MAAwB,YAApBk0B,EAAYl0B,GAER,kBAACu0B,GAAD,CAAsBtL,OAAQA,EAAQiG,OAAQA,EAAQztB,IAAK6yB,EAAat0B,GAAIA,EAAIyM,KAAMY,EAASkiB,aAAc+E,IAI7G,kBAACf,GAAD,CAAuB9xB,IAAK6yB,EAAarL,OAAQA,EAAQiG,OAAQA,EAAQlvB,GAAIA,EAAIyM,KAAMY,EAASkiB,aAAc+E,KAKpHE,GAAc,SAACvL,EAAgBiG,EAAgBgF,EAA8DznB,EAAgB8iB,EAAsBrL,EAAsBiQ,GAA2F,IAAxEC,IAAuE,yDAAlCC,EAAkC,wDACrQ,OAAOnQ,EAAWpc,KAAI,SAAC9H,EAAIgO,GAAL,OAAeimB,GAAS,CAAEhL,SAAQiG,SAAQgF,cAAaznB,OAAM8iB,eAAcvvB,KAAIgO,QAAOmmB,YAAWC,sBAAqBC,qBAG1II,GAAgB,SAACxL,EAAgBiG,EAAgBgF,EAA8DtqB,EAAwBsa,EAAsBzX,EAAgB8iB,GAAyD,IAAnC8E,EAAkC,wDACvO,OAAO,kBAAC,KAAD,CAAOK,iBAAkB,IAAKC,YAAY,OAC5C,aAAIjxB,MAAMkG,GAAgBzI,QAAQ2G,KAAI,SAAAV,GAAC,OACpC,kBAAC,KAAKwtB,QAAN,CAAeC,IAAG,iBAAYztB,GAAK3F,IAAK2F,EAAEkD,YACtC,yBAAK7H,MAAO,CAAE6X,UAAW,IAAKC,SAAU,SACnCia,GAAYvL,EAAQiG,EAAQgF,EAAaznB,EAAM8iB,EAAcrL,EAAY9c,GAAG,EAAOitB,UA4CxG,SAASS,KACL,OACI,kBAAC,KAAD,CAAOC,MAAOC,KAAMC,uBAAwBC,YAAa,yBCpFjE,IAYaX,GAAuBryB,aAZZ,SAACzB,EAAkB0B,GACvC,IAAM+J,EAAOwmB,GAA2BjyB,EAAO0B,GACzCqK,EAAOylB,GAAkBxxB,EAAO0B,EAAOA,EAAMnC,IACnD,MAAO,CACHkkB,WAAYkO,GAA2B3xB,EAAO0B,GAC9CoD,KAAMiH,EAAKjH,KACXqE,eAAgBsC,EAChBgoB,YAAaZ,GAAe7yB,EAAO0B,MAKkB,KAAzBD,ED6C7B,SAAqBC,GACxB,IACwByH,EADlB+pB,EAAgBC,qBAAWC,IAiBjC,OACI,kBAAC,KAAD,CAAMpxB,MAAO,CAAE0yB,UAAW,KACrBxB,EAAcyB,oBAAoBjzB,EAAMoD,KAAMpD,EAAMsK,KAAMtK,EAAM+sB,SAAW/sB,EAAMnC,GAAK,OAAS,YAjB5E,KADJ4J,EAmBAzH,EAAMyH,gBAjBI,IAAnBA,EAAuB,kBAACkrB,GAAD,CAAwBrzB,IAAK,KAAOU,EAAMotB,eAAmBkF,GAActyB,EAAM8mB,OAAQ9mB,EAAM+sB,OAAQ/sB,EAAM+xB,YAAatqB,EAAgBzH,EAAM+hB,WAAY/hB,EAAMsK,KAAMtK,EAAMotB,aAAcptB,EAAMnC,KAAOmC,EAAM8mB,QAE1OuL,GACHryB,EAAM8mB,OACN9mB,EAAM+sB,OACN/sB,EAAM+xB,YACN/xB,EAAMsK,KACNtK,EAAMotB,aACNptB,EAAM+hB,WACN,GACA,EACA/hB,EAAM+sB,SAAW/sB,EAAMnC,Q,gsCE/DnC,IAAMq1B,GAAmBzkB,KAAH,MAOhB0kB,GAAwB1kB,KAAH,MAWrB2kB,GAAgB3kB,KAAH,MAiDZ,IAAM4kB,GAAb,2MACIC,YADJ,IAEIh1B,MAAQ,CACJi1B,sBAAsB,GAH9B,EAKIC,4BAA8B,WAC1B,EAAKjf,SAAS,CACVgf,sBAAuB,EAAKj1B,MAAMi1B,wBAP9C,EAUIE,SAAW,WACG,EAAKzzB,MAAM0zB,cAAa,SAAA5wB,GAC9B,IAAM7D,EAAaR,YAAQ,EAAKuB,MAAMf,YAAY,SAAAP,UACvCA,EAAK,SACZA,EAAM8rB,YAAc/nB,KAAKE,UAAUG,MAGvC,EAAKwwB,OAAOK,OAAO,CACfC,SAAUV,GACVrM,UAAW,CACP5nB,WAAYA,KAEjBmnB,MAAK,SAAAC,GACJzO,KAAQic,QAAQ,4BAChB,EAAKL,iCAEN/M,OAAM,SAAAC,GAEL,MADA9O,KAAQkc,MAAM,0CACR,IAAIC,KAAgB,CACtBC,OAAQ,kCAlBV,IAXlB,mFAqCQ,IAAMh0B,EAAQqB,KAAKrB,MACbi0B,EAAS,IAAIC,gBAAgB7yB,KAAKrB,MAAMwuB,SAAS2F,QACjDpH,EAASkH,EAAO5xB,IAAI,UACpBykB,EAASmN,EAAO5xB,IAAI,UAC1B+xB,QAAQrI,IAAI,CAAC1qB,KAAKiyB,OAAO1M,MAAM,CAC3BA,MAAOuM,GACPtM,UAAW,CAAExpB,IAAK,CAACypB,MACnBzlB,KAAKiyB,OAAO1M,MAAM,CAClBA,MAAOwM,GACPvM,UAAW,CAAEhpB,GAAI,CAACkvB,QACjB3G,MAAK,SAAAC,GAAQ,IACN/jB,EAAS+jB,EAAI,GAAb/jB,KACM+xB,EAAUhO,EAAI,GAApB/jB,KAER,GAAIA,EAAK+qB,kBAAkB,IAAMgH,EAAMC,MAAO,CAC1C,IAAMlE,EAAWiE,EAAMC,MAAM,GACK,kBAAtBlE,EAASpvB,UAAuBovB,EAASpvB,QAAUyB,KAAKC,MAAM0tB,EAASpvB,UACnF,IACMuzB,EA5Ff,SAASlK,EAASxrB,GAOrB,IAPgF,IAAtBsrB,EAAqB,uDAAJ,GAErE3T,EAA4B,MAC3B3X,EAD2B,CAE9BurB,MAHSvrB,aAAgB8K,GAAkB,UAAY,OAIvDoY,WAAY,KAEP9c,EAAI,EAAGA,EAAIpG,EAAKmC,QAAQe,OAAQkD,IAAK,CAC1C,IAAIT,EAAO3F,EAAKmC,QAAQiE,GACxB,GAAIT,aAAgBmF,GAChB6M,EAAIuL,WAAWnjB,KAAK4F,EAAK3G,IACzBwsB,EAAS7lB,EAAM2lB,OACZ,CACH3T,EAAIuL,WAAWnjB,KAAK4F,EAAK3G,IACzB,IAAMyQ,EAAmB,MAAQ9J,EAAR,CAAc4lB,MAAO,aAC9CD,EAAK3lB,EAAK3G,IAAMyQ,GAKxB,OAFA6b,EAAKtrB,EAAKhB,IAAM2Y,EAET2T,EAwEsBE,CADGrgB,GAAYrD,SAASypB,IAEzCpwB,EAAMw0B,kBAAkBzH,EAAQwH,GAEhC,IAAMt1B,EAAaqD,EAAK+qB,kBAAkB,GACF,kBAA5BpuB,EAAWurB,cAA2BvrB,EAAWurB,YAAc/nB,KAAKC,MAAMzD,EAAWurB,cACjGxqB,EAAMy0B,eAAe3N,EAAQ7nB,EAAWurB,aAExC,IAAM2F,EAAkB,CACpBrJ,OAAQ7nB,EAAW6nB,OACnBjpB,GAAIoB,EAAWpB,GACf62B,cAAez1B,EAAWy1B,cAC1BC,SAAU11B,EAAW01B,SACrB1D,YAAahyB,EAAWgyB,aAG5BjxB,EAAM40B,oBAAoB9N,EAAQqJ,SAtElD,+BA6Ec,IAAD,OACC8D,EAAS,IAAIC,gBAAgB7yB,KAAKrB,MAAMwuB,SAAS2F,QACjDpH,EAASkH,EAAO5xB,IAAI,UACpBykB,EAASmN,EAAO5xB,IAAI,UACpBrC,EAAQqB,KAAKrB,MACf60B,EAAW,GACf,GAAI70B,EAAMowB,UAAYpwB,EAAMowB,SAASrD,GAAS,CAC1C,IAAMuD,EAAWtwB,EAAMowB,SAASrD,GAET,SAAnBuD,EAASlG,QAETyK,EAAWvE,EAASltB,MAG5B,OACI,kBAAC,KAAD,MACK,SAAAkwB,GAEG,OADA,EAAKA,OAASA,EACN,kBAAC5B,GAAkBoD,SAAnB,CACJtzB,MACI,CACIqwB,eAAgB7xB,EAAM6xB,eACtBoB,oBAAqBjzB,EAAMizB,sBAIlCjzB,EAAMf,YAAce,EAAMowB,UAAYpwB,EAAM+0B,yBAA2B/0B,EAAM+0B,wBAAwB/0B,EAAMf,WAAY41B,GAExH,kBAAC,KAAD,CAAMG,UAAWh1B,EAAMf,aAAee,EAAMowB,UACvCpwB,EAAMf,YAAce,EAAMowB,UAAY,kBAACgC,GAAD,CAAsBrF,OAAQA,EAAQlvB,GAAIkvB,EAAQjG,OAAQA,EAAQxc,KAAM,CAAC,GAAI8iB,aAAc,MAEtI,kBAAC,KAAD,CACIrsB,MAAM,6CACNk0B,QAAS,EAAK32B,MAAMi1B,qBACpBzyB,UAAW,EAAK2yB,SAChBvyB,SAAU,EAAKsyB,4BACfxJ,UAAU,QAEV,kBAACD,GAAD,CAAKppB,QAAS,EAAK6yB,4BAA6BzyB,MAAM,YAAYhE,KAAK,UAAUktB,MAAM,SAAS/S,KAAK,kBAnHjI,GAAgCge,IAAMvkB,WA2IzB+gB,GAAoBwD,IAAMC,cAAiC,CACpElC,oBAAqB,SAAC5O,EAAqB/Z,GAAtB,OAAyC,MAC9DunB,eAAgB,kBAAM,QCpMbuD,GAAsBC,aAAU,CACzCC,kBAAkB,GADaD,CAEhChC,IAEUkC,GAAsBx1B,aAvBX,SAACzB,EAAkB0B,GACvC,IAAMi0B,EAAS,IAAIC,gBAAgBl0B,EAAMwuB,SAAS2F,QAC5CrN,EAASmN,EAAO5xB,IAAI,UACpB0qB,EAASkH,EAAO5xB,IAAI,UAC1B,MAAO,CACHnD,KAAM4nB,EACN7nB,WAAYX,EAAMZ,YAAYN,KAAK0pB,GACnCsJ,SAAU9xB,EAAME,UAAUpB,KAAK2vB,OAIZ,SAAC9sB,GACxB,MAAO,CACHu0B,kBAAmB,SAACzH,EAAgB7tB,GAAjB,OAAqCe,ErDsBrD,CACHlD,KAAMP,EACNQ,QAAS,CACLa,GqDzB+EkvB,ErD0B/EluB,KqD1BuFK,MAC3F01B,oBAAqB,SAAC/2B,EAAYqB,GAAb,OAAmCe,ErDWzD,SAA0BpC,EAAYoB,GACzC,MAAO,CACHlC,KAAMR,EACNS,QAAS,CACLa,KACAoB,eqDhB6Du2B,CAAiB33B,EAAIqB,KACtFu1B,eAAgB,SAAC3N,EAAgB2O,GAAjB,OAAqCx1B,EAASy1B,aAAW5O,EAAQ2O,QAQtD11B,CAA6Cq1B,IACnEO,GAAcC,YAAWL,I,2iCCzBtC,IAAMM,GAAYpnB,KAAH,MAcT+a,GAAW/a,KAAH,MAaRqnB,GAAiBrnB,KAAH,MAOdsnB,GAAmBtnB,KAAH,MAiBf,SAASunB,GAAWh2B,GAAyB,IAAD,EACTi2B,mBAAS,IADA,mBACxCC,EADwC,KAC3BC,EAD2B,OAEPF,mBAAS,IAFF,mBAExCG,EAFwC,KAE1BC,EAF0B,OAGuBC,aAAST,GAAW,IAA5EU,EAHiC,EAGvCj0B,KAA6Ck0B,GAHN,EAGtB1C,MAHsB,EAGH2C,SAHG,EAOoBH,aAAS9M,GAAU,CAClF3C,UAAW,CAAExpB,IAAK,CAAC2C,EAAM8mB,SACzB4P,YAAa,SAACC,GACVN,EAAgBM,EAAWrC,MAAM,GAAKqC,EAAWrC,MAAM,GAAGsC,WAAWjxB,KAAI,SAAAnB,GAAI,OAAIA,EAAKqyB,SAAS,IAC/FV,EAAeQ,EAAWrC,MAAM,GAAKqC,EAAWrC,MAAM,GAAGsC,WAAWjxB,KAAI,SAAAnB,GAAI,OAAKA,EAAKqyB,SAAU,OAJ1FC,EAPiC,EAOvCx0B,KAA2Cy0B,GAPJ,EAOvBjD,MAPuB,EAOL2C,SAPK,EAevBO,aAAYlB,IAA7BmB,EAfwC,sBAgBrBD,aAAYjB,IAA/BmB,EAhBwC,oBAwBzCC,EAAI,yCAAG,qBAAA3zB,EAAA,YAAAA,EAAA,sDACH4zB,EAAWlB,EACbmB,EAAY,GAChBjB,EAAax0B,SAAQ,SAAA9E,GACZs6B,EAASz4B,SAAS7B,IACnBu6B,EAAUz4B,KAAK9B,MAGjB0G,EAAIyzB,EAAc,CACpBpQ,UAAW,CACPyQ,QAAS,CAACt3B,EAAM8mB,QAChByQ,UAAWH,KAGbI,EAAIN,EAAgB,CACtBrQ,UAAW,CACPyQ,QAAS,CAACt3B,EAAM8mB,QAChByQ,UAAWF,KAGnBjD,QAAQrI,IAAI,CAACvoB,EAAGg0B,IAAIpR,MAAK,SAAAC,GACrBzO,KAAQic,QAAQ,6BACZ7zB,EAAMiB,MAAMjB,EAAMiB,UACvBwlB,OAAM,SAAAC,GACL9O,KAAQkc,MAAM,oDAxBT,2CAAH,qDA2CV,OACI,kBAAC,IAAD,CAAOmB,QAASj1B,EAAMi1B,QAAS/zB,SAhBlB,WACTlB,EAAMkB,UAAUlB,EAAMkB,YAeyBD,KAAMk2B,GACrD,kBAAC,KAAD,CAAMnC,SAAUwB,GAAgBO,GAC5B,kBAAC,KAAD,CACIU,OAAQ,CAAC,YAAa,gBACtBC,WAhByBZ,GAAYP,EAAYA,EAAUoB,MACtE1xB,QAAO,SAAAnJ,GAAI,MAAyB,aAArBA,EAAKkB,eACpB2H,KAAI,SAAA7I,GACD,MAAO,CACHwC,IAAKxC,EAAK+5B,MACV91B,MAAOjE,EAAKc,UAAY,IAAMd,EAAKgB,SACnC+4B,MAAO/5B,EAAK+5B,UAEf,GASOe,WAAY1B,EACZjmB,SAtDK,SAACmnB,GAElBjB,EAAeiB,IAqDHloB,OAAQ,SAAA1K,GAAI,OAAI,kBAAC,KAAD,CAASwlB,UAAU,MAAMjpB,MAAOyD,EAAKqyB,OACjD,kBAAC,KAAWgB,KAAZ,KAAmBrzB,EAAKzD,aCxHzC,IAAM+2B,GAAgB,SAAU93B,GAA4B,IAAD,EACxBi2B,mBAAS,MADe,mBACvD8B,EADuD,KAC1CC,EAD0C,OAEjBhB,aAAYvN,IAFK,mBAEvDgK,EAFuD,aAE3CnxB,KACO2zB,mBAAS,KAH2B,mBAGhDgC,GAHgD,WAIxDC,EAAe,yCAAG,qCAAA10B,EAAA,6DACdwtB,EAAW+G,IAEbE,EAAS,6BAEPE,GAAU,IAAInuB,IAAcouB,QAAQpH,IACpCqH,EAAWruB,GAAYzD,OAAO4xB,IAC3Bn3B,QAAUyB,KAAKE,UAAU01B,EAASr3B,SAPvB,SAQWyyB,EAAS,CAAE5M,UAAW,CAAEyR,SAAUD,KAR7C,mBAQZ9gB,EARY,EAQZA,OARY,EAQJjV,MACZiV,EATgB,wBAUZvX,EAAMu4B,kBAAkBv4B,EAAMu4B,iBAAiBhhB,GAVnC,2BAapBygB,EAAe,IACXh4B,EAAMw4B,mBAAmBx4B,EAAMw4B,kBAAkBL,EAAQt6B,IAdzC,4CAAH,qDAoBrB,OACI,kBAAC,IAAD,CAAO46B,gBAAc,EAACC,UAAQ,EAACC,OAAQ,SAAU53B,MAAO,kBAAmBG,SALlD,WACzB82B,EAAe,IACXh4B,EAAMkB,UAAUlB,EAAMkB,YAGiFD,KAAMi3B,EAAiBjD,QAASj1B,EAAM8X,QACzI,kBAAC,KAAK8gB,KAAN,CAAWpmB,MAAM,aACb,kBAAC,KAAD,CAAOvC,SAAU,SAACrP,GAAD,OAA0Co3B,EAAep3B,EAAEi4B,cAAcr3B,a,8eC9B9G,IAAMs3B,GAAYrqB,KAAH,MAiBTsqB,GAAetqB,KAAH,MAoBlB,SAASuqB,GAAmBh5B,GACxB,OACI,kBAAC,KAAD,CACI4yB,MAAOC,KAAMoG,wBAEblG,YACI,kDAKJ,kBAAC,KAAD,CAAQpyB,QAASX,EAAMk5B,cAAen8B,KAAK,WAA3C,gBCxDL,IAAMo8B,GAAb,iLAEQ,OACI,6BACI,gDAJhB,GAAgCxoB,a,khCCKhC,IAAMyoB,GAAU,SAACp7B,GAAD,OAAuCyQ,KAAtC,KAaMzQ,IAiBvB,IAAMq7B,GAAc,SAAC,GAA+D,IAA7D9d,EAA4D,EAA5DA,MAAO/I,EAAqD,EAArDA,MAAOzV,EAA8C,EAA9CA,KAA8C,IAAxCu8B,KAAQC,EAAgC,EAAhCA,QAASzF,EAAuB,EAAvBA,MAAO0F,EAAgB,EAAhBA,QAC/D,OACI,kBAAC,KAAKZ,KAAN,KACI,kBAAC,KAAD,eAAOrnB,YAAaiB,EAAOinB,aAAc,gCAAqCle,EAA9E,CAAqFxe,KAAMA,KAC1Fw8B,IAAazF,GAAS,0BAAMxzB,MAAO,CAAEE,MAAO,MAAOk5B,IAAK,EAAGC,OAAQ,IAAM7F,IAAmB0F,GAAW,8BAAOA,MC9B3H,IAwBaI,GAAsB75B,aALX,SAACzB,EAAkB0B,GACvC,MAAO,CACH65B,OAAQv7B,EAAMxB,KAAKe,MAGoF,KAA5EkC,EDW5B,SAAyBC,GAAqB,IAAD,EACnBg3B,aAAYoC,GAAQp5B,EAAM85B,YAAa,CAAEC,YAAa,SADnC,mBACzCC,EADyC,KAGxCtG,GAHwC,KAGM1zB,EAA9C0zB,cAA+BuG,GAAej6B,EAAhCk6B,SAAgCl6B,EAAtBm6B,MAAsBn6B,EAAfi6B,YACjCG,EAAM,yCAAG,WAAOt3B,GAAP,gBAAAU,EAAA,6DAEL62B,EAFK,MAEiBv3B,EAFjB,CAEyBw3B,UAAWt6B,EAAM65B,SAF1C,kBAGJG,EAAW,CAAEnT,UAAWwT,IAAkBjU,MAAK,SAAAC,GAElD,OADAzO,KAAQic,QAAR,UAAmBwG,EAAez8B,UAAlC,0BACO,KACR6oB,OAAM,SAAAC,GACL,MAAM,IAAIqN,KAAgB,CACtBC,OAAQtN,EAAI9O,QAAQlI,MAAM,KAAK,SAR5B,2CAAH,sDAaZ,OACI,kBAAC,KAAD,KACI,kBAAC,KAAD,CAAMslB,SAAUiF,GAEZ,0BAAMtiB,SAAU+b,EAAa0G,IACzB,kBAACzI,GAAA,EAAD,CACIvuB,KAAK,YACLoP,MAAO,aACPzV,KAAM,OACN60B,UAAWyH,KAEf,kBAAC1H,GAAA,EAAD,CACIvuB,KAAK,WACLrG,KAAM,OACNyV,MAAM,YACNof,UAAWyH,KAGf,kBAAC1H,GAAA,EAAD,CACIvuB,KAAK,QACLwuB,UAAWyH,GACXt8B,KAAK,OACLyV,MAAM,kBAGV,kBAACmf,GAAA,EAAD,CACIvuB,KAAK,WACLoP,MAAM,WACNzV,KAAK,WACL60B,UAAWyH,KAGdr5B,EAAM8zB,OAAS,4BAAQrzB,UAAW,SAAUT,EAAM8zB,OAEnD,kBAAC,KAAD,CAAQxzB,MAAO,CAAE4X,MAAO,QAAUqiB,SAAUN,EAAYO,SAAS,SAAStjB,KAAK,YAA/E,gBC5DPujB,GAAapF,aAAuC,CAC7Dn2B,KAAM,aACNw7B,SA5Ba,SAAC53B,GACd,IAAMyU,EAAkC,GAexC,OAbKzU,EAAOlF,UAEDkF,EAAOlF,UAAUmE,OAAS,IACjCwV,EAAO3Z,UAAY,gCAFnB2Z,EAAO3Z,UAAY,WAIlBkF,EAAOhF,WACRyZ,EAAOzZ,SAAW,YAEjBgF,EAAO+zB,MAEA,4CAA4C8D,KAAK73B,EAAO+zB,SAChEtf,EAAOsf,MAAQ,yBAFftf,EAAOsf,MAAQ,WAIZtf,GAaPqjB,gBAAiB,CAAC,YAAa,WAAY,QAAS,aAH9BvF,CAIvBuE,I,2VCLEiB,GAKAC,GAlCGC,GAAcC,KAAdD,UAKFlF,GAAYpnB,KAAH,O,SAwBVosB,K,cAAAA,E,qBAAAA,Q,cAKAC,K,cAAAA,E,oBAAAA,E,WAAAA,Q,KAaE,IAAMG,GAAb,2MACI38B,MAAQ,CACJ48B,YAAaL,GAAU58B,SACvB67B,WAAYe,GAAU58B,SACtBk9B,oBAAoB,EACpBC,WAAYN,GAAYO,KALhC,EAOIC,gBAAkB,SAACC,GACf,EAAKhnB,SAAS,CACV2mB,YAAaK,KATzB,EAYIC,mBAAqB,WACjB,EAAKjnB,UAAS,SAAAK,GACV,MAAO,CACHumB,oBAAqBvmB,EAAUumB,wBAf/C,EAwBIM,mBAAqB,SAAC1+B,GAClB,EAAKwX,SAAS,CACVulB,WAAY/8B,IACb,WACC,EAAKy+B,yBA5BjB,kFAoBQ,OACI,kBAAC,KAAD,CAAQ76B,QAASU,KAAKm6B,mBAAoBtkB,KAAK,QAAmC,UAA3B7V,KAAK/C,MAAM48B,YAA0B,YAAc,kBArBtH,wCA+BsBn+B,GACdsE,KAAKkT,SAAS,CACV6mB,WAAYr+B,MAjCxB,+BAwDc,IAAD,OACL,OACI,kBAAC,KAAD,CAAMuD,MAAO,CAAE4X,MAAO,OAAQuL,OAAQ,SAClC,kBAAC,KAAD,CACI1iB,MAAM,QACNT,MAAO,CACHma,OAAQ,gCAEZihB,SAAS,GACTC,MAAO,CACH,kBAAC,KAAD,CAAQh7B,QAAS,kBAAM,EAAK86B,mBAAmBZ,GAAU58B,WAAWiZ,KAAK,WAAWna,KAAK,UAAUuC,IAAI,KAAvG,gBACA,kBAAC,KAAD,CAAQqB,QAAS,kBAAM,EAAK86B,mBAAmBZ,GAAUe,QAAQ1kB,KAAK,WAAWna,KAAK,UAAUuC,IAAI,KAApG,cAGJu8B,OAAQ,CAAEC,IAAK,+DAEf,6BAGKz6B,KAAK06B,UAId,oCACI,kBAACC,GAAD,CAAYC,kBAAmB56B,KAAK/C,MAAM88B,cAI9C,kBAAC,IAAD,CAAO1C,UAAQ,EAACD,gBAAc,EAACv3B,SAAUG,KAAKm6B,mBAAoBvG,QAAS5zB,KAAK/C,MAAM68B,mBAAoBp6B,MAAK,iBAAYM,KAAK/C,MAAM48B,cAClI,kBAACT,GAAD,CAAYX,WAAYz4B,KAAK/C,MAAMw7B,iBArFvD,8BAsCQ,OAAQ,yBAAKr5B,UAAU,gBACnB,kBAAC,GAAD,+DAKA,kBAAC,GAAD,8GAGA,kBAAC,KAAD,CAAKH,MAAO,CAAEuoB,QAAS,OAAQC,cAAe,MAAOoT,eAAgB,aAEjE,kBAAC,KAAD,CAAKC,KAAM,IACP,kBAAC,KAAMC,OAAP,CAAcr/B,KAAK,GAAGs/B,KAAK,QAAQ9qB,YAAY,yBAlDnE,GAA2BZ,aA8FpB,SAASqrB,GAAWh8B,GAAyB,IAAD,EACds2B,aAAST,GAAW,CAAEyG,aAAc,MAA7D7F,EADuC,EACvCA,QAASn0B,EAD8B,EAC9BA,KAKX6R,GANyC,EACxB2f,MAKa,CAChC,CACIx0B,IAAK,OACLyB,MAAO,OACPw7B,UAAW,OAEXC,OAAQ,SAACh5B,EAAGmsB,GAAJ,OAAUnsB,EAAEJ,KAAKrB,OAAS4tB,EAAEvsB,KAAKrB,QACzC06B,UAAU,GAGd,CACIn9B,IAAK,QACLyB,MAAO,QACPw7B,UAAW,QACXC,OAAQ,SAACh5B,EAAGmsB,GAAJ,OAAUnsB,EAAEJ,KAAKrB,OAAS4tB,EAAEvsB,KAAKrB,QACzC26B,cAAe,CAAC18B,EAAMi8B,oBAE1B,CACI38B,IAAK,OACLyB,MAAO,OACPw7B,UAAW,OACXI,QAAS,CAAC,CAAEtoB,KAAM,SAAU7S,MAAO,SAAW,CAAE6S,KAAM,YAAa7S,MAAO,aAC1Eo7B,SAAU,SAACp7B,EAAOq7B,GAAR,OAAmBA,EAAOC,KAAKn+B,SAAS6C,KAGtD,CACIlC,IAAK,cACLyB,MAAO,eACPw7B,UAAW,oBAGf,CACIj9B,IAAK,gBACLyB,MAAO,iBACPw7B,UAAW,gBAEXrtB,OAAS,SAAC5M,EAAMu6B,EAAQhxB,GACpB,OACI,0BAAMvM,IAAK,gBAAkBuM,GACxBvJ,EAAKqD,KAAI,SAAAc,GAAC,OAAI,kBAAC,KAAD,CAAKnH,IAAKmH,EAAE5I,GAAIkD,MAAO0F,EAAErD,MAAQqD,EAAErD,cA+BtE,OArBe,WACX,IAAI25B,EAAkB,GAYtB,OAXIz6B,GAAQA,EAAKq1B,QACboF,EAAkBz6B,EAAKq1B,MAAMhyB,KAAI,SAAAnB,GAAI,MAAK,CACtCpB,KAAMoB,EAAK5G,UAAY,IAAM4G,EAAK1G,SAClC+4B,MAAOryB,EAAKqyB,MACZmG,iBAAkBx4B,EAAK9G,YAAYqE,OACnCk7B,cAAez4B,EAAK7G,eACpBm/B,KAAMt4B,EAAKxG,iBAMf,kBAAC,KAAD,CAAMg3B,SAAUyB,GACZ,kBAAC,KAAD,CAAOyG,WAAY,CAAEC,SAAU,IAAMC,OAAQ,CAAEC,EAAG,KAAO/9B,IAAK,iBAAkBg+B,OAAQ,SAAAT,GAAM,OAAIA,EAAOU,KAAKppB,QAASA,EAASujB,WAAYqF,KAMjJ7tB,GCnNX,IAyCasuB,GAA2B,CACpC,CACIz8B,MAAO,QACP08B,SAAU,SACVvmB,KAAM,OACN0a,UAAW,mBLOZ,SAAe5xB,GAAoB,IAAD,EACJs2B,aAASwC,GAAW,CAAEwD,aAAc,MAA7D7F,EAD6B,EAC7BA,QAAS3C,EADoB,EACpBA,MAAOxxB,EADa,EACbA,KADa,EAEY00B,aAAY+B,IAFxB,mBAE9B2E,EAF8B,aAEhBp7B,KAEiB2zB,oBAAS,IAJV,mBAI9B0H,EAJ8B,KAIhBC,EAJgB,OAKK3H,mBAAS,MALd,mBAK9B4H,EAL8B,KAKfC,EALe,KAW/BC,EAAmB,yCAAG,WAAOC,GAAP,gBAAAx6B,EAAA,sEACOk6B,EAAW,CAAE7W,UAAW,CAAEyQ,QAAS0G,KAD1C,kBAChB17B,KADgB,EACViV,OACFK,KAAQkc,MAAM,oDAEtBlc,KAAQic,QAAQ,yBAJI,2CAAH,sDAQnB7yB,EACF,yBAAKP,UAAU,gBACX,kBAAC,KAAD,oEAIA,kBAAC,KAAD,MAEA,kBAAC,KAAD,CAAKH,MAAO,CAAEuoB,QAAS,OAAQC,cAAe,MAAOoT,eAAgB,aACjE,kBAAC,KAAD,CAAKC,KAAM,IACP,kBAAC,KAAMC,OAAP,CAAcr/B,KAAK,GAAGs/B,KAAK,QAAQ9qB,YAAY,qBAuE/D,OA7DSklB,IAAY3C,GAAUxxB,GAA8B,IAAtBA,EAAKgyB,MAAMvyB,OAGtC,oCACJ,kBAACi0B,GAAD,CAAY/0B,KAAM,kBAAM68B,EAAiB,OAAO58B,SAAU,kBAAM48B,EAAiB,OAAOhX,OAAQ+W,EAAe5I,UAAW4I,IAC1H,kBAAC,GAAD,CAAe38B,SAAU,kBAAM08B,GAAc,IAAQ9lB,OAAQ6lB,EAAcnF,kBAAmB,WAAQoF,GAAc,MACpH,kBAAC,KAAD,KACI,kBAAC,KAAD,CACI78B,MAAM,QACNT,MAAO,CACHma,OAAQ,gCAEZihB,SAAS,GACTC,MAAO,CACH,kBAAC,KAAD,CAAQh7B,QAAS,kBAAMi9B,GAAc,IAAO1mB,KAAK,OAAOna,KAAK,UAAUuC,IAAI,KAA3E,gBAGJu8B,OAAQ,CAAE3kB,KAAM,SAEhB,6BAGKlW,IAGT,kBAAC,KAAD,CACIy1B,QAASA,EACTwH,WAAW,aACXvG,WAAYp1B,GAAQA,EAAKgyB,OAAS,GAClC4J,WAAY,SAAC15B,GAAD,OACR,kBAAC,KAAKo0B,KAAN,CAEIuF,QAAS,CACL,kBAAC,KAAD,CAAQx9B,QAAS,WACbm9B,EAAiBt5B,EAAK3G,KACvBd,KAAK,UAAUma,KAAM,WAAY5X,IAAI,aACxC,kBAAC,KAAD,CAAY0qB,UAAW,OAAQoU,oBAAoB,EAAMr9B,MAAM,6CAA6CG,SAAU,aAAWJ,UAAW,kBAAMi9B,EAAoB,CAACv5B,EAAK3G,OACxK,kBAAC,KAAD,CAAQd,KAAK,SAASma,KAAM,SAAU5X,IAAI,cAKlD,kBAAC,KAAD,CAAUm3B,QAASA,EAAS4H,QAAM,EAACxC,QAAM,GACrC,kBAAC,KAAKjD,KAAK0F,KAAX,CACIzC,OAAQ,kBAAC,KAAD,CAAQ5R,MAAM,SAASoS,KAAM,GAAInlB,KAAK,cAE9CnW,MAAO,kBAAC,IAAD,CAAMw9B,GAAE,0BAAqB/5B,EAAK3G,KAAO2G,EAAKpB,MACrD2vB,YAAa,IAAI9pB,KAAKoiB,SAAS7mB,EAAKg6B,YAAYC,uBAEpD,6BACKj6B,EAAKoyB,WAAWjxB,KAAI,SAAAnB,GAAI,OAAI,kBAAC,KAAD,CAAKlF,IAAKkF,EAAK+4B,KAAM/4B,EAAK5G,UAAY,IAAM4G,EAAK1G,qBAjD/F,kBAACk7B,GAAD,CAAoBE,cAAe,kBAAM0E,GAAc,QK/CvD,MACX5Z,SAAU,IAId,CACIjjB,MAAO,YACP08B,SAAU,aACVvmB,KAAM,OACN0a,UAAW,kBAAC,GAAD,MACX5N,SAAU,IAEd,CACIjjB,MAAO,aACP08B,SAAU,cACVvmB,KAAM,YACN0a,UAAW,kBAAC,GAAD,MACX5N,SAAU,IAGd,CACIjjB,MAAO,eACP08B,SAAU,eACViB,eAAe,EACfxnB,KAAM,OACN8M,SAAU,GACV4N,UAAW,mBrB1DZ,WACH,IAAMqC,EAAS,IAAIC,gBAAgByK,cAAcxK,QADvB,EAEmB6C,aAAYvN,IAF/B,mBAEnBgK,EAFmB,aAEPnxB,KACW2zB,oBAAS,IAHb,mBAGnB2I,EAHmB,KAGTC,EAHS,KAIpBC,EAAUC,cAEVnX,EAAM,yCAAG,WAAO/oB,GAAP,kBAAA2E,EAAA,yDACNo7B,EADM,wBAED7X,EAAO/c,GAAYzD,OAAO1H,IAC3BmC,QAAUyB,KAAKE,UAAUokB,EAAK/lB,SACnC69B,GAAU,GAJH,SAKwBpL,EAAS,CAAE5M,UAAW,CAAEyR,SAAUvR,KAL1D,kBAKCzkB,KALD,EAKOiV,OACFK,KAAQkc,MAAM,2BACrBlc,KAAQic,QAAQ,uBACrBgL,GAAU,GARH,4CAAH,sDAWN/X,EAASmN,EAAO5xB,IAAI,MAjBA,EAmBOi0B,aAAS9M,GAAU,CAChD3C,UAAW,CACPC,OAAQ,CAACA,MAFTxkB,EAnBkB,EAmBlBA,KAAMm0B,EAnBY,EAmBZA,QAAS3C,EAnBG,EAmBHA,MAgCvB,OACI,kBAAC,KAAD,MACK,SAAAR,GAAM,OAAI,kBAAC,KAAD,CAAM0B,SAAUyB,GA5BpB,SAACnD,GAEZ,IAAKmD,IAAY3C,IAAUxxB,GACvB,OACI,kBAAC,KAAD,CACIswB,MAAOC,KAAMoG,wBACblG,YAAa,kDAEb,kBAAC,KAAD,CAAQ7b,KAAK,OAAOvW,QAAS,kBAAMm+B,EAAQE,QAAQ,YAAnD,UAKZ,GAAIvI,EAAS,OAAO,kBAAC,KAAD,CAAKn2B,MAAO,CAAE0yB,UAAW,MAC7C,IAAIn0B,EACJ,GAA0B,IAAtByD,EAAKgyB,MAAMvyB,OACX6V,KAAQic,QAAQ,uBAChBh1B,EAAO,IAAImL,OACR,CACH,IAAM9K,EAAOoD,EAAKgyB,MAAM,GACxBp1B,EAAK8B,QAAoC,kBAAlB9B,EAAK8B,QAAwByB,KAAKC,MAAMxD,EAAK8B,SAAW9B,EAAK8B,QACpFnC,EAAOmL,GAAYrD,SAASzH,GAGhC,OAAO,kBAAC,GAAD,CAAYnB,MAAO,GAAIkS,SAAU,aAAW2X,OAAQA,EAAQ/oB,KAAMA,IAIhCqQ,SqBK9B,OAGf,CACInO,MAAO,eACP08B,SAAU,eACViB,eAAe,EACfxnB,KAAM,OACN8M,SAAU,GACV4N,UAAW,mBzC9EZ,SAAyB5xB,GAA8B,IAAD,EACxBs2B,aAAS9nB,IAAlClM,EADiD,EACjDA,KAAMm0B,EAD2C,EAC3CA,QAOd,OARyD,EAClC3C,MAQnB,oCACI,kBAAC,KAAD,KACI,kBAAC,KAAD,CACI/yB,MAAO,eACPT,MAAO,CACHma,OAAQ,gCAEZihB,SAAS,GACTC,MAAO,GAGPE,OAAQ,CAAE3kB,KAAM,SAEhB,6BAGI,kBAAC,KAAW6jB,UAAZ,4EAKR,kBAAC,KAAD,CAAM/F,SAAUyB,GAEZ,kBAAC,KAAD,CACIA,QAASA,EACTwH,WAAW,aACXvG,WAAYp1B,GAAQA,EAAK28B,gBAAkB,GAC3Cf,WAAY,SAAC15B,GAAD,OACR,kBAAC,KAAKo0B,KAAN,CAEIuF,QAAS,CAEL,kBAAC,KAAD,CAAYnU,UAAW,OAAQoU,oBAAoB,EAAMr9B,MAAM,6CAA6CG,SAAU,aAAWJ,UAAW,WAA2B0D,EAAK3G,KACxK,kBAAC,KAAD,CAAQd,KAAK,SAASma,KAAM,SAAU5X,IAAI,cAKlD,kBAAC,KAAD,CAAUm3B,QAASA,EAAS4H,QAAM,EAACxC,QAAM,GACrC,kBAAC,KAAKjD,KAAK0F,KAAX,CACIzC,OAAQ,kBAAC,KAAD,CAAQ5R,MAAM,SAASoS,KAAM,GAAInlB,KAAK,cAE9CnW,MAAO,kBAAC,IAAD,CAAMw9B,GAAE,6BAAwB/5B,EAAK3G,GAA7B,mBAA0C2G,EAAKsiB,SAAWtiB,EAAK3G,IAC9Ek1B,YAAa,IAAI9pB,KAAKoiB,SAAS7mB,EAAKg6B,YAAYC,uBAEpD,wCyCwBjB,OAGf,CACI19B,MAAO,eACP08B,SAAU,cACViB,eAAe,EACfxnB,KAAM,OACN8M,SAAU,GAEV4N,UAAW,kBAAC+D,GAAD,CACP1C,oBA5FgB,SAAC5O,EAAqB/Z,EAAgBvN,GAC9D,MAAa,SAATA,EAAwB,KAExB,yBAAKuD,MAAO,CAAEuoB,QAAS,OAAQC,cAAe,WAC1C,kBAAC,KAAD,CAAOoW,MAAgB,YAATniC,EAAqB,EAAI,GAAvC,UAA8C2K,GAAgB4C,GAA9D,YAAuE+Z,IACvE,kBAAC,KAAD,CAAStnB,KAAK,iBAwFd80B,epBxCkB,SAAClI,GACQA,EAA3BpO,MAA2BoO,EAApB2P,KADwC,IAC/B6F,EAD8B,aACnBxV,EADmB,kBAEhD5oB,EAAQ,6BACV,gCAAS2G,GAAgBy3B,EAAO70B,MAAhC,IAAwC60B,EAAOp+B,QAEnD,OAAO,kBAAC,KAAK63B,KAAN,CAAWt5B,IAAK,YAAcqqB,EAAWpO,MAAMnY,MACjDrC,EACD,kBAAC2oB,GAAD,CAAcpqB,IAAK,gBAAkBqqB,EAAWpO,MAAMnY,KAAMkL,SAAU6wB,EAAQ70B,KAAM60B,EAAO70B,KAAMqf,WAAYA,MoBkCzGoL,wBApFoB,SAAC91B,EAAyBmE,GAEtD,OADAnB,QAAQC,IAAIjD,GAER,kBAAC,KAAD,KAEI,kBAAC,KAAD,CACI8B,MAAOqC,EACP9C,MAAO,CACHma,OAAQ,gCAEZihB,SAAS,GACTC,MAAO,GAGPE,OAAQ,CAAE3kB,KAAM,SAEhB,6BAGI,kBAAC,KAAD,CAAcnW,MAAM,wBAChB,kBAAC,KAAa63B,KAAd,CAAmBpmB,MAAM,QAAzB,eACA,kBAAC,KAAaomB,KAAd,CAAmBpmB,MAAM,gBAAgB,IAAIvJ,KAAKoiB,SAAS,GAAD,OAAIpsB,EAAWgyB,eAAgBhf,sBACzF,kBAAC,KAAa2mB,KAAd,CAAmBpmB,MAAM,kBAAkB,IAAIvJ,KAAKoiB,SAAS,GAAD,OAAIpsB,EAAWy1B,iBAAkBziB,+BCxC7GmtB,GAAYC,IAAZD,QCCUpE,KAAVsE,MAMD,SAASC,GAAQv/B,GAGpB,OAAKA,EAAMw/B,UAEP,oCACI,yBAAKl/B,MAAO,CAAEm/B,UAAW,WACrB,kBAAC,KAAWH,MAAZ,CAAkB7C,UAAQ,EAACn8B,MAAO,CAAEE,MAAO,UAA3C,aAIJ,kBAAC,IAAD,CAAMk/B,MAAM,OAAOC,oBAAqB,CAAC,KAAMC,KAAK,UDTzD,SAASC,EAAY7/B,GAExB,OAAOA,EAAM8/B,MAAMn6B,KAAI,SAAAnB,GACnB,OAAIA,EAAKk6B,cAAsB,KAE3Bl6B,EAAKwf,SAASjiB,OAAS,EAInB,kBAACq9B,GAAD,CACI9/B,IAAKU,EAAM+/B,eAAiBv7B,EAAKi5B,SACjC18B,MAAOyD,EAAKzD,OAEX8+B,EAAY,CACTE,eAAgB//B,EAAM+/B,eAAiBv7B,EAAKi5B,SAC5CqC,MAAOt7B,EAAKwf,YAMxB,kBAAC,IAAK4U,KAAN,CAAWt5B,IAAKU,EAAM+/B,eAAiBv7B,EAAKi5B,UACxC,kBAAC,IAAD,CAAM1gC,KAAMyH,EAAK0S,OACjB,8BAAO1S,EAAKzD,OACZ,kBAAC,IAAD,CAAMw9B,GAAIv+B,EAAM+/B,eAAiBv7B,EAAKi5B,eCdrCoC,CAAY,CACTE,eAAgB,GAChBD,MAAOtC,OAXM,qC,ICNzBwC,GAAmCC,IAAnCD,OAAQE,GAA2BD,IAA3BC,OAAQC,GAAmBF,IAAnBE,MAAOpE,GAAYkE,IAAZlE,QACXsD,IAAZD,QAQD,SAASgB,GAAmBpgC,GAC/B,IAAMwuB,EAAWmQ,cADqC,EAEJ1I,oBAAS,GAFL,mBAE/Cv1B,EAF+C,KAE3BG,EAF2B,KAG5B2tB,EAAS6R,SACnC,OAEI,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAACF,GAAD,CAAOG,QAAS,KAAMC,aAAW,EAACC,UAAW9/B,GACzC,kBAAC6+B,GAAD,CAASC,WAAS,KAEtB,kBAAC,IAAD,KAGI,kBAACQ,GAAD,CAASS,UAAQ,EAACngC,MAAO,CAACqa,WAAY,OAAQkO,QAAS,OAAQ6X,WAAY,SAAUxE,eAAgB,kBAGjG,kBAACp8B,EAAD,CAAiBY,mBAAoBA,EAAoBG,oBAAqBA,KAIlF,kBAACk7B,GAAD,CAASz7B,MAAO,CAAEyoB,QAAS,KAiB/C,SAAS4X,EAAoBnD,GAA2E,IAAjD1P,EAAgD,uDAA7B,GAAIrjB,EAAyB,uDAAJ,GAe/F,OAdA+yB,EAAK57B,SAAQ,SAAA8wB,GACT,IAAMkO,EAAcn2B,EAAaioB,EAAI+K,SACrC3P,EAAIlvB,KACA,kBAAC,IAAD,CACIU,IAAKozB,EAAI+K,SACToD,OAAK,EACLv2B,KAAMs2B,EACN5c,SAAU0O,EAAId,WAAa,4BAAKc,EAAI+K,aAGxC/K,EAAI1O,SAASjiB,OAAS,GACtB4+B,EAAoBjO,EAAI1O,SAAU8J,EAAK8S,MAGxC9S,EA/Bc6S,CAAoBnD,KAEzB,kBAAC0C,GAAD,SC1Cb,IAAM/e,GAAS,CAClB2f,UAAW,+BACXC,eAAgB,iCCEpB,IAKaC,GAA0BjhC,aALf,SAACzB,EAAkB0B,GACvC,MAAO,CACHihC,UAAW3iC,EAAMxB,KAAKiB,SAGkC,KAAzBgC,ECAhC,SAA8BC,GACjC,IAAMszB,EAAS,IAAI4N,IAAa,CAC5BC,IAAKhgB,GAAO2f,UACZna,QAAS,SAACya,GACNA,EAAUC,WAAW,CACjBrb,QAAS,CACLsb,cAAethC,EAAMihC,WAAa,SAKlD,OACI,kBAAC,KAAD,CAAgB3N,OAAQA,GACnBtzB,EAAMgkB,aCENud,GAAb,2MACIjjC,MAAQ,CACJkjC,cAAc,EACdC,UAAU,GAHlB,EAaIC,mBAAqB,WACjB,EAAKntB,UAAS,SAAAK,GACV,MAAO,CACH4sB,cAAe5sB,EAAU4sB,kBAhBzC,EAqBIG,qBAAuB,SAACrO,GACpB,OAAO,SAAC1yB,GAAY,IAAD,EACwB,EAAKZ,MAApC0zB,EADO,EACPA,aAAckO,EADP,EACOA,aAClBA,GAAclO,EAAakO,EAAatO,GAA1BI,GAAqCtN,MAAK,SAACroB,GACrD,EAAKiC,MAAM6hC,YAAY,EAAK7hC,MAAM6hC,WAAW9jC,MAErD6C,EAAEkhC,mBA3Bd,EA4CIC,YAAc,WACL,EAAKzjC,MAAMmjC,UAChB,EAAKltB,SAAS,CACVktB,UAAU,KA/CtB,EAkDIO,iBAAmB,SAAChiC,GAChB,OACI,kBAAC,KAAD,eACIiiC,SAAU,EACVC,OAAQ,kBAAC,IAAD,CAAMnlC,KAAK,OAAOuD,MAAO,CAAEE,MAAO,qBAC1C+Q,YAAY,QACZxU,KAAM,SACFiD,EAAMub,SAzD1B,EA8DI4mB,oBAAsB,SAACniC,GACnB,OACI,kBAAC,KAAD,eACIiiC,SAAU,EACVC,OAAQ,kBAAC,IAAD,CAAMnlC,KAAK,OAAOuD,MAAO,CAAEE,MAAO,qBAC1C+Q,YAAY,WACZxU,KAAM,EAAKuB,MAAMkjC,aAAe,OAAS,YACrCxhC,EAAMub,SArE1B,mFAOcla,KAAKrB,MAAMihC,WACT5/B,KAAKrB,MAAM6hC,YAAYxgC,KAAKrB,MAAM6hC,WAAWxgC,KAAKrB,MAAMihC,aARxE,iDAgCQ,OACI,kBAAC,KAAD,CACIlgC,MAAK,UAAKM,KAAK/C,MAAMkjC,aAAe,OAAS,OAAxC,cACL,kBAAC,KAAD,CACItqB,KAAM7V,KAAK/C,MAAMkjC,aAAe,WAAa,UAC7CS,SAAU,GACVthC,QAASU,KAAKqgC,wBAtClC,+BA0Ec,IAAD,OACL,OACI,kBAAC,KAAD,MACK,SAAApO,GACG,OACI,kBAAC,KAAD,CAAM7yB,UAAU,cACZ,qCACA,0BAAMkX,SAAU,EAAKgqB,qBAAqBrO,IACtC,kBAAC,KAAKsF,KAAN,KAEI,kBAACjH,GAAA,EAAD,CACIvuB,KAAK,QACLrG,KAAK,OACL60B,UAAW,EAAKoQ,oBAGxB,kBAAC,KAAKpJ,KAAN,KAEI,kBAACjH,GAAA,EAAD,CACIvuB,KAAK,WACLrG,KAAK,WACL60B,UAAW,EAAKuQ,uBAIvB,EAAKniC,MAAM8zB,OAAS,4BAAQrzB,UAAW,SAAnB,+BACrB,kBAAC,KAAKm4B,KAAN,KACI,kBAAC,KAAD,CAAQt4B,MAAO,CAAE4X,MAAO,QAAUnb,KAAK,UAAUy9B,SAAS,SAAS/5B,UAAU,qBAA7E,oBArGpC,GAAoCy0B,IAAMvkB,W,4hBChB1C,IAAMyxB,GAAQ3zB,KAAH,MAkGE4zB,GAAqBtiC,aAtEV,SAACzB,EAAkB0B,GACvC,MAAO,CACHihC,UAAW3iC,EAAMxB,KAAKiB,UAIH,SAACkC,GAExB,MAAO,CAEH2hC,aAAc,SAAUtO,GACpB,gDAAO,WAAOxwB,GAAP,UAAAU,EAAA,+EACI8vB,EAAO1M,MAAgD,CAC1DA,MAAOwb,GACPvb,UAAW,CACPgQ,MAAO/zB,EAAO+zB,MACdyL,SAAUx/B,EAAOw/B,UAErBvI,YAAa,SAEZ3T,MAAK,SAAA5kB,GACF,IAAM+gC,EAAQ/gC,EAAMc,KAAKigC,MAErBzlC,EAAc,CACde,GAAI0kC,EAAMzlC,KAAKygC,IACfx/B,MAAOwkC,EAAMxkC,MACbJ,eAAgB4kC,EAAMzlC,KAAKa,eAAegI,KAAI,SAACnB,GAAD,OAAeA,EAAK3G,MAClED,UAAW2kC,EAAMzlC,KAAKc,UACtBE,SAAUykC,EAAMzlC,KAAKgB,SACrBJ,YAAa6kC,EAAMzlC,KAAKY,YAAYiI,KAAI,SAACnB,GAAD,OAAeA,EAAK3G,MAC5DG,YAAaukC,EAAMzlC,KAAKkB,YACxBE,aAAcqkC,EAAMzlC,KAAKoB,aAAeqkC,EAAMzlC,KAAKoB,aAAayH,KAAI,SAACnB,GAAD,OAAeA,EAAK3G,MAAM,IAE9FW,EAAiB,GACrB+jC,EAAMzlC,KAAKa,eAAeiE,SAAQ,SAACyE,GACN,kBAAdA,EAAErF,UAAsBqF,EAAErF,QAAUyB,KAAKC,MAAM2D,EAAErF,UAC5DxC,EAAU6H,EAAExI,IAAMwI,EAAErF,WAExB,IAAItD,EAAmB,GAcvB,OAbA6kC,EAAMzlC,KAAKY,YAAYkE,SAAQ,SAACyE,GACC,kBAAlBA,EAAEmkB,cAA0BnkB,EAAEmkB,YAAc/nB,KAAKC,MAAM2D,EAAEmkB,cACpE9sB,EAAY2I,EAAExI,IAAM,CAChB62B,cAAerJ,SAAShlB,EAAEquB,eAC1BC,SAAUtuB,EAAEsuB,SACZ7N,OAAQzgB,EAAEygB,OACVjpB,GAAIwI,EAAExI,GACNozB,YAAa5F,SAAShlB,EAAE4qB,aACxBC,WAAW,MAInBjxB,EAASpD,EAAcC,IAChBylC,EAAMzlC,KAAKiB,SAGrB0oB,OAAM,SAAAC,GACH,MAAM,IAAIqN,KAAgB,CACtBC,OAAQ,oCA9CjB,2CAAP,mDAAM,OA2DgBj0B,CAA6CwhC,IAElEiB,GAAYnN,aAAgC,CACrDn2B,KAAM,QACN+Q,SAAU,SAACnN,EAAQ7C,EAAUD,GAAnB,OAA6BC,EAASwiC,aAAkB,YAF7CpN,CAGtBgN,ICxGUK,GAAb,iLAIQ,GAAMrhC,KAAKrB,MAAMihC,UACb,OAAO,kBAAC,IAAU5/B,KAAKrB,OAG3B,OAAO,kBAAC,IAAD,iBAAWqB,KAAKrB,MAAhB,CAAuB4xB,UADb,kBAAM,kBAAC,IAAD,CAAU2M,GAAI,CAAE8B,SAAU,aACEnxB,YAAQ/O,SARnE,GAAoCwiC,KCIvBC,GAA0B7iC,aAPf,SAACzB,EAAkB0B,GACvC,MAAO,CACHihC,UAAW3iC,EAAMxB,KAAKiB,UAGH,iBAAO,KAEKgC,CAA6C2iC,ICM9EpP,GAAS,IAAI4N,IAAa,CAC9BC,IAAKhgB,GAAO2f,YA0EC+B,G,2MA9DbvkC,MAAQ,CACNohC,MAAOniC,EAAUylB,M,2EAaP8f,GACVzhC,KAAKkT,SAAS,CACZmrB,MAAOoD,M,+BAKT,OACE,kBAAC,IAAD,KAEE,kBAAC,IAAD,CAAUpjC,MAAOA,GACf,kBAAC,IAAD,CAAaqjC,aAAc,kBAAM9gC,QAAQC,IAAIxC,EAAMsjC,aAAavM,QAAS,KAAM72B,UAAWA,GACxF,kBAACohC,GAAD,CAAyB1N,OAAQA,IAC/B,kBAAC,IAAD,CAAgB2P,OAAQC,KAEtB,yBAAKziC,UAAS,uBAAkBY,KAAK8hC,QACnC,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO74B,KAAK,SAAS4E,OAAQ,YAA4B,IAAzB4vB,EAAwB,EAAxBA,QAAStQ,EAAe,EAAfA,SACvC,OAAO,kBAACgU,GAAD,CAAWX,WAAY,WAAO,IAC7B7V,GAASwC,EAASlwB,OAAS,CAAE0tB,KAAM,CAAEqU,SAAU,OAA/CrU,KACN8S,EAAQE,QAAQhT,SAMpB,kBAAC,IAAD,CAAO1hB,KAAK,KACV,kBAACs4B,GAAD,CAAyBhR,UAAWwO,QAM1C,yBAAKviC,GAAG,2B,4BAzCpB,OADkBwD,KAAK/C,MAAfohC,OAEN,KAAKniC,EAAUylB,KACb,MAAO,WACT,KAAKzlB,EAAU6lC,MACb,MAAO,Q,GAZGlO,IAAMvkB,WChBJ2Z,QACW,cAA7B+Y,OAAO7U,SAAS8U,UAEe,UAA7BD,OAAO7U,SAAS8U,UAEhBD,OAAO7U,SAAS8U,SAASC,MACvB,2DCZNC,IAASt0B,OAAO,kBAAC,GAAD,MAAUN,SAASC,eAAe,SDmI5C,kBAAmB40B,WACrBA,UAAUC,cAAcC,MAAMvd,MAAK,SAAAwd,GACjCA,EAAaC,kB","file":"static/js/main.58632592.chunk.js","sourcesContent":["import { IRootForm, IUser, IFilledForm } from \"../types\";\r\n\r\n\r\nexport const UPDATE_ANSWER = 'UPDATE_ANSWER';\r\ninterface UpdateAnswer {\r\n    type: typeof UPDATE_ANSWER;\r\n    payload: {\r\n        path: number[];\r\n        questionId: string;\r\n        value: string;\r\n    }\r\n}\r\n\r\nexport type AnswerActionTypes = UpdateAnswer;\r\n//survey form actions\r\nexport const NEXT = \"next\";\r\ninterface Next {\r\n    type: typeof NEXT;\r\n    payload: undefined;\r\n}\r\n\r\nexport const PREV = 'prev';\r\ninterface Prev {\r\n    type: typeof PREV;\r\n    payload: undefined;\r\n}\r\n\r\nexport const JUMP = 'jump';\r\ninterface Jump {\r\n    type: typeof JUMP;\r\n    payload: {\r\n        index: number;\r\n    }\r\n}\r\nexport type SurveyActions = Next | Prev | Jump\r\n\r\nexport const ADD_FILLED_FORM = 'add-filled-form';\r\nexport interface AddFilledForm {\r\n    type: typeof ADD_FILLED_FORM;\r\n    payload: {\r\n        id: string,\r\n        filledForm: IFilledForm\r\n    }\r\n}\r\n\r\nexport const UPDATE_FILLED_FORMS = 'update-filled-form';\r\nexport interface UpdateFilledForms {\r\n    type: typeof UPDATE_FILLED_FORMS,\r\n    payload: {\r\n        [key: string]: any\r\n    }\r\n}\r\nexport const DELETE_FILLED_FORM = 'delete-filled-form';\r\nexport interface DeleteFilledForm {\r\n    type: typeof DELETE_FILLED_FORM;\r\n    payload: {\r\n        formIds: string[]\r\n    }\r\n}\r\nexport const MARK_AS_SUBMITTED = 'mark-as-submitted';\r\nexport interface MarkFormAsSubmitted {\r\n    type: typeof MARK_AS_SUBMITTED;\r\n    payload: {\r\n        formIds: string[]\r\n    }\r\n}\r\n\r\nexport const UPDATE_FORM_ANSWER = 'update-form-answer';\r\nexport interface UpdateFormAnswer {\r\n    type: typeof UPDATE_FORM_ANSWER;\r\n    payload: {\r\n        formId: string;\r\n        path: number[];\r\n        questionId: string;\r\n        value: string;\r\n    }\r\n}\r\n\r\nexport const NEXT_FORM_ITEM = 'next-form-item';\r\nexport interface NextFormItem {\r\n    type: typeof NEXT_FORM_ITEM;\r\n    payload: {\r\n        formId: string;\r\n    }\r\n}\r\n\r\nexport const PREV_FORM_ITEM = 'prev-form-item';\r\nexport interface PrevFormItem {\r\n    type: typeof PREV_FORM_ITEM;\r\n    payload: {\r\n        formId: string;\r\n    }\r\n}\r\n\r\nexport const JUMP_TO = 'jump-to';\r\nexport interface JumpTo {\r\n    type: typeof JUMP_TO;\r\n    payload: {\r\n        formId: string;\r\n        index: number;\r\n    }\r\n}\r\nexport type FilledFormActions = AddFilledForm | UpdateFilledForms | DeleteFilledForm | UpdateFormAnswer | PrevFormItem | NextFormItem | JumpTo | MarkFormAsSubmitted;\r\n\r\n//available forms action types\r\n\r\nexport const ADD_ROOT_FORM = 'add-available-form';\r\nexport interface AddRootForm {\r\n    type: typeof ADD_ROOT_FORM;\r\n    payload: {\r\n        root: IRootForm,\r\n        id: string;\r\n    }\r\n}\r\n\r\nexport const REPLACE_ROOT_FORMS = 'replace-available-forms';\r\nexport interface ReplaceRootForms {\r\n    type: typeof REPLACE_ROOT_FORMS;\r\n    payload: {\r\n        roots: { [key: string]: IRootForm }\r\n    }\r\n}\r\n\r\nexport const DELETE_ROOT_FORM = 'delete-available-form';\r\nexport interface DeleteRootForms {\r\n    type: typeof DELETE_ROOT_FORM;\r\n    payload: {\r\n        ids: string[]\r\n    }\r\n}\r\nexport type RootFormActions = AddRootForm | ReplaceRootForms | DeleteRootForms;\r\n\r\n\r\n//user actions\r\nexport const SET_USER = 'set-user';\r\nexport interface SetUser {\r\n    type: typeof SET_USER;\r\n    payload: IUser\r\n}\r\n\r\nexport type UserActions = SetUser;\r\nexport type ActionTypes = UserActions | RootFormActions | FilledFormActions | SurveyActions;\r\n\r\n//root actions\r\nexport const LOGOUT = 'logout';\r\nexport interface LogOut {\r\n    type: typeof LOGOUT;\r\n    payload: undefined;\r\n}\r\n\r\n\r\nexport const TOGGLE_PAGER_MODE = 'toggle-pager-mode';\r\nexport interface TogglePagerMode {\r\n    type: typeof TOGGLE_PAGER_MODE;\r\n    payload: undefined;\r\n}\r\nexport type SettingActions = TogglePagerMode","import { ADD_FILLED_FORM, ADD_ROOT_FORM, DELETE_FILLED_FORM, FilledFormActions, JUMP_TO, LOGOUT, MARK_AS_SUBMITTED, NEXT_FORM_ITEM, PREV_FORM_ITEM, REPLACE_ROOT_FORMS, RootFormActions, SET_USER, TOGGLE_PAGER_MODE, UPDATE_FILLED_FORMS, UPDATE_FORM_ANSWER } from \".\";\r\nimport { IFilledForm, IRootForm, IUser } from \"../types\";\r\n\r\n\r\nexport function handleNext(formId: string): FilledFormActions {\r\n    return {\r\n        type: NEXT_FORM_ITEM,\r\n        payload: {\r\n            formId: formId\r\n        }\r\n    }\r\n}\r\n\r\nexport function handlePrev(formId: string): FilledFormActions {\r\n    return {\r\n        type: PREV_FORM_ITEM,\r\n        payload: {\r\n            formId: formId\r\n        }\r\n    }\r\n}\r\n\r\nexport function handleJump(formId: string, newSectionIndex: number): FilledFormActions {\r\n    return {\r\n        type: JUMP_TO,\r\n        payload: {\r\n            formId: formId,\r\n            index: newSectionIndex\r\n        }\r\n    }\r\n}\r\n\r\nexport function handleAddNewForm(id: string, filledForm: IFilledForm): FilledFormActions {\r\n    return {\r\n        type: ADD_FILLED_FORM,\r\n        payload: {\r\n            id,\r\n            filledForm\r\n        }\r\n    }\r\n}\r\nexport function handleAddRootForm(id: string, root: IRootForm): RootFormActions {\r\n    return {\r\n        type: ADD_ROOT_FORM,\r\n        payload: {\r\n            id: id,\r\n            root: root,\r\n        }\r\n    }\r\n}\r\nexport function handleDeleteForms(formIds: string[]): FilledFormActions {\r\n    return {\r\n        type: DELETE_FILLED_FORM,\r\n        payload: {\r\n            formIds: formIds\r\n        }\r\n    }\r\n}\r\nexport function handleMarkFormAsSubmitted(formIds: string[]): FilledFormActions {\r\n    return {\r\n        type: MARK_AS_SUBMITTED,\r\n        payload: {\r\n            formIds: formIds\r\n        }\r\n    }\r\n}\r\nexport function handleUpdateAnswer(formId: string, path: number[], questionId: string, value: string) {\r\n    return {\r\n        type: UPDATE_FORM_ANSWER,\r\n        payload: {\r\n            formId: formId,\r\n            path: path,\r\n            questionId: questionId,\r\n            value: value\r\n\r\n        }\r\n    }\r\n}\r\n\r\nexport function handleSetUser(user: IUser) {\r\n    return {\r\n        type: SET_USER,\r\n        payload: user\r\n    }\r\n}\r\n\r\nexport function handleSetRootForms(rootForms: { [key: string]: any }) {\r\n    return {\r\n        type: REPLACE_ROOT_FORMS,\r\n        payload: rootForms\r\n    }\r\n}\r\n\r\nexport function handleSetFilledForms(filled: { [key: string]: IFilledForm }) {\r\n    return {\r\n        type: UPDATE_FILLED_FORMS,\r\n        payload: filled\r\n    }\r\n}\r\nexport function handleLogout() {\r\n    return {\r\n        type: LOGOUT,\r\n        payload: undefined\r\n    }\r\n}\r\n\r\nexport function handleTogglePagerMode() {\r\n    return {\r\n        type: TOGGLE_PAGER_MODE,\r\n        payload: undefined\r\n    }\r\n}\r\n\r\n","import { Icon, Modal } from \"antd\";\r\nimport React from \"react\";\r\nconst { confirm } = Modal;\r\n\r\nfunction showConfirm(onConfirm: () => void) {\r\n    confirm({\r\n        title: 'Sign Out',\r\n        content: 'Are you sure you want to sign out?',\r\n        onOk() {\r\n            onConfirm();\r\n        },\r\n        onCancel() { },\r\n    });\r\n}\r\n\r\nexport type NavBarProps = {\r\n    isSidebarCollapsed: boolean;\r\n    setSidebarCollapsed: (val: boolean) => void;\r\n    onLogoutClick?: () => void;\r\n}\r\nexport function NavBar(props: NavBarProps) {\r\n    const onConfirmLogout = () => {\r\n        if (props.onLogoutClick) props.onLogoutClick();\r\n\r\n    }\r\n    return (\r\n        <>\r\n            <div>\r\n                <Icon\r\n                    style={{ fontSize: 20, color: \"black\" }}\r\n                    className=\"trigger\"\r\n                    type={props.isSidebarCollapsed ? 'menu-unfold' : 'menu-fold'}\r\n                    onClick={e => props.setSidebarCollapsed(!props.isSidebarCollapsed)}\r\n                />\r\n            </div>\r\n            <div>\r\n                <Icon onClick={() => showConfirm(onConfirmLogout)} style={{color:\"black\", fontSize: 20, alignSelf: \"flex-end\" }} type=\"logout\" />\r\n            </div>\r\n        </>\r\n\r\n    )\r\n}","import produce from \"immer\";\r\nimport { ADD_FILLED_FORM, FilledFormActions } from \"../actions\";\r\nimport { IFilledFormsState } from \"../types\";\r\n\r\n\r\nexport const initialFilledFormsState: IFilledFormsState = {\r\n    byId: {},\r\n    ids: []\r\n}\r\n\r\nexport function filledFormReducer(state = initialFilledFormsState, action: FilledFormActions) {\r\n    switch (action.type) {\r\n        case ADD_FILLED_FORM:\r\n            const { id, filledForm } = action.payload;\r\n\r\n            return produce(state, draft => {\r\n                draft.byId[id] = filledForm;\r\n                if (!draft.ids.includes(filledForm.id)) draft.ids.push(filledForm.id);\r\n            })\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}","import produce from \"immer\";\r\nimport { ADD_ROOT_FORM, DELETE_ROOT_FORM, REPLACE_ROOT_FORMS, RootFormActions } from \"../actions\";\r\nimport { IRootFormsState } from \"../types\";\r\nexport const initialRootFormsState: IRootFormsState = {\r\n    byId: {},\r\n    ids: []\r\n}\r\nexport function rootFormsReducer(\r\n    state = initialRootFormsState,\r\n    action: RootFormActions\r\n): IRootFormsState {\r\n    switch (action.type) {\r\n        case ADD_ROOT_FORM:\r\n            return produce(state, draft => {\r\n                const payload = action.payload;\r\n                if (!draft.ids.includes(payload.id)) {\r\n                    draft.ids.push(payload.id)\r\n                }\r\n                draft.byId[payload.id] = payload.root;\r\n            });\r\n\r\n        case REPLACE_ROOT_FORMS:\r\n            const payload = action.payload;\r\n            return { ...state, byId: payload.roots, ids: Object.keys(payload) };\r\n        case DELETE_ROOT_FORM:\r\n            return state;\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}","import { IQuestion, IRootSection, ISection } from \"../components/formfiller/types\";\r\n\r\nexport interface IAppState {\r\n    user: IUser;\r\n    rootForms: IRootFormsState;\r\n    filledForms: IFilledFormsState;\r\n    form: any;\r\n}\r\nexport interface IUser {\r\n    firstName: string;\r\n    lastName: string;\r\n    accountType: EUserType;\r\n    availableForms: string[];\r\n    filledForms: string[];\r\n    id: string;\r\n    token: string;\r\n    createdForms: string[]\r\n}\r\n\r\nexport enum EUserType {\r\n    SURVEYOR = 'surveyor',\r\n    ADMIN = 'admin'\r\n}\r\nexport interface IRootFormsState {\r\n    byId: { [key: string]: IRootForm },\r\n    ids: string[]\r\n}\r\nexport type IRootForm = {\r\n    [key: string]: ISection | IRootSection | IQuestion\r\n};\r\nexport interface IFilledFormsState {\r\n    byId: { [key: string]: IFilledForm },\r\n    ids: string[]\r\n}\r\n\r\nexport interface IFilledForm {\r\n    startedDate: number;\r\n    completedDate?: number;\r\n    formId: string;\r\n    filledBy: string;\r\n    id: string;\r\n    submitted?: boolean;\r\n    answerStore?: any;\r\n}\r\n\r\n\r\nexport enum EAppTheme {\r\n    DARK = 'dark',\r\n    LIGHT = 'light'\r\n}","import { IUser, EUserType } from \"../types\";\r\nimport { UserActions, SET_USER } from \"../actions\";\r\n\r\nexport const initialUserState: IUser = {\r\n    filledForms: [],\r\n    availableForms: [],\r\n    firstName: '',\r\n    id: '',\r\n    lastName: '',\r\n    token: '',\r\n    accountType: EUserType.SURVEYOR,\r\n    createdForms:[]\r\n}\r\nexport function userReducer(state = initialUserState, action: UserActions) {\r\n    switch (action.type) {\r\n        case SET_USER:\r\n            const payload = action.payload;\r\n            return { ...state, ...payload };\r\n        default:\r\n            return state;\r\n    }\r\n}","import { AnyAction, combineReducers } from \"redux\";\r\nimport { reducer } from \"redux-form\";\r\nimport { LOGOUT } from \"../actions\";\r\nimport { IAppState } from \"../types\";\r\nimport { filledFormReducer, initialFilledFormsState } from \"./filledFormReducer\";\r\nimport { initialRootFormsState, rootFormsReducer } from \"./rootFormsReducer\";\r\nimport { initialUserState, userReducer } from \"./userReducer\";\r\n\r\nexport const combinedReducers = combineReducers<IAppState>({\r\n    user: userReducer,\r\n    rootForms: rootFormsReducer,\r\n    filledForms: filledFormReducer,\r\n    form: reducer,\r\n});\r\n\r\nexport const initialAppState: IAppState = {\r\n    rootForms: initialRootFormsState,\r\n    user: initialUserState,\r\n    filledForms: initialFilledFormsState,\r\n    form: {}\r\n}\r\n\r\nexport const rootReducers = (state: IAppState, action: AnyAction): IAppState | undefined => {\r\n    if (action.type === LOGOUT) {\r\n        state = initialAppState;\r\n    }\r\n    return combinedReducers(state, action);\r\n}\r\n\r\n","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _ from 'lodash';\nexport var QACondition =\n/*#__PURE__*/\nfunction () {\n  function QACondition() {\n    _classCallCheck(this, QACondition);\n\n    this.literals = Array();\n  }\n\n  _createClass(QACondition, [{\n    key: \"setLiterals\",\n    value: function setLiterals(newLiterals) {\n      this.literals = newLiterals;\n      return this;\n    }\n  }, {\n    key: \"getClause\",\n    value: function getClause() {\n      var _this = this;\n\n      var clause = '';\n      this.literals.forEach(function (literal, key) {\n        clause += \"l\".concat(key).concat(key === _this.literals.length - 1 ? literal.followingOperator : '');\n      });\n      return clause;\n    }\n  }, {\n    key: \"addLiteral\",\n    value: function addLiteral(literal) {\n      this.literals.push(literal);\n      console.log(this.literals);\n    }\n  }, {\n    key: \"deleteLiteral\",\n    value: function deleteLiteral(literalIndex) {\n      this.literals.splice(literalIndex, 1);\n      return this;\n    }\n  }, {\n    key: \"Literals\",\n    get: function get() {\n      return this.literals;\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(data) {\n      if (!data) {\n        return new QACondition();\n      }\n\n      var c = new QACondition();\n      var literals = data.literals;\n      c.setLiterals(literals);\n      return c;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(data) {\n      if (!data) {\n        return undefined;\n      }\n\n      return {\n        literals: JSON.parse(JSON.stringify(data.literals))\n      };\n    }\n  }, {\n    key: \"checkIfValid\",\n    value: function checkIfValid(condition) {\n      if (!condition.literals) {\n        return false;\n      }\n\n      var isValid = true;\n      condition.literals.forEach(function (literal) {\n        var validity = Object.values(literal).every(function (x) {\n          return !_.isNil(x);\n        });\n\n        if (!validity) {\n          isValid = false;\n        }\n      });\n      return isValid;\n    }\n  }, {\n    key: \"Clone\",\n    value: function Clone(condition) {\n      var newCondition = new QACondition();\n      return newCondition;\n    }\n  }]);\n\n  return QACondition;\n}();\nexport var QAFollowingOperator;\n\n(function (QAFollowingOperator) {\n  QAFollowingOperator[\"OR\"] = \"||\";\n  QAFollowingOperator[\"AND\"] = \"&\";\n})(QAFollowingOperator || (QAFollowingOperator = {}));","import { createStore } from 'redux';\r\nimport { persistReducer, persistStore } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\nimport { rootReducers } from './reducers/rootReducer';\r\n\r\nconst persistConfig = {\r\n    key: \"root\",\r\n    storage: storage\r\n}\r\n//@ts-ignore\r\nconst persistedReducer = persistReducer(persistConfig, rootReducers);\r\nexport const store = createStore(persistedReducer);\r\nexport const persistor = persistStore(store);","import { connect } from \"react-redux\";\r\nimport { Action, Dispatch } from \"redux\";\r\nimport { handleLogout } from \"../actions/actions\";\r\nimport { NavBar, NavBarProps } from \"../components/navBar.component\";\r\nimport { persistor } from \"../configureStore\";\r\nimport { IAppState } from \"../types\";\r\n\r\nconst mapStateToProps = (state: IAppState, props: NavBarProps) => {\r\n    return {\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<Action>) => {\r\n    return {\r\n        onLogoutClick: () => {\r\n            dispatch(handleLogout());\r\n            persistor.purge();\r\n        }\r\n    }\r\n}\r\n\r\nexport const ConnectedNavBar = connect(mapStateToProps, mapDispatchToProps)(NavBar);","export function ofTypeToJSON(t) {\n  if (!t) {\n    return undefined;\n  }\n\n  return {\n    name: t.name,\n    ofType: ofTypeFromJSON(t.ofType)\n  };\n}\nexport function answerTypeToJSON(t) {\n  return {\n    name: t.name,\n    ofType: ofTypeToJSON(t.ofType)\n  };\n}\nexport function ofTypeFromJSON(a) {\n  if (!a) {\n    return undefined;\n  }\n\n  var r = {\n    name: a.name,\n    ofType: ofTypeFromJSON(a.ofType)\n  };\n  return r;\n}\nexport function answerTypeFromJSON(a) {\n  var r = {\n    name: a.name,\n    ofType: ofTypeFromJSON(a.ofType)\n  };\n  return r;\n}","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _ from 'lodash';\nimport { QACondition } from './condition';\nimport { answerTypeToJSON, answerTypeFromJSON } from './valueType';\nexport var AnswerOptions =\n/*#__PURE__*/\nfunction () {\n  function AnswerOptions() {\n    _classCallCheck(this, AnswerOptions);\n\n    this.optionsMap = {};\n    this.optionGroupMap = {};\n    this.options = [];\n    this.opt_count = 0;\n    this.group_count = 0;\n  }\n\n  _createClass(AnswerOptions, [{\n    key: \"addOption\",\n    value: function addOption(option) {\n      if (!option) {\n        option = {\n          id: 'opt-' + this.opt_count,\n          value: undefined,\n          groupName: undefined\n        };\n      }\n\n      this.optionsMap[option.id] = option;\n      var groupname = option.groupName;\n\n      if (groupname) {\n        var group = this.optionGroupMap[groupname];\n\n        if (!group) {\n          group = {\n            id: 'opt-grp-' + this.group_count,\n            name: groupname,\n            appearingCondition: undefined,\n            members: [option]\n          };\n          this.optionGroupMap[groupname] = group;\n          this.group_count++;\n        }\n\n        var optionExistInGroup = null;\n\n        if (option && option.id) {\n          optionExistInGroup = group.members.find(function (item) {\n            if (option) {\n              return item.id === option.id;\n            }\n\n            return false;\n          });\n        }\n\n        if (!optionExistInGroup) {\n          group.members.push(option);\n        }\n      }\n\n      this.opt_count++;\n      return this;\n    }\n  }, {\n    key: \"addGroup\",\n    value: function addGroup(groupname) {\n      var group = {\n        id: 'opt-grp' + this.group_count,\n        name: groupname || \"group-\".concat(this.group_count),\n        appearingCondition: undefined,\n        members: []\n      };\n      this.optionGroupMap[group.name] = group;\n      this.group_count++;\n      return group;\n    }\n  }, {\n    key: \"setValueForOption\",\n    value: function setValueForOption(id, newValue) {\n      var option = this.optionsMap[id];\n\n      if (option) {\n        option.value = newValue;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"deleteOption\",\n    value: function deleteOption(id) {\n      var opt = this.optionsMap[id];\n\n      if (opt) {\n        delete this.optionsMap[id];\n        var groupname = opt.groupName;\n\n        if (groupname) {\n          var group = this.optionGroupMap[groupname];\n\n          if (group) {\n            var ind = group.members.findIndex(function (item) {\n              return item.id === id;\n            });\n\n            if (ind > -1) {\n              group.members.splice(ind, 1);\n            }\n          }\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"assignOptionToGroup\",\n    value: function assignOptionToGroup(optionIds, groupName) {\n      var _this = this;\n\n      var existingGroup = this.optionGroupMap[groupName];\n\n      if (!existingGroup) {\n        existingGroup = this.addGroup(groupName);\n        this.optionGroupMap[existingGroup.name] = existingGroup;\n      }\n\n      var _loop = function _loop(i) {\n        var optionId = optionIds[i];\n        var option = _this.optionsMap[optionId];\n        var option_group = option.groupName && _this.optionGroupMap[option.groupName];\n\n        if (existingGroup.members.find(function (item) {\n          return item.id === optionId;\n        })) {\n          return \"continue\";\n        } // unassign from the group the option is in\n\n\n        if (option_group) {\n          var find = option_group.members.findIndex(function (item) {\n            return item.id === option.id;\n          });\n\n          if (find > -1) {\n            option_group.members.splice(find, 1);\n          }\n        }\n\n        option.groupName = existingGroup.name;\n        existingGroup.members.push(option);\n      };\n\n      for (var i = 0; i < optionIds.length; i++) {\n        var _ret = _loop(i);\n\n        if (_ret === \"continue\") continue;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setConditionForOption\",\n    value: function setConditionForOption(optionId, condition) {\n      var option = this.optionsMap[optionId];\n\n      if (option) {\n        option.appearingCondition = condition;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setConditionForGroup\",\n    value: function setConditionForGroup(groupname, condition) {\n      var group = this.optionGroupMap[groupname];\n\n      if (group) {\n        group.appearingCondition = condition;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"unassignGroup\",\n    value: function unassignGroup(ids) {\n      var _this2 = this;\n\n      ids.forEach(function (id) {\n        var option = _this2.optionsMap[id];\n        var opt_groupname = option.groupName;\n\n        if (option && opt_groupname) {\n          var optgroup = _this2.optionGroupMap[opt_groupname];\n\n          if (optgroup) {\n            var ind = optgroup.members.findIndex(function (item) {\n              return item.id === id;\n            });\n            optgroup.members.splice(ind, 1);\n          }\n        }\n\n        if (option) {\n          option.groupName = undefined;\n        }\n      });\n    }\n  }, {\n    key: \"changeGroupName\",\n    value: function changeGroupName(oldname, newname) {\n      var _this3 = this;\n\n      var group = this.optionGroupMap[oldname];\n      var members_ids = group.members.map(function (item) {\n        return item.id;\n      });\n\n      if (members_ids) {\n        members_ids.forEach(function (id) {\n          var option = _this3.optionsMap[id];\n\n          if (option) {\n            option.groupName = newname;\n          }\n        });\n      }\n\n      if (group) {\n        group.name = newname;\n\n        var newGroup = _.clone(group);\n\n        delete this.optionGroupMap[oldname];\n        this.optionGroupMap[newname] = newGroup;\n      }\n    }\n  }, {\n    key: \"deleteGroup\",\n    value: function deleteGroup(name) {\n      var _this4 = this;\n\n      var group = this.optionGroupMap[name];\n\n      if (!group) {\n        return this;\n      }\n\n      var members_ids = group.members.map(function (item) {\n        return item.id;\n      });\n\n      if (members_ids) {\n        members_ids.forEach(function (id) {\n          var option = _this4.optionsMap[id];\n\n          if (option) {\n            option.groupName = undefined;\n          }\n        });\n      }\n\n      delete this.optionGroupMap[name];\n    }\n  }, {\n    key: \"setOptionTypeFor\",\n    value: function setOptionTypeFor(optionId, newType) {\n      var opt = this.optionsMap[optionId];\n\n      if (opt) {\n        opt.type = newType;\n        opt.value = undefined;\n      }\n    }\n  }, {\n    key: \"SortedOptions\",\n    get: function get() {\n      var grouplessOptions = Object.values(this.optionsMap).filter(function (item) {\n        return !item.groupName;\n      });\n      var groups = Object.values(this.optionGroupMap);\n      return {\n        groups: groups,\n        rootOptions: grouplessOptions\n      };\n    }\n  }], [{\n    key: \"toJSON\",\n    value: function toJSON(a) {\n      return {\n        optionsMap: a && a.optionsMap ? _.mapValues(a.optionsMap, function (v) {\n          return optionToJSON(v);\n        }) : {},\n        optionGroupMap: a && a.optionGroupMap ? _.mapValues(a.optionGroupMap, function (v) {\n          return optionGroupToJSON(v);\n        }) : {}\n      };\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(d) {\n      var r = new AnswerOptions();\n      r.optionsMap = d.optionsMap ? _.mapValues(d.optionsMap, function (v) {\n        return optionFromJSON(v);\n      }) : {};\n      r.optionGroupMap = d.optionGroupMap ? _.mapValues(d.optionGroupMap, function (v) {\n        var rr = {\n          id: v.id,\n          name: v.name,\n          appearingCondition: QACondition.fromJSON(v.appearingCondition),\n          members: v.members.map(function (item) {\n            return r.optionsMap[item.id];\n          })\n        };\n        return rr;\n      }) : {};\n      return r;\n    }\n  }]);\n\n  return AnswerOptions;\n}();\nexport function optionGroupToJSON(a) {\n  return {\n    id: a.id,\n    name: a.name,\n    appearingCondition: QACondition.toJSON(a.appearingCondition),\n    members: a.members.map(function (item) {\n      return optionToJSON(item);\n    })\n  };\n}\nexport function optionFromJSON(a) {\n  var option = {\n    groupName: a.groupName,\n    appearingCondition: QACondition.fromJSON(a.appearingCondition),\n    id: a.id,\n    value: a.value\n  };\n  if (a.type) option.type = answerTypeFromJSON(a.type);\n  return option;\n}\nexport function optionToJSON(a) {\n  return {\n    appearingCondition: QACondition.toJSON(a.appearingCondition),\n    type: a.type ? answerTypeToJSON(a.type) : undefined,\n    id: a.id,\n    value: a.value,\n    groupName: a.groupName\n  };\n}","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nexport var Answer =\n/*#__PURE__*/\nfunction () {\n  function Answer(content) {\n    _classCallCheck(this, Answer);\n\n    this.content = content;\n  }\n\n  _createClass(Answer, [{\n    key: \"setContent\",\n    value: function setContent(content) {\n      this.content = content;\n      return this;\n    }\n  }, {\n    key: \"setCondition\",\n    value: function setCondition(condition) {\n      this.condition = condition;\n      return this;\n    }\n  }, {\n    key: \"Condition\",\n    get: function get() {\n      return this.condition;\n    }\n  }, {\n    key: \"Content\",\n    get: function get() {\n      return this.content;\n    }\n  }]);\n\n  return Answer;\n}();\nexport var QAComparisonOperator;\n\n(function (QAComparisonOperator) {\n  QAComparisonOperator[\"Less_Than_Or_Equal\"] = \"<=\";\n  QAComparisonOperator[\"Greater_Than_Or_Equal\"] = \">=\";\n  QAComparisonOperator[\"Less_Than\"] = \"<\";\n  QAComparisonOperator[\"Greater_Than\"] = \">\";\n  QAComparisonOperator[\"Equal\"] = \"==\";\n})(QAComparisonOperator || (QAComparisonOperator = {}));\n\nexport var AnswerType;\n\n(function (AnswerType) {\n  AnswerType[\"String\"] = \"String\";\n  AnswerType[\"Boolean\"] = \"Boolean\";\n  AnswerType[\"Date\"] = \"Date\";\n  AnswerType[\"Time\"] = \"Time\";\n  AnswerType[\"Number\"] = \"Number\";\n  AnswerType[\"Select\"] = \"Select\";\n})(AnswerType || (AnswerType = {}));\n\nexport var QAType;\n\n(function (QAType) {\n  QAType[\"String\"] = \"string\";\n  QAType[\"html\"] = \"html\";\n})(QAType || (QAType = {}));","export var ANSWER_TYPES;\n\n(function (ANSWER_TYPES) {\n  ANSWER_TYPES[\"BOOLEAN\"] = \"boolean\";\n  ANSWER_TYPES[\"STRING\"] = \"string\";\n  ANSWER_TYPES[\"DATE\"] = \"date\";\n  ANSWER_TYPES[\"TIME\"] = \"time\";\n  ANSWER_TYPES[\"NUMBER\"] = \"number\";\n  ANSWER_TYPES[\"RANGE\"] = \"range\";\n  ANSWER_TYPES[\"SELECT\"] = \"select\";\n  ANSWER_TYPES[\"GEOLOCATION\"] = \"geolocation\";\n})(ANSWER_TYPES || (ANSWER_TYPES = {}));","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _ from 'lodash';\nexport var Constants =\n/*#__PURE__*/\nfunction () {\n  function Constants() {\n    _classCallCheck(this, Constants);\n\n    this.consts = {};\n    this.count = 0;\n  }\n\n  _createClass(Constants, [{\n    key: \"getConstant\",\n    value: function getConstant(constname) {\n      return _.cloneDeep(this.consts[constname]);\n    }\n  }, {\n    key: \"addConstant\",\n    value: function addConstant(constant) {\n      if (!constant) {\n        constant = {\n          name: '',\n          id: 'constant-' + this.count,\n          type: undefined,\n          value: ''\n        };\n      }\n\n      this.consts[constant.id] = constant;\n      return this;\n    }\n  }, {\n    key: \"removeConstant\",\n    value: function removeConstant(id) {\n      if (this.consts[id]) {\n        delete this.consts[id];\n      }\n\n      return this;\n    }\n  }, {\n    key: \"ConstantsArray\",\n    get: function get() {\n      return Object.values(this.consts);\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(a) {}\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(a) {}\n  }]);\n\n  return Constants;\n}();","import { QACondition } from './condition';\nexport function dupeSettingsToJSON(a) {\n  return {\n    isEnabled: a.isEnabled,\n    condition: QACondition.toJSON(a.condition),\n    duplicateTimes: {\n      value: a.duplicateTimes.value,\n      type: a.duplicateTimes.type\n    }\n  };\n}\nexport function dupeSettingsFromJSON(a) {\n  var r = {\n    isEnabled: a.isEnabled,\n    duplicateTimes: {\n      value: a.duplicateTimes.value,\n      type: a.duplicateTimes.type\n    },\n    condition: QACondition.fromJSON(a.condition)\n  };\n  return r;\n}","export function request(API_URL, queryName, requestBody, onErrorMessage, token) {\n  var headers = {\n    'Content-Type': 'application/json'\n  };\n\n  if (token) {\n    headers.Authorization = token;\n  }\n\n  return fetch(API_URL, {\n    method: 'POST',\n    body: JSON.stringify(requestBody),\n    headers: headers\n  }).then(function (res) {\n    if (res.status !== 200) {\n      throw new Error(onErrorMessage || 'Failed');\n    }\n\n    return res.json();\n  }).then(function (resData) {\n    if (resData.errors) {\n      throw resData.errors[0]; // throw the first error only\n    } else if (resData.data && resData.data[queryName]) {\n      return resData.data[queryName];\n    }\n  }).catch(function (err) {\n    throw err;\n  });\n}\nexport function getReadablePath(nu) {\n  return nu.slice(1).map(function (item) {\n    return item + 1;\n  }).join('.');\n}\nexport function getRandomId(startingText) {\n  if (!startingText) {\n    startingText = '';\n  }\n\n  var S4 = function S4() {\n    return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n  };\n\n  return startingText + (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\n}","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { QAType } from './answer';\nimport { AnswerOptions } from './AnswerOptions';\nimport { QACondition } from './condition';\nimport { getRandomId } from './util';\nimport { answerTypeFromJSON, answerTypeToJSON } from './valueType';\nexport var QAQuestion =\n/*#__PURE__*/\nfunction () {\n  function QAQuestion() {\n    _classCallCheck(this, QAQuestion);\n\n    this.content = [];\n    this.customId = '';\n    this.autoAnswer = {\n      isEnabled: false,\n      answeringConditions: []\n    };\n    this.options = new AnswerOptions();\n    this.id = getRandomId('q-');\n    this.questionContent = {\n      content: '',\n      type: QAType.String\n    };\n  }\n\n  _createClass(QAQuestion, [{\n    key: \"updateFromQuestion\",\n    value: function updateFromQuestion(q) {\n      this.isRequired = q.isRequired;\n      this.appearingCondition = q.appearingCondition;\n      this.questionContent = q.questionContent;\n      this.autoAnswer = q.autoAnswer;\n      this.options = q.options;\n      this.answerType = q.answerType;\n      return this;\n    }\n  }, {\n    key: \"setIsRequired\",\n    value: function setIsRequired(bool) {\n      this.isRequired = bool;\n      return this;\n    }\n  }, {\n    key: \"setAppearingCondition\",\n    value: function setAppearingCondition(cond) {\n      this.appearingCondition = cond;\n      return this;\n    }\n  }, {\n    key: \"setAutoAnswer\",\n    value: function setAutoAnswer(a) {\n      this.autoAnswer = a;\n      return this;\n    }\n  }, {\n    key: \"setQuestionContent\",\n    value: function setQuestionContent(content) {\n      this.questionContent = content;\n      return this;\n    }\n  }, {\n    key: \"setCreationDate\",\n    value: function setCreationDate(creationDate) {\n      if (!creationDate) {\n        this.creationDate = new Date().getTime();\n      } else {\n        this.creationDate = creationDate;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"setAutoAnswerEnabled\",\n    value: function setAutoAnswerEnabled(bool) {\n      if (!bool) {\n        this.autoAnswer.isEnabled = true;\n      } else {\n        this.autoAnswer.isEnabled = bool;\n      }\n\n      return this;\n    }\n  }, {\n    key: \"addAutoAnswerCondition\",\n    value: function addAutoAnswerCondition(aaCond) {\n      this.autoAnswer.answeringConditions.push(aaCond);\n      return this;\n    }\n  }, {\n    key: \"setAnswerType\",\n    value: function setAnswerType(type) {\n      this.answerType = type;\n      return this;\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(opt) {\n      this.options = opt;\n      return this;\n    }\n  }], [{\n    key: \"toJSON\",\n    value: function toJSON(a) {\n      var r = {\n        id: a.id,\n        isRequired: a.isRequired,\n        appearingCondition: QACondition.toJSON(a.appearingCondition),\n        questionContent: {\n          content: a.questionContent.content,\n          type: a.questionContent.type\n        },\n        autoAnswer: autoAnswerToJSON(a.autoAnswer),\n        options: AnswerOptions.toJSON(a.options),\n        answerType: a.answerType ? answerTypeToJSON(a.answerType) : undefined,\n        customId: a.customId\n      };\n      return r;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(a) {\n      var q = new QAQuestion();\n      q.id = a.id;\n      q.isRequired = a.isRequired;\n      q.appearingCondition = QACondition.fromJSON(a.appearingCondition);\n      q.questionContent = a.questionContent;\n\n      if (a.options) {\n        q.options = AnswerOptions.fromJSON(a.options);\n      }\n\n      if (a.answerType) {\n        q.answerType = answerTypeFromJSON(a.answerType);\n      }\n\n      if (a.autoAnswer) {\n        q.autoAnswer = autoAnswerFromJSON(a.autoAnswer);\n      }\n\n      a.customId = q.customId || \"\";\n      return q;\n    }\n  }]);\n\n  return QAQuestion;\n}();\nexport function answerConditionToJSON(a) {\n  return {\n    condition: QACondition.toJSON(a.condition),\n    ifTrue: a.ifTrue,\n    ifFalse: a.ifFalse\n  };\n}\nexport function answerConditionFromJSON(a) {\n  var r = {\n    condition: QACondition.fromJSON(a.condition),\n    ifFalse: a.ifFalse,\n    ifTrue: a.ifTrue\n  };\n  return r;\n}\nexport function autoAnswerToJSON(a) {\n  if (!a) {\n    return undefined;\n  }\n\n  return {\n    isEnabled: a.isEnabled,\n    answeringConditions: a.answeringConditions.map(function (item) {\n      return answerConditionToJSON(item);\n    })\n  };\n}\nexport function autoAnswerFromJSON(a) {\n  var r = {\n    isEnabled: a.isEnabled,\n    answeringConditions: a.answeringConditions.map(function (item) {\n      return answerConditionFromJSON(item);\n    })\n  };\n  return r;\n}","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { QAQuestion } from './question';\nimport { QACondition } from './condition';\nimport { getRandomId } from './util';\nimport { dupeSettingsToJSON } from './duplicateSettings';\nexport var QuestionSection =\n/*#__PURE__*/\nfunction () {\n  function QuestionSection() {\n    _classCallCheck(this, QuestionSection);\n\n    this.customId = '';\n    this.id = getRandomId('ss-');\n    this.duplicatingSettings = {\n      condition: undefined,\n      isEnabled: false,\n      duplicateTimes: {\n        value: '',\n        type: 'number'\n      }\n    };\n    this.content = [];\n    this.appearingCondition = new QACondition();\n  }\n\n  _createClass(QuestionSection, [{\n    key: \"setID\",\n    value: function setID(id) {\n      this.id = id;\n      return this;\n    }\n  }, {\n    key: \"setName\",\n    value: function setName(name) {\n      this.name = name;\n      return this;\n    }\n  }, {\n    key: \"setContent\",\n    value: function setContent(content) {\n      this.content = content;\n      return this;\n    }\n  }, {\n    key: \"addContent\",\n    value: function addContent(content) {\n      this.content.push(content);\n      return this;\n    }\n  }, {\n    key: \"deleteContent\",\n    value: function deleteContent(contentId) {\n      var found = this.content.findIndex(function (item) {\n        return item.id === contentId;\n      });\n\n      if (found > -1) {\n        this.content.splice(found, 1);\n      }\n    }\n  }, {\n    key: \"setDuplicatingSettings\",\n    value: function setDuplicatingSettings(dupe) {\n      this.duplicatingSettings = dupe;\n      return this;\n    }\n  }], [{\n    key: \"toJSON\",\n    value: function toJSON(a) {\n      return {\n        name: a.name,\n        id: a.id,\n        appearingCondition: QACondition.toJSON(a.appearingCondition),\n        customId: a.customId,\n        content: a.content.map(function (item) {\n          if (item instanceof QuestionSection) {\n            return QuestionSection.toJSON(item);\n          } else if (item instanceof QAQuestion) {\n            return QAQuestion.toJSON(item);\n          }\n        }),\n        duplicatingSettings: dupeSettingsToJSON(a.duplicatingSettings)\n      };\n    }\n  }]);\n\n  return QuestionSection;\n}();","import _regeneratorRuntime from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { isNil } from 'lodash';\nimport { QACondition } from './condition';\nimport { dupeSettingsFromJSON } from './duplicateSettings';\nimport { QAQuestion } from './question';\nimport { QuestionSection } from './questionSection';\nimport { getRandomId } from './util';\nexport var RootSection =\n/*#__PURE__*/\nfunction () {\n  function RootSection() {\n    _classCallCheck(this, RootSection);\n\n    this.questions = {};\n    this.sections = {};\n    this.content = [];\n    this.name = '';\n    this.id = getRandomId('root-');\n  }\n\n  _createClass(RootSection, [{\n    key: \"setName\",\n    value: function setName(name) {\n      this.name = name;\n      return this;\n    }\n  }, {\n    key: \"descendants\",\n    value: function descendants(callback) {\n      var iterate = function iterate(node, path) {\n        for (var i = 0; i < node.content.length; i++) {\n          var current = node.content[i];\n\n          if (current) {\n            var cont = callback(current, path.concat(i), node);\n\n            if (current instanceof QuestionSection && (isNil(cont) || cont === true)) {\n              iterate(current, path.concat(i));\n            }\n          }\n        }\n      };\n\n      iterate(this, [0]);\n    }\n  }, {\n    key: \"addQuestion\",\n    value: function addQuestion(parentPath, q) {\n      if (!q) {\n        q = [new QAQuestion()];\n      }\n\n      var section = RootSection.getFromPath(parentPath, [this]);\n\n      for (var i = 0; i < q.length; i++) {\n        var current = q[i];\n\n        if (this.questions[current.id]) {\n          throw new Error('Question id conflict');\n        }\n\n        this.questions[current.id] = current;\n\n        if (section && !(section instanceof QAQuestion)) {\n          section.content.push(current);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"addSection\",\n    value: function addSection(parentPath, q) {\n      if (!q) {\n        q = [new QuestionSection()];\n      }\n\n      var section = RootSection.getFromPath(parentPath, [this]);\n\n      for (var i = 0; i < q.length; i++) {\n        var current = q[i];\n\n        if (this.questions[current.id]) {\n          throw new Error('Section id conflict');\n        }\n\n        this.sections[current.id] = current;\n\n        if (section && !(section instanceof QAQuestion)) {\n          section.content.push(current);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"removeQuestion\",\n    value: function removeQuestion(questionId, path) {\n      var parentSection = RootSection.getFromPath(path.slice(0, path.length - 1), [this]);\n\n      if (parentSection && !(parentSection instanceof QAQuestion)) {\n        var foundIndex = parentSection.content.findIndex(function (item) {\n          return item.id === questionId;\n        });\n\n        if (foundIndex > -1) {\n          parentSection.content.splice(foundIndex, 1);\n          delete this.questions[questionId];\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"removeSection\",\n    value: function removeSection(sectionId, path) {\n      var parentSection = RootSection.getFromPath(path.slice(0, path.length - 1), [this]);\n\n      if (parentSection && !(parentSection instanceof QAQuestion)) {\n        var foundIndex = parentSection.content.findIndex(function (item) {\n          return item.id === sectionId;\n        });\n\n        if (foundIndex > -1) {\n          parentSection.content.splice(foundIndex, 1);\n          delete this.sections[sectionId];\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"moveItem\",\n    value: function moveItem(prevPath, newPath) {\n      var itemAtPath = RootSection.getFromPath(prevPath, [this]);\n      var newParentPath = newPath.slice(0, newPath.length - 1);\n      var oldParentPath = prevPath.slice(0, prevPath.length - 1);\n      var newParent = RootSection.getFromPath(newParentPath, [this]);\n      var oldParent = RootSection.getFromPath(oldParentPath, [this]);\n\n      if (oldParent && newParent && itemAtPath) {\n        var foundIndex = oldParent.content.findIndex(function (item) {\n          return item.id === itemAtPath.id;\n        });\n\n        if (foundIndex > -1 && !(oldParent instanceof QAQuestion)) {\n          var removed = oldParent.content.splice(foundIndex, 1);\n\n          if (!(newParent instanceof QAQuestion)) {\n            var pos = newPath[newPath.length - 1];\n\n            if (removed[0] instanceof QuestionSection) {\n              newParent.content.splice(pos, 0, this.sections[removed[0].id]);\n            } else if (removed[0] instanceof QAQuestion) {\n              newParent.content.splice(pos, 0, this.questions[removed[0].id]);\n            }\n          }\n\n          return this;\n        }\n      }\n    }\n  }, {\n    key: \"Iterator2\",\n    value:\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function Iterator2(sectionPath, index, fetchType) {\n      var section, current, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, q, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _q;\n\n      return _regeneratorRuntime.wrap(function Iterator2$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(sectionPath.length === 0)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", true);\n\n            case 2:\n              section = RootSection.getFromPath(sectionPath, [this]);\n\n              if (!(section && !(section instanceof QAQuestion))) {\n                _context.next = 75;\n                break;\n              }\n\n            case 4:\n              if (!(index < section.content.length)) {\n                _context.next = 46;\n                break;\n              }\n\n              current = section.content[index];\n\n              if (!(current instanceof QAQuestion)) {\n                _context.next = 13;\n                break;\n              }\n\n              if (!(fetchType === QORS.QUESTION || !fetchType)) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 10;\n              return {\n                path: sectionPath.concat(index),\n                data: current\n              };\n\n            case 10:\n              index++;\n              _context.next = 44;\n              break;\n\n            case 13:\n              if (!(current instanceof QuestionSection)) {\n                _context.next = 44;\n                break;\n              }\n\n              if (!(fetchType === QORS.SECTION || !fetchType)) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.next = 17;\n              return {\n                path: sectionPath.concat(index),\n                data: current\n              };\n\n            case 17:\n              index++;\n              _iteratorNormalCompletion = true;\n              _didIteratorError = false;\n              _iteratorError = undefined;\n              _context.prev = 21;\n              _iterator = this.Iterator2(sectionPath.concat(index), 0, fetchType)[Symbol.iterator]();\n\n            case 23:\n              if (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n                _context.next = 30;\n                break;\n              }\n\n              q = _step.value;\n              _context.next = 27;\n              return q;\n\n            case 27:\n              _iteratorNormalCompletion = true;\n              _context.next = 23;\n              break;\n\n            case 30:\n              _context.next = 36;\n              break;\n\n            case 32:\n              _context.prev = 32;\n              _context.t0 = _context[\"catch\"](21);\n              _didIteratorError = true;\n              _iteratorError = _context.t0;\n\n            case 36:\n              _context.prev = 36;\n              _context.prev = 37;\n\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n\n            case 39:\n              _context.prev = 39;\n\n              if (!_didIteratorError) {\n                _context.next = 42;\n                break;\n              }\n\n              throw _iteratorError;\n\n            case 42:\n              return _context.finish(39);\n\n            case 43:\n              return _context.finish(36);\n\n            case 44:\n              _context.next = 4;\n              break;\n\n            case 46:\n              if (!(sectionPath && sectionPath.length > 0)) {\n                _context.next = 74;\n                break;\n              }\n\n              index = sectionPath[sectionPath.length - 1] + 1;\n              _iteratorNormalCompletion2 = true;\n              _didIteratorError2 = false;\n              _iteratorError2 = undefined;\n              _context.prev = 51;\n              _iterator2 = this.Iterator2(sectionPath, index, fetchType)[Symbol.iterator]();\n\n            case 53:\n              if (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n                _context.next = 60;\n                break;\n              }\n\n              _q = _step2.value;\n              _context.next = 57;\n              return _q;\n\n            case 57:\n              _iteratorNormalCompletion2 = true;\n              _context.next = 53;\n              break;\n\n            case 60:\n              _context.next = 66;\n              break;\n\n            case 62:\n              _context.prev = 62;\n              _context.t1 = _context[\"catch\"](51);\n              _didIteratorError2 = true;\n              _iteratorError2 = _context.t1;\n\n            case 66:\n              _context.prev = 66;\n              _context.prev = 67;\n\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n\n            case 69:\n              _context.prev = 69;\n\n              if (!_didIteratorError2) {\n                _context.next = 72;\n                break;\n              }\n\n              throw _iteratorError2;\n\n            case 72:\n              return _context.finish(69);\n\n            case 73:\n              return _context.finish(66);\n\n            case 74:\n              return _context.abrupt(\"return\", true);\n\n            case 75:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, Iterator2, this, [[21, 32, 36, 44], [37,, 39, 43], [51, 62, 66, 74], [67,, 69, 73]]);\n    })\n  }], [{\n    key: \"getFromPath\",\n    value: function getFromPath(path, root) {\n      var el = root[path[0]];\n\n      if (path.length === 1) {\n        return el;\n      }\n\n      if (el.content) {\n        return RootSection.getFromPath(path.slice(1), el.content);\n      }\n    }\n  }, {\n    key: \"Entries\",\n    value: function Entries(root, sectionPath, startIndex, fetchType) {\n      var stack = [];\n      var rt = [];\n      var cloned = sectionPath.slice(0);\n      stack.push({\n        path: sectionPath,\n        startIndex: startIndex\n      });\n\n      for (var i = 0; i < sectionPath.length - 1; i++) {\n        stack.push({\n          path: cloned.slice(0, cloned.length - 1),\n          startIndex: cloned[cloned.length - 1] + 1\n        });\n        cloned.pop();\n      }\n\n      while (stack.length > 0) {\n        var p = stack.shift();\n\n        if (p) {\n          var section = RootSection.getFromPath(p.path, [root]);\n\n          if (section) {\n            for (var _i = p.startIndex; _i < section.content.length; _i++) {\n              var item = section.content[_i];\n\n              if (item instanceof QAQuestion) {\n                if (!fetchType || fetchType === QORS.QUESTION) {\n                  rt.push({\n                    path: p.path.concat(_i),\n                    data: item\n                  });\n                }\n              } else {\n                if (!fetchType || fetchType === QORS.SECTION) {\n                  rt.push({\n                    path: p.path.concat(_i),\n                    data: item\n                  });\n                }\n\n                stack.push({\n                  path: p.path.concat(_i),\n                  startIndex: 0\n                });\n              }\n            }\n          }\n        }\n      }\n\n      return rt;\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON(a) {\n      var r = {\n        id: a.id,\n        name: a.name,\n        content: a.content.map(function (item) {\n          if (item instanceof QuestionSection) {\n            return QuestionSection.toJSON(item);\n          } else if (item instanceof QAQuestion) {\n            return QAQuestion.toJSON(item);\n          }\n        })\n      };\n      return r;\n    }\n  }, {\n    key: \"fromJSON\",\n    value: function fromJSON(a) {\n      var r = new RootSection();\n      r.id = a.id;\n      r.name = a.name;\n      var path = [0];\n\n      var handleSectionAdd = function handleSectionAdd(a, parentPath, index) {\n        if (a.hasOwnProperty('content')) {\n          var section = new QuestionSection();\n          section.id = a.id;\n          section.name = a.name;\n          section.customId = a.customId || '';\n          if (a.customId) section.customId = a.customId;\n\n          if (a.appearingCondition) {\n            section.appearingCondition = QACondition.fromJSON(a.appearingCondition);\n          }\n\n          section.duplicatingSettings = dupeSettingsFromJSON(a.duplicatingSettings);\n          r.addSection(parentPath, [section]);\n          a.content.forEach(function (item, i) {\n            return handleSectionAdd(item, parentPath.concat(index), i);\n          });\n        } else {\n          var question = QAQuestion.fromJSON(a);\n          r.addQuestion(parentPath, [question]);\n        }\n      };\n\n      if (a.content) {\n        a.content.forEach(function (item, index) {\n          return handleSectionAdd(item, path, index);\n        });\n      }\n\n      return r;\n    }\n  }]);\n\n  return RootSection;\n}();\nexport var QORS;\n\n(function (QORS) {\n  QORS[QORS[\"QUESTION\"] = 1] = \"QUESTION\";\n  QORS[QORS[\"SECTION\"] = 2] = \"SECTION\";\n})(QORS || (QORS = {}));","import { useQuery } from \"@apollo/react-hooks\";\r\nimport { Avatar, Button, Card, List, PageHeader, Popconfirm, Skeleton, Spin, Typography } from \"antd\";\r\nimport gql from \"graphql-tag\";\r\nimport React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nconst GET_FILLED_FORMS = gql`\r\nquery{\r\n    getFilledForms{\r\n      id\r\n      filledBy\r\n      formId\r\n    }\r\n  }`;\r\ntype FilledFormsPageProps = {\r\n\r\n}\r\nexport function FilledFormsPage(props: FilledFormsPageProps) {\r\n    const { data, loading, error } = useQuery(GET_FILLED_FORMS);\r\n    const onClick = () => {\r\n\r\n    }\r\n    const onFormDeleteConfirm = (ids: string[]) => {\r\n\r\n    }\r\n    return (\r\n        <>\r\n            <Card>\r\n                <PageHeader\r\n                    title={\"Filled forms\"}\r\n                    style={{\r\n                        border: '1px solid rgb(235, 237, 240)',\r\n                    }}\r\n                    subTitle=\"\"\r\n                    extra={[\r\n\r\n                    ]}\r\n                    avatar={{ icon: \"file\" }}\r\n                >\r\n                    <div\r\n\r\n                    >\r\n                        <Typography.Paragraph>\r\n                            Review submitted forms and make changes to the form if necessary.\r\n                        </Typography.Paragraph>\r\n                    </div>\r\n                </PageHeader>\r\n                <Spin spinning={loading}>\r\n\r\n                    <List\r\n                        loading={loading}\r\n                        itemLayout=\"horizontal\"\r\n                        dataSource={data && data.getFilledForms || []}\r\n                        renderItem={(item: any) => (\r\n                            <List.Item\r\n\r\n                                actions={[\r\n\r\n                                    <Popconfirm placement={\"left\"} arrowPointAtCenter={true} title=\"Are you sure you want to delete this form?\" onCancel={() => { }} onConfirm={() => onFormDeleteConfirm([item.id])} >\r\n                                        <Button type=\"danger\" icon={'delete'} key=\"delete\" />\r\n                                    </Popconfirm>,\r\n\r\n                                ]}\r\n                            >\r\n                                <Skeleton loading={loading} active avatar>\r\n                                    <List.Item.Meta\r\n                                        avatar={<Avatar shape=\"square\" size={64} icon=\"file-text\" />\r\n                                        }\r\n                                        title={<Link to={`/formviewer?formId=${item.id}&rootId=${item.formId}`}>{item.id}</Link>}\r\n                                        description={new Date(parseInt(item.updatedAt)).toLocaleTimeString()}\r\n                                    />\r\n                                    <div>\r\n                                    </div>\r\n                                </Skeleton>\r\n                            </List.Item>\r\n                        )}\r\n                    />\r\n\r\n                </Spin>\r\n            </Card>\r\n\r\n        </>\r\n    )\r\n}","import ReactDOM from \"react-dom\";\nexport function openModal(com) {\n  var el = document.getElementById(\"dp-modal\");\n\n  if (!el) {\n    el = document.createElement(\"div\");\n    el.setAttribute(\"id\", \"dp-modal\");\n    document.body.appendChild(el);\n  }\n\n  ReactDOM.render(com, el);\n}\nexport function destroyModal() {\n  var el = document.getElementById(\"dp-modal\");\n  if (el) ReactDOM.unmountComponentAtNode(el);\n}","export function getRandomId(startingText) {\n  if (!startingText) startingText = \"\";\n\n  var S4 = function S4() {\n    return ((1 + Math.random()) * 0x10000 | 0).toString(16).substring(1);\n  };\n\n  return startingText + (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\n}","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Button, HTMLTable } from \"@blueprintjs/core\";\nimport { QAComparisonOperator, QAFollowingOperator, QAType } from \"@datapali/dpform\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport Select from 'react-select';\nimport { customStyles, getOperatorForType } from \"./DPFormItem\";\nimport { getRandomId } from \"./utils/getRandomId\";\nimport { ValInput } from \"./ValInput\";\nvar TableFieldType;\n\n(function (TableFieldType) {\n  TableFieldType[TableFieldType[\"QuestionRef\"] = 1] = \"QuestionRef\";\n  TableFieldType[TableFieldType[\"ComparisonOperator\"] = 2] = \"ComparisonOperator\";\n  TableFieldType[TableFieldType[\"ComparisonValue\"] = 3] = \"ComparisonValue\";\n  TableFieldType[TableFieldType[\"FollowingOperator\"] = 4] = \"FollowingOperator\";\n})(TableFieldType || (TableFieldType = {}));\n\nexport var CreateCondition =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateCondition, _React$Component);\n\n  function CreateCondition(props) {\n    var _this;\n\n    _classCallCheck(this, CreateCondition);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateCondition).call(this, props));\n    _this.state = {\n      literals: _this.props.condition ? _this.props.condition.literals : []\n    };\n    _this.columns = [{\n      dataField: \"id\",\n      text: \"Literal ID\"\n    }, {\n      dataField: \"questionRef\",\n      text: \"Question Reference\"\n    }, {\n      dataField: \"comparisonOperator\",\n      text: \"Comparison Operator\"\n    }, {\n      dataField: \"comparisonValue\",\n      text: \"Comparison Value\"\n    }, {\n      dataField: \"followingOperator\",\n      text: \"Following Operator\"\n    }];\n    return _this;\n  }\n\n  _createClass(CreateCondition, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.setLiteralsSetter) {\n        this.props.setLiteralsSetter(this.setLiterals.bind(this));\n      }\n    }\n  }, {\n    key: \"setLiterals\",\n    value: function setLiterals(newLiterals) {\n      this.setState({\n        literals: newLiterals\n      });\n    }\n  }, {\n    key: \"addLiteral\",\n    value: function addLiteral(literal) {\n      var _this2 = this;\n\n      if (!literal) literal = {\n        literalId: getRandomId(\"lit-\"),\n        questionRef: undefined,\n        comparisonOperator: undefined,\n        comparisonValue: undefined,\n        followingOperator: undefined\n      };\n      this.setState(function (prevState) {\n        var newLiterals = _.clone(prevState.literals);\n\n        if (literal) newLiterals.push(literal);\n        return {\n          literals: newLiterals\n        };\n      }, function () {\n        if (_this2.props.onChange) {\n          _this2.props.onChange(_this2.state.literals);\n        }\n      });\n    }\n  }, {\n    key: \"moveLiteralUp\",\n    value: function moveLiteralUp(index) {\n      this.setState(function (prevState) {\n        var newLiterals = _.clone(prevState.literals);\n\n        var get_new_index = function get_new_index(i, length) {\n          var mod = function mod(x, n) {\n            return (x % n + n) % n;\n          };\n\n          return mod(i - 1, length);\n        };\n\n        var newIndex = get_new_index(index, newLiterals.length);\n        var _ref = [newLiterals[newIndex], newLiterals[index]];\n        newLiterals[index] = _ref[0];\n        newLiterals[newIndex] = _ref[1];\n        return {\n          literals: newLiterals\n        };\n      }, this.forceUpdate.bind(this));\n    }\n  }, {\n    key: \"handleDataChange\",\n    value: function handleDataChange(literalIndex, valueField, newValue) {\n      var _this3 = this;\n\n      this.setState(function (prevState) {\n        var newLiterals = _.clone(prevState.literals);\n\n        var current = newLiterals[literalIndex];\n\n        switch (valueField) {\n          case TableFieldType.QuestionRef:\n            current.questionRef = newValue && newValue.value ? newValue.value : undefined;\n            break;\n\n          case TableFieldType.ComparisonOperator:\n            var prop;\n            var accessProp;\n\n            for (prop in QAComparisonOperator) {\n              if (QAComparisonOperator[prop] === newValue.value) {\n                accessProp = prop;\n                current.comparisonOperator = QAComparisonOperator[accessProp];\n                break;\n              }\n            }\n\n            break;\n\n          case TableFieldType.ComparisonValue:\n            var newComparisonValue = {\n              content: newValue.value,\n              type: QAType.String\n            };\n            current.comparisonValue = newComparisonValue;\n            break;\n\n          case TableFieldType.FollowingOperator:\n            current.followingOperator = newValue.value === QAFollowingOperator.AND ? QAFollowingOperator.AND : QAFollowingOperator.OR;\n            break;\n\n          default:\n            break;\n        }\n\n        return {\n          literals: newLiterals\n        };\n      }, function () {\n        if (_this3.props.onChange) _this3.props.onChange(_this3.state.literals);\n      });\n    }\n  }, {\n    key: \"getQuestion\",\n    value: function getQuestion(questionRef) {\n      if (questionRef && this.props.definedQuestions && !_.isEmpty(this.props.definedQuestions)) {\n        var v = this.props.definedQuestions[questionRef];\n        return v;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"removeLiteral\",\n    value: function removeLiteral(index) {\n      var _this4 = this;\n\n      this.setState(function (prevState) {\n        var newLiterals = _.clone(prevState.literals);\n\n        newLiterals.splice(index, 1);\n        return {\n          literals: newLiterals\n        };\n      }, function () {\n        if (_this4.props.onChange) {\n          _this4.props.onChange(_this4.state.literals);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(HTMLTable, null, React.createElement(\"thead\", null, React.createElement(\"tr\", null, React.createElement(\"th\", {\n        key: \"th-first\"\n      }, \"\"), this.columns.map(function (item, key) {\n        return React.createElement(\"th\", {\n          key: key\n        }, item.text);\n      }), React.createElement(\"th\", {\n        key: \"th-last\"\n      }, \"\"))), React.createElement(\"tbody\", null, this.state.literals.map(function (item, key) {\n        var questions_ = _this5.props.definedQuestions ? Object.values(_this5.props.definedQuestions).map(function (item) {\n          return {\n            value: item.id,\n            label: item.questionContent.content\n          };\n        }) : [];\n        var questionselect = React.createElement(Select, {\n          key: \"literalq-\".concat(key, \"-\").concat(item.literalId),\n          styles: customStyles,\n          options: questions_,\n          value: questions_.find(function (r) {\n            return r.value === item.questionRef;\n          }),\n          onChange: function onChange(selecteOption) {\n            return _this5.handleDataChange(key, TableFieldType.QuestionRef, selecteOption);\n          }\n        });\n        var selectedQuestionType = item.questionRef && _this5.props.definedQuestions && _this5.props.definedQuestions[item.questionRef] ? _this5.props.definedQuestions[item.questionRef].answerType : undefined;\n        var comparisionOPOptions_ = getOperatorForType(selectedQuestionType).map(function (val, index) {\n          return {\n            value: val,\n            label: val\n          };\n        });\n        var comparisonOpSelect = React.createElement(Select, {\n          key: \"literalo-\".concat(key, \"-\").concat(item.literalId),\n          styles: customStyles,\n          options: comparisionOPOptions_,\n          value: comparisionOPOptions_.find(function (op, index) {\n            return op.value === item.comparisonOperator;\n          }),\n          onChange: _this5.handleDataChange.bind(_this5, key, TableFieldType.ComparisonOperator)\n        });\n\n        var question_ = _this5.getQuestion(item.questionRef);\n\n        var qAnswerType = question_ ? question_.answerType : undefined;\n        var qOptions = question_ && question_.options ? question_.options : undefined;\n        var comparisonValueSelect = React.createElement(ValInput, {\n          options: qOptions,\n          key: \"literalv-\".concat(key, \"-\").concat(item.literalId),\n          onChange: _this5.handleDataChange.bind(_this5, key, TableFieldType.ComparisonValue),\n          defaultValue: item.comparisonValue && item.comparisonValue.content,\n          type: qAnswerType\n        });\n        var followingOperatorOptions_ = Object.keys(QAFollowingOperator).map(function (key) {\n          return {\n            label: key,\n            value: key === \"AND\" ? QAFollowingOperator.AND : key === \"OR\" ? QAFollowingOperator.OR : \"\"\n          };\n        });\n        var followingOperatorSelect = React.createElement(Select, {\n          key: \"literalfo-\".concat(key, \"-\").concat(item.literalId),\n          styles: customStyles,\n          options: followingOperatorOptions_,\n          value: followingOperatorOptions_.find(function (r) {\n            return r.value === item.followingOperator;\n          }),\n          onChange: _this5.handleDataChange.bind(_this5, key, TableFieldType.FollowingOperator)\n        });\n        return React.createElement(\"tr\", {\n          key: \"tr_\" + key\n        }, React.createElement(\"td\", null, React.createElement(Button, {\n          icon: \"arrow-up\",\n          onClick: function onClick() {\n            return _this5.moveLiteralUp(key);\n          }\n        })), React.createElement(\"td\", null, \"l\", React.createElement(\"sub\", null, key)), React.createElement(\"td\", {\n          className: \"questionRef\"\n        }, questionselect), React.createElement(\"td\", {\n          className: \"comparisonOperator\"\n        }, comparisonOpSelect), React.createElement(\"td\", {\n          className: \"comparisonValue\"\n        }, comparisonValueSelect), React.createElement(\"td\", {\n          className: \"followingOperator\"\n        }, followingOperatorSelect), React.createElement(\"td\", null, React.createElement(Button, {\n          icon: \"cross\",\n          onClick: function onClick() {\n            _this5.removeLiteral(key);\n          }\n        })));\n      }), React.createElement(\"tr\", null, React.createElement(\"td\", null, React.createElement(Button, {\n        onClick: function onClick() {\n          return _this5.addLiteral();\n        },\n        icon: \"plus\"\n      })), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null)))));\n    }\n  }], [{\n    key: \"defaultProps\",\n    get: function get() {\n      return {\n        onChange: function onChange() {}\n      };\n    }\n  }]);\n\n  return CreateCondition;\n}(React.Component);","import _toConsumableArray from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { ButtonGroup, Divider, InputGroup } from \"@blueprintjs/core\";\nimport { DateInput, DateRangePicker, TimePicker, TimePrecision } from \"@blueprintjs/datetime\";\nimport { ANSWER_TYPES } from \"@datapali/dpform\";\nimport React, { useState } from \"react\";\nimport Select from \"react-select\";\nimport { customStyles } from \"./DPFormItem\";\nexport var RangeInput =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(RangeInput, _React$Component);\n\n  function RangeInput(props) {\n    var _this;\n\n    _classCallCheck(this, RangeInput);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RangeInput).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(RangeInput, [{\n    key: \"parseRangeValue\",\n    value: function parseRangeValue(range) {\n      var d = range.split(\"-\");\n      return {\n        min: d[0],\n        max: d[1]\n      };\n    }\n  }, {\n    key: \"handleInputChange\",\n    value: function handleInputChange(data) {\n      var transformed = data.min + \"-\" + data.max;\n\n      switch (this.props.type && this.props.type.name) {\n        //necessary transforms to be done here\n        case ANSWER_TYPES.TIME:\n          if (this.props.onChange) this.props.onChange(transformed);\n          break;\n\n        case ANSWER_TYPES.DATE:\n          if (this.props.onChange) this.props.onChange(transformed);\n          break;\n\n        case ANSWER_TYPES.NUMBER:\n          if (this.props.onChange) this.props.onChange(transformed);\n          break;\n\n        default:\n          if (this.props.onChange) this.props.onChange(transformed);\n          break;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var comp = null;\n      var type = this.props.type ? this.props.type.name : undefined;\n      var parsed = this.parseRangeValue(this.props.value);\n\n      switch (type) {\n        case ANSWER_TYPES.TIME:\n          comp = React.createElement(TimeRange, {\n            range: parsed,\n            onChange: this.handleInputChange\n          });\n          break;\n\n        case ANSWER_TYPES.DATE:\n          var dateMin = parsed.min ? new Date(parsed.min) : undefined;\n          var dateMax = parsed.max ? new Date(parsed.max) : undefined;\n          comp = React.createElement(DateRangePicker, {\n            shortcuts: false,\n            defaultValue: [dateMin, dateMax],\n            onChange: function onChange(selectedDates) {\n              return _this2.handleInputChange({\n                min: selectedDates[0] ? selectedDates[0].toString() : \"\",\n                max: selectedDates[1] ? selectedDates[1].toString() : \"\"\n              });\n            }\n          });\n          break;\n\n        case ANSWER_TYPES.NUMBER:\n          comp = React.createElement(NumberRange, {\n            range: parsed,\n            onChange: function onChange(d) {\n              return _this2.handleInputChange;\n            }\n          });\n          break;\n      }\n\n      return comp;\n    }\n  }]);\n\n  return RangeInput;\n}(React.Component);\nvar defaultNumberRangeProps = {\n  range: {\n    min: \"\",\n    max: \"\"\n  },\n  onChange: function onChange() {}\n};\n\nvar NumberRange = function NumberRange() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultNumberRangeProps;\n\n  var _useState = useState(props ? props.range.min : \"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      minValue = _useState2[0],\n      setMin = _useState2[1];\n\n  var _useState3 = useState(props ? props.range.max : \"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      maxValue = _useState4[0],\n      setMax = _useState4[1];\n\n  return React.createElement(ButtonGroup, null, React.createElement(\"input\", {\n    className: \"form-control\",\n    defaultValue: props && props.range.min && props.range.min.toString(),\n    onChange: function onChange(e) {\n      setMin(e.target.value);\n      if (props && props.onChange) props.onChange({\n        min: minValue,\n        max: maxValue\n      });\n    },\n    placeholder: \"Minimum\",\n    id: \"numberRange-min\",\n    type: \"number\"\n  }), React.createElement(Divider, null), React.createElement(\"input\", {\n    className: \"form-control\",\n    defaultValue: props && props.range.max && props.range.max.toString(),\n    onChange: function onChange(e) {\n      setMax(e.target.value);\n      if (props && props.onChange) props.onChange({\n        min: minValue,\n        max: maxValue\n      });\n    },\n    placeholder: \"Maximum\",\n    id: \"numberRange-max\",\n    type: \"number\"\n  }));\n};\n\nvar defaultTimeRangeProps = {\n  range: {\n    min: \"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time\",\n    max: \"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time\"\n  },\n  onChange: function onChange() {}\n};\n\nvar TimeRange = function TimeRange() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultTimeRangeProps;\n\n  var _useState5 = useState(props ? props.range.min : undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      minValue = _useState6[0],\n      setMin = _useState6[1];\n\n  var _useState7 = useState(props ? props.range.max : undefined),\n      _useState8 = _slicedToArray(_useState7, 2),\n      maxValue = _useState8[0],\n      setMax = _useState8[1];\n\n  console.log(maxValue);\n  console.log(minValue);\n  return React.createElement(ButtonGroup, {\n    className: \"bp3-dark\"\n  }, React.createElement(TimePicker, {\n    precision: TimePrecision.MINUTE,\n    useAmPm: true,\n    defaultValue: minValue ? new Date(minValue) : undefined,\n    onChange: function onChange(newTime) {\n      setMin(newTime.toLocaleDateString());\n      if (props.onChange) props.onChange({\n        min: minValue,\n        max: maxValue\n      });\n    }\n  }), React.createElement(Divider, null), React.createElement(TimePicker, {\n    precision: TimePrecision.MINUTE,\n    useAmPm: true,\n    defaultValue: maxValue ? new Date(maxValue) : undefined,\n    onChange: function onChange(newTime) {\n      setMax(newTime.toLocaleDateString());\n      props.onChange({\n        min: minValue,\n        max: maxValue\n      });\n    }\n  }));\n};\n\nexport var ValInput =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(ValInput, _React$Component2);\n\n  _createClass(ValInput, null, [{\n    key: \"defaultProps\",\n    get: function get() {\n      return {\n        defaultValue: \"\",\n        onChange: function onChange(e) {\n          console.log(e);\n        },\n        type: {\n          name: ANSWER_TYPES.STRING\n        }\n      };\n    }\n  }]);\n\n  function ValInput(props) {\n    var _this3;\n\n    _classCallCheck(this, ValInput);\n\n    _this3 = _possibleConstructorReturn(this, _getPrototypeOf(ValInput).call(this, props));\n    _this3.state = {};\n    return _this3;\n  }\n\n  _createClass(ValInput, [{\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var comp = null;\n\n      switch (this.props.type.name) {\n        case ANSWER_TYPES.NUMBER:\n          comp = React.createElement(InputGroup, {\n            defaultValue: this.props.defaultValue,\n            className: \"form-control\",\n            type: \"number\",\n            onChange: function onChange(e) {\n              if (_this4.props.onChange) _this4.props.onChange({\n                value: e.target.value\n              });\n            }\n          });\n          break;\n\n        case ANSWER_TYPES.SELECT:\n          comp = React.createElement(SelInput, {\n            type: this.props.type.ofType,\n            defaultValue: this.props.defaultValue,\n            options: this.props.options,\n            onChange: function onChange(newVal) {\n              if (_this4.props.onChange) _this4.props.onChange(newVal);\n            }\n          }); //TODO::\n\n          break;\n\n        case ANSWER_TYPES.BOOLEAN:\n          var opt = [{\n            value: \"true\",\n            label: \"YES\"\n          }, {\n            value: \"false\",\n            label: \"No\"\n          }];\n          var def = opt.find(function (item) {\n            return item.value === _this4.props.defaultValue;\n          });\n          comp = React.createElement(Select, {\n            styles: customStyles,\n            defaultValue: def,\n            options: opt,\n            onChange: function onChange(newVal) {\n              if (_this4.props.onChange) _this4.props.onChange({\n                value: newVal.value\n              });\n            }\n          });\n          break;\n\n        case ANSWER_TYPES.DATE:\n          var defaultDate = this.props.defaultValue ? new Date(this.props.defaultValue) : undefined;\n          comp = React.createElement(DateInput, {\n            formatDate: function formatDate(date) {\n              return date.toLocaleDateString();\n            },\n            parseDate: function parseDate(str) {\n              return new Date(str);\n            },\n            closeOnSelection: true,\n            defaultValue: defaultDate,\n            onChange: function onChange(e) {\n              if (_this4.props.onChange) _this4.props.onChange({\n                value: e.toLocaleDateString()\n              });\n            }\n          });\n          break;\n\n        case ANSWER_TYPES.RANGE:\n          if (this.props.type.ofType) {\n            comp = React.createElement(RangeInput, {\n              value: this.props.defaultValue,\n              type: this.props.type.ofType,\n              onChange: function onChange(e) {\n                if (_this4.props.onChange) _this4.props.onChange({\n                  value: e\n                });\n              }\n            });\n          }\n\n          break;\n\n        case ANSWER_TYPES.STRING:\n          comp = React.createElement(InputGroup, {\n            className: \"form-control\",\n            type: \"text\",\n            defaultValue: this.props.defaultValue,\n            onChange: function onChange(e) {\n              if (_this4.props.onChange) _this4.props.onChange({\n                value: e.target.value\n              });\n            }\n          });\n          break;\n\n        case ANSWER_TYPES.TIME:\n          var defaulttime = this.props.defaultValue ? new Date(this.props.defaultValue) : undefined;\n          comp = React.createElement(TimePicker, {\n            precision: TimePrecision.MINUTE,\n            useAmPm: true,\n            defaultValue: defaulttime,\n            onChange: function onChange(newTime) {\n              if (_this4.props.onChange) _this4.props.onChange({\n                value: newTime.toString()\n              });\n            }\n          });\n      }\n\n      return comp;\n    }\n  }]);\n\n  return ValInput;\n}(React.Component);\nexport var SelInput =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(SelInput, _React$Component3);\n\n  function SelInput(props) {\n    var _this5;\n\n    _classCallCheck(this, SelInput);\n\n    _this5 = _possibleConstructorReturn(this, _getPrototypeOf(SelInput).call(this, props));\n    _this5.state = {};\n    return _this5;\n  }\n\n  _createClass(SelInput, [{\n    key: \"handleChange\",\n    value: function handleChange(d) {\n      if (this.props.onChange) this.props.onChange(d);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var allOptions = [];\n\n      if (this.props.options) {\n        var _this$props$options$S = this.props.options.SortedOptions,\n            rootOptions = _this$props$options$S.rootOptions,\n            groups = _this$props$options$S.groups;\n        var groupOptions_ = [];\n        var rootOptions_ = [];\n\n        if (groups && groups.length > 0) {\n          groupOptions_ = groups.map(function (item) {\n            return {\n              label: item.name,\n              options: item.members.map(function (i) {\n                return {\n                  label: i.value,\n                  value: i.id\n                };\n              })\n            };\n          });\n        }\n\n        rootOptions_ = rootOptions.map(function (i) {\n          return {\n            label: i.value,\n            value: i.id\n          };\n        });\n        allOptions = [].concat(_toConsumableArray(groupOptions_), _toConsumableArray(rootOptions_));\n      }\n\n      var findOption = function findOption(options_, findValue) {\n        var found = null;\n\n        for (var i = 0; i < options_.length; i++) {\n          var options = options_[i];\n\n          if (options.options && options.options.length > 0) {\n            found = options.options.find(function (item) {\n              return item.value === findValue;\n            });\n            if (found) break;\n          } else {\n            found = options && options.value === findValue ? options : undefined;\n            if (found) break;\n          }\n        }\n\n        return found;\n      };\n\n      var defaultvalue = findOption(allOptions, this.props.defaultValue);\n      return React.createElement(Select, {\n        styles: customStyles,\n        options: allOptions,\n        onChange: this.handleChange.bind(this),\n        defaultValue: defaultvalue\n      });\n    }\n  }]);\n\n  return SelInput;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Button, Card, FormGroup, InputGroup, Label, Switch, TextArea } from \"@blueprintjs/core\";\nimport { ANSWER_TYPES, QAComparisonOperator, QACondition, QAQuestion, QAType } from \"@datapali/dpform\";\nimport * as _ from \"lodash\";\nimport React from \"react\";\nimport Modal from \"react-modal\";\nimport { QAAddOptions } from \"./AddOptions\";\nimport { AnswerTypeInput } from \"./AnswerType\";\nimport { AutofillCondition } from \"./AutofillCondition\";\nimport { CreateConditionModal } from \"./CreateConditionModal\";\nimport { destroyModal, openModal } from \"./utils\";\nvar root = document.getElementById(\"root\") || document.body;\nModal.setAppElement(root);\nexport function getOperatorForType(valueType) {\n  var allOperators = Object.values(QAComparisonOperator);\n  var type = valueType && valueType.name;\n\n  switch (type) {\n    case ANSWER_TYPES.BOOLEAN:\n    case ANSWER_TYPES.DATE:\n    case ANSWER_TYPES.STRING:\n    case ANSWER_TYPES.TIME:\n      return allOperators.filter(function (item) {\n        return item === QAComparisonOperator.Equal;\n      });\n\n    case ANSWER_TYPES.NUMBER:\n    default:\n      return allOperators;\n  }\n}\nexport var customStyles = {\n  container: function container(base, state) {\n    return _objectSpread({}, base, {\n      border: state.isFocused ? null : null,\n      background: \"transparent\",\n      transition: \"border-color 0.2s ease, box-shadow 0.2s ease, padding 0.2s ease\",\n      \"&:hover\": {\n        boxShadow: \"0 2px 4px 0 rgba(41, 56, 78, 0.1)\"\n      }\n    });\n  },\n  control: function control(base, state) {\n    return _objectSpread({}, base, {\n      background: \"transparent\",\n      borderColor: state.isFocused ? brandColor : base.borderColor,\n      '&:hover': {\n        borderColor: state.isFocused ? brandColor : base.borderColor\n      }\n    });\n  },\n  valueContainer: function valueContainer(base, state) {\n    return _objectSpread({}, base, {\n      background: \"transparent\",\n      color: \"white\"\n    });\n  },\n  menu: function menu(base, state) {\n    return _objectSpread({}, base, {\n      background: \"black\",\n      borderColor: \"#e14eca\",\n      position: \"absolute\",\n      zIndex: \"999999999999999999 !important\"\n    });\n  },\n  menuList: function menuList(base, state) {\n    console.log(state);\n    return _objectSpread({}, base, {\n      background: \"#525f7f\",\n      color: \"white\"\n    });\n  },\n  singleValue: function singleValue(base, state) {\n    return _objectSpread({}, base, {\n      color: \"white\"\n    });\n  },\n  input: function input(base, state) {\n    return _objectSpread({}, base, {\n      color: \"white\"\n    });\n  },\n  option: function option(base, state) {\n    return _objectSpread({}, base, {\n      background: state.isSelected ? \"lightblue\" : state.isFocused ? \"hotpink\" : \"#525f7f\"\n    });\n  }\n};\nvar brandColor = '#46beed';\nexport var DPFormItem =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DPFormItem, _React$Component);\n\n  function DPFormItem(props) {\n    var _this;\n\n    _classCallCheck(this, DPFormItem);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DPFormItem).call(this, props));\n    _this.state = {\n      question: _this.props.question\n    };\n    return _this;\n  } // shouldComponentUpdate(nextProps: FormItemProps, nextState: FormItemState) {\n  //     // return false;\n  // }\n\n\n  _createClass(DPFormItem, [{\n    key: \"handleChange\",\n    value: function handleChange() {\n      if (this.props.onChange) this.props.onChange(this.state.question);\n    }\n  }, {\n    key: \"handleRequiredChange\",\n    value: function handleRequiredChange(e) {\n      this.setState(function (prevState) {\n        var question = _.clone(prevState.question);\n\n        question.setIsRequired(!question.isRequired);\n        return {\n          question: question\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"openAppearingConditionModal\",\n    value: function openAppearingConditionModal() {\n      var el = React.createElement(CreateConditionModal, {\n        definedQuestions: this.props.definedQuestions,\n        isOpen: true,\n        onSubmit: this.editAppearingCondition.bind(this),\n        onCancel: destroyModal.bind(this),\n        condition: this.state.question.appearingCondition\n      });\n      openModal(el);\n    }\n  }, {\n    key: \"editAppearingCondition\",\n    value: function editAppearingCondition(newLiterals) {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        var question = _.clone(prevState.question);\n\n        if (!question.appearingCondition) question.setAppearingCondition(new QACondition());\n        question.appearingCondition.setLiterals(newLiterals);\n        console.log(QACondition.toJSON(question.appearingCondition));\n        return {\n          question: question\n        };\n      }, function () {\n        destroyModal();\n\n        _this2.handleChange();\n      });\n    }\n  }, {\n    key: \"handleQuestionChange\",\n    value: function handleQuestionChange(e) {\n      this.setState(function (prevState) {\n        var question = _.clone(prevState.question);\n\n        question.setQuestionContent({\n          type: QAType.String,\n          content: e\n        });\n        return {\n          question: question\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleAnswerTypeChange\",\n    value: function handleAnswerTypeChange(type) {\n      this.setState(function (prevState) {\n        var question = _.clone(prevState.question);\n\n        question.setAnswerType(type);\n        return {\n          question: question\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleOptionsChange\",\n    value: function handleOptionsChange(options) {\n      this.setState(function (prevState) {\n        var question = _.clone(prevState.question);\n\n        question.setOptions(options);\n        return {\n          question: question\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleAutoFillChange\",\n    value: function handleAutoFillChange(autoanswer) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.question);\n\n        cloned.setAutoAnswer(autoanswer);\n        return {\n          question: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleCustomIdChange\",\n    value: function handleCustomIdChange(newId) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.question);\n\n        cloned.customId = newId;\n        return {\n          question: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", null, React.createElement(Card, null, React.createElement(\"h5\", {\n        className: \"title\"\n      }, \"Add Question\"), React.createElement(FormGroup, null, React.createElement(Label, {\n        htmlFor: \"customid\"\n      }, \"Custom ID\"), React.createElement(InputGroup, {\n        defaultValue: this.state.question.customId,\n        className: \"form-control\",\n        onChange: function onChange(e) {\n          return _this3.handleCustomIdChange(e.target.value);\n        },\n        id: \"custom_id\",\n        name: \"custom_id\",\n        placeholder: \"Custom id\"\n      })), React.createElement(FormGroup, null, React.createElement(Label, {\n        htmlFor: \"question\"\n      }, \"Question\"), React.createElement(TextArea, {\n        fill: true,\n        defaultValue: this.state.question.questionContent.content,\n        className: \"form-control\",\n        onChange: function onChange(e) {\n          return _this3.handleQuestionChange(e.target.value);\n        },\n        id: \"question\",\n        name: \"question\",\n        placeholder: \"\"\n      })), React.createElement(FormGroup, null, React.createElement(Switch, {\n        defaultChecked: this.state.question.isRequired,\n        label: \"Required\",\n        onChange: this.handleRequiredChange.bind(this)\n      })), React.createElement(FormGroup, null, React.createElement(AnswerTypeInput, {\n        answerType: this.state.question.answerType,\n        onChange: this.handleAnswerTypeChange.bind(this)\n      })), this.state.question.answerType && this.state.question.answerType.name === ANSWER_TYPES.SELECT && this.state.question.answerType.ofType && React.createElement(FormGroup, null, React.createElement(\"label\", null, \"Add Options\"), React.createElement(Card, null, React.createElement(QAAddOptions, {\n        constants: this.props.constants,\n        definedQuestions: this.props.definedQuestions,\n        onChange: this.handleOptionsChange.bind(this),\n        defaultOptionType: this.state.question.answerType,\n        options: this.state.question.options\n      }))), React.createElement(FormGroup, null, React.createElement(Label, {\n        htmlFor: \"type\"\n      }, \"Appearing Condition\"), React.createElement(Button, {\n        type: \"button\",\n        large: true,\n        icon: \"key\",\n        fill: false,\n        onClick: this.openAppearingConditionModal.bind(this)\n      })), React.createElement(FormGroup, null, React.createElement(FormGroup, {\n        label: \"Add AutoFill condition\"\n      }, React.createElement(AutofillCondition, {\n        autoAnswer: this.state.question.autoAnswer,\n        definedQuestions: this.props.definedQuestions,\n        onChange: this.handleAutoFillChange.bind(this),\n        answerType: this.state.question.answerType,\n        options: this.state.question.options\n      })))));\n    }\n  }]);\n\n  return DPFormItem;\n}(React.Component);\nDPFormItem.defaultProps = {\n  question: new QAQuestion()\n};","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Button, Classes, Dialog } from \"@blueprintjs/core\";\nimport { QACondition } from \"@datapali/dpform\";\nimport React from \"react\";\nimport { CreateCondition } from \"./CreateCondition\";\nexport var CreateConditionModal =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CreateConditionModal, _React$Component);\n\n  function CreateConditionModal(props) {\n    var _this;\n\n    _classCallCheck(this, CreateConditionModal);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateConditionModal).call(this, props));\n\n    _this.handleChange = function (data) {\n      _this.setState({\n        errors: [],\n        literals: data\n      });\n    };\n\n    _this.primaryButtonHandler = function () {\n      var newCondition = new QACondition().setLiterals(_this.state.literals);\n      var isValid = QACondition.checkIfValid(newCondition);\n\n      if (!isValid) {\n        _this.setState({\n          errors: [{\n            message: \"Condition is not valid!\"\n          }]\n        });\n\n        return;\n      }\n\n      if (_this.props.onSubmit) {\n        _this.props.onSubmit(_this.state.literals);\n      }\n    };\n\n    _this.secondaryButtonHandler = function () {\n      if (_this.props.onCancel) {\n        _this.props.onCancel(_this.state.literals);\n      }\n    };\n\n    _this.state = {\n      isOpen: _this.props.isOpen,\n      literals: _this.props.condition && _this.props.condition.literals ? _this.props.condition.literals : [],\n      errors: []\n    };\n    _this.createCondition_ = React.createRef();\n    return _this;\n  }\n\n  _createClass(CreateConditionModal, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Dialog, {\n        isCloseButtonShown: false,\n        title: \"Add/Edit Condition\",\n        style: {\n          width: 900\n        },\n        isOpen: this.props.isOpen\n      }, React.createElement(\"div\", {\n        style: {\n          maxHeight: 500,\n          overflow: 'auto',\n          minHeight: 500\n        },\n        className: Classes.DIALOG_BODY\n      }, this.props.isOpen && React.createElement(CreateCondition, {\n        definedQuestions: this.props.definedQuestions,\n        condition: this.props.condition ? this.props.condition : undefined,\n        ref: this.createCondition_,\n        onChange: function onChange(data) {\n          return _this2.handleChange(data);\n        }\n      }), React.createElement(\"div\", {\n        className: \"btn-danger\"\n      }, this.state.errors.map(function (item) {\n        return item.message;\n      }))), React.createElement(\"div\", {\n        className: Classes.DIALOG_FOOTER\n      }, React.createElement(\"div\", {\n        className: Classes.DIALOG_FOOTER_ACTIONS\n      }, React.createElement(Button, {\n        color: \"primary\",\n        onClick: this.primaryButtonHandler\n      }, \"Submit\"), React.createElement(Button, {\n        color: \"secondary\",\n        onClick: this.secondaryButtonHandler\n      }, \"Cancel\"))));\n    }\n  }]);\n\n  return CreateConditionModal;\n}(React.Component);\nCreateConditionModal.defaultProps = {\n  isOpen: false,\n  condition: new QACondition()\n};","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from \"react\";\nimport { openModal, destroyModal } from \"./utils\";\nimport { CreateConditionModal } from \"./CreateConditionModal\";\nimport _ from \"lodash\";\nimport { ValInput } from \"./ValInput\";\nimport { Switch, Button, HTMLTable } from \"@blueprintjs/core\";\nimport { ANSWER_TYPES, QACondition } from \"@datapali/dpform\";\nexport var AutofillCondition =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AutofillCondition, _React$Component);\n\n  function AutofillCondition(props) {\n    var _this;\n\n    _classCallCheck(this, AutofillCondition);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AutofillCondition).call(this, props));\n    _this.state = {\n      aConditions: _this.props.autoAnswer.answeringConditions || [],\n      isEnabled: _this.props.autoAnswer.isEnabled\n    };\n    return _this;\n  }\n\n  _createClass(AutofillCondition, [{\n    key: \"editIfTrueFalseValue\",\n    value: function editIfTrueFalseValue(type, index, value) {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        var found = undefined;\n\n        var newConditions = _.clone(prevState.aConditions);\n\n        var selected = newConditions[index];\n\n        if (_this2.props.options && _this2.props.answerType.name === ANSWER_TYPES.SELECT) {\n          found = _this2.props.options.optionsMap[value];\n\n          if (type === \"true\") {\n            selected.ifTrue = found.id;\n          } else if (type === \"false\") {\n            selected.ifFalse = found.id;\n          }\n        } else {\n          if (type === 'true') selected.ifTrue = value;\n          if (type === 'false') selected.ifFalse = value;\n        }\n\n        return {\n          aConditions: newConditions\n        };\n      }, function () {\n        if (_this2.props.onChange) {\n          _this2.props.onChange({\n            isEnabled: _this2.state.isEnabled,\n            answeringConditions: _this2.state.aConditions\n          });\n        }\n      });\n    }\n  }, {\n    key: \"openConditionModal\",\n    value: function openConditionModal(index) {\n      var condition = this.state.aConditions[index];\n      var el = React.createElement(CreateConditionModal, {\n        definedQuestions: this.props.definedQuestions,\n        isOpen: true,\n        onSubmit: this.editCondition.bind(this, index),\n        onCancel: destroyModal.bind(this),\n        condition: condition.condition\n      });\n      openModal(el);\n    }\n  }, {\n    key: \"changeEnabled\",\n    value: function changeEnabled() {\n      var _this3 = this;\n\n      this.setState(function (prevState) {\n        return {\n          isEnabled: !prevState.isEnabled\n        };\n      }, function () {\n        if (_this3.props.onChange) _this3.props.onChange({\n          isEnabled: _this3.state.isEnabled,\n          answeringConditions: _this3.state.aConditions\n        });\n      });\n    }\n  }, {\n    key: \"addAutoFillCondition\",\n    value: function addAutoFillCondition() {\n      var _this4 = this;\n\n      this.setState(function (prevState) {\n        var newConditions = _.clone(prevState.aConditions);\n\n        var answerCondition = {\n          condition: new QACondition(),\n          ifTrue: undefined,\n          ifFalse: undefined\n        };\n        newConditions.push(answerCondition);\n        return {\n          aConditions: newConditions\n        };\n      }, function () {\n        if (_this4.props.onChange) _this4.props.onChange({\n          isEnabled: _this4.state.isEnabled,\n          answeringConditions: _this4.state.aConditions\n        });\n      });\n    }\n  }, {\n    key: \"editCondition\",\n    value: function editCondition(index, data) {\n      var _this5 = this;\n\n      var cloned = _.clone(this.state.aConditions);\n\n      var condition = cloned[index].condition;\n\n      if (!condition) {\n        cloned[index].condition = new QACondition();\n      }\n\n      cloned[index].condition.setLiterals(data);\n      this.setState({\n        aConditions: cloned\n      }, function () {\n        destroyModal();\n        if (_this5.props.onChange) _this5.props.onChange({\n          isEnabled: _this5.state.isEnabled,\n          answeringConditions: _this5.state.aConditions\n        });\n      });\n    }\n  }, {\n    key: \"removeAutofillCondition\",\n    value: function removeAutofillCondition(index) {\n      var _this6 = this;\n\n      this.setState(function (prevState) {\n        var aConditions = _.clone(prevState.aConditions);\n\n        aConditions.splice(index, 1);\n        return {\n          aConditions: aConditions\n        };\n      }, function () {\n        if (_this6.props.onChange) _this6.props.onChange({\n          isEnabled: _this6.state.isEnabled,\n          answeringConditions: _this6.state.aConditions\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n\n      return React.createElement(\"div\", null, React.createElement(Switch, {\n        checked: this.state.isEnabled,\n        onChange: this.changeEnabled.bind(this),\n        label: \"Enabled\"\n      }), React.createElement(HTMLTable, null, React.createElement(\"thead\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null), React.createElement(\"th\", null, \"Condition\"), React.createElement(\"th\", null, \" if True\"), React.createElement(\"th\", null, \" if False\"), React.createElement(\"th\", null))), React.createElement(\"tbody\", null, this.state.aConditions.map(function (item, index) {\n        var comparisonValueSelect = function comparisonValueSelect(ifFalseOrTrue) {\n          return React.createElement(ValInput, {\n            key: ifFalseOrTrue,\n            onChange: function onChange(data) {\n              return _this7.editIfTrueFalseValue(ifFalseOrTrue, index, data.value);\n            },\n            options: _this7.props.options,\n            defaultValue: ifFalseOrTrue === \"true\" ? item.ifTrue : item.ifFalse && item.ifFalse,\n            type: _this7.props.answerType\n          });\n        };\n\n        return React.createElement(\"tr\", {\n          key: \"af\".concat(index)\n        }, React.createElement(\"td\", null), React.createElement(\"td\", null, React.createElement(Button, {\n          icon: \"key\",\n          onClick: function onClick() {\n            return _this7.openConditionModal(index);\n          }\n        })), React.createElement(\"td\", null, comparisonValueSelect(\"true\")), React.createElement(\"td\", null, comparisonValueSelect(\"false\")), React.createElement(\"td\", null, React.createElement(Button, {\n          icon: \"cross\",\n          onClick: function onClick() {\n            _this7.removeAutofillCondition(index);\n          }\n        })));\n      }), React.createElement(\"tr\", null, React.createElement(\"td\", null, React.createElement(Button, {\n        icon: \"plus\",\n        onClick: function onClick() {\n          return _this7.addAutoFillCondition();\n        },\n        type: \"button\"\n      })), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null)))));\n    }\n  }]);\n\n  return AutofillCondition;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { FormGroup } from \"@blueprintjs/core\";\nimport { ANSWER_TYPES } from \"@datapali/dpform\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport Select from \"react-select\";\nimport { customStyles } from \"./DPFormItem\";\nvar ValueSelectOptions = [{\n  value: ANSWER_TYPES.BOOLEAN,\n  label: \"YES/NO\"\n}, {\n  value: ANSWER_TYPES.STRING,\n  label: \"Text\"\n}, {\n  value: ANSWER_TYPES.TIME,\n  label: \"Time\"\n}, {\n  value: ANSWER_TYPES.DATE,\n  label: \"Date\"\n}, {\n  value: ANSWER_TYPES.NUMBER,\n  label: \"Number\"\n}, {\n  value: ANSWER_TYPES.RANGE,\n  label: \"Range\"\n}, {\n  value: ANSWER_TYPES.SELECT,\n  label: \"Multiple Choice\"\n}, {\n  value: ANSWER_TYPES.GEOLOCATION,\n  label: \"Geo location\"\n}];\nvar OptionsForSelect = ValueSelectOptions.filter(function (item) {\n  return item.value && item.value !== ANSWER_TYPES.SELECT;\n});\nvar includedInRange = [ANSWER_TYPES.TIME, ANSWER_TYPES.NUMBER, ANSWER_TYPES.DATE, ANSWER_TYPES.TIME];\nvar OptionsForRange = ValueSelectOptions.filter(function (item) {\n  return includedInRange.includes(item.value);\n});\nexport var AnswerTypeInput =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(AnswerTypeInput, _React$Component);\n\n  function AnswerTypeInput(props) {\n    var _this;\n\n    _classCallCheck(this, AnswerTypeInput);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AnswerTypeInput).call(this, props));\n    _this.state = {\n      answerType: _this.props.answerType\n    };\n    return _this;\n  }\n  /**\n   *\n   * @param data\n   */\n\n\n  _createClass(AnswerTypeInput, [{\n    key: \"handleAnswerTypeChange\",\n    value: function handleAnswerTypeChange(data) {\n      var _this2 = this;\n\n      this.setState(function (prevState) {\n        var newAnswerType = _.clone(prevState.answerType);\n\n        newAnswerType.name = data.value;\n        newAnswerType.ofType = undefined;\n        return {\n          answerType: newAnswerType\n        };\n      }, function () {\n        if (_this2.props.onChange) _this2.props.onChange(_this2.state.answerType);\n      });\n    }\n    /**\n     * second select is for selecting types select and range\n     * @param data\n     */\n\n  }, {\n    key: \"handleSecondSelectChange\",\n    value: function handleSecondSelectChange(data) {\n      var _this3 = this;\n\n      this.setState(function (prevState) {\n        var newAnswerType = _.clone(prevState.answerType);\n\n        newAnswerType.ofType = {\n          name: data.value,\n          ofType: undefined\n        };\n        if (newAnswerType.ofType.ofType) newAnswerType.ofType.ofType = undefined;\n        return {\n          answerType: newAnswerType\n        };\n      }, function () {\n        if (_this3.props.onChange) _this3.props.onChange(_this3.state.answerType);\n      });\n    }\n    /**\n     * third select pops up only for range, to select the value types of range\n     * @param data\n     */\n\n  }, {\n    key: \"handleThirdSelectChange\",\n    value: function handleThirdSelectChange(data) {\n      var _this4 = this;\n\n      this.setState(function (prevState) {\n        var newAnswerType = _.clone(prevState.answerType);\n\n        if (newAnswerType.ofType) {\n          newAnswerType.ofType.ofType = data.value;\n        }\n\n        return {\n          answerType: newAnswerType\n        };\n      }, function () {\n        if (_this4.props.onChange) _this4.props.onChange(_this4.state.answerType);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var shouldDisplaySecondSelect = this.state.answerType.name === ANSWER_TYPES.SELECT || this.state.answerType.name === ANSWER_TYPES.RANGE;\n      var shouldDisplayThirdSelect = this.state.answerType.ofType && this.state.answerType.ofType.name === ANSWER_TYPES.RANGE;\n      var optionsForSecondSelect = this.state.answerType.name === ANSWER_TYPES.SELECT ? OptionsForSelect : this.state.answerType.name === ANSWER_TYPES.RANGE ? OptionsForRange : [];\n      var OptionsForThirdSelect = this.state.answerType.ofType && this.state.answerType.ofType.name === ANSWER_TYPES.RANGE ? OptionsForRange : [];\n      return React.createElement(React.Fragment, null, React.createElement(FormGroup, {\n        label: \"Value Type\"\n      }, React.createElement(Select, {\n        onChange: this.handleAnswerTypeChange.bind(this),\n        styles: customStyles,\n        options: ValueSelectOptions,\n        value: ValueSelectOptions.find(function (item) {\n          return item.value === _this5.state.answerType.name;\n        })\n      })), shouldDisplaySecondSelect && React.createElement(FormGroup, {\n        label: \"of Type\"\n      }, React.createElement(Select, {\n        onChange: this.handleSecondSelectChange.bind(this),\n        styles: customStyles,\n        options: optionsForSecondSelect,\n        value: optionsForSecondSelect.find(function (item) {\n          return _this5.state.answerType.ofType && item.value === _this5.state.answerType.ofType.name;\n        })\n      })), shouldDisplayThirdSelect && React.createElement(FormGroup, {\n        label: \"of Type\"\n      }, React.createElement(Select, {\n        onChange: this.handleThirdSelectChange.bind(this),\n        styles: customStyles,\n        options: OptionsForThirdSelect,\n        value: OptionsForThirdSelect.find(function (item) {\n          return _this5.state.answerType.ofType && _this5.state.answerType.ofType.ofType && item.value === _this5.state.answerType.ofType.ofType.name;\n        })\n      })));\n    }\n  }]);\n\n  return AnswerTypeInput;\n}(React.Component);\nAnswerTypeInput.defaultProps = {\n  answerType: {\n    name: undefined,\n    ofType: undefined\n  }\n};","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Button, ButtonGroup, Divider, H5, HTMLTable, InputGroup, TextArea } from \"@blueprintjs/core\";\nimport { AnswerOptions, ANSWER_TYPES, getRandomId, QACondition } from \"@datapali/dpform\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport Select from \"react-select/\";\nimport Creatable from \"react-select/creatable\";\nimport { AnswerTypeInput } from \"./AnswerType\";\nimport { CreateConditionModal } from \"./CreateConditionModal\";\nimport { customStyles } from \"./DPFormItem\";\nimport { destroyModal, openModal } from \"./utils\";\nimport { ValInput } from \"./ValInput\";\nvar OPTION_OR_GROUP;\n\n(function (OPTION_OR_GROUP) {\n  OPTION_OR_GROUP[OPTION_OR_GROUP[\"OPTION\"] = 1] = \"OPTION\";\n  OPTION_OR_GROUP[OPTION_OR_GROUP[\"GROUP\"] = 2] = \"GROUP\";\n})(OPTION_OR_GROUP || (OPTION_OR_GROUP = {}));\n\nexport var QAAddOptions =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(QAAddOptions, _React$Component);\n\n  function QAAddOptions(props) {\n    var _this;\n\n    _classCallCheck(this, QAAddOptions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(QAAddOptions).call(this, props));\n    _this.constantNameInputRef = null;\n    _this.makeFromTextInputRef = null;\n    _this.state = {\n      options: _this.props.options || new AnswerOptions()\n    };\n    return _this;\n  }\n\n  _createClass(QAAddOptions, [{\n    key: \"makeConstant\",\n    value: function makeConstant() {\n      var name = 'const';\n\n      if (this.constantNameInputRef) {\n        name = this.constantNameInputRef.value;\n      }\n\n      this.props.constants.addConstant({\n        id: getRandomId('const-'),\n        name: name,\n        type: {\n          name: ANSWER_TYPES.SELECT,\n          ofType: {\n            name: ANSWER_TYPES.STRING\n          }\n        },\n        value: AnswerOptions.fromJSON(AnswerOptions.toJSON(this.state.options))\n      });\n    }\n  }, {\n    key: \"makeOptionsFromText\",\n    value: function makeOptionsFromText() {\n      var _this2 = this;\n\n      if (this.makeFromTextInputRef) {\n        var text = this.makeFromTextInputRef.value;\n        var optionsText = text.split(\"\\n\");\n        this.setState(function (prevState) {\n          var options = _.clone(prevState.options);\n\n          optionsText.forEach(function (item) {\n            options.addOption({\n              id: \"opt-\" + Object.keys(options.optionsMap).length,\n              appearingCondition: undefined,\n              groupName: undefined,\n              type: _this2.props.defaultOptionType.ofType,\n              value: item\n            });\n          });\n          return {\n            options: options\n          };\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange() {\n      if (this.props.onChange) this.props.onChange(this.state.options);\n    }\n  }, {\n    key: \"handleAddNewOption\",\n    value: function handleAddNewOption() {\n      var _this3 = this;\n\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        var newOption = {\n          id: \"opt-\" + Object.keys(prevState.options.optionsMap).length,\n          appearingCondition: undefined,\n          groupName: undefined,\n          type: _this3.props.defaultOptionType.ofType,\n          value: undefined\n        };\n        cloned.addOption(newOption);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleGroupNameChange\",\n    value: function handleGroupNameChange(oldname, newname) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.changeGroupName(oldname, newname);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleGroupDelete\",\n    value: function handleGroupDelete(name) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.deleteGroup(name);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleOptionTypeChange\",\n    value: function handleOptionTypeChange(id, newType) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.setOptionTypeFor(id, newType);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleGroupAssignment\",\n    value: function handleGroupAssignment(ids, groupname) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.assignOptionToGroup(ids, groupname);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleGroupUnassignment\",\n    value: function handleGroupUnassignment(ids) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.unassignGroup(ids);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleOptionDelete\",\n    value: function handleOptionDelete(id) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.deleteOption(id);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleOptionValueChange\",\n    value: function handleOptionValueChange(id, newValue) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.setValueForOption(id, newValue);\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleAddGroup\",\n    value: function handleAddGroup() {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        cloned.addGroup();\n        return {\n          options: cloned\n        };\n      }, this.handleChange.bind(this));\n    }\n  }, {\n    key: \"handleConditionClick\",\n    value: function handleConditionClick(type, name) {\n      // openModal()\n      var condition;\n\n      if (type === OPTION_OR_GROUP.GROUP) {\n        condition = this.state.options.optionGroupMap[name].appearingCondition;\n      } else {\n        condition = this.state.options.optionsMap[name].appearingCondition;\n      }\n\n      var el = React.createElement(CreateConditionModal, {\n        definedQuestions: this.props.definedQuestions,\n        isOpen: true,\n        onSubmit: this.setCondition.bind(this, name, type),\n        onCancel: destroyModal.bind(this),\n        condition: condition\n      });\n      openModal(el);\n    }\n  }, {\n    key: \"setCondition\",\n    value: function setCondition(idOrname, type, literals) {\n      var _this4 = this;\n\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.options);\n\n        if (type === OPTION_OR_GROUP.GROUP) {\n          var group = cloned.optionGroupMap[idOrname];\n\n          if (!group.appearingCondition) {\n            group.appearingCondition = new QACondition();\n          }\n\n          group.appearingCondition.setLiterals(literals);\n        } else if (type === OPTION_OR_GROUP.OPTION) {\n          var option = cloned.optionsMap[idOrname];\n          if (!option.appearingCondition) option.appearingCondition = new QACondition();\n          option.appearingCondition.setLiterals(literals);\n        }\n\n        return {\n          options: cloned\n        };\n      }, function () {\n        destroyModal();\n\n        _this4.handleChange();\n      });\n    }\n  }, {\n    key: \"handleImportFromConstant\",\n    value: function handleImportFromConstant(a) {\n      var constant = this.props.constants.getConstant(a.value);\n      console.log(a);\n      console.log(constant);\n\n      if (constant && constant.value instanceof AnswerOptions) {\n        this.setState({\n          options: AnswerOptions.fromJSON(AnswerOptions.toJSON(constant.value))\n        }, this.handleChange.bind(this));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var constantsOptions = this.props.constants.ConstantsArray.map(function (item) {\n        return {\n          label: item.name,\n          value: item.id\n        };\n      });\n      return React.createElement(ButtonGroup, {\n        fill: true,\n        vertical: true\n      }, React.createElement(H5, null, \"Import From Constant \"), React.createElement(Select, {\n        styles: customStyles,\n        options: constantsOptions,\n        onChange: this.handleImportFromConstant.bind(this)\n      }), React.createElement(Divider, null), React.createElement(H5, null, \"Export To Constant\"), React.createElement(InputGroup, {\n        placeholder: \"Constant name\",\n        inputRef: function inputRef(r) {\n          return _this5.constantNameInputRef = r;\n        }\n      }), React.createElement(Button, {\n        onClick: this.makeConstant.bind(this)\n      }, \"Export\"), React.createElement(Divider, null), React.createElement(H5, null, \"Make From Text\"), React.createElement(TextArea, {\n        inputRef: function inputRef(r) {\n          return _this5.makeFromTextInputRef = r;\n        }\n      }), React.createElement(Button, {\n        onClick: this.makeOptionsFromText.bind(this)\n      }, \"Make From Text\"), React.createElement(QAOptionSection, {\n        defaultType: this.props.defaultOptionType,\n        groups: this.state.options.optionGroupMap ? Object.values(this.state.options.optionGroupMap) : [],\n        handleGroupAssignment: this.handleGroupAssignment.bind(this),\n        handleOptionTypeChange: this.handleOptionTypeChange.bind(this),\n        handleAddNewOption: this.handleAddNewOption.bind(this),\n        handleOptionDelete: this.handleOptionDelete.bind(this),\n        handleConditionClick: this.handleConditionClick.bind(this, OPTION_OR_GROUP.OPTION),\n        handleOptionValueChange: this.handleOptionValueChange.bind(this),\n        options: this.state.options.optionsMap ? Object.values(this.state.options.optionsMap) : []\n      }), React.createElement(Divider, null), React.createElement(QAAddGroupSection, {\n        handleAddGroup: this.handleAddGroup.bind(this),\n        handleGroupUnassignment: this.handleGroupUnassignment.bind(this),\n        handleGroupAssignment: this.handleGroupAssignment.bind(this),\n        handleGroupNameChange: this.handleGroupNameChange.bind(this),\n        handleGroupDelete: this.handleGroupDelete.bind(this),\n        handleGroupConditionClick: this.handleConditionClick.bind(this, OPTION_OR_GROUP.GROUP),\n        options: this.state.options.optionsMap ? Object.values(this.state.options.optionsMap) : [],\n        groups: this.state.options.optionGroupMap ? Object.values(this.state.options.optionGroupMap) : []\n      }));\n    }\n  }]);\n\n  return QAAddOptions;\n}(React.Component);\nexport var QAOptionSection =\n/*#__PURE__*/\nfunction (_React$Component2) {\n  _inherits(QAOptionSection, _React$Component2);\n\n  function QAOptionSection(props) {\n    var _this6;\n\n    _classCallCheck(this, QAOptionSection);\n\n    _this6 = _possibleConstructorReturn(this, _getPrototypeOf(QAOptionSection).call(this, props));\n    _this6.state = {\n      options: _this6.props.options\n    };\n    return _this6;\n  }\n\n  _createClass(QAOptionSection, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      if (nextProps.options.length !== this.props.options.length || nextProps.groups.length !== this.props.groups.length) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"generateAddGroupInput\",\n    value: function generateAddGroupInput(option) {\n      var _this7 = this;\n\n      var creatableOptions = this.props.groups.map(function (item) {\n        return {\n          value: item.name,\n          label: item.name\n        };\n      });\n      var value = creatableOptions.find(function (item) {\n        return item.value === option.groupName;\n      });\n      return React.createElement(Creatable, {\n        value: value || null,\n        styles: customStyles,\n        options: creatableOptions,\n        onChange: function onChange(e) {\n          if (_this7.props.handleGroupAssignment) _this7.props.handleGroupAssignment([option.id], e.value);\n        }\n      });\n    }\n  }, {\n    key: \"handleAddNewOption\",\n    value: function handleAddNewOption() {\n      if (this.props.handleAddNewOption) this.props.handleAddNewOption();\n    }\n  }, {\n    key: \"handleConditionEdit\",\n    value: function handleConditionEdit(id) {\n      if (this.props.handleConditionClick) this.props.handleConditionClick(id);\n    }\n  }, {\n    key: \"handleAddGroupInput\",\n    value: function handleAddGroupInput(index) {}\n  }, {\n    key: \"handleOptionDelete\",\n    value: function handleOptionDelete(id) {\n      if (this.props.handleOptionDelete) this.props.handleOptionDelete(id);\n    }\n  }, {\n    key: \"handleOptionTypeChange\",\n    value: function handleOptionTypeChange(option_id, newType) {\n      if (this.props.handleOptionTypeChange) this.props.handleOptionTypeChange(option_id, newType);\n    }\n  }, {\n    key: \"handleOptionValueChange\",\n    value: function handleOptionValueChange(id, newValue) {\n      if (this.props.handleOptionValueChange) this.props.handleOptionValueChange(id, newValue.value);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return React.createElement(HTMLTable, null, React.createElement(\"thead\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null), React.createElement(\"th\", null, \"Id\"), React.createElement(\"th\", null, \"Type\"), React.createElement(\"th\", null, \"Value\"), React.createElement(\"th\", null, \"Condition\"), React.createElement(\"th\", null, \"Group\"), React.createElement(\"th\", null))), React.createElement(\"tbody\", null, this.props.options.map(function (item, i) {\n        return React.createElement(\"tr\", {\n          key: item.id\n        }, React.createElement(\"td\", null), React.createElement(\"td\", null, item.id), React.createElement(\"td\", null, React.createElement(AnswerTypeInput, {\n          answerType: item.type,\n          onChange: function onChange(e) {\n            return _this8.handleOptionTypeChange(item.id, e);\n          }\n        })), React.createElement(\"td\", null, React.createElement(ValInput, {\n          onChange: _this8.handleOptionValueChange.bind(_this8, item.id),\n          defaultValue: item.value,\n          type: item.type\n        })), React.createElement(\"td\", null, React.createElement(Button, {\n          onClick: _this8.handleConditionEdit.bind(_this8, item.id),\n          style: {\n            color: 'red',\n            width: 20\n          },\n          icon: \"key\"\n        })), React.createElement(\"td\", null, _this8.generateAddGroupInput(item)), React.createElement(\"td\", null, React.createElement(Button, {\n          style: {\n            width: 20\n          },\n          onClick: _this8.handleOptionDelete.bind(_this8, item.id),\n          icon: \"cross\"\n        })));\n      }), React.createElement(\"tr\", null, React.createElement(\"td\", null, React.createElement(Button, {\n        style: {\n          width: 20\n        },\n        icon: \"add\",\n        onClick: this.handleAddNewOption.bind(this)\n      })), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null))));\n    }\n  }]);\n\n  return QAOptionSection;\n}(React.Component);\nQAOptionSection.defaultProps = {\n  options: [],\n  groups: []\n};\nexport var QAAddGroupSection =\n/*#__PURE__*/\nfunction (_React$Component3) {\n  _inherits(QAAddGroupSection, _React$Component3);\n\n  function QAAddGroupSection(props) {\n    var _this9;\n\n    _classCallCheck(this, QAAddGroupSection);\n\n    _this9 = _possibleConstructorReturn(this, _getPrototypeOf(QAAddGroupSection).call(this, props));\n    _this9.state = {};\n    return _this9;\n  }\n\n  _createClass(QAAddGroupSection, [{\n    key: \"handleGroupAssignment\",\n    value: function handleGroupAssignment(e, groupname) {\n      if (e) {\n        var ids = e.map(function (item) {\n          return item.value;\n        });\n        console.log(ids);\n        if (this.props.handleGroupAssignment) this.props.handleGroupAssignment(ids, groupname);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this10 = this;\n\n      return React.createElement(HTMLTable, null, React.createElement(\"thead\", null, React.createElement(\"tr\", null, React.createElement(\"th\", null), React.createElement(\"th\", null, \"Group Name\"), React.createElement(\"th\", null, \"Group Items\"), React.createElement(\"th\", null, \"Appearing Condition\"), React.createElement(\"th\", null))), React.createElement(\"tbody\", null, this.props.groups.map(function (item, index) {\n        var options = _this10.props.options.map(function (item) {\n          return {\n            value: item.id,\n            label: item.id\n          };\n        });\n\n        var memberids = item.members.map(function (item) {\n          return item.id;\n        });\n        var selected = options.filter(function (item) {\n          return memberids.includes(item.value);\n        });\n        return React.createElement(\"tr\", {\n          key: item.id\n        }, React.createElement(\"td\", null), React.createElement(\"td\", null, React.createElement(InputGroup, {\n          key: item.id,\n          type: \"text\",\n          className: \"form-control\",\n          defaultValue: item.name,\n          onChange: function onChange(e) {\n            if (_this10.props.handleGroupNameChange) _this10.props.handleGroupNameChange(item.name, e.target.value);\n          }\n        })), React.createElement(\"td\", null, React.createElement(Select, {\n          styles: customStyles,\n          onChange: function onChange(e, action) {\n            if (action.action === \"remove-value\") {\n              var removedid = action.removedValue.value;\n              if (_this10.props.handleGroupUnassignment) _this10.props.handleGroupUnassignment([removedid]);\n            }\n\n            _this10.handleGroupAssignment(e, item.name);\n          },\n          value: selected,\n          isMulti: true,\n          options: options\n        })), React.createElement(\"td\", null, React.createElement(Button, {\n          style: {\n            width: 20\n          },\n          icon: \"key\",\n          onClick: function onClick() {\n            if (_this10.props.handleGroupConditionClick) _this10.props.handleGroupConditionClick(item.name);\n          }\n        })), React.createElement(\"td\", null, React.createElement(Button, {\n          style: {\n            width: 20\n          },\n          icon: \"cross\",\n          onClick: function onClick() {\n            if (_this10.props.handleGroupDelete) _this10.props.handleGroupDelete(item.name);\n          }\n        })));\n      }), React.createElement(\"tr\", null, React.createElement(\"td\", null, React.createElement(Button, {\n        style: {\n          width: 20\n        },\n        icon: \"add\",\n        onClick: function onClick() {\n          if (_this10.props.handleAddGroup) _this10.props.handleAddGroup();\n        }\n      })), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null), React.createElement(\"td\", null))));\n    }\n  }]);\n\n  return QAAddGroupSection;\n}(React.Component);","export var CONFIG = {\n  LOCAL_SERVER: \"http://localhost:5000/graphql\",\n  PROD_SERVER: \"http://datapali.com/graphql\"\n};","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Drawer } from \"@blueprintjs/core\";\nimport React from \"react\";\nexport var ConstantDefinitions =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ConstantDefinitions, _React$Component);\n\n  function ConstantDefinitions(props) {\n    var _this;\n\n    _classCallCheck(this, ConstantDefinitions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ConstantDefinitions).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(ConstantDefinitions, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Drawer, {\n        isOpen: this.props.isOpen\n      });\n    }\n  }]);\n\n  return ConstantDefinitions;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Tree, Classes } from \"@blueprintjs/core\";\nimport React from \"react\";\nimport { QuestionSection, QAQuestion } from \"@datapali/dpform\";\nexport var FormTree =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(FormTree, _React$Component);\n\n  function FormTree(props) {\n    var _this;\n\n    _classCallCheck(this, FormTree);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormTree).call(this, props));\n\n    _this.handleNodeClick = function (nodeData, _nodePath, e) {\n      if (_this.props.handleNodeClick) _this.props.handleNodeClick(nodeData, _nodePath, e);\n    };\n\n    _this.handleNodeCollapse = function (nodeData, _nodePath, e) {\n      if (_this.props.handleNodeCollapse) _this.props.handleNodeCollapse(nodeData, _nodePath, e);\n    };\n\n    _this.handleNodeExpand = function (nodeData, _nodePath, e) {\n      if (_this.props.handleNodeExpand) _this.props.handleNodeExpand(nodeData, _nodePath, e);\n    };\n\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(FormTree, [{\n    key: \"getNodeFromQuestionOrSection\",\n    value: function getNodeFromQuestionOrSection(item, sectionNumber, selectedNodes, expandedNodes) {\n      var _this2 = this;\n\n      var def = {\n        id: item.id,\n        icon: undefined,\n        label: \"\",\n        isSelected: selectedNodes.includes(item.id),\n        isExpanded: expandedNodes.includes(item.id)\n      };\n\n      if (item instanceof QAQuestion) {\n        def.icon = \"document\";\n        def.label = \"\".concat(sectionNumber, \" \").concat(item.questionContent.content || \"Question\");\n      } else if (item instanceof QuestionSection) {\n        def.icon = \"folder-close\";\n        def.label = \"\".concat(sectionNumber, \" \").concat(item.name || \"Section\");\n        def.childNodes = item.content.map(function (it, ind) {\n          return _this2.getNodeFromQuestionOrSection(it, sectionNumber + \".\" + (ind + 1), selectedNodes, expandedNodes);\n        });\n      }\n\n      return def;\n    }\n  }, {\n    key: \"generateITNodeTree\",\n    value: function generateITNodeTree(form, selectedNodes, expandedNodes) {\n      var _this3 = this;\n\n      var root = {\n        id: form.id,\n        hasCaret: true,\n        icon: \"folder-close\",\n        label: \"Root\",\n        isExpanded: expandedNodes.includes(form.id),\n        isSelected: selectedNodes.includes(form.id),\n        childNodes: form.content.map(function (it, ind) {\n          return _this3.getNodeFromQuestionOrSection(it, (ind + 1).toString(), selectedNodes, expandedNodes);\n        })\n      };\n      return [root];\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.props.root_);\n      return React.createElement(Tree, {\n        contents: this.generateITNodeTree(this.props.root_, this.props.selectedNodes, this.props.expandedNodes),\n        onNodeClick: this.handleNodeClick,\n        onNodeCollapse: this.handleNodeCollapse,\n        onNodeExpand: this.handleNodeExpand,\n        className: Classes.ELEVATION_0\n      });\n    }\n  }]);\n\n  return FormTree;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport React from \"react\";\nimport { ButtonGroup, Button, Switch, Classes, Divider } from \"@blueprintjs/core\";\nimport Select from \"react-select\";\nimport { customStyles } from \"./DPFormItem\";\nimport _ from \"lodash\";\nimport classNames from \"classnames\";\nexport var DuplicateSettings =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(DuplicateSettings, _React$Component);\n\n  function DuplicateSettings(props) {\n    var _this;\n\n    _classCallCheck(this, DuplicateSettings);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DuplicateSettings).call(this, props));\n    _this.state = {\n      isEnabled: _this.props.isEnabled,\n      condition: _this.props.condition,\n      duplicateTimes: _this.props.duplicateTimes\n    };\n    return _this;\n  }\n\n  _createClass(DuplicateSettings, [{\n    key: \"handleQuestionRefChange\",\n    value: function handleQuestionRefChange(newValue) {\n      this.setState({\n        duplicateTimes: {\n          value: newValue.value,\n          type: \"questionRef\"\n        }\n      });\n    }\n  }, {\n    key: \"handleNumberTimesChange\",\n    value: function handleNumberTimesChange(newValue) {\n      this.setState({\n        duplicateTimes: {\n          value: newValue,\n          type: \"number\"\n        }\n      });\n    }\n  }, {\n    key: \"handleTypeChange\",\n    value: function handleTypeChange(newType) {\n      this.setState(function (prevState) {\n        return {\n          duplicateTimes: {\n            value: \"\",\n            type: newType.value\n          }\n        };\n      });\n    }\n  }, {\n    key: \"handleEnabledChange\",\n    value: function handleEnabledChange() {\n      this.setState(function (prevState) {\n        return {\n          isEnabled: !prevState.isEnabled\n        };\n      });\n    }\n  }, {\n    key: \"generateValueComponent\",\n    value: function generateValueComponent(type) {\n      var _this2 = this;\n\n      if (type === \"questionRef\") {\n        var options = Object.values(this.props.definedQuestions).map(function (item) {\n          return {\n            value: item.id,\n            label: item.questionContent.content\n          };\n        });\n        var selected = this.state.duplicateTimes.type === \"questionRef\" ? options.find(function (item) {\n          return item.value === _this2.state.duplicateTimes.value;\n        }) : undefined;\n        return React.createElement(Select, {\n          styles: customStyles,\n          options: options,\n          defaultValue: selected,\n          onChange: this.handleQuestionRefChange.bind(this)\n        });\n      }\n\n      return React.createElement(\"input\", {\n        defaultValue: this.state.duplicateTimes.type === \"number\" ? this.state.duplicateTimes.value : \"\",\n        type: \"number\",\n        className: \"form-control\",\n        onChange: function onChange(e) {\n          return _this2.handleNumberTimesChange(e.target.value);\n        }\n      });\n    }\n  }, {\n    key: \"handleSave\",\n    value: function handleSave() {\n      var isInvalid = _.values(this.state).every(_.isEmpty);\n\n      if (!isInvalid) {\n        this.props.handleSave({\n          isEnabled: this.state.isEnabled,\n          condition: this.state.condition,\n          duplicateTimes: this.state.duplicateTimes\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var typeOptions = [{\n        value: \"number\",\n        label: \"Number\"\n      }, {\n        value: \"questionRef\",\n        label: \"AnswerValue\"\n      }];\n      var defaultValue = typeOptions.find(function (item) {\n        return item.value === _this3.state.duplicateTimes.type;\n      });\n      return React.createElement(ButtonGroup, {\n        className: classNames(Classes.ELEVATION_2, Classes.DARK),\n        vertical: true,\n        fill: true\n      }, React.createElement(Switch, {\n        onChange: this.handleEnabledChange.bind(this),\n        defaultChecked: this.props.isEnabled\n      }, \"Enabled\"), React.createElement(Divider, null), React.createElement(Select, {\n        menuContainerStyle: {\n          zIndex: 99999\n        },\n        styles: customStyles,\n        onChange: function onChange(e) {\n          return _this3.handleTypeChange(e);\n        },\n        options: typeOptions,\n        defaultValue: defaultValue\n      }), this.generateValueComponent(this.state.duplicateTimes.type), React.createElement(Divider, null), React.createElement(ButtonGroup, {\n        fill: true\n      }, React.createElement(Button, {\n        onClick: this.handleSave.bind(this)\n      }, \"Save\"), React.createElement(Button, {\n        onClick: this.props.handleCancel\n      }, \"Cancel\")));\n    }\n  }]);\n\n  return DuplicateSettings;\n}(React.Component);","import _slicedToArray from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { Button, ButtonGroup, Collapse } from \"@blueprintjs/core\";\nimport React, { useState } from \"react\";\nexport var QuestionButton = function QuestionButton(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isExpanded = _useState2[0],\n      setIsExpanded = _useState2[1];\n\n  return React.createElement(ButtonGroup, {\n    className: \"bp3-dark\",\n    style: {\n      paddingBottom: \"20px\"\n    },\n    fill: true,\n    vertical: true\n  }, React.createElement(ButtonGroup, null, React.createElement(Button, {\n    onClick: function onClick() {\n      return props.handleMoveUp(props.questionId, props.path);\n    },\n    style: {\n      height: 50,\n      width: 20\n    },\n    icon: \"arrow-up\"\n  }), React.createElement(Button, {\n    style: {\n      height: 50\n    },\n    onClick: function onClick() {\n      return setIsExpanded(!isExpanded);\n    },\n    alignText: \"left\",\n    rightIcon: isExpanded ? \"chevron-up\" : \"chevron-down\"\n  }, \"Q \", React.createElement(\"span\", null, props.readablePath, \" \"), \" \", React.createElement(\"span\", null, \" \", props.questionTitle, \" \")), React.createElement(Button, {\n    onClick: function onClick() {\n      return props.handleDeletion(props.questionId, props.path);\n    },\n    style: {\n      height: 50,\n      width: 20\n    },\n    alignText: \"left\",\n    rightIcon: \"cross\"\n  })), React.createElement(Collapse, {\n    keepChildrenMounted: false,\n    isOpen: isExpanded\n  }, props.children));\n};","import _slicedToArray from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { Alignment, Button, ButtonGroup, Collapse, EditableText, H5, Navbar } from \"@blueprintjs/core\";\nimport React, { useState } from \"react\";\nexport var SectionButton = function SectionButton(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isExpanded = _useState2[0],\n      setIsExpanded = _useState2[1];\n\n  return React.createElement(ButtonGroup, {\n    className: \"bp3-dark\",\n    style: {\n      paddingBottom: \"20px\"\n    },\n    fill: true,\n    vertical: true\n  }, React.createElement(ButtonGroup, null, React.createElement(Button, {\n    style: {\n      width: 20\n    },\n    icon: \"arrow-up\",\n    onClick: function onClick() {\n      return props.handleMoveUp(props.sectionId, props.path);\n    }\n  }), React.createElement(Navbar, null, React.createElement(Navbar.Group, {\n    align: Alignment.LEFT\n  }, React.createElement(H5, null, React.createElement(\"span\", null, props.readablePath, \" \"), React.createElement(EditableText, {\n    onChange: props.handleSectionNameChange,\n    placeholder: \"Section\",\n    defaultValue: props.sectionName\n  }, \" \"))), React.createElement(Navbar.Group, {\n    align: Alignment.RIGHT\n  }, React.createElement(EditableText, {\n    onChange: props.handleCustomIdChange,\n    placeholder: \"Custom Id\",\n    defaultValue: props.customId\n  }, \" \"), React.createElement(Button, {\n    icon: \"key\",\n    onClick: function onClick() {\n      return props.handleOpenConditionSettings();\n    }\n  }), React.createElement(Button, {\n    onClick: function onClick() {\n      return setIsExpanded(!isExpanded);\n    },\n    icon: \"cog\"\n  }), React.createElement(Button, {\n    icon: \"folder-open\",\n    onClick: function onClick() {\n      return props.onClick(props.sectionId, props.path);\n    }\n  }))), React.createElement(Button, {\n    style: {\n      width: 20\n    },\n    icon: \"cross\",\n    onClick: function onClick() {\n      return props.handleDeletion(props.sectionId, props.path);\n    }\n  })), React.createElement(Collapse, {\n    isOpen: isExpanded,\n    keepChildrenMounted: false\n  }, props.children));\n};","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { ButtonGroup } from \"@blueprintjs/core\";\nimport { getReadablePath, QAQuestion, QuestionSection } from \"@datapali/dpform\";\nimport React from \"react\";\nimport { destroyModal, openModal } from \"./utils\";\nimport { CreateConditionModal } from \"./CreateConditionModal\";\nimport { DPFormItem } from \"./DPFormItem\";\nimport { DuplicateSettings } from \"./duplicateSettings\";\nimport { QuestionButton } from \"./questionButton\";\nimport { SectionButton } from \"./sectionButton\";\nexport var SectionC =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SectionC, _React$Component);\n\n  function SectionC(props) {\n    var _this;\n\n    _classCallCheck(this, SectionC);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SectionC).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(SectionC, [{\n    key: \"handleQuestionChange\",\n    value: function handleQuestionChange(q, path) {\n      if (this.props.handleQuestionChange) this.props.handleQuestionChange(q, path);\n    }\n  }, {\n    key: \"handleDuplicatingSettingsSave\",\n    value: function handleDuplicatingSettingsSave(id, dupe) {\n      if (this.props.handleSectionDuplicatingSettingsChange) this.props.handleSectionDuplicatingSettingsChange(id, dupe);\n    }\n  }, {\n    key: \"handleDuplicatingSettingsCancel\",\n    value: function handleDuplicatingSettingsCancel() {}\n  }, {\n    key: \"openConditionSettings\",\n    value: function openConditionSettings(section) {\n      var _this2 = this;\n\n      var condition = section.appearingCondition;\n      var el = React.createElement(CreateConditionModal, {\n        definedQuestions: this.props.definedQuestions,\n        isOpen: true,\n        onSubmit: function onSubmit(l) {\n          _this2.props.handleSectionConditionChange(section.id, l);\n\n          destroyModal();\n        },\n        onCancel: destroyModal.bind(this),\n        condition: condition\n      });\n      openModal(el);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var comp = null;\n      var readablePath = getReadablePath(this.props.parentPath);\n      if (readablePath) readablePath += \".\";\n      comp = this.props.section.content.map(function (item, index) {\n        var childPath = _this3.props.parentPath.concat(index);\n\n        if (item instanceof QAQuestion) {\n          return React.createElement(QuestionButton, {\n            questionTitle: item.questionContent.content,\n            handleMoveUp: _this3.props.handleMoveUp,\n            path: childPath,\n            questionId: item.id,\n            handleDeletion: _this3.props.handleDeleteChildSectionOrQuestion,\n            readablePath: readablePath + (index + 1),\n            key: item.id,\n            isExpanded: false\n          }, React.createElement(DPFormItem, {\n            constants: _this3.props.constants,\n            definedQuestions: _this3.props.definedQuestions,\n            onChange: function onChange(q) {\n              return _this3.handleQuestionChange(q, childPath);\n            },\n            question: item\n          }));\n        } else if (item instanceof QuestionSection) {\n          return React.createElement(SectionButton, {\n            customId: item.customId,\n            handleCustomIdChange: function handleCustomIdChange(v) {\n              return _this3.props.handleSectionCustomIdChange(item.id, v);\n            },\n            handleMoveUp: _this3.props.handleMoveUp,\n            sectionName: item.name,\n            handleSectionNameChange: function handleSectionNameChange(v) {\n              return _this3.props.handleSectionNameChange(item.id, v);\n            },\n            path: childPath,\n            handleDeletion: _this3.props.handleDeleteChildSectionOrQuestion,\n            sectionId: item.id,\n            readablePath: readablePath + (index + 1),\n            handleOpenConditionSettings: function handleOpenConditionSettings() {\n              return _this3.openConditionSettings(item);\n            },\n            key: item.id,\n            onClick: _this3.props.handleSectionClick\n          }, React.createElement(DuplicateSettings, Object.assign({\n            definedQuestions: _this3.props.definedQuestions,\n            handleSave: function handleSave(d) {\n              return _this3.handleDuplicatingSettingsSave(item.id, d);\n            },\n            handleCancel: _this3.handleDuplicatingSettingsCancel\n          }, item.duplicatingSettings)));\n        }\n\n        return null;\n      });\n      return React.createElement(ButtonGroup, {\n        fill: true,\n        vertical: true\n      }, comp);\n    }\n  }]);\n\n  return SectionC;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Navbar, Alignment, Button } from \"@blueprintjs/core\";\nimport React from \"react\";\nvar toolbarItems = [{\n  type: \"button\",\n  name: \"up-one-level\",\n  icon: \"arrow-up\",\n  text: \"\"\n}, {\n  type: \"button\",\n  name: \"save-root\",\n  icon: \"floppy-disk\",\n  text: \"Save Form\"\n}, {\n  type: \"button\",\n  name: \"add-section\",\n  icon: \"box\",\n  text: \"Add Section\"\n}, {\n  type: \"button\",\n  name: \"add-question\",\n  icon: \"document\",\n  text: \"Add Question\"\n}, {\n  type: \"button\",\n  name: \"copy-state\",\n  icon: \"clipboard\",\n  text: \"Copy State\"\n}];\nexport var Toolbar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Toolbar, _React$Component);\n\n  function Toolbar(props) {\n    var _this;\n\n    _classCallCheck(this, Toolbar);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Toolbar).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Toolbar, [{\n    key: \"handleClick\",\n    value: function handleClick(name) {\n      if (this.props.handleItemClick) this.props.handleItemClick(name);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Navbar, {\n        className: \"bp3-dark\",\n        fixedToTop: true\n      }, React.createElement(Navbar.Group, {\n        align: Alignment.LEFT\n      }, this.props.children, toolbarItems.map(function (item) {\n        return React.createElement(Button, {\n          onClick: _this2.handleClick.bind(_this2, item.name),\n          key: item.name,\n          icon: item.icon,\n          text: item.text,\n          className: \"bp3-minimal\"\n        });\n      })));\n    }\n  }]);\n\n  return Toolbar;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { EditableText, Intent, Toaster } from \"@blueprintjs/core\";\nimport { Constants, QAQuestion, QORS, QuestionSection, request, RootSection } from \"@datapali/dpform\";\nimport copy from \"copy-to-clipboard\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport { CONFIG } from \"./APPCONFIG\";\nimport { ConstantDefinitions } from \"./constants\";\nimport { FormTree } from \"./formtree\";\nimport { SectionC } from \"./section\";\nimport { Toolbar } from \"./Toolbar\";\nimport \"./App.css\";\nexport var SurveyForm =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SurveyForm, _React$Component);\n\n  function SurveyForm(props) {\n    var _this;\n\n    _classCallCheck(this, SurveyForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SurveyForm).call(this, props));\n    _this.state = {\n      selectedNodes: [],\n      expandedNodes: [_this.props.root.id],\n      root: _this.props.root || new RootSection(),\n      activeSection: _this.props.root,\n      activeSectionPath: [0],\n      constants: new Constants()\n    };\n    return _this;\n  }\n\n  _createClass(SurveyForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {}\n  }, {\n    key: \"loadForm\",\n    value: function loadForm() {\n      var _this2 = this;\n\n      var requestBody = {\n        query: \"\\n            query GetForm($formId: [String]!){\\n                forms(id: $formId){\\n                  id\\n                  name\\n                  content\\n                }\\n              }\",\n        variables: {\n          formId: \"root-53c37497-3808-cfd8-c886-1361dbaab171\"\n        }\n      };\n      var token = this.props.token;\n      return request(CONFIG.PROD_SERVER, \"forms\", requestBody, \"Could not delete the game file\", token).then(function (file) {\n        file = file[0];\n\n        if (file) {\n          file.content = JSON.parse(file.content);\n          console.log(file.id);\n          var root = RootSection.fromJSON(file);\n          var valbag = [];\n\n          var iterated = _this2.getAllEntries([0, 1], 6, root, null, true, valbag);\n\n          console.log(iterated);\n\n          _this2.setState({\n            root: root,\n            activeSection: root,\n            activeSectionPath: [0]\n          });\n        }\n      });\n    }\n  }, {\n    key: \"getAllEntries\",\n    value: function getAllEntries(startSectionPath, startIndex, root, fetchType) {\n      var first = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var returnbag = arguments.length > 5 ? arguments[5] : undefined;\n      if (!returnbag) returnbag = [];\n      if (startSectionPath.length <= 0) return;\n      var section = RootSection.getFromPath(startSectionPath, [root]);\n      if (!section) return;\n\n      for (var i = startIndex; i < section.content.length; i++) {\n        var current = section.content[i];\n\n        if (current instanceof QAQuestion) {\n          if (fetchType === QORS.QUESTION || !fetchType) returnbag.push(current);\n        } else if (current instanceof QuestionSection) {\n          if (fetchType === QORS.SECTION || !fetchType) returnbag.push(current);\n          this.getAllEntries(startSectionPath.concat(i), 0, root, fetchType, false, returnbag);\n        }\n      }\n\n      if (first) {\n        var cloned = startSectionPath.slice(0);\n        var index = cloned.pop();\n\n        if (typeof index === \"number\") {\n          this.getAllEntries(cloned, index, root, fetchType, true, returnbag);\n        }\n      }\n\n      return returnbag;\n    }\n  }, {\n    key: \"handleAddSection\",\n    value: function handleAddSection() {\n      var _this3 = this;\n\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        cloned.addSection(_this3.state.activeSectionPath);\n        return {\n          root: cloned\n        };\n      }, function () {\n        if (_this3.props.onChange) _this3.props.onChange(_this3.state.root);\n      });\n    }\n  }, {\n    key: \"handleAddQuestion\",\n    value: function handleAddQuestion() {\n      var _this4 = this;\n\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        cloned.addQuestion(_this4.state.activeSectionPath);\n        return {\n          root: cloned\n        };\n      }, function () {\n        if (_this4.props.onChange) _this4.props.onChange(_this4.state.root);\n      });\n    }\n  }, {\n    key: \"handleDeleteQuestionOrSection\",\n    value: function handleDeleteQuestionOrSection(deleteid, path_) {\n      var _this5 = this;\n\n      this.setState(function (prevState) {\n        var activeSection = prevState.activeSection;\n        var activeSectionPath = prevState.activeSectionPath;\n        var parent = path_.slice(0, path_.length - 1);\n\n        var cloned = _.clone(prevState.root);\n\n        var item = RootSection.getFromPath(path_, [_this5.state.root]);\n        if (item && deleteid !== item.id) throw new Error(\"cannot delete, id mismatch\");\n\n        if (item instanceof QAQuestion) {\n          cloned.removeQuestion(item.id, path_);\n        } else if (item instanceof QuestionSection) {\n          cloned.removeSection(item.id, path_);\n\n          if (item.id === prevState.activeSection.id) {\n            var parentSection = RootSection.getFromPath(parent, [_this5.state.root]);\n\n            if (parentSection && !(parentSection instanceof QAQuestion)) {\n              activeSection = parentSection;\n              activeSectionPath = parent;\n            }\n          }\n        }\n\n        return {\n          root: cloned,\n          activeSection: activeSection,\n          activeSectionPath: activeSectionPath\n        };\n      }, function () {\n        if (_this5.props.onChange) _this5.props.onChange(_this5.state.root);\n      });\n    }\n  }, {\n    key: \"handleUpOneLevel\",\n    value: function handleUpOneLevel() {\n      if (this.state.activeSectionPath.length > 1) {\n        var newSectionPath = this.state.activeSectionPath.slice(0, this.state.activeSectionPath.length - 1);\n        var newSection = RootSection.getFromPath(newSectionPath, [this.state.root]);\n\n        if (newSection && !(newSection instanceof QAQuestion)) {\n          this.setState(function (prevState) {\n            return {\n              activeSection: !newSection ? prevState.activeSection : newSection instanceof QAQuestion ? prevState.activeSection : newSection,\n              activeSectionPath: newSectionPath\n            };\n          });\n        }\n      }\n    }\n  }, {\n    key: \"handleSave\",\n    value: function handleSave() {\n      // let file = RootSection.toJSON(this.state.root);\n      // file.content = JSON.stringify(file.content);\n      // if (!file.name) file.name = \"Main Form\";\n      // let requestBody = {\n      //     query: `\n      //     mutation SaveForm($saveFile: FormFileInput!){\n      //         saveForm(form: $saveFile){\n      //           id\n      //         }\n      //       }`,\n      //     variables: {\n      //         saveFile: file\n      //     }\n      // }\n      // let token = this.props.token;\n      // return request(CONFIG.PROD_SERVER, \"saveForm\", requestBody, \"Could not save the  file\", token).then(re => console.log(re));\n      if (this.props.onSave) this.props.onSave(this.state.root);\n    }\n  }, {\n    key: \"handleToolbarItemClick\",\n    value: function handleToolbarItemClick(name) {\n      switch (name) {\n        case \"add-section\":\n          this.handleAddSection();\n          break;\n\n        case \"add-question\":\n          this.handleAddQuestion();\n          break;\n\n        case \"up-one-level\":\n          this.handleUpOneLevel();\n          break;\n\n        case \"save-root\":\n          this.handleSave();\n          break;\n\n        case \"copy-state\":\n          var data = JSON.stringify(RootSection.toJSON(this.state.root));\n          copy(data);\n          var toast = {\n            message: \"Copied state to clipboard\",\n            icon: \"tick\",\n            intent: Intent.SUCCESS\n          };\n          this.toasterRef.show(toast);\n          break;\n      }\n    }\n  }, {\n    key: \"handleQuestionUpdate\",\n    value: function handleQuestionUpdate(question, path) {\n      var _this6 = this;\n\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        var parent = path.slice(0, path.length - 1);\n        var parentSection = RootSection.getFromPath(parent, [cloned]);\n\n        if (!(parentSection instanceof QAQuestion)) {\n          var q = _this6.state.root.questions[question.id];\n          q.updateFromQuestion(question);\n        }\n\n        return {\n          root: cloned\n        };\n      }, function () {\n        if (_this6.props.onChange) _this6.props.onChange(_this6.state.root);\n      });\n    }\n  }, {\n    key: \"handleFormTreeNodeExpand\",\n    value: function handleFormTreeNodeExpand(nodeData, _nodePath, e) {\n      nodeData.isExpanded = true;\n      var item = RootSection.getFromPath(_nodePath, [this.state.root]);\n\n      if (item) {\n        this.setState(function (prevState) {\n          var expandedNodes = item ? _.union([item.id], prevState.expandedNodes) : prevState.expandedNodes;\n          return {\n            expandedNodes: expandedNodes\n          };\n        });\n      }\n    }\n  }, {\n    key: \"handleFormTreeNodeCollapse\",\n    value: function handleFormTreeNodeCollapse(nodeData) {\n      this.setState(function (prevState) {\n        var expandedNodes = prevState.expandedNodes.filter(function (item) {\n          return nodeData.id !== item;\n        });\n        return {\n          expandedNodes: expandedNodes\n        };\n      });\n    }\n  }, {\n    key: \"handleFormTreeNodeClick\",\n    value: function handleFormTreeNodeClick(nodeData, _nodePath, e) {\n      var item = RootSection.getFromPath(_nodePath, [this.state.root]);\n\n      if (item && !(item instanceof QAQuestion)) {\n        this.setState(function (prevState) {\n          var expandedNodes = item ? _.union([item.id], prevState.expandedNodes) : prevState.expandedNodes;\n          var selectedNodes = item ? [item.id] : prevState.selectedNodes;\n          return {\n            selectedNodes: selectedNodes,\n            expandedNodes: expandedNodes,\n            activeSection: item && !(item instanceof QAQuestion) ? item : prevState.activeSection,\n            activeSectionPath: _nodePath\n          };\n        });\n      } else if (item) {\n        this.setState(function (prevState) {\n          var parent = _nodePath.length > 1 ? _nodePath.slice(0, _nodePath.length - 1) : _nodePath;\n          var parentSection = RootSection.getFromPath(parent, [prevState.root]);\n          var selectedQuestion = RootSection.getFromPath(_nodePath, [prevState.root]);\n          var expandedNodes = prevState.expandedNodes;\n          var selectedNodes = selectedQuestion ? [selectedQuestion.id] : prevState.selectedNodes;\n\n          if (parentSection && !(parentSection instanceof QAQuestion)) {\n            expandedNodes = _.union([parentSection.id], expandedNodes);\n            selectedNodes.push(parentSection.id);\n          }\n\n          return {\n            expandedNodes: expandedNodes,\n            selectedNodes: selectedNodes,\n            activeSection: parentSection && !(parentSection instanceof QAQuestion) ? parentSection : prevState.activeSection,\n            activeSectionPath: parent\n          };\n        });\n      }\n    }\n  }, {\n    key: \"handleRootNameChange\",\n    value: function handleRootNameChange(newName) {\n      var _this7 = this;\n\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        cloned.name = newName;\n        return {\n          root: cloned\n        };\n      }, function () {\n        if (_this7.props.onChange) _this7.props.onChange(_this7.state.root);\n      });\n    }\n  }, {\n    key: \"handleSectionChange\",\n    value: function handleSectionChange(id, path) {\n      this.setState(function (prevState) {\n        var section = RootSection.getFromPath(path, [prevState.root]);\n        var expandedNodes = prevState.expandedNodes;\n        var selectedNodes = [];\n\n        if (section && section instanceof QuestionSection) {\n          expandedNodes = _.union([section.id], expandedNodes);\n          selectedNodes.push(section.id);\n        }\n\n        return {\n          expandedNodes: expandedNodes,\n          selectedNodes: selectedNodes,\n          activeSection: section && !(section instanceof QAQuestion) ? section : prevState.activeSection,\n          activeSectionPath: path\n        };\n      });\n    }\n  }, {\n    key: \"handleDuplicatingSettingsChange\",\n    value: function handleDuplicatingSettingsChange(id, dupe) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        cloned.sections[id].setDuplicatingSettings(dupe);\n        return {\n          root: cloned\n        };\n      });\n    }\n  }, {\n    key: \"handleSectionNameChange\",\n    value: function handleSectionNameChange(id, v) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        var item = cloned.sections[id];\n        item.name = v;\n        return {\n          root: cloned\n        };\n      });\n    }\n  }, {\n    key: \"handleMoveUp\",\n    value: function handleMoveUp(id, path) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        var newPath = _.clone(path);\n\n        if (newPath[newPath.length - 1] > 0) {\n          newPath[newPath.length - 1] = newPath[newPath.length - 1] - 1;\n        }\n\n        cloned.moveItem(path, newPath);\n        return {\n          root: cloned\n        };\n      });\n    }\n  }, {\n    key: \"handleSectionConditionChange\",\n    value: function handleSectionConditionChange(sectionId, literals) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        cloned.sections[sectionId].appearingCondition.setLiterals(literals);\n        return {\n          root: cloned\n        };\n      });\n    }\n  }, {\n    key: \"handleSectionCustomIdChange\",\n    value: function handleSectionCustomIdChange(sectionId, v) {\n      this.setState(function (prevState) {\n        var cloned = _.clone(prevState.root);\n\n        cloned.sections[sectionId].customId = v;\n        return {\n          root: cloned\n        };\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      return React.createElement(\"div\", null, React.createElement(Toaster, {\n        ref: function ref(r) {\n          return r ? _this8.toasterRef = r : null;\n        }\n      }), React.createElement(ConstantDefinitions, {\n        isOpen: false\n      }), React.createElement(Toolbar, {\n        handleItemClick: this.handleToolbarItemClick.bind(this)\n      }, React.createElement(EditableText, {\n        value: this.state.root.name,\n        onChange: this.handleRootNameChange.bind(this)\n      })), React.createElement(\"div\", {\n        style: {\n          display: \"flex\",\n          flexDirection: \"row\",\n          padding: 16\n        },\n        className: \"builder-container\"\n      }, React.createElement(\"div\", {\n        style: {\n          background: \"transparent\",\n          marginRight: 20\n        },\n        className: \"builder-sidebar\"\n      }, React.createElement(\"div\", {\n        className: \"sidebar-wrapper\"\n      }, React.createElement(FormTree, {\n        expandedNodes: this.state.expandedNodes,\n        selectedNodes: this.state.selectedNodes,\n        handleNodeExpand: this.handleFormTreeNodeExpand.bind(this),\n        handleNodeCollapse: this.handleFormTreeNodeCollapse.bind(this),\n        handleNodeClick: this.handleFormTreeNodeClick.bind(this),\n        root_: this.state.root\n      }))), React.createElement(\"div\", {\n        style: {\n          width: \"100%\"\n        },\n        className: \"\"\n      }, React.createElement(SectionC, {\n        handleSectionCustomIdChange: this.handleSectionCustomIdChange.bind(this),\n        handleSectionConditionChange: this.handleSectionConditionChange.bind(this),\n        handleMoveUp: this.handleMoveUp.bind(this),\n        constants: this.state.constants,\n        handleSectionNameChange: this.handleSectionNameChange.bind(this),\n        definedQuestions: this.state.root.questions,\n        handleSectionDuplicatingSettingsChange: this.handleDuplicatingSettingsChange.bind(this),\n        handleSectionClick: this.handleSectionChange.bind(this),\n        handleDeleteChildSectionOrQuestion: this.handleDeleteQuestionOrSection.bind(this),\n        parentPath: this.state.activeSectionPath,\n        handleQuestionChange: this.handleQuestionUpdate.bind(this),\n        section: this.state.activeSection\n      }))));\n    }\n  }]);\n\n  return SurveyForm;\n}(React.Component);","import _classCallCheck from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/c/Users/Anuj/Desktop/datapali-dashboard/packages/web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { AnswerType } from \"@datapali/dpform\";\nimport React from \"react\";\nimport Select from 'react-select';\nimport { customStyles } from \"./DPFormItem\";\nexport var ValueInput =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(ValueInput, _React$Component);\n\n  function ValueInput(props) {\n    _classCallCheck(this, ValueInput);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(ValueInput).call(this, props));\n  }\n\n  _createClass(ValueInput, [{\n    key: \"onDataChange\",\n    value: function onDataChange(data) {\n      if (this.props.onChange) {\n        this.props.onChange(data);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      var comp = null;\n      var opt_ = [];\n\n      switch (this.props.questionType) {\n        case AnswerType.Boolean:\n          opt_ = [{\n            value: true,\n            label: \"True\"\n          }, {\n            value: false,\n            label: \"False\"\n          }];\n          comp = React.createElement(Select, {\n            options: opt_,\n            value: opt_.find(function (i) {\n              return typeof _this.props.value.value === \"boolean\" && i.value === _this.props.value.value;\n            }),\n            onChange: this.props.onChange.bind(this),\n            styles: customStyles\n          });\n          break;\n\n        case AnswerType.Date:\n          comp = React.createElement(\"input\", {\n            onChange: function onChange(e) {\n              return _this.onDataChange({\n                value: e.target.value\n              });\n            },\n            className: \"form-control\",\n            type: \"date\",\n            defaultValue: this.props.value.value\n          });\n          break;\n\n        case AnswerType.Number:\n          comp = React.createElement(\"input\", {\n            onChange: function onChange(e) {\n              return _this.onDataChange({\n                value: e.target.value\n              });\n            },\n            className: \"form-control\",\n            type: \"number\",\n            defaultValue: this.props.value.value\n          });\n          break;\n\n        case AnswerType.Select:\n          comp = React.createElement(Select, {\n            styles: customStyles,\n            onChange: this.onDataChange.bind(this),\n            options: this.props.options,\n            value: this.props.options && this.props.options.find(function (item) {\n              return item.value === _this.props.value;\n            })\n          });\n          break;\n\n        case AnswerType.String:\n          comp = React.createElement(\"input\", {\n            onChange: function onChange(e) {\n              return _this.onDataChange({\n                value: e.target.value\n              });\n            },\n            className: \"form-control\",\n            type: \"text\",\n            defaultValue: this.props.value.value\n          });\n          break;\n\n        case AnswerType.Time:\n          comp = React.createElement(\"input\", {\n            onChange: function onChange(e) {\n              return _this.onDataChange({\n                value: e.target.value\n              });\n            },\n            className: \"form-control\",\n            type: \"time\",\n            defaultValue: this.props.value.value\n          });\n          break;\n\n        default:\n          comp = React.createElement(\"input\", {\n            onChange: function onChange(e) {\n              return _this.onDataChange({\n                value: e.target.value\n              });\n            },\n            className: \"form-control\",\n            type: \"text\",\n            disabled: true\n          });\n          break;\n      }\n\n      return comp;\n    }\n  }]);\n\n  return ValueInput;\n}(React.Component);","import { ApolloConsumer, useMutation, useQuery } from \"@apollo/react-hooks\";\r\nimport { RootSection } from \"@datapali/dpform\";\r\nimport { SurveyForm } from \"@datapali/formbuilder\";\r\nimport { Button, Empty, message, Row, Spin } from \"antd\";\r\nimport { ApolloClient } from \"apollo-boost\";\r\nimport gql from \"graphql-tag\";\r\nimport React, { useState } from \"react\";\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\n\r\nexport const GET_FORM = gql`\r\n    query GetForm($formId:[String!]){\r\n        forms(id: $formId){\r\n          id\r\n          name\r\n          content\r\n        }\r\n      } \r\n`;\r\n\r\nexport const Save_Form = gql`\r\n    mutation SaveForm($saveFile: FormFileInput!){\r\n        saveForm(form: $saveFile){\r\n          id\r\n        }\r\n      }`;\r\n\r\n\r\nexport function FormBuilder() {\r\n    const params = new URLSearchParams(useLocation().search);\r\n    const [saveForm, { data: saveFormResult }] = useMutation(Save_Form);\r\n    const [isSaving, setSaving] = useState(false);\r\n    const history = useHistory();\r\n    //save handler\r\n    const onSave = async (root: RootSection) => {\r\n        if (!isSaving) {\r\n            const file = RootSection.toJSON(root);\r\n            file.content = JSON.stringify(file.content);\r\n            setSaving(true);\r\n            const { data, errors } = await saveForm({ variables: { saveFile: file } });\r\n            if (errors) message.error(\"Form could not be saved\");\r\n            else message.success(\"Form has been saved\");\r\n            setSaving(false);\r\n        }\r\n    }\r\n    const formId = params.get(\"id\");\r\n    //get form query execute\r\n    const { data, loading, error } = useQuery(GET_FORM, {\r\n        variables: {\r\n            formId: [formId]\r\n        }\r\n    });\r\n\r\n    const render = (client: ApolloClient<any>) => {\r\n\r\n        if (!loading && (error || !data)) {\r\n            return (\r\n                <Empty\r\n                    image={Empty.PRESENTED_IMAGE_DEFAULT}\r\n                    description={\"Please create a new Form by going back to Home\"}\r\n                >\r\n                    <Button icon=\"home\" onClick={() => history.replace(\"/forms\")}> Home</Button>\r\n\r\n                </Empty>\r\n            )\r\n        }\r\n        if (loading) return <Row style={{ marginTop: 60 }}></Row>;\r\n        let root: RootSection;\r\n        if (data.forms.length === 0) {\r\n            message.success(\"Started a new form!\");\r\n            root = new RootSection();\r\n        } else {\r\n            const form = data.forms[0];\r\n            form.content = typeof (form.content) === \"string\" ? JSON.parse(form.content) : form.content\r\n            root = RootSection.fromJSON(form);\r\n        }\r\n\r\n        return <SurveyForm token={\"\"} onChange={() => { }} onSave={onSave} root={root} />\r\n    }\r\n    return (\r\n        <ApolloConsumer>\r\n            {client => <Spin spinning={loading}>{render(client)}</Spin>}\r\n        </ApolloConsumer>\r\n    )\r\n}","import { ANSWER_TYPES, getReadablePath, IValueType } from \"@datapali/dpform\"\r\nimport { DatePicker, Form, Input, Radio } from \"antd\"\r\nimport React from \"react\"\r\nimport { WrappedFieldInputProps, WrappedFieldMetaProps, WrappedFieldProps } from \"redux-form\"\r\nimport { IDependency } from \"../../helper\"\r\nimport { IQuestionRenderProps } from \"./questionNode.container\"\r\n\r\n\r\n\r\n\r\nfunction QuestionItem(props: { question: IQuestionRenderProps, path: number[], fieldProps: WrappedFieldProps }) {\r\n    switch (props.question.type.name) {\r\n        case ANSWER_TYPES.NUMBER:\r\n            return <Input key={'form-input' + props.fieldProps.input.name} value={props.fieldProps.input.value} onChange={props.fieldProps.input.onChange} type=\"number\" />\r\n\r\n        case ANSWER_TYPES.STRING:\r\n            return <Input key={'form-input' + props.fieldProps.input.name} value={props.fieldProps.input.value} onChange={props.fieldProps.input.onChange} type=\"text\" />\r\n\r\n        case ANSWER_TYPES.GEOLOCATION:\r\n            return <Input key={'form-input' + props.fieldProps.input.name} value={props.fieldProps.input.value} onChange={props.fieldProps.input.onChange} type=\"number\" />\r\n\r\n        case ANSWER_TYPES.DATE:\r\n            return <DatePicker key={'form-input' + props.fieldProps.input.name} {...props.fieldProps.input} />\r\n\r\n\r\n        case ANSWER_TYPES.SELECT:\r\n            return <SelectInput value={props.fieldProps.input.value} key={'form-input' + props.fieldProps.input.name} options={props.question.options} onChange={props.fieldProps.input.onChange} />\r\n    }\r\n}\r\ntype SelectInputProps = {\r\n    options: { text: string, id: string }[],\r\n    onChange: any;\r\n    value: string;\r\n};\r\nconst radioStyle = {\r\n    display: 'block',\r\n    height: '30px',\r\n    lineHeight: '30px',\r\n};\r\nfunction SelectInput(props: SelectInputProps) {\r\n    return (\r\n        <Radio.Group value={props.value} onChange={props.onChange}>\r\n            {props.options.map(item => {\r\n                return (\r\n                    <Radio style={radioStyle} key={item.id} value={item.id}>{item.text}</Radio>\r\n                )\r\n            })}\r\n        </Radio.Group>\r\n    )\r\n}\r\n\r\ninterface SprayedFieldProps {\r\n    isRequired: boolean;\r\n    autoCompleteData: { strength: number, text: string }[],\r\n    options: { id: string, text: string }[],\r\n    type: IValueType,\r\n    dependencies: IDependency,\r\n    title: string,\r\n    path: number[]\r\n}\r\n\r\n\r\nexport type FieldProps = {\r\n    input: WrappedFieldInputProps;\r\n    meta: WrappedFieldMetaProps;\r\n} & SprayedFieldProps;\r\nexport const renderQuestion = (fieldProps: FieldProps) => {\r\n    const { input, meta, ...custom } = fieldProps;\r\n    const title = <div>\r\n        <strong>{getReadablePath(custom.path)} {custom.title}</strong>\r\n    </div>\r\n    return <Form.Item key={'form-item' + fieldProps.input.name}>\r\n        {title}\r\n        <QuestionItem key={'form-question' + fieldProps.input.name} question={custom} path={custom.path} fieldProps={fieldProps} />\r\n    </Form.Item>;\r\n\r\n}","import { Button, Tooltip } from \"antd\";\r\nimport { ButtonProps, ButtonShape, ButtonType } from \"antd/lib/button\";\r\nimport React from \"react\";\r\ntype FABProps = {\r\n    className?: string;\r\n    type?: ButtonType;\r\n    shape?: ButtonShape;\r\n    icon: string;\r\n    title?: string;\r\n    onClick?: (e: React.MouseEvent) => void;\r\n} & ButtonProps;\r\nexport function FAB(props: FABProps) {\r\n    return (\r\n        <Tooltip placement=\"top\" title={props.title}>\r\n            <Button onClick={props.onClick} className={`float ${props.className}`} type={props.type} shape={props.shape} icon={props.icon} />\r\n        </Tooltip>\r\n\r\n    )\r\n}","import { ANSWER_TYPES, ILiteral, IValueType, QAComparisonOperator, QACondition, QAFollowingOperator, QAQuestion, QuestionSection } from \"@datapali/dpform\";\r\n\r\nexport type IDependency = {\r\n    all: any[],\r\n    autoFillConditions: string[],\r\n    groupConditions: string[],\r\n    rootOptionConditions: string[],\r\n    duplicationRef: string,\r\n}\r\nexport class Helper {\r\n\r\n    static checkIfQuestionHasCondition(question: QAQuestion | any) {\r\n        if (question.appearingCondition.literals.length > 0) return true;\r\n        let options = question.options && question.options.SortedOptions;\r\n        let { groups, rootOptions } = options;\r\n        let found = groups.find(item => item.appearingCondition.literals.length > 0);\r\n        if (found) return true;\r\n        if (rootOptions.find(item => item.appearingCondition.literals.length > 0)) return true;\r\n        return false;\r\n    }\r\n\r\n\r\n\r\n    static makeTree(root: any, tree: any = {}) {\r\n        tree[root.id] = { ...root, childNodes: [], _type: root instanceof QuestionSection ? 'section' : 'root' };\r\n        tree[root.id].childNodes = [];\r\n        for (let i = 0; i < tree[root.id].content.length; i++) {\r\n            let item = tree[root.id].content[i];\r\n            if (item.hasOwnProperty('content')) {\r\n                Helper.makeTree(item, tree);\r\n                tree[root.id].childNodes.push(item.id);\r\n            } else {\r\n                tree[item.id] = { ...item, _type: 'question' }\r\n                tree[root.id].childNodes.push(item.id);\r\n            }\r\n        }\r\n        delete tree[root.id].content;\r\n        return tree;\r\n    }\r\n\r\n    static transformValueToType(type: IValueType, value: string) {\r\n        switch (type.name) {\r\n            case ANSWER_TYPES.BOOLEAN:\r\n                return Boolean(value);\r\n            case ANSWER_TYPES.DATE:\r\n                return new Date(value);\r\n            case ANSWER_TYPES.NUMBER:\r\n                return parseFloat(value);\r\n            case ANSWER_TYPES.STRING:\r\n                return value;\r\n            case ANSWER_TYPES.TIME:\r\n                return new Date(value);\r\n        }\r\n        return value;\r\n    }\r\n\r\n    static isLiteralValid = (item: ILiteral, answerStore: { [key: string]: string }, questionStore: { [key: string]: QAQuestion | any }) => {\r\n        let result = true;\r\n        const answer = answerStore[item.questionRef];\r\n        const question = questionStore[item.questionRef]\r\n        if (!question) throw new Error('No question was provided');\r\n        let c2 = Helper.transformValueToType(question.answerType, item.comparisonValue.content);\r\n        let c1 = Helper.transformValueToType(question.answerType, answer);\r\n\r\n        switch (item.comparisonOperator) {\r\n            case QAComparisonOperator.Equal:\r\n                result = c1 === c2;\r\n                break;\r\n            case QAComparisonOperator.Greater_Than:\r\n                result = c1 > c2;\r\n                break;\r\n            case QAComparisonOperator.Greater_Than_Or_Equal:\r\n                result = c1 >= c2;\r\n                break;\r\n            case QAComparisonOperator.Less_Than:\r\n                result = c1 < c2;\r\n                break;\r\n            case QAComparisonOperator.Less_Than_Or_Equal:\r\n                result = c1 >= c2;\r\n                break;\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    static evaluateCondition(condition: QACondition, answerStore: { [key: string]: string }, questionStore: { [key: string]: QAQuestion | any }) {\r\n        let finalResult = true;\r\n        let pendingOperator = null;\r\n        if (!condition) return finalResult;\r\n        condition.literals && condition.literals.forEach(literal => {\r\n\r\n            let currentResult = Helper.isLiteralValid(literal, answerStore, questionStore);\r\n            if (!pendingOperator) {\r\n                finalResult = currentResult;\r\n                pendingOperator = literal.followingOperator\r\n            }\r\n            else if (pendingOperator) {\r\n                switch (pendingOperator) {\r\n                    case QAFollowingOperator.AND:\r\n                        finalResult = finalResult && currentResult;\r\n                        break;\r\n                    case QAFollowingOperator.OR:\r\n                        finalResult = finalResult || currentResult;\r\n                        break;\r\n                }\r\n            }\r\n\r\n        });\r\n        return finalResult;\r\n    }\r\n\r\n    static findValue(values, ref) {\r\n        if (!values) return undefined;\r\n        let keys = Object.keys(values);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let curr = values[key];\r\n            if (Array.isArray(curr)) {\r\n                let val = Helper.findValue(curr[curr.length - 1], ref);\r\n                if (val) return val;\r\n            } else {\r\n                if (key === ref) {\r\n                    return curr;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    static getProgress(counts) {\r\n        let filled = 0;\r\n        let required = 0;\r\n        Object.keys(counts).forEach((key) => {\r\n            const c = counts[key];\r\n            filled += c.filled;\r\n            required += c.required;\r\n        })\r\n        return filled / required;\r\n    }\r\n    static getDupeTimes(settings, values) {\r\n        if (!settings) return -1;\r\n        if (!settings.isEnabled) return -1;\r\n        else {\r\n            let times = settings.duplicateTimes;\r\n\r\n            if (times.type === 'number') {\r\n                return parseInt(times.value);\r\n            }\r\n            else {\r\n                let ref = times.value;\r\n\r\n                let value = Helper.findValue(values, ref);\r\n                if (value) {\r\n                    return parseInt(value)\r\n                } else {\r\n                    return 0;\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n    static collectDependencies(item: QuestionSection | QAQuestion): IDependency {\r\n        let apConditionRef: string[] = [];\r\n        let groupConditionRefs: string[] = [];\r\n        let rootOptionConditionRefs: string[] = [];\r\n        let autoFillConditionRefs: string[] = [];\r\n        let duplicationRef: string = null;\r\n        //@ts-ignore\r\n        if (item instanceof QAQuestion || item._type === 'question') {\r\n            const hasAppearingCondition = item && item.appearingCondition && item.appearingCondition.literals;\r\n            apConditionRef = hasAppearingCondition ? item.appearingCondition.literals.map(lit => lit.questionRef) : undefined;\r\n            //@ts-ignore\r\n            item.autoAnswer.answeringConditions.forEach(ac => ac.condition.literals.forEach(item => autoFillConditionRefs.push(item.questionRef)));\r\n            //@ts-ignore\r\n\r\n            const rootOptions = Object.values(item.options.optionsMap).filter(item => !item.groupName);\r\n            //@ts-ignore\r\n\r\n            const groups = Object.values(item.options.optionGroupMap);\r\n            //@ts-ignore\r\n\r\n            groups.forEach(group => group.appearingCondition && group.appearingCondition.literals.forEach(lit => groupConditionRefs.push(lit.questionRef)));\r\n            //@ts-ignore\r\n\r\n            rootOptions.forEach(opt => opt.appearingCondition && opt.appearingCondition.literals.forEach(lit => rootOptionConditionRefs.push(lit.questionRef)));\r\n        }\r\n        //@ts-ignore\r\n        else if (item instanceof QuestionSection || item._type === 'section') {\r\n            const hasAppearingCondition = item && item.appearingCondition && item.appearingCondition.literals;\r\n            apConditionRef = hasAppearingCondition ? item.appearingCondition.literals.map(lit => lit.questionRef) : undefined;\r\n            duplicationRef = item.duplicatingSettings.isEnabled && item.duplicatingSettings.duplicateTimes.type === 'questionRef' ? item.duplicatingSettings.duplicateTimes.value : null;\r\n        }\r\n        let ns = new Set([].concat(apConditionRef, groupConditionRefs, rootOptionConditionRefs, duplicationRef ? [duplicationRef] : []));\r\n        return {\r\n            all: Array.from(ns),\r\n            autoFillConditions: Array.from(new Set(apConditionRef)),\r\n            groupConditions: Array.from(new Set(groupConditionRefs)),\r\n            rootOptionConditions: Array.from(new Set(rootOptionConditionRefs)),\r\n            duplicationRef: duplicationRef\r\n        };\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n\r\n","import { IAppState } from \"packages/web/src/types\";\r\n\r\nexport const $getRootForm = (state, props) => state.rootForms;\r\nexport const $getRootFormId = (state: IAppState, props) => props.rootId;\r\nexport const $getQuestionId = (state, props) => props.questionId || props.id;\r\nexport const $getFilledForms = (state: IAppState, props) => state.filledForms;\r\nexport const $getFilledFormId = (state, props) => props.formId;\r\nexport const $getPathForQuestion = (state, props) => props.path;\r\nexport const $getProps = (state, props) => props;\r\nexport const $getState = (state: IAppState, props) => state;\r\nexport const $getSectionId = (state, props) => props.sectionId;\r\nexport const $getValueLocationName = (state, props) => props.valueLocationName || props.locationName;\r\nexport const $getFormId = (state: IAppState, props: any, formId: string): string => props.formId || formId;\r\nexport const $getNodeId = (state: IAppState, props: any, id: string) => id || props.id || props.sectionId || props.questionId;\r\n\r\n","import { createSelector } from 'reselect';\r\nimport { $getFilledForms, $getFormId } from './shared';\r\n\r\n\r\n\r\nexport const getFilledFormById = createSelector([$getFilledForms, $getFormId],\r\n  (filledForms, formId) => filledForms.byId[formId]);\r\n\r\n\r\n","import _ from 'lodash';\r\nimport createCachedSelector from 're-reselect';\r\nimport { getFormValues } from 'redux-form';\r\nimport { createSelector } from 'reselect';\r\nimport { Helper } from '../../../helper';\r\nimport { $getFilledFormId, $getFilledForms, $getQuestionId, $getRootForm, $getRootFormId, $getSectionId, $getState, $getValueLocationName } from './shared';\r\nexport const required = value => value ? undefined : 'Required field.'\r\n\r\nexport type AutoCompleteItem = {\r\n    strength: number;\r\n    text: string;\r\n}\r\nexport const getRootFormById = createSelector([$getRootForm, $getRootFormId],\r\n    (rootForms, rootId) => {\r\n        return rootForms.byId[rootId]\r\n    }\r\n);\r\nexport const getRootFormQuestions = createSelector([getRootFormById],\r\n    root => root.questions);\r\n\r\nexport const getRootFormSection = createSelector([getRootFormById],\r\n    (root) => root.sections);\r\nexport const getRootFormSectionById = createSelector([getRootFormSection, $getSectionId], (sections, sectionId) => sections[sectionId]);\r\nexport const getDuplicatingSettingsForSection = createSelector([getRootFormSectionById],\r\n    (section) => section.duplicatingSetings);\r\n\r\n\r\nexport const getAllFilledFormIdsOfRootForm = createCachedSelector([$getRootFormId, $getFilledForms], (rid, filledForms) => {\r\n    let bag = [];\r\n    Object.values(filledForms.byId).forEach((item: any) => {\r\n        if (item.formId === rid) {\r\n            bag.push(item.id);\r\n        }\r\n    })\r\n    return bag;\r\n})(\r\n    (state, props) => props.rootId\r\n);\r\n\r\nexport const getFilledFormValues = createSelector([$getFilledFormId, $getState], (fid, state) => {\r\n    return getFormValues(fid)(state);\r\n});\r\nexport const getQuestionById = createSelector([getRootFormById, $getQuestionId],\r\n    (root: any, questionId: string) => root[questionId]);\r\n\r\nexport const getQuestionOptions = createSelector([getQuestionById], (question) => question.options);\r\n\r\nexport const getSortedOptions = createSelector([getQuestionOptions],\r\n    (options) => {\r\n        return {\r\n            rootOptions: Object.values(options.optionsMap).filter((item: any) => !item.groupName),\r\n            groups: Object.values(options.optionGroupMap),\r\n        }\r\n    });\r\n\r\nexport const getDependenciesOfOptions = createSelector([getSortedOptions], (options => {\r\n    const { groups, rootOptions } = options;\r\n    let dependencies: string[] = [];\r\n    groups.forEach((item: any) => {\r\n        dependencies = dependencies.concat(item.appearingCondition ? item.appearingCondition.literals.map(item => item.questionRef) : []);\r\n    });\r\n    rootOptions.forEach((item: any) => {\r\n        dependencies = dependencies.concat(item.appearingCondition ? item.appearingCondition.literals.map(item => item.questionRef) : []);\r\n    });\r\n\r\n    return Array.from(new Set(dependencies));\r\n}));\r\nexport const getValuesOfDependencies = createSelector([$getValueLocationName, getDependenciesOfOptions, getFilledFormValues], (location, deps, vals) => {\r\n    //for each deps , find the value that is closest to the path that it is asking from.\r\n    let depValues = {};\r\n    if (!vals) return depValues;\r\n    let locationToPath = _.toPath(location);\r\n    const checkForValue = (values, path, find) => {\r\n        if (path.length === 0) return undefined;\r\n        let newPath = path.slice(0);\r\n        newPath.splice(path.length - 1, 1, find);\r\n        let val = _.get(values, newPath);\r\n        if (val) {\r\n            return val;\r\n        }\r\n        newPath.splice(newPath.length - 1, 1);\r\n        return checkForValue(values, newPath, find);\r\n    }\r\n    deps.forEach(dep => {\r\n        let foundValue = checkForValue(vals, locationToPath, dep);\r\n        if (foundValue) {\r\n            depValues[dep] = foundValue;\r\n        }\r\n    });\r\n    return depValues;\r\n\r\n})\r\n\r\n\r\nexport const getQuestionTitle = createSelector([getQuestionById],\r\n    (question) => question.questionContent.content);\r\n\r\nexport const getQuestionType = createSelector([getQuestionById],\r\n    (question) => question.answerType);\r\n\r\n\r\n\r\n\r\n\r\nexport const getValidOptions = createSelector([getSortedOptions, getValuesOfDependencies, getRootFormById],\r\n    (options, vals, questions) => {\r\n        const { groups, rootOptions } = options;\r\n        let g = groups.filter((item: any) => Helper.evaluateCondition(item.appearingCondition, vals, questions));\r\n        let o = rootOptions.filter((item: any) => Helper.evaluateCondition(item.appearingCondition, vals, questions));\r\n        return {\r\n            groups: g,\r\n            rootOptions: o\r\n        }\r\n    });\r\n\r\n\r\nexport const getTransformedValidOptions = createSelector(getValidOptions, options => {\r\n    const { groups, rootOptions } = options;\r\n    let allOptions: { id: string, text: string }[] = [];\r\n    groups.forEach((item: any) => {\r\n        return item.members.forEach(option => {\r\n            allOptions.push({ id: option.id, text: option.value });\r\n        });\r\n    });\r\n    rootOptions.forEach((option: any) => {\r\n        allOptions.push({ id: option.id, text: option.value });\r\n    });\r\n    return allOptions;\r\n});\r\n\r\nexport const getAutoCompleteDataForQuestion = createCachedSelector([$getValueLocationName, $getState, getAllFilledFormIdsOfRootForm], (location, state, fids) => {\r\n    const values = [];\r\n    fids.forEach(f => {\r\n        values.push(getFormValues(f)(state))\r\n    });\r\n    let path = _.toPath(location);\r\n    let result: { [key: string]: AutoCompleteItem } = {};\r\n    values.forEach(v => {\r\n        let res = _.get(v, path);\r\n        if (res) {\r\n            res = res.trim();\r\n            if (!result[res]) result[res] = { text: res, strength: 1 }\r\n            else result[res].strength++;\r\n        }\r\n\r\n    });\r\n    return Object.values(result).sort((a, b) => b.strength - a.strength);\r\n})(\r\n    (state, props) => props.locationName\r\n)\r\n\r\nexport const getQuestionValidators = createSelector(getQuestionById, (question) => {\r\n    const validators = [];\r\n    if (question.isRequired) validators.push((required));\r\n    return validators;\r\n})\r\n\r\n","import { IDupeSettings } from \"@datapali/dpform\";\r\nimport _ from \"lodash\";\r\nimport { IFilledForm } from \"packages/web/src/types\";\r\nimport { getFormValues } from \"redux-form\";\r\nimport { createSelector } from \"reselect\";\r\nimport { Helper } from \"../../../helper\";\r\nimport { getFilledFormById } from \"./filledFormSelectors\";\r\nimport { getFilledFormValues } from \"./questionSelector\";\r\nimport { $getFilledForms, $getNodeId, $getRootForm, $getRootFormId, $getState, $getValueLocationName, $getProps } from \"./shared\";\r\n\r\nexport const getRootFormOfFilledForm = createSelector([getFilledFormById, $getRootForm], (filledForm: IFilledForm, rootForms) => {\r\n    const rootId = filledForm.formId;\r\n    return rootForms.byId[rootId];\r\n});\r\n\r\nexport const getNodeOfRootForm = createSelector([getRootFormOfFilledForm, $getNodeId], (root, nodeId) => {\r\n    return root[nodeId]\r\n});\r\nexport const getNodeTypeFromId = createSelector([getNodeOfRootForm], (node) => node._type);\r\n\r\nexport const getSectionNameFromId = createSelector([getNodeOfRootForm], (node) => node.name);\r\nexport const getChildrenOfSectionFromId = createSelector([getNodeOfRootForm], (node) => node.childNodes);\r\n\r\nexport const getRootNodeOfFilledFormById = createSelector([getFilledFormById, getRootFormOfFilledForm], (ff, rootForm) => {\r\n    const rootId = ff.formId;\r\n    return rootForm[rootId];\r\n});\r\nexport const getRootNodeChildren = createSelector([getRootNodeOfFilledFormById], (rootNode) => rootNode.childNodes)\r\n\r\nexport const getDupeSettingsForSectionNode = createSelector([getNodeOfRootForm], (node) => {\r\n    return node.duplicatingSettings;\r\n});\r\n\r\nexport const getDupeTimesForSectionNode = createSelector([getDupeSettingsForSectionNode, $getValueLocationName, getFilledFormValues], (settings: IDupeSettings, location: string, values: any) => {\r\n    \r\n    if (!settings || !settings.isEnabled) return -1;\r\n    else {\r\n        let times = settings.duplicateTimes;\r\n\r\n        if (times.type === 'number') {\r\n            return parseInt(times.value);\r\n        }\r\n        else {\r\n            let ref = times.value;\r\n\r\n            let value = findValue(values, ref);\r\n            if (value) {\r\n                return parseInt(value)\r\n            } else {\r\n                return 0;\r\n            }\r\n\r\n        }\r\n    }\r\n})\r\nexport const getValidQuestionsNumber = createSelector([getRootFormOfFilledForm, getFilledFormValues, $getRootFormId], (root, values, rid) => {\r\n    const count = {}\r\n    checkSection(root[rid], values, root, \"\", count, true);\r\n    return count;\r\n});\r\n\r\n\r\n\r\n\r\nexport const getFilledFormsTransformedData = createSelector([$getFilledForms, $getState, $getRootForm],\r\n    (filledForms, state, rootForms) => {\r\n        return Object.keys(filledForms.byId).map(item => {\r\n            const rootId = filledForms.byId[item].formId;\r\n            const values = getFormValues(item)(state);\r\n            const formName = rootForms.byId[rootId].name;\r\n            return {\r\n                formId: item,\r\n                rootId: rootId,\r\n                startedDate: filledForms.byId[item].startedDate,\r\n                count: getValidQuestionsNumber(state, { formId: item, rootId: rootId }),\r\n                submitted: filledForms.byId[item].submitted,\r\n                values: values,\r\n                formName: formName || \"Main Form\",\r\n            }\r\n        })\r\n    })\r\n\r\n\r\nfunction findValue(values, ref) {\r\n    if (!values) return undefined;\r\n    let keys = Object.keys(values);\r\n    for (let i = 0; i < keys.length; i++) {\r\n        let key = keys[i];\r\n        let curr = values[key];\r\n        if (Array.isArray(curr)) {\r\n            let val = findValue(curr[curr.length - 1], ref);\r\n            if (val) return val;\r\n        } else {\r\n            if (key === ref) {\r\n                return curr;\r\n            }\r\n        }\r\n    }\r\n    return undefined;\r\n}\r\n\r\nfunction checkSection(section, values, root, sectionLocation, counts: any = {}, isRoot: boolean = false) {\r\n    const appears = section.appearingCondition ? Helper.evaluateCondition(section.appearingCondition, values, root) : true;\r\n    if (!counts[section.id]) counts[section.id] = { filled: 0, required: 0, unfilled: [], dupe: -1 }\r\n    if (appears) {\r\n        const dupe = Helper.getDupeTimes(section.duplicatingSettings, values);\r\n        const dupeTimes = dupe === -1 ? 1 : dupe;\r\n        counts[section.id].dupe = dupe;\r\n        for (let i = 0; i < dupeTimes; i++) {\r\n            section.childNodes.forEach((item, index) => {\r\n                let location = isRoot ? [item] : _.toPath(sectionLocation).concat(i.toString(), item);\r\n                if (root[item]._type === \"question\") {\r\n                    const isRequired = !!root[item].isRequired;\r\n                    if (isRequired) {\r\n                        let isFilled = !!_.get(values, location);\r\n                        if (isFilled) counts[section.id].filled++;\r\n                        else {\r\n                            counts[section.id].unfilled.push(location);\r\n                        }\r\n                        counts[section.id].required++;\r\n                    }\r\n                } else {\r\n                    checkSection(root[item], values, root, location, counts)\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\nexport const getTypeChecker = createSelector([$getState, $getProps], ( state, props)=>{\r\n\r\n    return function(id:string){\r\n        return getNodeTypeFromId(state, props, id);\r\n    }\r\n})","import { ANSWER_TYPES, IValueType } from \"@datapali/dpform\";\r\nimport { connect } from \"react-redux\";\r\nimport { Helper, IDependency } from \"../../helper\";\r\nimport { IAppState } from \"../../types\";\r\nimport { QuestionNode } from \"./questionNode.component\";\r\nimport { getNodeOfRootForm } from \"./selectors/nodeSelector\";\r\nimport { getAutoCompleteDataForQuestion, getTransformedValidOptions } from \"./selectors/questionSelector\";\r\n\r\nexport interface IQuestionRenderProps {\r\n    isRequired?: boolean,\r\n    autoCompleteData?: { strength: number, text: string }[],\r\n    dependencies?: IDependency,\r\n    title?: string,\r\n    type?: IValueType,\r\n    options?: { id: string, text: string }[],\r\n    path: number[];\r\n}\r\n\r\nconst mapStateToProps = (state: IAppState, props: any) => {\r\n    const all = getNodeOfRootForm(state, props);\r\n    const type = all.answerType;\r\n    const title = all.questionContent.content;\r\n    const deps = Helper.collectDependencies(all);\r\n    return {\r\n        isRequired: all.isRequired,\r\n        autoCompleteData: getAutoCompleteDataForQuestion(state, props),\r\n        isDependent: deps.all.length > 0,\r\n        dependencies: deps,\r\n        title: title,\r\n        type: type,\r\n        options: type.name === ANSWER_TYPES.SELECT ? getTransformedValidOptions(state, props) : [],\r\n\r\n    }\r\n\r\n}\r\n\r\nexport const ConnectedQuestionNode = connect(mapStateToProps, null)(QuestionNode);","import React, { useContext } from \"react\";\r\nimport { Field } from \"redux-form\";\r\nimport { FormRenderContext } from \"./formviewer.component\";\r\nimport { IQuestionRenderProps } from \"./questionNode.container\";\r\nimport { IQuestion } from \"./types\";\r\n\r\n\r\ntype QuestionNodeProps = {\r\n    locationName: string;\r\n    path: number[];\r\n    question?: IQuestion;\r\n    id: string;\r\n\r\n} & IQuestionRenderProps;\r\n\r\n\r\nexport function QuestionNode(props: QuestionNodeProps) {\r\n    const renderContext = useContext(FormRenderContext);\r\n\r\n    const { isRequired, autoCompleteData, options, type, dependencies, title, path } = props;\r\n    return (\r\n        <Field\r\n            key={'field' + props.locationName}\r\n            name={props.locationName}\r\n            props={{\r\n                isRequired,\r\n                autoCompleteData,\r\n                options,\r\n                type,\r\n                dependencies,\r\n                title,\r\n                path\r\n\r\n            }}\r\n\r\n            component={renderContext.renderQuestion}\r\n        />\r\n    )\r\n}\r\n\r\n","import { Card, Empty, Tabs } from \"antd\";\r\nimport React, { useContext } from \"react\";\r\nimport { FormRenderContext } from \"./formviewer.component\";\r\nimport { ConnectedQuestionNode } from \"./questionNode.container\";\r\nimport { ConnectedSectionNode } from \"./sectionNode.container\";\r\n\r\ntype ChildProps = {\r\n    typeChecker: (id: string) => \"section\" | \"root\" | \"question\",\r\n    path: number[],\r\n    locationName: string,\r\n    id: string,\r\n    index: number,\r\n    iteration: number,\r\n    hideIterationInPath: boolean,\r\n    formId: string,\r\n    rootId: string,\r\n    isInRootNode: boolean;\r\n}\r\n\r\nconst getChild = (props: ChildProps) => {\r\n    const { formId, rootId, typeChecker, path, locationName, id, index, iteration, hideIterationInPath, isInRootNode } = props;\r\n    const newPath = hideIterationInPath ? path.concat(index) : path.concat(iteration, index);\r\n    const newLocation = isInRootNode ? id : locationName.concat(`[${iteration}].${id}`);\r\n    if (typeChecker(id) === \"section\") {\r\n        return (\r\n            <ConnectedSectionNode formId={formId} rootId={rootId} key={newLocation} id={id} path={newPath} locationName={newLocation} />\r\n        )\r\n    } else {\r\n        return (\r\n            <ConnectedQuestionNode key={newLocation} formId={formId} rootId={rootId} id={id} path={newPath} locationName={newLocation} />\r\n        )\r\n    }\r\n}\r\n\r\nconst getChildren = (formId: string, rootId: string, typeChecker: (id: string) => \"section\" | \"root\" | \"question\", path: number[], locationName: string, childNodes: string[], iteration: number, hideIterationInPath: boolean = true, isInRootNode: boolean = false) => {\r\n    return childNodes.map((id, index) => getChild({ formId, rootId, typeChecker, path, locationName, id, index, iteration, hideIterationInPath, isInRootNode }));\r\n}\r\n\r\nconst getTabbedView = (formId: string, rootId: string, typeChecker: (id: string) => \"section\" | \"root\" | \"question\", duplicateTimes: number, childNodes: string[], path: number[], locationName: string, isInRootNode: boolean = false) => {\r\n    return <Tabs  defaultActiveKey={\"0\"} tabPosition=\"top\">\r\n        {[...Array(duplicateTimes).keys()].map(i => (\r\n            <Tabs.TabPane  tab={`Record-${i}`} key={i.toString()}>\r\n                <div style={{ maxHeight: 580, overflow: \"auto\" }}>\r\n                    {getChildren(formId, rootId, typeChecker, path, locationName, childNodes, i, false, isInRootNode)}\r\n                </div>\r\n            </Tabs.TabPane>\r\n        ))}\r\n    </Tabs>\r\n}\r\n\r\ntype SectionNodeProps = {\r\n    id: string;\r\n    formId: string;\r\n    rootId: string;\r\n    childNodes?: string[];\r\n    name?: string;\r\n    locationName: string;\r\n    duplicateTimes?: number;\r\n    path: number[];\r\n    isRootNode?: boolean;\r\n    typeChecker?: (id: string) => \"section\" | \"root\" | \"question\";\r\n}\r\nexport function SectionNode(props: SectionNodeProps) {\r\n    const renderContext = useContext(FormRenderContext);\r\n    const decisiveRender = (duplicateTimes: number) => {\r\n        if (duplicateTimes !== -1) {\r\n            return duplicateTimes === 0 ? <NotRequiredSectionPage key={'nr' + props.locationName} /> : getTabbedView(props.formId, props.rootId, props.typeChecker, duplicateTimes, props.childNodes, props.path, props.locationName, props.id === props.formId);\r\n        }\r\n        return getChildren(\r\n            props.formId,\r\n            props.rootId,\r\n            props.typeChecker,\r\n            props.path,\r\n            props.locationName,\r\n            props.childNodes,\r\n            0,\r\n            true,\r\n            props.rootId === props.id\r\n        );\r\n    }\r\n    return (\r\n        <Card style={{ marginTop: 16 }}>\r\n            {renderContext.renderSectionHeader(props.name, props.path, props.rootId === props.id ? \"root\" : \"section\")}\r\n            {decisiveRender(props.duplicateTimes)}\r\n        </Card>\r\n    )\r\n}\r\nfunction NotRequiredSectionPage() {\r\n    return (\r\n        <Empty image={Empty.PRESENTED_IMAGE_SIMPLE} description={\"Not Required to Fill\"} >\r\n        </Empty>\r\n    )\r\n}","import { connect } from \"react-redux\";\r\nimport { IAppState } from \"../../types\";\r\nimport { SectionNode } from \"./sectionNode.component\";\r\nimport { getChildrenOfSectionFromId, getDupeTimesForSectionNode, getNodeOfRootForm, getTypeChecker } from \"./selectors/nodeSelector\";\r\n\r\nconst mapStateToProps = (state: IAppState, props: any) => {\r\n    const dupe = getDupeTimesForSectionNode(state, props);\r\n    const node = getNodeOfRootForm(state, props, props.id);\r\n    return {\r\n        childNodes: getChildrenOfSectionFromId(state, props),\r\n        name: node.name,\r\n        duplicateTimes: dupe,\r\n        typeChecker: getTypeChecker(state, props),\r\n\r\n    }\r\n}\r\n\r\nexport const ConnectedSectionNode = connect(mapStateToProps, null)(SectionNode);","import { ApolloConsumer } from \"@apollo/react-hooks\";\r\nimport { QuestionSection, RootSection } from \"@datapali/dpform\";\r\nimport { message, Popconfirm, Spin } from \"antd\";\r\nimport { ApolloClient } from \"apollo-boost\";\r\nimport gql from \"graphql-tag\";\r\nimport produce from \"immer\";\r\nimport React, { ReactNode } from \"react\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { InjectedFormProps, SubmissionError } from \"redux-form\";\r\nimport { IFilledForm, IRootForm } from \"../../types\";\r\nimport { FAB } from \"../fab.component\";\r\nimport { FieldProps } from \"./formItem.component\";\r\nimport { ConnectedSectionNode } from \"./sectionNode.container\";\r\nimport { IQuestion, IRootSection, ISection } from \"./types\";\r\nconst SAVE_FILLED_FORM = gql`\r\nmutation SaveForm($filledForm: FilledFormInput!){\r\n    saveFilledForm(filledForm: $filledForm){\r\n        completedDate\r\n    }\r\n}`;\r\n\r\nconst GET_FILLED_FORM_BY_ID = gql`\r\nquery getFilled($ids: [String]!){\r\n    getFilledFormById(ids:$ids){\r\n      id\r\n      formId\r\n      answerStore\r\n      completedDate\r\n      startedDate\r\n      filledBy\r\n    }\r\n  }`;\r\nconst GET_ROOT_FORM = gql`\r\nquery GetForm($id: [String]!){\r\n    forms(id:$id){\r\n      id\r\n      content\r\n      name\r\n      \r\n  \r\n    }\r\n  }\r\n  `;\r\ntype FormTree = { [key: string]: IRootSection | ISection | IQuestion }\r\nexport function makeTree(root: RootSection | QuestionSection, tree: FormTree = {}) {\r\n    const type = root instanceof QuestionSection ? 'section' : 'root';\r\n    const val: IRootSection | ISection = {\r\n        ...root,\r\n        _type: type,\r\n        childNodes: []\r\n    };\r\n    for (let i = 0; i < root.content.length; i++) {\r\n        let item = root.content[i];\r\n        if (item instanceof QuestionSection) {\r\n            val.childNodes.push(item.id);\r\n            makeTree(item, tree);\r\n        } else {\r\n            val.childNodes.push(item.id);\r\n            const question: IQuestion = { ...item, _type: 'question' };\r\n            tree[item.id] = question;\r\n        }\r\n    }\r\n    tree[root.id] = val;\r\n\r\n    return tree;\r\n}\r\n\r\nexport type FormViewerProps = {\r\n    filledForm?: IFilledForm;\r\n    rootForm?: IRootForm;\r\n    renderSectionHeader: (sectionName: string, path: number[], type: \"section\" | \"root\") => ReactNode;\r\n    renderRootSectionHeader: (filledForm: IFilledForm, name: string) => ReactNode;\r\n\r\n    renderQuestion: (fieldProps: FieldProps) => ReactNode;\r\n    handleFilledFormAdd?: (formId: string, filledForm: IFilledForm) => void;\r\n    handleRootFormAdd?: (id: string, root: IRootForm) => void;\r\n    initializeForm?: (formId: string, values: any) => void;\r\n\r\n} & RouteComponentProps & InjectedFormProps;\r\n\r\n\r\nexport class FormViewer extends React.Component<FormViewerProps, any> {\r\n    client: ApolloClient<any>;\r\n    state = {\r\n        isSaveConfirmVisible: false,\r\n    }\r\n    toggleSaveConfirmVisibility = () => {\r\n        this.setState({\r\n            isSaveConfirmVisible: !this.state.isSaveConfirmVisible\r\n        })\r\n    }\r\n    saveForm = () => {\r\n        const r = this.props.handleSubmit(values => {\r\n            const filledForm = produce(this.props.filledForm, draft => {\r\n                delete draft['filledBy'];\r\n                draft.answerStore = JSON.stringify(values);\r\n            })\r\n\r\n            this.client.mutate({\r\n                mutation: SAVE_FILLED_FORM,\r\n                variables: {\r\n                    filledForm: filledForm\r\n                }\r\n            }).then(res => {\r\n                message.success(\"Form has been submitted.\");\r\n                this.toggleSaveConfirmVisibility();\r\n\r\n            }).catch(err => {\r\n                message.error(\"Something went wrong, try again later!\");\r\n                throw new SubmissionError({\r\n                    _error: \"Could not save the form!\"\r\n                });\r\n                this.toggleSaveConfirmVisibility();\r\n\r\n            })\r\n        })()\r\n    }\r\n    componentDidMount() {\r\n        const props = this.props;\r\n        const params = new URLSearchParams(this.props.location.search);\r\n        const rootId = params.get(\"rootId\");\r\n        const formId = params.get(\"formId\");\r\n        Promise.all([this.client.query({\r\n            query: GET_FILLED_FORM_BY_ID,\r\n            variables: { ids: [formId] }\r\n        }), this.client.query({\r\n            query: GET_ROOT_FORM,\r\n            variables: { id: [rootId] }\r\n        })]).then(res => {\r\n            const { data } = res[0];\r\n            const { data: rData } = res[1];\r\n\r\n            if (data.getFilledFormById[0] && rData.forms) {\r\n                const rootForm = rData.forms[0];\r\n                if (typeof (rootForm.content) === \"string\") rootForm.content = JSON.parse(rootForm.content);\r\n                const rootSection = RootSection.fromJSON(rootForm);\r\n                const formTree = makeTree(rootSection);\r\n                props.handleRootFormAdd(rootId, formTree);\r\n\r\n                const filledForm = data.getFilledFormById[0];\r\n                if (typeof (filledForm.answerStore) === \"string\") filledForm.answerStore = JSON.parse(filledForm.answerStore);\r\n                props.initializeForm(formId, filledForm.answerStore);\r\n\r\n                const ff: IFilledForm = {\r\n                    formId: filledForm.formId,\r\n                    id: filledForm.id,\r\n                    completedDate: filledForm.completedDate,\r\n                    filledBy: filledForm.filledBy,\r\n                    startedDate: filledForm.startedDate,\r\n\r\n                }\r\n                props.handleFilledFormAdd(formId, ff);\r\n\r\n            }\r\n        })\r\n\r\n\r\n    }\r\n    render() {\r\n        const params = new URLSearchParams(this.props.location.search);\r\n        const rootId = params.get(\"rootId\");\r\n        const formId = params.get(\"formId\");\r\n        const props = this.props;\r\n        let rootName = \"\";\r\n        if (props.rootForm && props.rootForm[rootId]) {\r\n            const rootNode = props.rootForm[rootId];\r\n\r\n            if (rootNode._type === \"root\") {\r\n                //@ts-ignore\r\n                rootName = rootNode.name;\r\n            }\r\n        }\r\n        return (\r\n            <ApolloConsumer>\r\n                {client => {\r\n                    this.client = client;\r\n                    return (<FormRenderContext.Provider\r\n                        value={\r\n                            {\r\n                                renderQuestion: props.renderQuestion,\r\n                                renderSectionHeader: props.renderSectionHeader,\r\n                            }\r\n                        }\r\n                    >\r\n                        {props.filledForm && props.rootForm && props.renderRootSectionHeader && props.renderRootSectionHeader(props.filledForm, rootName)}\r\n\r\n                        <Spin spinning={!props.filledForm || !props.rootForm}>\r\n                            {props.filledForm && props.rootForm && <ConnectedSectionNode rootId={rootId} id={rootId} formId={formId} path={[0]} locationName={\"\"} />}\r\n                        </Spin>\r\n                        <Popconfirm\r\n                            title=\"Are you sure you want to make the changes?\"\r\n                            visible={this.state.isSaveConfirmVisible}\r\n                            onConfirm={this.saveForm}\r\n                            onCancel={this.toggleSaveConfirmVisibility}\r\n                            placement=\"left\"\r\n                        >\r\n                            <FAB onClick={this.toggleSaveConfirmVisibility} title=\"Save Form\" type=\"primary\" shape=\"circle\" icon=\"save\" />\r\n                        </Popconfirm>\r\n\r\n                    </FormRenderContext.Provider>\r\n                    )\r\n                }}\r\n            </ApolloConsumer>\r\n\r\n\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nexport type RenderQuestionProps = {\r\n    question: {\r\n\r\n    }\r\n}\r\nexport type RenderContextType = {\r\n    renderSectionHeader: (sectionName: string, path: number[], type: \"root\" | \"section\") => ReactNode;\r\n    renderQuestion: (fieldProps: FieldProps) => ReactNode;\r\n}\r\nexport const FormRenderContext = React.createContext<RenderContextType>({\r\n    renderSectionHeader: (sectionName: string, path: number[]) => null,\r\n    renderQuestion: () => null,\r\n});\r\n\r\n","import { connect } from \"react-redux\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { Action, Dispatch } from \"redux\";\r\nimport { initialize, reduxForm } from \"redux-form\";\r\nimport { handleAddNewForm, handleAddRootForm } from \"../../actions/actions\";\r\nimport { IAppState, IFilledForm, IRootForm } from \"../../types\";\r\nimport { FormViewer, FormViewerProps } from \"./formviewer.component\";\r\nconst mapStateToProps = (state: IAppState, props: FormViewerProps) => {\r\n    const params = new URLSearchParams(props.location.search);\r\n    const formId = params.get(\"formId\");\r\n    const rootId = params.get(\"rootId\");\r\n    return {\r\n        form: formId,\r\n        filledForm: state.filledForms.byId[formId],\r\n        rootForm: state.rootForms.byId[rootId]\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<Action>) => {\r\n    return {\r\n        handleRootFormAdd: (rootId: string, form: IRootForm) => dispatch(handleAddRootForm(rootId, form)),\r\n        handleFilledFormAdd: (id: string, form: IFilledForm) => dispatch(handleAddNewForm(id, form)),\r\n        initializeForm: (formId: string, formValues: any) => dispatch(initialize(formId, formValues))\r\n\r\n    }\r\n}\r\nexport const InjectedFormViewer = (reduxForm({\r\n    destroyOnUnmount: false,\r\n})(FormViewer))\r\n\r\nexport const ConnectedFormViewer = connect(mapStateToProps, mapDispatchToProps)(InjectedFormViewer);\r\nexport const FormViewerW = withRouter(ConnectedFormViewer);\r\n\r\n","import { useMutation, useQuery } from \"@apollo/react-hooks\";\r\nimport { message, Modal, Spin, Tooltip, Transfer, Typography } from \"antd\";\r\nimport { TransferItem } from \"antd/lib/transfer\";\r\nimport gql from \"graphql-tag\";\r\nimport React, { useState } from \"react\";\r\n\r\nconst GET_USERS = gql`query{\r\n    users{\r\n      _id\r\n      firstName\r\n      lastName\r\n      email\r\n      accountType\r\n      availableForms{\r\n        id\r\n        name\r\n      }\r\n    }\r\n  }`;\r\n\r\nconst GET_FORM = gql`\r\n    query($ids: [String]){\r\n        forms(id: $ids){\r\n          name\r\n          assignedTo{\r\n              _id\r\n              email\r\n             \r\n          }\r\n        }\r\n      } \r\n`;\r\n\r\nconst MAKE_AVAILABLE = gql`\r\n    mutation MakeAvailable($formIds:[String]!,$surveyors:[String]!){\r\n        makeFormsAvailableFor(formIds:$formIds, surveyorEmails:$surveyors){\r\n            message\r\n        }\r\n    }\r\n`\r\nconst MAKE_UNAVAILABLE = gql`\r\n    mutation MakeUnavailable($formIds:[String]!,$surveyors:[String]!){\r\n        makeFormsUnavailableFor(formIds:$formIds, surveyorEmails:$surveyors){\r\n            message\r\n        }\r\n    }\r\n`\r\nconst useTargetUsersForForm = function (formId: string) {\r\n    const [targetUsers, setTargetUsers] = useState([]);\r\n\r\n}\r\ntype AssignUserProps = {\r\n    visible: boolean;\r\n    formId: string;\r\n    onOk: () => void;\r\n    onCancel: () => void;\r\n}\r\nexport function AssignUser(props: AssignUserProps) {\r\n    const [targetUsers, setTargetUsers] = useState([]);\r\n    const [initialUsers, setInitialUsers] = useState([]);\r\n    const { data: usersData, error: usersError, loading: usersLoading } = useQuery(GET_USERS, {\r\n\r\n    });\r\n\r\n    const { data: formData, error: formError, loading: formLoading } = useQuery(GET_FORM, {\r\n        variables: { ids: [props.formId] },\r\n        onCompleted: (resultForm) => {\r\n            setInitialUsers(resultForm.forms[0] ? resultForm.forms[0].assignedTo.map(item => item.email) : []);\r\n            setTargetUsers(resultForm.forms[0] ? resultForm.forms[0].assignedTo.map(item => (item.email)) : [])\r\n        }\r\n    });\r\n\r\n    const [makeAvailable] = useMutation(MAKE_AVAILABLE);\r\n    const [makeUnavailable] = useMutation(MAKE_UNAVAILABLE);\r\n\r\n\r\n\r\n    const handleChange = (newUsers: string[]) => {\r\n\r\n        setTargetUsers(newUsers);\r\n    }\r\n    const onOK = async () => {\r\n        const newUsers = targetUsers;\r\n        let unavailTo = [];\r\n        initialUsers.forEach(user => {\r\n            if (!newUsers.includes(user)) {\r\n                unavailTo.push(user);\r\n            }\r\n        });\r\n        const a = makeAvailable({\r\n            variables: {\r\n                formIds: [props.formId],\r\n                surveyors: newUsers\r\n            }\r\n        });\r\n        const u = makeUnavailable({\r\n            variables: {\r\n                formIds: [props.formId],\r\n                surveyors: unavailTo\r\n            }\r\n        })\r\n        Promise.all([a, u]).then(res => {\r\n            message.success(\"Sucessfully made changes.\");\r\n            if (props.onOk) props.onOk();\r\n        }).catch(err => {\r\n            message.error(\"Something went wrong, please try again later.\");\r\n\r\n        })\r\n    }\r\n    const onCancel = () => {\r\n        if (props.onCancel) props.onCancel();\r\n    }\r\n\r\n    const dataSource = (): TransferItem[] => formData && usersData ? usersData.users\r\n        .filter(user => user.accountType === \"surveyor\")\r\n        .map(user => {\r\n            return {\r\n                key: user.email,\r\n                title: user.firstName + \" \" + user.lastName,\r\n                email: user.email,\r\n            } as TransferItem\r\n        }) : [];\r\n\r\n\r\n    return (\r\n        <Modal visible={props.visible} onCancel={onCancel} onOk={onOK}>\r\n            <Spin spinning={usersLoading || formLoading}>\r\n                <Transfer\r\n                    titles={[\"All Users\", \"Available To\"]}\r\n                    dataSource={dataSource()}\r\n                    targetKeys={targetUsers}\r\n                    onChange={handleChange}\r\n                    render={item => <Tooltip placement=\"top\" title={item.email}>\r\n                        <Typography.Text >{item.title}</Typography.Text>\r\n                    </Tooltip>}\r\n                />\r\n            </Spin>\r\n\r\n        </Modal>\r\n\r\n    )\r\n}\r\n\r\n","import { useMutation } from \"@apollo/react-hooks\";\r\nimport { RootSection } from \"@datapali/dpform\";\r\nimport { Card, Form, Input, Modal } from \"antd\";\r\nimport { GraphQLError } from \"graphql\";\r\nimport React, { useState } from \"react\";\r\nimport { Save_Form } from \"./formbuilder.component\";\r\n\r\ntype NewFormDialogProps = {\r\n    onCreationSuccess?: (id: string) => void;\r\n    isOpen: boolean;\r\n    onCancel: () => void;\r\n    onCreationFailed?: (errors: GraphQLError[]) => void;\r\n}\r\nexport const NewFormDialog = function (props: NewFormDialogProps) {\r\n    const [newFormName, setNewFormName] = useState(null)\r\n    const [saveForm, { data: saveFormResult }] = useMutation(Save_Form);\r\n    const [error, setError] = useState(\"\");\r\n    const onCreateNewForm = async () => {\r\n        const formName = newFormName;\r\n        if (!formName) {\r\n            setError(\"Form Name cannot be empty\");\r\n        }\r\n        const newForm = new RootSection().setName(formName);\r\n        const formJson = RootSection.toJSON(newForm);\r\n        formJson.content = JSON.stringify(formJson.content);\r\n        const { errors, data } = await saveForm({ variables: { saveFile: formJson } });\r\n        if (errors) {\r\n            if (props.onCreationFailed) props.onCreationFailed(errors);\r\n            return;\r\n        }\r\n        setNewFormName(\"\")\r\n        if (props.onCreationSuccess) props.onCreationSuccess(newForm.id);\r\n    }\r\n    const onCancelFormCreation = () => {\r\n        setNewFormName(\"\");\r\n        if (props.onCancel) props.onCancel();\r\n    }\r\n    return (\r\n        <Modal destroyOnClose centered okText={'Create'} title={\"Create New Form\"} onCancel={onCancelFormCreation} onOk={onCreateNewForm} visible={props.isOpen} >\r\n                <Form.Item label=\"Form Name\">\r\n                    <Input onChange={(e: React.FormEvent<HTMLInputElement>) => setNewFormName(e.currentTarget.value)} />\r\n                </Form.Item>\r\n\r\n\r\n        </Modal>\r\n    )\r\n}","import { useMutation, useQuery } from '@apollo/react-hooks';\r\nimport { Avatar, Button, Card, Col, Empty, Input, List, message, PageHeader, Popconfirm, Row, Skeleton, Tag } from 'antd';\r\nimport Paragraph from 'antd/lib/typography/Paragraph';\r\nimport gql from 'graphql-tag';\r\nimport React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { AssignUser } from './assignUser.component';\r\nimport { NewFormDialog } from './newFormDialog.component';\r\n\r\n\r\nconst GET_FORMS = gql`\r\n    query{\r\n        forms{\r\n          id\r\n          name\r\n          createdAt\r\n          updatedAt\r\n          assignedTo{\r\n              _id\r\n              firstName\r\n              lastName\r\n          }\r\n        }\r\n      } \r\n\r\n`;\r\n\r\nconst DELETE_FORMS = gql`\r\n      mutation($formIds: [String]!){\r\n          deleteForm(id:$formIds){\r\n              message\r\n          }\r\n      }\r\n`;\r\n\r\ninterface IFormItem {\r\n    id: string;\r\n    name: string;\r\n    createdAt: number;\r\n    updatedAt: number;\r\n    createdBy: string;\r\n    sharedTo: string[];\r\n}\r\n\r\ntype NonIdealFormsStateProps = {\r\n    onCreateClick: () => void;\r\n}\r\nfunction NonIdealFormsState(props: NonIdealFormsStateProps) {\r\n    return (\r\n        <Empty\r\n            image={Empty.PRESENTED_IMAGE_DEFAULT}\r\n\r\n            description={\r\n                <span>\r\n                    No Forms found!\r\n          </span>\r\n            }\r\n        >\r\n            <Button onClick={props.onCreateClick} type=\"primary\">Create Form</Button>\r\n        </Empty>\r\n\r\n    )\r\n}\r\ntype FormsProps = {\r\n}\r\n\r\nexport function Forms(props: FormsProps) {\r\n    const { loading, error, data } = useQuery(GET_FORMS, { pollInterval: 1000 });\r\n    const [deleteForm, { data: deleteFormResult }] = useMutation(DELETE_FORMS);\r\n\r\n    const [isWizardOpen, setWizardOpen] = useState(false);\r\n    const [assigningForm, setAssigningForm] = useState(null);\r\n\r\n    const onAddFormClick = () => {\r\n        setWizardOpen(true);\r\n    }\r\n\r\n    const onFormDeleteConfirm = async (toDeleteForms: string[]) => {\r\n        const { data, errors } = await deleteForm({ variables: { formIds: toDeleteForms } });\r\n        if (errors) message.error(\"Could not delete the form file, try again later!\");\r\n        else {\r\n            message.success(\"Successfully deleted!\");\r\n        }\r\n    }\r\n\r\n    const content = (\r\n        <div className=\"form-content\">\r\n            <Paragraph>\r\n                Manage your forms and assign or unassign to your surveyors.\r\n            </Paragraph>\r\n\r\n            <Paragraph>\r\n            </Paragraph>\r\n            <Row style={{ display: 'flex', flexDirection: 'row', justifyContent: 'flex-end' }}>\r\n                <Col span={12}>\r\n                    <Input.Search type=\"\" size=\"large\" placeholder=\"Find Users...\" />\r\n                </Col>\r\n            </Row >\r\n\r\n        </div >\r\n\r\n    );\r\n\r\n    const render = () => {\r\n\r\n        if (!loading && (error || !data || data.forms.length === 0)) {\r\n            return <NonIdealFormsState onCreateClick={() => setWizardOpen(true)} />\r\n        }\r\n        return (<>\r\n            <AssignUser onOk={() => setAssigningForm(null)} onCancel={() => setAssigningForm(null)} formId={assigningForm} visible={!!assigningForm} />\r\n            <NewFormDialog onCancel={() => setWizardOpen(false)} isOpen={isWizardOpen} onCreationSuccess={() => { setWizardOpen(false) }} />\r\n            <Card>\r\n                <PageHeader\r\n                    title=\"Forms\"\r\n                    style={{\r\n                        border: '1px solid rgb(235, 237, 240)',\r\n                    }}\r\n                    subTitle=\"\"\r\n                    extra={[\r\n                        <Button onClick={() => setWizardOpen(true)} icon=\"file\" type=\"primary\" key=\"3\">Create Form</Button>,\r\n\r\n                    ]}\r\n                    avatar={{ icon: \"file\" }}\r\n                >\r\n                    <div\r\n\r\n                    >\r\n                        {content}\r\n                    </div>\r\n                </PageHeader>\r\n                <List\r\n                    loading={loading}\r\n                    itemLayout=\"horizontal\"\r\n                    dataSource={data && data.forms || []}\r\n                    renderItem={(item: any) => (\r\n                        <List.Item\r\n\r\n                            actions={[\r\n                                <Button onClick={() => {\r\n                                    setAssigningForm(item.id)\r\n                                }} type=\"primary\" icon={'user-add'} key=\"add-user\" />,\r\n                                <Popconfirm placement={\"left\"} arrowPointAtCenter={true} title=\"Are you sure you want to delete this form?\" onCancel={() => { }} onConfirm={() => onFormDeleteConfirm([item.id])} >\r\n                                    <Button type=\"danger\" icon={'delete'} key=\"delete\" />\r\n                                </Popconfirm>,\r\n\r\n                            ]}\r\n                        >\r\n                            <Skeleton loading={loading} active avatar>\r\n                                <List.Item.Meta\r\n                                    avatar={<Avatar shape=\"square\" size={64} icon=\"file-text\" />\r\n                                    }\r\n                                    title={<Link to={`/formbuilder?id=${item.id}`}>{item.name}</Link>}\r\n                                    description={new Date(parseInt(item.updatedAt)).toLocaleTimeString()}\r\n                                />\r\n                                <div>\r\n                                    {item.assignedTo.map(item => <Tag key={item._id}>{item.firstName + \" \" + item.lastName}</Tag>)}\r\n                                </div>\r\n                            </Skeleton>\r\n                        </List.Item>\r\n                    )}\r\n                />\r\n            </Card>\r\n\r\n        </>\r\n        );\r\n    }\r\n    return render();\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport class Statistics extends Component {\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1>Statisctics</h1>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { useMutation } from '@apollo/react-hooks';\r\nimport { Button, Card, Form, Input, message, Spin } from 'antd';\r\nimport gql from 'graphql-tag';\r\nimport React from 'react';\r\nimport { Field, InjectedFormProps, SubmissionError } from \"redux-form\";\r\nimport { ISignUpUser } from '../containers/signUp.container';\r\n\r\nconst SIGN_UP = (accountType: \"surveyor\" | \"admin\") => gql`mutation(\r\n    $email: String!\r\n    $firstName: String!\r\n    $lastName: String!\r\n    $password: String!\r\n    $createdBy: String!\r\n  ) {\r\n    register(\r\n      user: {\r\n        email: $email\r\n        firstName: $firstName\r\n        lastName: $lastName\r\n        password: $password\r\n        accountType: ${accountType} \r\n        createdBy: $createdBy\r\n      }\r\n    ) {\r\n      _id\r\n    }\r\n  }\r\n  `;\r\nexport function validateEmail(email: string): boolean {\r\n    var re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(email);\r\n}\r\n\r\nexport type SignUpOwnProps = {\r\n    userId?: string;\r\n    signUpType?: \"surveyor\" | \"admin\"\r\n};\r\nconst renderField = ({ input, label, type, meta: { touched, error, warning } }) => {\r\n    return (\r\n        <Form.Item>\r\n            <Input placeholder={label} autoComplete={\"autocomplete_off_hack_xfr4!k\"}  {...input} type={type} />\r\n            {touched && ((error && <span style={{ color: \"red\", top: 0, bottom: 0 }}>{error}</span>) || (warning && <span>{warning}</span>))}\r\n        </Form.Item>\r\n    )\r\n}\r\ntype SignUpProps = InjectedFormProps<ISignUpUser, SignUpOwnProps> & SignUpOwnProps;\r\nexport function SignUpComponent(props: SignUpProps) {\r\n    const [createUser, errors] = useMutation(SIGN_UP(props.signUpType), { errorPolicy: \"none\" });\r\n\r\n    const { handleSubmit, pristine, reset, submitting } = props\r\n    const signUp = async (values: ISignUpUser) => {\r\n\r\n        const submissionData = { ...values, createdBy: props.userId }\r\n        return createUser({ variables: submissionData }).then(res => {\r\n            message.success(`${submissionData.firstName} has been signed up!`)\r\n            return true;\r\n        }).catch(err => {\r\n            throw new SubmissionError({\r\n                _error: err.message.split(\":\")[1]\r\n            })\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <Spin spinning={submitting}>\r\n\r\n                <form onSubmit={handleSubmit(signUp)}>\r\n                    <Field\r\n                        name=\"firstName\"\r\n                        label={\"First Name\"}\r\n                        type={\"text\"}\r\n                        component={renderField}\r\n                    />\r\n                    <Field\r\n                        name=\"lastName\"\r\n                        type={\"text\"}\r\n                        label=\"Last Name\"\r\n                        component={renderField}\r\n                    />\r\n\r\n                    <Field\r\n                        name=\"email\"\r\n                        component={renderField}\r\n                        type=\"text\"\r\n                        label=\"Email Address\"\r\n\r\n                    />\r\n                    <Field\r\n                        name=\"password\"\r\n                        label=\"Password\"\r\n                        type=\"password\"\r\n                        component={renderField}\r\n\r\n                    />\r\n                    {props.error && <strong className={'error'}>{props.error}</strong>}\r\n\r\n                    <Button style={{ width: '100%' }} disabled={submitting} htmlType=\"submit\" icon=\"user-add\">Submit</Button>\r\n                </form>\r\n            </Spin>\r\n\r\n        </Card >\r\n    )\r\n}\r\n","import { connect } from \"react-redux\";\r\nimport { FormErrors, reduxForm } from \"redux-form\";\r\nimport { SignUpComponent, SignUpOwnProps } from \"../components/signup.component\";\r\nimport { IAppState } from \"../types\";\r\n\r\nexport interface ISignUpUser {\r\n    firstName?: string;\r\n    lastName?: string;\r\n    password?: string;\r\n    email?: string;\r\n}\r\nconst validate = (values: ISignUpUser) => {\r\n    const errors: FormErrors<ISignUpUser> = {\r\n    }\r\n    if (!values.firstName) {\r\n        errors.firstName = 'Required'\r\n    } else if (values.firstName.length < 2) {\r\n        errors.firstName = 'Must be 2 characters or more'\r\n    }\r\n    if (!values.lastName) {\r\n        errors.lastName = 'Required'\r\n    }\r\n    if (!values.email) {\r\n        errors.email = 'Required'\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n        errors.email = 'Invalid email address'\r\n    }\r\n    return errors\r\n}\r\n\r\nconst mapStateToProps = (state: IAppState, props: SignUpOwnProps) => {\r\n    return {\r\n        userId: state.user.id\r\n    }\r\n}\r\nexport const ConnectedSignUpForm = connect<{ userId: string }, {}, SignUpOwnProps, IAppState>(mapStateToProps, null)(SignUpComponent);\r\n\r\nexport const SignUpForm = reduxForm<ISignUpUser, SignUpOwnProps>({\r\n    form: \"signUpUser\",\r\n    validate: validate,\r\n    asyncBlurFields: [\"firstName\", \"lastName\", \"email\", \"password\"]\r\n})(ConnectedSignUpForm);\r\n","import { useQuery } from '@apollo/react-hooks';\r\nimport { Button, Card, Col, Input, Modal, PageHeader, Row, Spin, Table, Tag, Typography } from 'antd';\r\nimport { ColumnProps } from 'antd/lib/table';\r\nimport gql from 'graphql-tag';\r\nimport React, { Component } from 'react';\r\nimport 'react-virtualized/styles.css'; // only needs to be imported once\r\nimport { SignUpForm } from '../containers/signUp.container';\r\nconst { Paragraph } = Typography;\r\nconst list = [\r\n    { name: 'Anuj Wagle', email: 'anujwagle@gmail.com' }\r\n    // And so on...\r\n];\r\nconst GET_USERS = gql`query{\r\n    users{\r\n      _id\r\n      firstName\r\n      lastName\r\n      email\r\n      accountType\r\n      filledForms{\r\n        id\r\n        \r\n      }\r\n      createdForms{\r\n        id\r\n        name\r\n      }\r\n      availableForms{\r\n        id\r\n        name\r\n      }\r\n    }\r\n  }`;\r\ntype UsersProps = {\r\n\r\n}\r\nenum UserTypes {\r\n    ADMIN = \"admin\",\r\n    SURVEYOR = \"surveyor\"\r\n\r\n}\r\nenum FilterTypes {\r\n    ADMIN = \"admin\",\r\n    SURVEYOR = \"surveyor\",\r\n    ALL = \"all\"\r\n}\r\ntype UsersState = {\r\n    selectedTab: UserTypes;\r\n    isSignUpDialogOpen: boolean;\r\n    signUpType: UserTypes;\r\n    filterType: FilterTypes;\r\n}\r\n\r\n\r\nexport class Users extends Component<UsersProps, UsersState> {\r\n    state = {\r\n        selectedTab: UserTypes.SURVEYOR,\r\n        signUpType: UserTypes.SURVEYOR,\r\n        isSignUpDialogOpen: false,\r\n        filterType: FilterTypes.ALL,\r\n    }\r\n    handleTabChange = (tabId: UserTypes) => {\r\n        this.setState({\r\n            selectedTab: tabId\r\n        })\r\n    }\r\n    toggleSignUpDialog = () => {\r\n        this.setState(prevState => {\r\n            return {\r\n                isSignUpDialogOpen: !prevState.isSignUpDialogOpen\r\n            }\r\n        })\r\n    }\r\n    getAddUserButton() {\r\n        return (\r\n            <Button onClick={this.toggleSignUpDialog} icon=\"user\">{this.state.selectedTab === \"admin\" ? \"Add Admin\" : \"Add Surveyor\"}</Button>\r\n        )\r\n    }\r\n    handleAddUserClick = (type: UserTypes) => {\r\n        this.setState({\r\n            signUpType: type\r\n        }, () => {\r\n            this.toggleSignUpDialog();\r\n        })\r\n    }\r\n    filterUsersByType(type: FilterTypes) {\r\n        this.setState({\r\n            filterType: type\r\n        })\r\n    }\r\n\r\n    get Content() {\r\n        return (<div className=\"user-content\">\r\n            <Paragraph>\r\n                Create surveyor and assign them the forms you created.\r\n\r\n      </Paragraph>\r\n\r\n            <Paragraph>\r\n                Or create admin users who can collaborate with you on creating forms and managing the collected data.\r\n        </Paragraph>\r\n            <Row style={{ display: 'flex', flexDirection: 'row', justifyContent: 'flex-end' }}>\r\n\r\n                <Col span={12}>\r\n                    <Input.Search type=\"\" size=\"large\" placeholder=\"Find Users...\" />\r\n                </Col>\r\n            </Row >\r\n\r\n        </div >);\r\n    }\r\n    render() {\r\n        return (\r\n            <Card style={{ width: \"100%\", height: \"100%\" }}>\r\n                <PageHeader\r\n                    title=\"Users\"\r\n                    style={{\r\n                        border: '1px solid rgb(235, 237, 240)',\r\n                    }}\r\n                    subTitle=\"\"\r\n                    extra={[\r\n                        <Button onClick={() => this.handleAddUserClick(UserTypes.SURVEYOR)} icon=\"user-add\" type=\"primary\" key=\"3\">Add Surveyor</Button>,\r\n                        <Button onClick={() => this.handleAddUserClick(UserTypes.ADMIN)} icon='user-add' type=\"primary\" key=\"2\">Add Admin</Button>,\r\n\r\n                    ]}\r\n                    avatar={{ src: 'https://avatars1.githubusercontent.com/u/8186664?s=460&v=4' }}\r\n                >\r\n                    <div\r\n\r\n                    >\r\n                        {this.Content}\r\n                    </div>\r\n                </PageHeader>\r\n\r\n                <>\r\n                    <UsersTable filterUsersByType={this.state.filterType} />\r\n\r\n                </>\r\n\r\n                <Modal centered destroyOnClose onCancel={this.toggleSignUpDialog} visible={this.state.isSignUpDialogOpen} title={`Create ${this.state.selectedTab}`}>\r\n                    <SignUpForm signUpType={this.state.signUpType} />\r\n                </Modal>\r\n            </Card >\r\n        )\r\n    }\r\n}\r\ntype UsersTableProps = {\r\n    filterUsersByType: FilterTypes\r\n}\r\nexport function UsersTable(props: UsersTableProps) {\r\n    const { loading, data, error } = useQuery(GET_USERS, { pollInterval: 2000 });\r\n    const onMakeFormUnavailable = () => {\r\n\r\n    }\r\n\r\n    const columns: ColumnProps<any>[] = [\r\n        {\r\n            key: \"name\",\r\n            title: 'Name',\r\n            dataIndex: 'name',\r\n\r\n            sorter: (a, b) => a.name.length - b.name.length,\r\n            ellipsis: true,\r\n\r\n        },\r\n        {\r\n            key: \"email\",\r\n            title: 'Email',\r\n            dataIndex: 'email',\r\n            sorter: (a, b) => a.name.length - b.name.length,\r\n            filteredValue: [props.filterUsersByType]\r\n        },\r\n        {\r\n            key: \"role\",\r\n            title: 'Role',\r\n            dataIndex: 'role',\r\n            filters: [{ text: 'Admins', value: 'admin' }, { text: 'Surveyors', value: 'surveyor' }],\r\n            onFilter: (value, record) => record.role.includes(value),\r\n\r\n        },\r\n        {\r\n            key: \"filledforms\",\r\n            title: 'Filled Forms',\r\n            dataIndex: 'filledFormsCount',\r\n\r\n        },\r\n        {\r\n            key: \"assignedForms\",\r\n            title: 'Assigned Forms',\r\n            dataIndex: 'assignedForms',\r\n\r\n            render: ((data, record, index) => {\r\n                return (\r\n                    <span key={'assignedForms' + index}>\r\n                        {data.map(d => <Tag key={d.id} title={d.name} >{d.name}</Tag>)}\r\n                    </span>\r\n                )\r\n            })\r\n\r\n        },\r\n    ];\r\n\r\n\r\n\r\n    const render = () => {\r\n        let transformedData = [];\r\n        if (data && data.users) {\r\n            transformedData = data.users.map(item => ({\r\n                name: item.firstName + \" \" + item.lastName,\r\n                email: item.email,\r\n                filledFormsCount: item.filledForms.length,\r\n                assignedForms: item.availableForms,\r\n                role: item.accountType\r\n\r\n            }));\r\n        }\r\n\r\n        return (\r\n            <Spin spinning={loading}>\r\n                <Table pagination={{ pageSize: 50 }} scroll={{ y: 600 }} key={\"surveyorstable\"} rowKey={record => record._id} columns={columns} dataSource={transformedData} />\r\n            </Spin>\r\n        )\r\n\r\n    }\r\n\r\n    return render();\r\n}\r\nexport function AdminUsers() {\r\n    return (\r\n        <>\r\n        </>\r\n    )\r\n}\r\nexport function SurveyorUsers() {\r\n\r\n}","import { getReadablePath } from \"@datapali/dpform\";\r\nimport { Card, Descriptions, Divider, PageHeader } from \"antd\";\r\nimport Title from \"antd/lib/typography/Title\";\r\nimport React from \"react\";\r\nimport { FilledFormsPage } from \"./components/filledFormsPage.component\";\r\nimport { FormBuilder } from \"./components/formbuilder.component\";\r\nimport { renderQuestion } from \"./components/formfiller/formItem.component\";\r\nimport { FormViewerW } from \"./components/formfiller/FormViewer.container\";\r\nimport { Forms } from \"./components/forms.component\";\r\nimport { ISidebarItemNode } from \"./components/navMenu.component\";\r\nimport { Statistics } from \"./components/statistics.component\";\r\nimport { Users } from \"./components/surveyors.component\";\r\nimport { IFilledForm } from \"./types\";\r\nconst renderSectionHeader = (sectionName: string, path: number[], type: \"section\" | \"root\") => {\r\n    if (type === \"root\") return null;\r\n    return (\r\n        <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n            <Title level={type === \"section\" ? 4 : 3}>{`${getReadablePath(path)} ${sectionName}`}</Title>\r\n            <Divider type=\"horizontal\" />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst renderRootSectionHeader = (filledForm: IFilledForm, name: string) => {\r\n    console.log(filledForm);\r\n    return (\r\n        <Card>\r\n\r\n            <PageHeader\r\n                title={name}\r\n                style={{\r\n                    border: '1px solid rgb(235, 237, 240)',\r\n                }}\r\n                subTitle=\"\"\r\n                extra={[\r\n\r\n                ]}\r\n                avatar={{ icon: \"file\" }}\r\n            >\r\n                <div\r\n\r\n                >\r\n                    <Descriptions title=\"Surveyor Information\">\r\n                        <Descriptions.Item label=\"Name\">Zhou Maomao</Descriptions.Item>\r\n                        <Descriptions.Item label=\"Started Date\">{new Date(parseInt(`${filledForm.startedDate}`)).toLocaleDateString()}</Descriptions.Item>\r\n                        <Descriptions.Item label=\"Completed Date\">{new Date(parseInt(`${filledForm.completedDate}`)).toLocaleDateString()}</Descriptions.Item>\r\n\r\n                    </Descriptions>\r\n                </div>\r\n            </PageHeader>\r\n        </Card>\r\n\r\n    )\r\n}\r\nexport const tabs: ISidebarItemNode[] = [\r\n    {\r\n        title: \"Forms\",\r\n        routeKey: \"/forms\",\r\n        icon: \"form\",\r\n        component: <Forms />,\r\n        children: [\r\n\r\n        ]\r\n    },\r\n    {\r\n        title: \"Surveyors\",\r\n        routeKey: \"/surveyors\",\r\n        icon: \"user\",\r\n        component: <Users />,\r\n        children: []\r\n    },\r\n    {\r\n        title: \"Statistics\",\r\n        routeKey: \"/statistics\",\r\n        icon: \"pie-chart\",\r\n        component: <Statistics />,\r\n        children: []\r\n    },\r\n\r\n    {\r\n        title: \"Form Builder\",\r\n        routeKey: \"/formbuilder\",\r\n        hideOnSidebar: true,\r\n        icon: \"form\",\r\n        children: [],\r\n        component: <FormBuilder />\r\n    },\r\n\r\n    {\r\n        title: \"Filled Forms\",\r\n        routeKey: \"/filledForms\",\r\n        hideOnSidebar: false,\r\n        icon: \"form\",\r\n        children: [],\r\n        component: <FilledFormsPage />\r\n    },\r\n\r\n    {\r\n        title: \"Form Builder\",\r\n        routeKey: \"/formviewer\",\r\n        hideOnSidebar: true,\r\n        icon: \"form\",\r\n        children: [],\r\n        //@ts-ignore\r\n        component: <FormViewerW\r\n            renderSectionHeader={renderSectionHeader}\r\n            renderQuestion={renderQuestion}\r\n            renderRootSectionHeader={renderRootSectionHeader}\r\n        />\r\n    },\r\n\r\n]\r\n","import { Icon, Menu } from \"antd\";\r\nimport React from \"react\";\r\nimport { ISidebarItemNode } from \"./navMenu.component\";\r\nimport { NavLink, Link } from \"react-router-dom\";\r\n\r\nconst { SubMenu } = Menu;\r\n\r\ntype SidebarProps = {\r\n    items: ISidebarItemNode[]\r\n    parentRouteKey: string;\r\n}\r\ntype SidebarState = {\r\n\r\n}\r\nexport function SidebarMenu(props: SidebarProps) {\r\n\r\n    return props.items.map(item => {\r\n        if (item.hideOnSidebar) return null;\r\n\r\n        if (item.children.length > 0) {\r\n            //render submenu \r\n            return (\r\n\r\n                <SubMenu\r\n                    key={props.parentRouteKey + item.routeKey}\r\n                    title={item.title}\r\n                >\r\n                    {SidebarMenu({\r\n                        parentRouteKey: props.parentRouteKey + item.routeKey,\r\n                        items: item.children\r\n                    })}\r\n                </SubMenu>\r\n            )\r\n        }\r\n        return (\r\n            <Menu.Item key={props.parentRouteKey + item.routeKey}>\r\n                <Icon type={item.icon} />\r\n                <span>{item.title}</span>\r\n                <Link to={props.parentRouteKey + item.routeKey} />\r\n            </Menu.Item>\r\n\r\n        )\r\n    });\r\n\r\n\r\n\r\n}      \r\n","\r\n\r\nimport { Menu, Typography } from 'antd';\r\nimport React from 'react';\r\nimport { tabs } from '../routes';\r\nimport { SidebarMenu } from './sidebar.component';\r\nconst { Title } = Typography;\r\n\r\ntype SideNavProps = {\r\n    isVisible: boolean;\r\n}\r\n\r\nexport function SideNav(props: SideNavProps) {\r\n\r\n\r\n    if (!props.isVisible) return <></>\r\n    return (\r\n        <>\r\n            <div style={{ textAlign: \"center\" }}>\r\n                <Typography.Title ellipsis style={{ color: 'white' }}>Datapali</Typography.Title>\r\n\r\n            </div>\r\n\r\n            <Menu theme=\"dark\" defaultSelectedKeys={['1']} mode=\"inline\">\r\n                {SidebarMenu({\r\n                    parentRouteKey: \"\",\r\n                    items: tabs\r\n                })}\r\n            </Menu>\r\n        </>\r\n    )\r\n}\r\n\r\n","import { Layout, Menu } from \"antd\";\r\nimport React, { ReactNode, useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, useLocation } from 'react-router-dom';\r\nimport { ConnectedNavBar } from \"../containers/navBar.container\";\r\nimport { tabs } from \"../routes\";\r\nimport { ISidebarItemNode } from \"./navMenu.component\";\r\nimport { SideNav } from \"./sidenav.component\";\r\n\r\n\r\nconst { Header, Footer, Sider, Content } = Layout;\r\nconst { SubMenu } = Menu;\r\n\r\ntype DashboardProps = {\r\n\r\n}\r\ntype DashboardState = {\r\n    isSidebarVisible: boolean;\r\n}\r\nexport function DashboardComponent(props: DashboardProps) {\r\n    const location = useLocation();\r\n    const [isSidebarCollapsed, setSidebarCollapsed] = useState(false)\r\n    const shouldShowSidebar = location.pathname !== \"/formbuilder\";\r\n    return (\r\n\r\n        <Router>\r\n            <Layout>\r\n                <Sider trigger={null} collapsible collapsed={isSidebarCollapsed}  >\r\n                    <SideNav isVisible />\r\n                </Sider>\r\n                <Layout>\r\n\r\n\r\n                    <Header  hasSider style={{background: '#fff', display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\r\n\r\n\r\n                        <ConnectedNavBar isSidebarCollapsed={isSidebarCollapsed} setSidebarCollapsed={setSidebarCollapsed} />\r\n\r\n                    </Header>\r\n\r\n                    <Content style={{ padding: 16 }}>\r\n                        {getRoutesComponents(tabs)}\r\n                    </Content>\r\n                    <Footer></Footer>\r\n\r\n                </Layout>\r\n            </Layout>\r\n\r\n        </Router>\r\n\r\n\r\n\r\n\r\n    )\r\n\r\n}\r\n\r\nfunction getRoutesComponents(tabs: ISidebarItemNode[], bag: ReactNode[] = [], parentPath: string = \"\") {\r\n    tabs.forEach(tab => {\r\n        const currentPath = parentPath + tab.routeKey;\r\n        bag.push(\r\n            <Route\r\n                key={tab.routeKey}\r\n                exact\r\n                path={currentPath}\r\n                children={tab.component || <h2>{tab.routeKey}</h2>}\r\n            />\r\n        );\r\n        if (tab.children.length > 0) {\r\n            getRoutesComponents(tab.children, bag, currentPath);\r\n        }\r\n    });\r\n    return bag;\r\n}\r\n","export const CONFIG = {\r\n    serverURL: \"https://datapali.com/graphql\",\r\n    localServerURL: \"http://localhost:5000/graphql\"\r\n}","import { IAppState } from \"../types\";\r\nimport { ApProps, CustomApolloProvider } from \"../components/apollo.component\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst mapStateToProps = (state: IAppState, props: ApProps) => {\r\n    return {\r\n        authToken: state.user.token\r\n    }\r\n}\r\nexport const ConnectedApolloProvider = connect(mapStateToProps, null)(CustomApolloProvider);","import { ApolloProviderProps } from \"@apollo/react-common/lib/context/ApolloProvider\";\r\nimport { ApolloProvider } from \"@apollo/react-hooks\";\r\nimport ApolloClient from \"apollo-boost\";\r\nimport React, { ReactNode } from \"react\";\r\nimport { CONFIG } from \"../config\";\r\nexport type ApProps = {\r\n    authToken?: string;\r\n    children: ReactNode;\r\n} & ApolloProviderProps<any>\r\nexport function CustomApolloProvider(props: ApProps) {\r\n    const client = new ApolloClient({\r\n        uri: CONFIG.serverURL,\r\n        request: (operation) => {\r\n            operation.setContext({\r\n                headers: {\r\n                    authorization: props.authToken || ''\r\n                }\r\n            })\r\n        }\r\n    })\r\n    return (\r\n        <ApolloProvider client={client}>\r\n            {props.children}\r\n        </ApolloProvider>\r\n    )\r\n}","import { ApolloConsumer } from '@apollo/react-hooks';\r\nimport { Button, Card, Form, Icon, Input, Tooltip } from 'antd';\r\nimport ApolloClient from 'apollo-boost';\r\nimport React from \"react\";\r\nimport { Field, InjectedFormProps, WrappedFieldProps } from 'redux-form';\r\n\r\n\r\ntype Value = {\r\n    email: string;\r\n    password: string;\r\n}\r\nexport type LoginOwnProps = {\r\n    customSubmit?: (client: ApolloClient<any>) => (values: any) => void;\r\n    onLoggedIn?: (token: string) => void;\r\n    authToken?: string;\r\n};\r\n\r\ntype LoginState = {\r\n    showPassword: boolean;\r\n    hasError: boolean;\r\n\r\n}\r\nexport type LoginProps = InjectedFormProps<Value, LoginOwnProps> & LoginOwnProps;\r\n\r\nexport class LoginComponent extends React.Component<LoginProps, LoginState>{\r\n    state = {\r\n        showPassword: false,\r\n        hasError: false,\r\n\r\n    }\r\n    componentDidMount() {\r\n        if (!!this.props.authToken) {\r\n            if (this.props.onLoggedIn) this.props.onLoggedIn(this.props.authToken);\r\n        }\r\n    }\r\n\r\n\r\n    togglePasswordHide = () => {\r\n        this.setState(prevState => {\r\n            return {\r\n                showPassword: !prevState.showPassword\r\n            }\r\n        })\r\n    }\r\n\r\n    createSubmitFunction = (client: ApolloClient<any>) => {\r\n        return (e: any) => {\r\n            const { handleSubmit, customSubmit } = this.props;\r\n            if (customSubmit) handleSubmit(customSubmit(client))().then((token: string) => {\r\n                if (this.props.onLoggedIn) this.props.onLoggedIn(token);\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    renderPasswordHideButton() {\r\n        return (\r\n            <Tooltip\r\n                title={`${this.state.showPassword ? \"Hide\" : \"Show\"} Password`}>\r\n                <Button\r\n                    icon={this.state.showPassword ? \"eye-open\" : \"eye-off\"}\r\n                    tabIndex={99}\r\n                    onClick={this.togglePasswordHide}\r\n                />\r\n            </Tooltip>\r\n        )\r\n    }\r\n\r\n    clearErrors = () => {\r\n        if (!this.state.hasError) return;\r\n        this.setState({\r\n            hasError: false,\r\n        })\r\n    }\r\n    renderEmailInput = (props: WrappedFieldProps) => {\r\n        return (\r\n            <Input\r\n                tabIndex={2}\r\n                prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                placeholder=\"Email\"\r\n                type={\"email\"}\r\n                {...props.input}\r\n            />\r\n        )\r\n    }\r\n\r\n    renderPasswordInput = (props: WrappedFieldProps) => {\r\n        return (\r\n            <Input\r\n                tabIndex={2}\r\n                prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />}\r\n                placeholder=\"Password\"\r\n                type={this.state.showPassword ? \"text\" : \"password\"}\r\n                {...props.input}\r\n            />\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <ApolloConsumer>\r\n                {client => {\r\n                    return (\r\n                        <Card className=\"login-form\">\r\n                            <h5>Login</h5>\r\n                            <form onSubmit={this.createSubmitFunction(client)}>\r\n                                <Form.Item>\r\n\r\n                                    <Field\r\n                                        name=\"email\"\r\n                                        type=\"text\"\r\n                                        component={this.renderEmailInput}\r\n                                    />\r\n                                </Form.Item>\r\n                                <Form.Item>\r\n\r\n                                    <Field\r\n                                        name=\"password\"\r\n                                        type=\"password\"\r\n                                        component={this.renderPasswordInput}\r\n                                    />\r\n                                </Form.Item>\r\n\r\n                                {this.props.error && <strong className={'error'}>Incorrect email or password</strong>}\r\n                                <Form.Item>\r\n                                    <Button style={{ width: '100%' }} type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                                        Log in\r\n                                    </Button>\r\n\r\n                                </Form.Item>\r\n\r\n                            </form>\r\n\r\n                        </Card >\r\n                    )\r\n                }\r\n                }\r\n            </ApolloConsumer >\r\n\r\n        )\r\n    }\r\n}\r\n\r\n","import ApolloClient from \"apollo-boost\";\r\nimport gql from \"graphql-tag\";\r\nimport { connect } from 'react-redux';\r\nimport { Action, Dispatch } from \"redux\";\r\nimport { clearSubmitErrors, reduxForm, SubmissionError } from \"redux-form\";\r\nimport { handleSetUser } from \"../actions/actions\";\r\nimport { LoginComponent, LoginOwnProps, LoginProps } from \"../components/login.component\";\r\nimport { IAppState, IFilledForm, IUser } from \"../types\";\r\nconst LOGIN = gql`\r\nquery Login($email: String!, $password: String!){\r\n    login(email: $email, password: $password){\r\n      token\r\n      user{\r\n          _id\r\n          firstName\r\n          lastName\r\n          accountType\r\n        availableForms{\r\n          name\r\n          id\r\n          content\r\n        }\r\n        filledForms{\r\n          id\r\n          startedDate\r\n          completedDate\r\n          formId\r\n          filledBy\r\n          answerStore\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\n\r\nconst mapStateToProps = (state: IAppState, props: LoginProps) => {\r\n    return {\r\n        authToken: state.user.token\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch<Action>) => {\r\n\r\n    return {\r\n\r\n        customSubmit: function (client: ApolloClient<any>) {\r\n            return async (values: { email: string, password: string }) => {\r\n                return client.query<any, { email: string, password: string }>({\r\n                    query: LOGIN,\r\n                    variables: {\r\n                        email: values.email,\r\n                        password: values.password,\r\n                    },\r\n                    errorPolicy: 'none'\r\n                })\r\n                    .then(value => {\r\n                        const login = value.data.login;\r\n\r\n                        let user: IUser = {\r\n                            id: login.user._id,\r\n                            token: login.token,\r\n                            availableForms: login.user.availableForms.map((item: any) => item.id),\r\n                            firstName: login.user.firstName,\r\n                            lastName: login.user.lastName,\r\n                            filledForms: login.user.filledForms.map((item: any) => item.id),\r\n                            accountType: login.user.accountType,\r\n                            createdForms: login.user.createdForms ? login.user.createdForms.map((item: any) => item.id) : [],\r\n                        }\r\n                        let rootForms: any = {};\r\n                        login.user.availableForms.forEach((v: any) => {\r\n                            if (typeof v.content === \"string\") v.content = JSON.parse(v.content);\r\n                            rootForms[v.id] = v.content;\r\n                        });\r\n                        let filledForms: any = {};\r\n                        login.user.filledForms.forEach((v: any) => {\r\n                            if (typeof v.answerStore === 'string') v.answerStore = JSON.parse(v.answerStore);\r\n                            filledForms[v.id] = {\r\n                                completedDate: parseInt(v.completedDate),\r\n                                filledBy: v.filledBy,\r\n                                formId: v.formId,\r\n                                id: v.id,\r\n                                startedDate: parseInt(v.startedDate),\r\n                                submitted: true,\r\n                            } as IFilledForm\r\n                                ;\r\n                        });\r\n                        dispatch(handleSetUser(user));\r\n                        return login.user.token;\r\n\r\n                    })\r\n                    .catch(err => {\r\n                        throw new SubmissionError({\r\n                            _error: \"Incorrect email or password\"\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ntype Value = {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\nexport const ConnectedLoginForm = connect(mapStateToProps, mapDispatchToProps)(LoginComponent)\r\n\r\nexport const LoginForm = reduxForm<Value, LoginOwnProps>({\r\n    form: \"login\",\r\n    onChange: (values, dispatch, props) => dispatch(clearSubmitErrors('login'))\r\n})(ConnectedLoginForm)","import React from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router\";\r\n\r\nexport type ProtectedRouteProps = {\r\n    authToken?: string;\r\n} & RouteProps;\r\n\r\nexport class ProtectedRoute extends Route<ProtectedRouteProps>{\r\n    \r\n    render() {\r\n        \r\n        if (!!this.props.authToken) {\r\n            return <Route {...this.props} />\r\n        }\r\n        const redirect = () => <Redirect to={{ pathname: \"/login\" }} />;\r\n        return <Route {...this.props} component={redirect} render={undefined} />\r\n    }\r\n}","import { connect } from \"react-redux\";\r\nimport { ProtectedRoute, ProtectedRouteProps } from \"../components/protectedRoute\";\r\nimport { IAppState } from \"../types\";\r\n\r\nconst mapStateToProps = (state: IAppState, props: ProtectedRouteProps) => {\r\n    return {\r\n        authToken: state.user.token\r\n    }\r\n}\r\nconst mapDispatchToProps = () => ({});\r\n\r\nexport const ConnectedProtectedRoute = connect(mapStateToProps, mapDispatchToProps)(ProtectedRoute)","import { ConfigProvider } from 'antd';\r\nimport ne_NP from 'antd/es/locale/ne_NP';\r\nimport ApolloClient from 'apollo-boost';\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport { PersistGate } from 'redux-persist/integration/react';\r\nimport './App.css';\r\nimport { DashboardComponent } from './components/dashboard.component';\r\nimport { CONFIG } from './config';\r\nimport { persistor, store } from './configureStore';\r\nimport { ConnectedApolloProvider } from './containers/apollo.provider';\r\nimport { LoginForm } from './containers/login.container';\r\nimport { ConnectedProtectedRoute } from './containers/protectedRoute.container';\r\nimport { EAppTheme } from './types';\r\n\r\n\r\nconst client = new ApolloClient({\r\n  uri: CONFIG.serverURL\r\n\r\n});\r\n\r\ntype Props = {\r\n  authToken?: string;\r\n}\r\ntype State = {\r\n  theme: EAppTheme,\r\n}\r\nclass App extends React.Component<Props, State>{\r\n\r\n  state = {\r\n    theme: EAppTheme.DARK,\r\n  }\r\n\r\n  get Theme() {\r\n    const { theme } = this.state;\r\n    switch (theme) {\r\n      case EAppTheme.DARK:\r\n        return \"bp3-dark\"\r\n      case EAppTheme.LIGHT:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  changeTheme(newTheme: EAppTheme) {\r\n    this.setState({\r\n      theme: newTheme\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Router>\r\n\r\n        <Provider store={store}>\r\n          <PersistGate onBeforeLift={() => console.log(store.getState())} loading={null} persistor={persistor}>\r\n            <ConnectedApolloProvider client={client}>\r\n              <ConfigProvider locale={ne_NP}>\r\n        \r\n                <div className={`main-wrapper ${this.Theme}`}>\r\n                  <Switch>\r\n                    <Route path=\"/login\" render={({ history, location }) => {\r\n                      return <LoginForm onLoggedIn={() => {\r\n                        let { from } = location.state || { from: { pathname: \"/\" } };\r\n                        history.replace(from);\r\n\r\n                      }}\r\n                      />\r\n\r\n                    }} />\r\n                    <Route path=\"/\">\r\n                      <ConnectedProtectedRoute component={DashboardComponent} />\r\n                    </Route>\r\n\r\n                  </Switch>\r\n\r\n                </div>\r\n                <div id=\"modal-container\">\r\n                </div>\r\n              </ConfigProvider>\r\n\r\n            </ConnectedApolloProvider>\r\n          </PersistGate>\r\n\r\n        </Provider >\r\n      </Router>\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App_ from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App_ />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}