(this["webpackJsonp@datapali/web"]=this["webpackJsonp@datapali/web"]||[]).push([[0],{507:function(e,t,n){e.exports=n(863)},512:function(e,t,n){},516:function(e,t,n){},751:function(e,t,n){},863:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o),s=(n(512),n(26)),l=n(25),c=n(35),u=n(34),d=n(36),p=n(29),m=n(474),h=n(281),f=n(63),v=n(110),g=n(106),b=n(443),y=(n(516),n(49)),E=n(880),O=n(199),C="add-filled-form",S="add-available-form",k="replace-available-forms",j="delete-available-form",w="add-item-to-root-form",N="move-item-in-root-form",I="delete-item-in-root-form",T="set-user",F="logout";function A(e){return{type:T,payload:e}}var x=n(886),D=n(14),q=x.a.confirm;var P=n(265),R=n(356),M=n(448),G=n.n(M),V=n(440),L=n(119),Q={byId:{},ids:[]};var U=n(91);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var B,J,$=Object.prototype.hasOwnProperty,H={byId:{},ids:[]};function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}!function(e){e.SURVEYOR="surveyor",e.ADMIN="admin"}(B||(B={})),function(e){e.DARK="dark",e.LIGHT="light"}(J||(J={}));var z={filledForms:[],availableForms:[],firstName:"",id:"",lastName:"",token:"",accountType:B.SURVEYOR,createdForms:[]};var Y,Z=Object(P.a)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t.payload);default:return e}},rootForms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(L.a)(e,(function(e){var n=t.payload;e.ids.includes(n.id)||e.ids.push(n.id),e.byId[n.id]=n.root}));case w:return Object(L.a)(e,(function(e){var n=t.payload,a=n.item,r=n.parentId,o=n.rootId,i=e.byId[o];if(!i)throw new Error("Could not find the root");i[a.id]=a,$.call(i[r],"childNodes")&&(i[r].childNodes=a.id)}));case I:return Object(L.a)(e,(function(e){var n=t.payload,a=n.rootId,r=n.itemId,o=n.parentId,i=e.byId[a];if(!i)throw new Error("Could not find the root");delete i[r];var s=i[o].childNodes.slice(0),l=s.findIndex((function(e){return e===r}));s.splice(0,l),i[o].childNodes=s}));case N:return Object(L.a)(e,(function(e){var n=t.payload,a=n.rootId,r=n.itemId,o=n.parentId,i=n.newParentId,s=e.byId[a];if(!s)throw new Error("Could not find the root");var l=s[o].childNodes.slice(0),c=l.findIndex((function(e){return e===r}));l.splice(0,c),s[o].childNodes=l,s[i].childNodes.push(r)}));case k:var n=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{byId:n.roots,ids:Object.keys(n)});case j:default:return e}},filledForms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var n=t.payload,a=n.id,r=n.filledForm;return Object(L.a)(e,(function(e){e.byId[a]=r,e.ids.includes(r.id)||e.ids.push(r.id)}));default:return e}},form:V.a}),W={rootForms:H,user:z,filledForms:Q,form:{}},X={key:"root",storage:G.a},ee=Object(R.a)(X,(function(e,t){return t.type===F&&(e=W),Z(e,t)})),te=Object(P.b)(ee),ne=Object(R.b)(te),ae=Object(f.b)((function(e,t){return{}}),(function(e){return{onLogoutClick:function(){e({type:F,payload:void 0}),ne.purge()}}}))((function(e){var t=function(){e.onLogoutClick&&e.onLogoutClick()};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(D.a,{style:{fontSize:20,color:"black"},className:"trigger",type:e.isSidebarCollapsed?"menu-unfold":"menu-fold",onClick:function(t){return e.setSidebarCollapsed(!e.isSidebarCollapsed)}})),r.a.createElement("div",null,r.a.createElement(D.a,{onClick:function(){return e=t,void q({title:"Sign Out",content:"Are you sure you want to sign out?",onOk:function(){e()},onCancel:function(){}});var e},style:{color:"black",fontSize:20,alignSelf:"flex-end"},type:"logout"})))})),re=n(114),oe=n.n(re),ie=function(){function e(){Object(s.a)(this,e),this.literals=Array()}return Object(l.a)(e,[{key:"setLiterals",value:function(e){return this.literals=e,this}},{key:"getClause",value:function(){var e=this,t="";return this.literals.forEach((function(n,a){t+="l".concat(a).concat(a===e.literals.length-1?n.followingOperator:"")})),t}},{key:"addLiteral",value:function(e){this.literals.push(e),console.log(this.literals)}},{key:"deleteLiteral",value:function(e){return this.literals.splice(e,1),this}},{key:"Literals",get:function(){return this.literals}}],[{key:"fromJSON",value:function(t){if(!t)return new e;var n=new e,a=t.literals;return n.setLiterals(a),n}},{key:"toJSON",value:function(e){if(e)return{literals:JSON.parse(JSON.stringify(e.literals))}}},{key:"checkIfValid",value:function(e){if(!e.literals)return!1;var t=!0;return e.literals.forEach((function(e){Object.values(e).every((function(e){return!oe.a.isNil(e)}))||(t=!1)})),t}},{key:"Clone",value:function(t){return new e}}]),e}();function se(e){if(e)return{name:e.name,ofType:ce(e.ofType)}}function le(e){return{name:e.name,ofType:se(e.ofType)}}function ce(e){if(e)return{name:e.name,ofType:ce(e.ofType)}}function ue(e){return{name:e.name,ofType:ce(e.ofType)}}!function(e){e.OR="||",e.AND="&"}(Y||(Y={}));var de=function(){function e(){Object(s.a)(this,e),this.optionsMap={},this.optionGroupMap={},this.options=[],this.opt_count=0,this.group_count=0}return Object(l.a)(e,[{key:"addOption",value:function(e){e||(e={id:"opt-"+this.opt_count,value:void 0,groupName:void 0}),this.optionsMap[e.id]=e;var t=e.groupName;if(t){var n=this.optionGroupMap[t];n||(n={id:"opt-grp-"+this.group_count,name:t,appearingCondition:void 0,members:[e]},this.optionGroupMap[t]=n,this.group_count++);var a=null;e&&e.id&&(a=n.members.find((function(t){return!!e&&t.id===e.id}))),a||n.members.push(e)}return this.opt_count++,this}},{key:"addGroup",value:function(e){var t={id:"opt-grp"+this.group_count,name:e||"group-".concat(this.group_count),appearingCondition:void 0,members:[]};return this.optionGroupMap[t.name]=t,this.group_count++,t}},{key:"setValueForOption",value:function(e,t){var n=this.optionsMap[e];return n&&(n.value=t),this}},{key:"deleteOption",value:function(e){var t=this.optionsMap[e];if(t){delete this.optionsMap[e];var n=t.groupName;if(n){var a=this.optionGroupMap[n];if(a){var r=a.members.findIndex((function(t){return t.id===e}));r>-1&&a.members.splice(r,1)}}}return this}},{key:"assignOptionToGroup",value:function(e,t){var n=this,a=this.optionGroupMap[t];a||(a=this.addGroup(t),this.optionGroupMap[a.name]=a);for(var r=function(t){var r=e[t],o=n.optionsMap[r],i=o.groupName&&n.optionGroupMap[o.groupName];if(a.members.find((function(e){return e.id===r})))return"continue";if(i){var s=i.members.findIndex((function(e){return e.id===o.id}));s>-1&&i.members.splice(s,1)}o.groupName=a.name,a.members.push(o)},o=0;o<e.length;o++)r(o);return this}},{key:"setConditionForOption",value:function(e,t){var n=this.optionsMap[e];return n&&(n.appearingCondition=t),this}},{key:"setConditionForGroup",value:function(e,t){var n=this.optionGroupMap[e];return n&&(n.appearingCondition=t),this}},{key:"unassignGroup",value:function(e){var t=this;e.forEach((function(e){var n=t.optionsMap[e],a=n.groupName;if(n&&a){var r=t.optionGroupMap[a];if(r){var o=r.members.findIndex((function(t){return t.id===e}));r.members.splice(o,1)}}n&&(n.groupName=void 0)}))}},{key:"changeGroupName",value:function(e,t){var n=this,a=this.optionGroupMap[e],r=a.members.map((function(e){return e.id}));if(r&&r.forEach((function(e){var a=n.optionsMap[e];a&&(a.groupName=t)})),a){a.name=t;var o=oe.a.clone(a);delete this.optionGroupMap[e],this.optionGroupMap[t]=o}}},{key:"deleteGroup",value:function(e){var t=this,n=this.optionGroupMap[e];if(!n)return this;var a=n.members.map((function(e){return e.id}));a&&a.forEach((function(e){var n=t.optionsMap[e];n&&(n.groupName=void 0)})),delete this.optionGroupMap[e]}},{key:"setOptionTypeFor",value:function(e,t){var n=this.optionsMap[e];n&&(n.type=t,n.value=void 0)}},{key:"SortedOptions",get:function(){var e=Object.values(this.optionsMap).filter((function(e){return!e.groupName}));return{groups:Object.values(this.optionGroupMap),rootOptions:e}}}],[{key:"toJSON",value:function(e){return{optionsMap:e&&e.optionsMap?oe.a.mapValues(e.optionsMap,(function(e){return pe(e)})):{},optionGroupMap:e&&e.optionGroupMap?oe.a.mapValues(e.optionGroupMap,(function(e){return function(e){return{id:e.id,name:e.name,appearingCondition:ie.toJSON(e.appearingCondition),members:e.members.map((function(e){return pe(e)}))}}(e)})):{}}}},{key:"fromJSON",value:function(t){var n=new e;return n.optionsMap=t.optionsMap?oe.a.mapValues(t.optionsMap,(function(e){return function(e){var t={groupName:e.groupName,appearingCondition:ie.fromJSON(e.appearingCondition),id:e.id,value:e.value};e.type&&(t.type=ue(e.type));return t}(e)})):{},n.optionGroupMap=t.optionGroupMap?oe.a.mapValues(t.optionGroupMap,(function(e){return{id:e.id,name:e.name,appearingCondition:ie.fromJSON(e.appearingCondition),members:e.members.map((function(e){return n.optionsMap[e.id]}))}})):{},n}}]),e}();function pe(e){return{appearingCondition:ie.toJSON(e.appearingCondition),type:e.type?le(e.type):void 0,id:e.id,value:e.value,groupName:e.groupName}}var me,he,fe,ve;!function(e){e.Less_Than_Or_Equal="<=",e.Greater_Than_Or_Equal=">=",e.Less_Than="<",e.Greater_Than=">",e.Equal="=="}(me||(me={})),function(e){e.String="String",e.Boolean="Boolean",e.Date="Date",e.Time="Time",e.Number="Number",e.Select="Select"}(he||(he={})),function(e){e.String="string",e.html="html"}(fe||(fe={})),function(e){e.BOOLEAN="boolean",e.STRING="string",e.DATE="date",e.TIME="time",e.NUMBER="number",e.RANGE="range",e.SELECT="select",e.GEOLOCATION="geolocation"}(ve||(ve={}));var ge=function(){function e(){Object(s.a)(this,e),this.consts={},this.count=0}return Object(l.a)(e,[{key:"getConstant",value:function(e){return oe.a.cloneDeep(this.consts[e])}},{key:"addConstant",value:function(e){return e||(e={name:"",id:"constant-"+this.count,type:void 0,value:""}),this.consts[e.id]=e,this}},{key:"removeConstant",value:function(e){return this.consts[e]&&delete this.consts[e],this}},{key:"ConstantsArray",get:function(){return Object.values(this.consts)}}],[{key:"fromJSON",value:function(e){}},{key:"toJSON",value:function(e){}}]),e}();function be(e){return{isEnabled:e.isEnabled,condition:ie.toJSON(e.condition),duplicateTimes:{value:e.duplicateTimes.value,type:e.duplicateTimes.type}}}function ye(e){return e.slice(1).map((function(e){return e+1})).join(".")}function Ee(e){e||(e="");var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e+(t()+t()+"-")+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var Oe=function(){function e(){Object(s.a)(this,e),this.content=[],this.customId="",this.autoAnswer={isEnabled:!1,answeringConditions:[]},this.options=new de,this.id=Ee("q-"),this.questionContent={content:"",type:fe.String}}return Object(l.a)(e,[{key:"updateFromQuestion",value:function(e){return this.isRequired=e.isRequired,this.appearingCondition=e.appearingCondition,this.questionContent=e.questionContent,this.autoAnswer=e.autoAnswer,this.options=e.options,this.answerType=e.answerType,this.customId=e.customId,this.id=e.id,this}},{key:"setIsRequired",value:function(e){return this.isRequired=e,this}},{key:"setAppearingCondition",value:function(e){return this.appearingCondition=e,this}},{key:"setAutoAnswer",value:function(e){return this.autoAnswer=e,this}},{key:"setQuestionContent",value:function(e){return this.questionContent=e,this}},{key:"setCreationDate",value:function(e){return this.creationDate=e||(new Date).getTime(),this}},{key:"setAutoAnswerEnabled",value:function(e){return this.autoAnswer.isEnabled=e||!0,this}},{key:"addAutoAnswerCondition",value:function(e){return this.autoAnswer.answeringConditions.push(e),this}},{key:"setAnswerType",value:function(e){return this.answerType=e,this}},{key:"setOptions",value:function(e){return this.options=e,this}}],[{key:"toJSON",value:function(e){return{id:e.id,isRequired:e.isRequired,appearingCondition:ie.toJSON(e.appearingCondition),questionContent:{content:e.questionContent.content,type:e.questionContent.type},autoAnswer:Ce(e.autoAnswer),options:de.toJSON(e.options),answerType:e.answerType?le(e.answerType):void 0,customId:e.customId}}},{key:"fromJSON",value:function(t){var n=new e;return n.id=t.id,n.isRequired=t.isRequired,n.appearingCondition=ie.fromJSON(t.appearingCondition),n.questionContent=t.questionContent,t.options&&(n.options=de.fromJSON(t.options)),t.answerType&&(n.answerType=ue(t.answerType)),t.autoAnswer&&(n.autoAnswer=function(e){return{isEnabled:e.isEnabled,answeringConditions:e.answeringConditions.map((function(e){return function(e){return{condition:ie.fromJSON(e.condition),ifFalse:e.ifFalse,ifTrue:e.ifTrue}}(e)}))}}(t.autoAnswer)),n.customId=t.customId||"",n}}]),e}();function Ce(e){if(e)return{isEnabled:e.isEnabled,answeringConditions:e.answeringConditions.map((function(e){return function(e){return{condition:ie.toJSON(e.condition),ifTrue:e.ifTrue,ifFalse:e.ifFalse}}(e)}))}}var Se,ke=function(){function e(){Object(s.a)(this,e),this.customId="",this.id=Ee("ss-"),this.duplicatingSettings={condition:void 0,isEnabled:!1,duplicateTimes:{value:"",type:"number"}},this.content=[],this.appearingCondition=new ie}return Object(l.a)(e,[{key:"setID",value:function(e){return this.id=e,this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setContent",value:function(e){return this.content=e,this}},{key:"addContent",value:function(e){return this.content.push(e),this}},{key:"deleteContent",value:function(e){var t=this.content.findIndex((function(t){return t.id===e}));t>-1&&this.content.splice(t,1)}},{key:"setDuplicatingSettings",value:function(e){return this.duplicatingSettings=e,this}}],[{key:"toJSON",value:function(t){return{name:t.name,id:t.id,appearingCondition:ie.toJSON(t.appearingCondition),customId:t.customId,content:t.content.map((function(t){return t instanceof e?e.toJSON(t):t instanceof Oe?Oe.toJSON(t):void 0})),duplicatingSettings:be(t.duplicatingSettings)}}}]),e}(),je=n(58),we=n.n(je),Ne=function(){function e(){Object(s.a)(this,e),this.questions={},this.sections={},this.content=[],this.name="",this.id=Ee("root-")}return Object(l.a)(e,[{key:"setName",value:function(e){return this.name=e,this}},{key:"descendants",value:function(e){!function t(n,a){for(var r=0;r<n.content.length;r++){var o=n.content[r];if(o){var i=e(o,a.concat(r),n);o instanceof ke&&(Object(re.isNil)(i)||!0===i)&&t(o,a.concat(r))}}}(this,[0])}},{key:"addQuestion",value:function(t,n){n||(n=[new Oe]);for(var a=e.getFromPath(t,[this]),r=0;r<n.length;r++){var o=n[r];if(this.questions[o.id])throw new Error("Question id conflict");this.questions[o.id]=o,!a||a instanceof Oe||a.content.push(o)}return this}},{key:"addSection",value:function(t,n){n||(n=[new ke]);for(var a=e.getFromPath(t,[this]),r=0;r<n.length;r++){var o=n[r];if(this.questions[o.id])throw new Error("Section id conflict");this.sections[o.id]=o,!a||a instanceof Oe||a.content.push(o)}return this}},{key:"removeQuestion",value:function(t,n){var a=e.getFromPath(n.slice(0,n.length-1),[this]);if(a&&!(a instanceof Oe)){var r=a.content.findIndex((function(e){return e.id===t}));r>-1&&(a.content.splice(r,1),delete this.questions[t])}return this}},{key:"removeSection",value:function(t,n){var a=e.getFromPath(n.slice(0,n.length-1),[this]);if(a&&!(a instanceof Oe)){var r=a.content.findIndex((function(e){return e.id===t}));r>-1&&(a.content.splice(r,1),delete this.sections[t])}return this}},{key:"moveItem",value:function(t,n){var a=e.getFromPath(t,[this]),r=n.slice(0,n.length-1),o=t.slice(0,t.length-1),i=e.getFromPath(r,[this]),s=e.getFromPath(o,[this]);if(s&&i&&a){var l=s.content.findIndex((function(e){return e.id===a.id}));if(l>-1&&!(s instanceof Oe)){var c=s.content.splice(l,1);if(!(i instanceof Oe)){var u=n[n.length-1];c[0]instanceof ke?i.content.splice(u,0,this.sections[c[0].id]):c[0]instanceof Oe&&i.content.splice(u,0,this.questions[c[0].id])}return this}}}},{key:"Iterator2",value:we.a.mark((function t(n,a,r){var o,i,s,l,c,u,d,p,m,h,f,v,g,b;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==n.length){t.next=2;break}return t.abrupt("return",!0);case 2:if(!(o=e.getFromPath(n,[this]))||o instanceof Oe){t.next=75;break}case 4:if(!(a<o.content.length)){t.next=46;break}if(!((i=o.content[a])instanceof Oe)){t.next=13;break}if(r!==Se.QUESTION&&r){t.next=10;break}return t.next=10,{path:n.concat(a),data:i};case 10:a++,t.next=44;break;case 13:if(!(i instanceof ke)){t.next=44;break}if(r!==Se.SECTION&&r){t.next=17;break}return t.next=17,{path:n.concat(a),data:i};case 17:a++,s=!0,l=!1,c=void 0,t.prev=21,u=this.Iterator2(n.concat(a),0,r)[Symbol.iterator]();case 23:if(s=(d=u.next()).done){t.next=30;break}return p=d.value,t.next=27,p;case 27:s=!0,t.next=23;break;case 30:t.next=36;break;case 32:t.prev=32,t.t0=t.catch(21),l=!0,c=t.t0;case 36:t.prev=36,t.prev=37,s||null==u.return||u.return();case 39:if(t.prev=39,!l){t.next=42;break}throw c;case 42:return t.finish(39);case 43:return t.finish(36);case 44:t.next=4;break;case 46:if(!(n&&n.length>0)){t.next=74;break}a=n[n.length-1]+1,m=!0,h=!1,f=void 0,t.prev=51,v=this.Iterator2(n,a,r)[Symbol.iterator]();case 53:if(m=(g=v.next()).done){t.next=60;break}return b=g.value,t.next=57,b;case 57:m=!0,t.next=53;break;case 60:t.next=66;break;case 62:t.prev=62,t.t1=t.catch(51),h=!0,f=t.t1;case 66:t.prev=66,t.prev=67,m||null==v.return||v.return();case 69:if(t.prev=69,!h){t.next=72;break}throw f;case 72:return t.finish(69);case 73:return t.finish(66);case 74:return t.abrupt("return",!0);case 75:case"end":return t.stop()}}),t,this,[[21,32,36,44],[37,,39,43],[51,62,66,74],[67,,69,73]])}))}],[{key:"getFromPath",value:function(t,n){var a=n[t[0]];return 1===t.length?a:a.content?e.getFromPath(t.slice(1),a.content):void 0}},{key:"Entries",value:function(t,n,a,r){var o=[],i=[],s=n.slice(0);o.push({path:n,startIndex:a});for(var l=0;l<n.length-1;l++)o.push({path:s.slice(0,s.length-1),startIndex:s[s.length-1]+1}),s.pop();for(;o.length>0;){var c=o.shift();if(c){var u=e.getFromPath(c.path,[t]);if(u)for(var d=c.startIndex;d<u.content.length;d++){var p=u.content[d];p instanceof Oe?r&&r!==Se.QUESTION||i.push({path:c.path.concat(d),data:p}):(r&&r!==Se.SECTION||i.push({path:c.path.concat(d),data:p}),o.push({path:c.path.concat(d),startIndex:0}))}}}return i}},{key:"toJSON",value:function(e){return{id:e.id,name:e.name,content:e.content.map((function(e){return e instanceof ke?ke.toJSON(e):e instanceof Oe?Oe.toJSON(e):void 0}))}}},{key:"fromJSON",value:function(t){var n=new e;n.id=t.id,n.name=t.name;var a=[0],r=function e(t,a,r){if(t.hasOwnProperty("content")){var o=new ke;o.id=t.id,o.name=t.name,o.customId=t.customId||"",t.customId&&(o.customId=t.customId),t.appearingCondition&&(o.appearingCondition=ie.fromJSON(t.appearingCondition)),o.duplicatingSettings=function(e){return{isEnabled:e.isEnabled,duplicateTimes:{value:e.duplicateTimes.value,type:e.duplicateTimes.type},condition:ie.fromJSON(e.condition)}}(t.duplicatingSettings),n.addSection(a,[o]),t.content.forEach((function(t,n){return e(t,a.concat(r),n)}))}else{var i=Oe.fromJSON(t);n.addQuestion(a,[i])}};return t.content&&t.content.forEach((function(e,t){return r(e,a,t)})),n}}]),e}();!function(e){e[e.QUESTION=1]="QUESTION",e[e.SECTION=2]="SECTION"}(Se||(Se={}));var Ie=n(870),Te=n(892),Fe=n(888),Ae=n(896),xe=n(473),De=n.n(xe),qe=n(102),Pe=n(53),Re=n(92),Me=n(889),Ge=n(283),Ve=n(883),Le=n(475),Qe=n(85),Ue=n(884),_e=n(51),Be=n.n(_e),Je=n(451),$e=n.n(Je);function He(){var e=Object(Pe.a)(["\nmutation InitDB($formId:String!){\n    initDbFor(formId:$formId)\n    {\n      message\n    }\n  }"]);return He=function(){return e},e}function Ke(){var e=Object(Pe.a)(["\nquery RunAggregation($formId: String!, $query: String!){\n    runAggregationOn(formId:$formId, query:$query)\n  }\n"]);return Ke=function(){return e},e}function ze(){var e=Object(Pe.a)(["\nquery RunQuery($formId: String!, $query: String!){\n    runQueryOn(formId:$formId, query:$query)\n  }\n"]);return ze=function(){return e},e}var Ye=Be()(ze()),Ze=Be()(Ke()),We=(Be()(He()),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).queryInput=void 0,n.client=void 0,n.handleModeChange=function(e){n.setState({mode:e.target.value})},n.validate=function(){},n.runQuery=Object(qe.a)(we.a.mark((function e(){var t;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.queryInput.state.value,n.client.mutate({mutation:"query"===n.state.mode?Ye:Ze,variables:{formId:n.props.formId,query:t}}).then((function(e){console.log(e);var t="query"===n.state.mode?e.data.runQueryOn:e.data.runAggregationOn;n.setState({results:JSON.parse(t)})})).catch((function(e){Me.a.error("Invalid query or database has not been initialized")}));case 2:case"end":return e.stop()}}),e)}))),n.state={mode:"query",results:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Re.a,null,(function(t){return e.client=t,r.a.createElement("div",null,r.a.createElement(Ge.a.Group,{value:e.state.mode,onChange:e.handleModeChange},r.a.createElement(Ge.a.Button,{value:"query"},"Query"),r.a.createElement(Ge.a.Button,{value:"aggregation"},"Aggregation")),r.a.createElement(Ve.a.Item,null,r.a.createElement(Le.a.TextArea,{rows:10,ref:function(t){return e.queryInput=t}})),r.a.createElement(Qe.a,{style:{width:"100%"},type:"primary",icon:"play-circle",onClick:e.runQuery},"Execute"),r.a.createElement(Ie.a,null),r.a.createElement("div",null,r.a.createElement(Ue.a.Title,{level:4},"Results"),e.state.results&&r.a.createElement(Te.a,null,r.a.createElement("code",null,$e()(e.state.results,{highlight:!0,indent:4})))))}))}}]),t}(a.Component)),Xe=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(We,{formId:"root-53c37497-3808-cfd8-c886-1361dbaab171",onQuerySuccess:function(e){return console.log(e)}}))}}]),t}(a.Component),et=n(153),tt=n(61),nt=n(273),at=n(893),rt=n(871),ot=n(890),it=n(460),st=n(292);function lt(){var e=Object(Pe.a)(["\nquery GetFilledFormsPaged($pagination: PaginationInput!) {\n    getFilledForms(pagination: $pagination) {\n      totalCount\n      forms {\n        id\n        completedDate\n        filledBy {\n          firstName\n          lastName\n          email\n        }\n        formId\n      }\n    }\n  }\n  "]);return lt=function(){return e},e}var ct=Be()(lt());var ut=n(465),dt=n(189),pt=n(865),mt=n(872),ht=n(139),ft=n(878),vt=n(873),gt=n(31),bt=n.n(gt),yt=n(74),Et=n(461),Ot=n(877),Ct=n(876),St=n(875),kt=n(463),jt=n.n(kt);function wt(e){var t=document.getElementById("dp-modal");t||((t=document.createElement("div")).setAttribute("id","dp-modal"),document.body.appendChild(t)),i.a.render(e,t)}function Nt(){var e=document.getElementById("dp-modal");e&&i.a.unmountComponentAtNode(e)}var It=n(874),Tt=n(4);function Ft(e){e||(e="");var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e+(t()+t()+"-")+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var At,xt=n(894),Dt=n(224),qt=n(895),Pt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"parseRangeValue",value:function(e){var t=e.split("-");return{min:t[0],max:t[1]}}},{key:"handleInputChange",value:function(e){var t=e.min+"-"+e.max;switch(this.props.type&&this.props.type.name){case ve.TIME:case ve.DATE:case ve.NUMBER:default:this.props.onChange&&this.props.onChange(t)}}},{key:"render",value:function(){var e=this,t=null,n=this.props.type?this.props.type.name:void 0,a=this.parseRangeValue(this.props.value);switch(n){case ve.TIME:t=r.a.createElement(Vt,{range:a,onChange:this.handleInputChange});break;case ve.DATE:var o=a.min?new Date(a.min):void 0,i=a.max?new Date(a.max):void 0;t=r.a.createElement(xt.a,{shortcuts:!1,defaultValue:[o,i],onChange:function(t){return e.handleInputChange({min:t[0]?t[0].toString():"",max:t[1]?t[1].toString():""})}});break;case ve.NUMBER:t=r.a.createElement(Mt,{range:a,onChange:function(t){return e.handleInputChange}})}return t}}]),t}(r.a.Component),Rt={range:{min:"",max:""},onChange:function(){}},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=Object(a.useState)(e?e.range.min:""),n=Object(y.a)(t,2),o=n[0],i=n[1],s=Object(a.useState)(e?e.range.max:""),l=Object(y.a)(s,2),c=l[0],u=l[1];return r.a.createElement(ut.a,null,r.a.createElement("input",{className:"form-control",defaultValue:e&&e.range.min&&e.range.min.toString(),onChange:function(t){i(t.target.value),e&&e.onChange&&e.onChange({min:o,max:c})},placeholder:"Minimum",id:"numberRange-min",type:"number"}),r.a.createElement(pt.a,null),r.a.createElement("input",{className:"form-control",defaultValue:e&&e.range.max&&e.range.max.toString(),onChange:function(t){u(t.target.value),e&&e.onChange&&e.onChange({min:o,max:c})},placeholder:"Maximum",id:"numberRange-max",type:"number"}))},Gt={range:{min:"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time",max:"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time"},onChange:function(){}},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=Object(a.useState)(e?e.range.min:void 0),n=Object(y.a)(t,2),o=n[0],i=n[1],s=Object(a.useState)(e?e.range.max:void 0),l=Object(y.a)(s,2),c=l[0],u=l[1];return console.log(c),console.log(o),r.a.createElement(ut.a,null,r.a.createElement(Dt.a,{precision:Dt.b.MINUTE,useAmPm:!0,defaultValue:o?new Date(o):void 0,onChange:function(t){i(t.toLocaleDateString()),e.onChange&&e.onChange({min:o,max:c})}}),r.a.createElement(pt.a,null),r.a.createElement(Dt.a,{precision:Dt.b.MINUTE,useAmPm:!0,defaultValue:c?new Date(c):void 0,onChange:function(t){u(t.toLocaleDateString()),e.onChange({min:o,max:c})}}))},Lt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,null,[{key:"defaultProps",get:function(){return{defaultValue:"",onChange:function(e){console.log(e)},type:{name:ve.STRING}}}}]),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=null;switch(this.props.type.name){case ve.NUMBER:t=r.a.createElement(mt.a,{defaultValue:this.props.defaultValue,className:"form-control",type:"number",onChange:function(t){e.props.onChange&&e.props.onChange({value:t.target.value})}});break;case ve.SELECT:t=r.a.createElement(Qt,{type:this.props.type.ofType,defaultValue:this.props.defaultValue,options:this.props.options,onChange:function(t){e.props.onChange&&e.props.onChange(t)}});break;case ve.BOOLEAN:var n=[{value:"true",label:"YES"},{value:"false",label:"No"}],a=n.find((function(t){return t.value===e.props.defaultValue}));t=r.a.createElement(yt.a,{styles:Kt,defaultValue:a,options:n,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.value})}});break;case ve.DATE:var o=this.props.defaultValue?new Date(this.props.defaultValue):void 0;t=r.a.createElement(qt.a,{formatDate:function(e){return e.toLocaleDateString()},parseDate:function(e){return new Date(e)},closeOnSelection:!0,defaultValue:o,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.toLocaleDateString()})}});break;case ve.RANGE:this.props.type.ofType&&(t=r.a.createElement(Pt,{value:this.props.defaultValue,type:this.props.type.ofType,onChange:function(t){e.props.onChange&&e.props.onChange({value:t})}}));break;case ve.STRING:t=r.a.createElement(mt.a,{className:"form-control",type:"text",defaultValue:this.props.defaultValue,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.target.value})}});break;case ve.TIME:var i=this.props.defaultValue?new Date(this.props.defaultValue):void 0;t=r.a.createElement(Dt.a,{precision:Dt.b.MINUTE,useAmPm:!0,defaultValue:i,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.toString()})}})}return t}}]),t}(r.a.Component),Qt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=[];if(this.props.options){var t,n=this.props.options.SortedOptions,a=n.rootOptions,o=n.groups,i=[];o&&o.length>0&&(i=o.map((function(e){return{label:e.name,options:e.members.map((function(e){return{label:e.value,value:e.id}}))}}))),t=a.map((function(e){return{label:e.value,value:e.id}})),e=[].concat(Object(et.a)(i),Object(et.a)(t))}var s=function(e,t){for(var n=null,a=0;a<e.length;a++){var r=e[a];if(r.options&&r.options.length>0){if(n=r.options.find((function(e){return e.value===t})))break}else if(n=r&&r.value===t?r:void 0)break}return n}(e,this.props.defaultValue);return r.a.createElement(yt.a,{styles:Kt,options:e,onChange:this.handleChange.bind(this),defaultValue:s})}}]),t}(r.a.Component);!function(e){e[e.QuestionRef=1]="QuestionRef",e[e.ComparisonOperator=2]="ComparisonOperator",e[e.ComparisonValue=3]="ComparisonValue",e[e.FollowingOperator=4]="FollowingOperator"}(At||(At={}));var Ut=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={literals:n.props.condition?n.props.condition.literals:[]},n.columns=[{dataField:"id",text:"Literal ID"},{dataField:"questionRef",text:"Question Reference"},{dataField:"comparisonOperator",text:"Comparison Operator"},{dataField:"comparisonValue",text:"Comparison Value"},{dataField:"followingOperator",text:"Following Operator"}],n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setLiteralsSetter&&this.props.setLiteralsSetter(this.setLiterals.bind(this))}},{key:"setLiterals",value:function(e){this.setState({literals:e})}},{key:"addLiteral",value:function(e){var t=this;e||(e={literalId:Ft("lit-"),questionRef:void 0,comparisonOperator:void 0,comparisonValue:void 0,followingOperator:void 0}),this.setState((function(t){var n=bt.a.clone(t.literals);return e&&n.push(e),{literals:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.literals)}))}},{key:"moveLiteralUp",value:function(e){this.setState((function(t){var n=bt.a.clone(t.literals),a=function(e,t){var n;return((e-1)%(n=t)+n)%n}(e,n.length),r=[n[a],n[e]];return n[e]=r[0],n[a]=r[1],{literals:n}}),this.forceUpdate.bind(this))}},{key:"handleDataChange",value:function(e,t,n){var a=this;this.setState((function(a){var r=bt.a.clone(a.literals),o=r[e];switch(t){case At.QuestionRef:o.questionRef=n&&n.value?n.value:void 0;break;case At.ComparisonOperator:var i,s;for(i in me)if(me[i]===n.value){s=i,o.comparisonOperator=me[s];break}break;case At.ComparisonValue:var l={content:n.value,type:fe.String};o.comparisonValue=l;break;case At.FollowingOperator:o.followingOperator=n.value===Y.AND?Y.AND:Y.OR}return{literals:r}}),(function(){a.props.onChange&&a.props.onChange(a.state.literals)}))}},{key:"getQuestion",value:function(e){return e&&this.props.definedQuestions&&!bt.a.isEmpty(this.props.definedQuestions)?this.props.definedQuestions[e]:null}},{key:"removeLiteral",value:function(e){var t=this;this.setState((function(t){var n=bt.a.clone(t.literals);return n.splice(e,1),{literals:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.literals)}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(vt.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{key:"th-first"},""),this.columns.map((function(e,t){return r.a.createElement("th",{key:t},e.text)})),r.a.createElement("th",{key:"th-last"},""))),r.a.createElement("tbody",null,this.state.literals.map((function(t,n){var a=e.props.definedQuestions?Object.values(e.props.definedQuestions).map((function(e){return{value:e.id,label:e.questionContent.content}})):[],o=r.a.createElement(yt.a,{key:"literalq-".concat(n,"-").concat(t.literalId),styles:Kt,options:a,value:a.find((function(e){return e.value===t.questionRef})),onChange:function(t){return e.handleDataChange(n,At.QuestionRef,t)}}),i=function(e){var t=Object.values(me);switch(e&&e.name){case ve.BOOLEAN:case ve.DATE:case ve.STRING:case ve.TIME:return t.filter((function(e){return e===me.Equal}));case ve.NUMBER:default:return t}}(t.questionRef&&e.props.definedQuestions&&e.props.definedQuestions[t.questionRef]?e.props.definedQuestions[t.questionRef].answerType:void 0).map((function(e,t){return{value:e,label:e}})),s=r.a.createElement(yt.a,{key:"literalo-".concat(n,"-").concat(t.literalId),styles:Kt,options:i,value:i.find((function(e,n){return e.value===t.comparisonOperator})),onChange:e.handleDataChange.bind(e,n,At.ComparisonOperator)}),l=e.getQuestion(t.questionRef),c=l?l.answerType:void 0,u=l&&l.options?l.options:void 0,d=r.a.createElement(Lt,{options:u,key:"literalv-".concat(n,"-").concat(t.literalId),onChange:e.handleDataChange.bind(e,n,At.ComparisonValue),defaultValue:t.comparisonValue&&t.comparisonValue.content,type:c}),p=Object.keys(Y).map((function(e){return{label:e,value:"AND"===e?Y.AND:"OR"===e?Y.OR:""}})),m=r.a.createElement(yt.a,{key:"literalfo-".concat(n,"-").concat(t.literalId),styles:Kt,options:p,value:p.find((function(e){return e.value===t.followingOperator})),onChange:e.handleDataChange.bind(e,n,At.FollowingOperator)});return r.a.createElement("tr",{key:"tr_"+n},r.a.createElement("td",null,r.a.createElement(ht.b,{icon:"arrow-up",onClick:function(){return e.moveLiteralUp(n)}})),r.a.createElement("td",null,"l",r.a.createElement("sub",null,n)),r.a.createElement("td",{className:"questionRef"},o),r.a.createElement("td",{className:"comparisonOperator"},s),r.a.createElement("td",{className:"comparisonValue"},d),r.a.createElement("td",{className:"followingOperator"},m),r.a.createElement("td",null,r.a.createElement(ht.b,{icon:"cross",onClick:function(){e.removeLiteral(n)}})))})),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ht.b,{onClick:function(){return e.addLiteral()},icon:"plus"})),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)))))}}],[{key:"defaultProps",get:function(){return{onChange:function(){}}}}]),t}(r.a.Component),_t=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({errors:[],literals:e})},n.primaryButtonHandler=function(){var e=(new ie).setLiterals(n.state.literals);ie.checkIfValid(e)?n.props.onSubmit&&n.props.onSubmit(n.state.literals):n.setState({errors:[{message:"Condition is not valid!"}]})},n.secondaryButtonHandler=function(){n.props.onCancel&&n.props.onCancel(n.state.literals)},n.state={isOpen:n.props.isOpen,literals:n.props.condition&&n.props.condition.literals?n.props.condition.literals:[],errors:[]},n.createCondition_=r.a.createRef(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(It.a,{isCloseButtonShown:!1,title:"Add/Edit Condition",style:{width:900},isOpen:this.props.isOpen},r.a.createElement("div",{style:{maxHeight:500,overflow:"auto",minHeight:500},className:Tt.a.DIALOG_BODY},this.props.isOpen&&r.a.createElement(Ut,{definedQuestions:this.props.definedQuestions,condition:this.props.condition?this.props.condition:void 0,ref:this.createCondition_,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("div",{className:"btn-danger"},this.state.errors.map((function(e){return e.message})))),r.a.createElement("div",{className:Tt.a.DIALOG_FOOTER},r.a.createElement("div",{className:Tt.a.DIALOG_FOOTER_ACTIONS},r.a.createElement(ht.b,{color:"primary",onClick:this.primaryButtonHandler},"Submit"),r.a.createElement(ht.b,{color:"secondary",onClick:this.secondaryButtonHandler},"Cancel"))))}}]),t}(r.a.Component);_t.defaultProps={isOpen:!1,condition:new ie};var Bt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={aConditions:n.props.autoAnswer.answeringConditions||[],isEnabled:n.props.autoAnswer.isEnabled},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"editIfTrueFalseValue",value:function(e,t,n){var a=this;this.setState((function(r){var o=void 0,i=bt.a.clone(r.aConditions),s=i[t];return a.props.options&&a.props.answerType.name===ve.SELECT?(o=a.props.options.optionsMap[n],"true"===e?s.ifTrue=o.id:"false"===e&&(s.ifFalse=o.id)):("true"===e&&(s.ifTrue=n),"false"===e&&(s.ifFalse=n)),{aConditions:i}}),(function(){a.props.onChange&&a.props.onChange({isEnabled:a.state.isEnabled,answeringConditions:a.state.aConditions})}))}},{key:"openConditionModal",value:function(e){var t=this.state.aConditions[e];wt(r.a.createElement(_t,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.editCondition.bind(this,e),onCancel:Nt.bind(this),condition:t.condition}))}},{key:"changeEnabled",value:function(){var e=this;this.setState((function(e){return{isEnabled:!e.isEnabled}}),(function(){e.props.onChange&&e.props.onChange({isEnabled:e.state.isEnabled,answeringConditions:e.state.aConditions})}))}},{key:"addAutoFillCondition",value:function(){var e=this;this.setState((function(e){var t=bt.a.clone(e.aConditions),n={condition:new ie,ifTrue:void 0,ifFalse:void 0};return t.push(n),{aConditions:t}}),(function(){e.props.onChange&&e.props.onChange({isEnabled:e.state.isEnabled,answeringConditions:e.state.aConditions})}))}},{key:"editCondition",value:function(e,t){var n=this,a=bt.a.clone(this.state.aConditions);a[e].condition||(a[e].condition=new ie),a[e].condition.setLiterals(t),this.setState({aConditions:a},(function(){Nt(),n.props.onChange&&n.props.onChange({isEnabled:n.state.isEnabled,answeringConditions:n.state.aConditions})}))}},{key:"removeAutofillCondition",value:function(e){var t=this;this.setState((function(t){var n=bt.a.clone(t.aConditions);return n.splice(e,1),{aConditions:n}}),(function(){t.props.onChange&&t.props.onChange({isEnabled:t.state.isEnabled,answeringConditions:t.state.aConditions})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(St.a,{checked:this.state.isEnabled,onChange:this.changeEnabled.bind(this),label:"Enabled"}),r.a.createElement(vt.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Condition"),r.a.createElement("th",null," if True"),r.a.createElement("th",null," if False"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.state.aConditions.map((function(t,n){var a=function(a){return r.a.createElement(Lt,{key:a,onChange:function(t){return e.editIfTrueFalseValue(a,n,t.value)},options:e.props.options,defaultValue:"true"===a?t.ifTrue:t.ifFalse&&t.ifFalse,type:e.props.answerType})};return r.a.createElement("tr",{key:"af".concat(n)},r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(ht.b,{icon:"key",onClick:function(){return e.openConditionModal(n)}})),r.a.createElement("td",null,a("true")),r.a.createElement("td",null,a("false")),r.a.createElement("td",null,r.a.createElement(ht.b,{icon:"cross",onClick:function(){e.removeAutofillCondition(n)}})))})),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ht.b,{icon:"plus",onClick:function(){return e.addAutoFillCondition()},type:"button"})),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null)))))}}]),t}(r.a.Component);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ht=document.getElementById("root")||document.body;jt.a.setAppElement(Ht);var Kt={container:function(e,t){return $t({},e,{border:(t.isFocused,null),background:"transparent",transition:"border-color 0.2s ease, box-shadow 0.2s ease, padding 0.2s ease","&:hover":{boxShadow:"0 2px 4px 0 rgba(41, 56, 78, 0.1)"}})},control:function(e,t){return $t({},e,{background:"transparent",borderColor:t.isFocused?zt:e.borderColor,"&:hover":{borderColor:t.isFocused?zt:e.borderColor}})},valueContainer:function(e,t){return $t({},e)},menu:function(e,t){return $t({},e,{borderColor:"#e14eca",position:"absolute",zIndex:"999999999999999999 !important"})},menuList:function(e,t){return $t({},e)},singleValue:function(e,t){return $t({},e)},input:function(e,t){return $t({},e,{color:"white"})},option:function(e,t){return $t({},e)}},zt="#46beed",Yt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={question:n.props.question},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(){this.props.onChange&&this.props.onChange(this.state.question)}},{key:"handleRequiredChange",value:function(e){this.setState((function(e){var t=gt.clone(e.question);return t.setIsRequired(!t.isRequired),{question:t}}),this.handleChange.bind(this))}},{key:"openAppearingConditionModal",value:function(){wt(r.a.createElement(_t,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.editAppearingCondition.bind(this),onCancel:Nt.bind(this),condition:this.state.question.appearingCondition}))}},{key:"editAppearingCondition",value:function(e){var t=this;this.setState((function(t){var n=gt.clone(t.question);return n.appearingCondition||n.setAppearingCondition(new ie),n.appearingCondition.setLiterals(e),console.log(ie.toJSON(n.appearingCondition)),{question:n}}),(function(){Nt(),t.handleChange()}))}},{key:"handleQuestionChange",value:function(e){this.setState((function(t){var n=gt.clone(t.question);return n.setQuestionContent({type:fe.String,content:e}),{question:n}}),this.handleChange.bind(this))}},{key:"handleAnswerTypeChange",value:function(e){this.setState((function(t){var n=gt.clone(t.question);return n.setAnswerType(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleOptionsChange",value:function(e){this.setState((function(t){var n=gt.clone(t.question);return n.setOptions(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleAutoFillChange",value:function(e){this.setState((function(t){var n=gt.clone(t.question);return n.setAutoAnswer(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleCustomIdChange",value:function(e){this.setState((function(t){var n=gt.clone(t.question);return n.customId=e,{question:n}}),this.handleChange.bind(this))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Ct.a,null,r.a.createElement("h5",{className:"title"},"Add Question"),r.a.createElement(Ot.a,null,r.a.createElement(dt.d,{htmlFor:"customid"},"Custom ID"),r.a.createElement(mt.a,{defaultValue:this.state.question.customId,className:"form-control",onChange:function(t){return e.handleCustomIdChange(t.target.value)},id:"custom_id",name:"custom_id",placeholder:"Custom id"})),r.a.createElement(Ot.a,null,r.a.createElement(dt.d,{htmlFor:"question"},"Question"),r.a.createElement(ft.a,{fill:!0,defaultValue:this.state.question.questionContent.content,className:"form-control",onChange:function(t){return e.handleQuestionChange(t.target.value)},id:"question",name:"question",placeholder:""})),r.a.createElement(Ot.a,null,r.a.createElement(St.a,{defaultChecked:this.state.question.isRequired,label:"Required",onChange:this.handleRequiredChange.bind(this)})),r.a.createElement(Ot.a,null,r.a.createElement(nn,{answerType:this.state.question.answerType,onChange:this.handleAnswerTypeChange.bind(this)})),this.state.question.answerType&&this.state.question.answerType.name===ve.SELECT&&this.state.question.answerType.ofType&&r.a.createElement(Ot.a,null,r.a.createElement("label",null,"Add Options"),r.a.createElement(Ct.a,null,r.a.createElement(an,{constants:this.props.constants,definedQuestions:this.props.definedQuestions,onChange:this.handleOptionsChange.bind(this),defaultOptionType:this.state.question.answerType,options:this.state.question.options}))),r.a.createElement(Ot.a,null,r.a.createElement(dt.d,{htmlFor:"type"},"Appearing Condition"),r.a.createElement(ht.b,{type:"button",large:!0,icon:"key",fill:!1,onClick:this.openAppearingConditionModal.bind(this)})),r.a.createElement(Ot.a,null,r.a.createElement(Ot.a,{label:"Add AutoFill condition"},r.a.createElement(Bt,{autoAnswer:this.state.question.autoAnswer,definedQuestions:this.props.definedQuestions,onChange:this.handleAutoFillChange.bind(this),answerType:this.state.question.answerType,options:this.state.question.options})))))}}]),t}(r.a.Component);Yt.defaultProps={question:new Oe};var Zt,Wt=[{value:ve.BOOLEAN,label:"YES/NO"},{value:ve.STRING,label:"Text"},{value:ve.TIME,label:"Time"},{value:ve.DATE,label:"Date"},{value:ve.NUMBER,label:"Number"},{value:ve.RANGE,label:"Range"},{value:ve.SELECT,label:"Multiple Choice"},{value:ve.GEOLOCATION,label:"Geo location"}],Xt=Wt.filter((function(e){return e.value&&e.value!==ve.SELECT})),en=[ve.TIME,ve.NUMBER,ve.DATE,ve.TIME],tn=Wt.filter((function(e){return en.includes(e.value)})),nn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={answerType:n.props.answerType},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleAnswerTypeChange",value:function(e){var t=this;this.setState((function(t){var n=bt.a.clone(t.answerType);return n.name=e.value,n.ofType=void 0,{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"handleSecondSelectChange",value:function(e){var t=this;this.setState((function(t){var n=bt.a.clone(t.answerType);return n.ofType={name:e.value,ofType:void 0},n.ofType.ofType&&(n.ofType.ofType=void 0),{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"handleThirdSelectChange",value:function(e){var t=this;this.setState((function(t){var n=bt.a.clone(t.answerType);return n.ofType&&(n.ofType.ofType=e.value),{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"render",value:function(){var e=this,t=this.state.answerType.name===ve.SELECT||this.state.answerType.name===ve.RANGE,n=this.state.answerType.ofType&&this.state.answerType.ofType.name===ve.RANGE,a=this.state.answerType.name===ve.SELECT?Xt:this.state.answerType.name===ve.RANGE?tn:[],o=this.state.answerType.ofType&&this.state.answerType.ofType.name===ve.RANGE?tn:[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot.a,{label:"Value Type"},r.a.createElement(yt.a,{onChange:this.handleAnswerTypeChange.bind(this),styles:Kt,options:Wt,value:Wt.find((function(t){return t.value===e.state.answerType.name}))})),t&&r.a.createElement(Ot.a,{label:"of Type"},r.a.createElement(yt.a,{onChange:this.handleSecondSelectChange.bind(this),styles:Kt,options:a,value:a.find((function(t){return e.state.answerType.ofType&&t.value===e.state.answerType.ofType.name}))})),n&&r.a.createElement(Ot.a,{label:"of Type"},r.a.createElement(yt.a,{onChange:this.handleThirdSelectChange.bind(this),styles:Kt,options:o,value:o.find((function(t){return e.state.answerType.ofType&&e.state.answerType.ofType.ofType&&t.value===e.state.answerType.ofType.ofType.name}))})))}}]),t}(r.a.Component);nn.defaultProps={answerType:{name:void 0,ofType:void 0}},function(e){e[e.OPTION=1]="OPTION",e[e.GROUP=2]="GROUP"}(Zt||(Zt={}));var an=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).constantNameInputRef=null,n.makeFromTextInputRef=null,n.state={options:n.props.options||new de},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"makeConstant",value:function(){var e="const";this.constantNameInputRef&&(e=this.constantNameInputRef.value),this.props.constants.addConstant({id:Ee("const-"),name:e,type:{name:ve.SELECT,ofType:{name:ve.STRING}},value:de.fromJSON(de.toJSON(this.state.options))})}},{key:"makeOptionsFromText",value:function(){var e=this;if(this.makeFromTextInputRef){var t=this.makeFromTextInputRef.value.split("\n");this.setState((function(n){var a=bt.a.clone(n.options);return t.forEach((function(t){a.addOption({id:"opt-"+Object.keys(a.optionsMap).length,appearingCondition:void 0,groupName:void 0,type:e.props.defaultOptionType.ofType,value:t})})),{options:a}}))}}},{key:"handleChange",value:function(){this.props.onChange&&this.props.onChange(this.state.options)}},{key:"handleAddNewOption",value:function(){var e=this;this.setState((function(t){var n=bt.a.clone(t.options),a={id:"opt-"+Object.keys(t.options.optionsMap).length,appearingCondition:void 0,groupName:void 0,type:e.props.defaultOptionType.ofType,value:void 0};return n.addOption(a),{options:n}}),this.handleChange.bind(this))}},{key:"handleGroupNameChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.options);return a.changeGroupName(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupDelete",value:function(e){this.setState((function(t){var n=bt.a.clone(t.options);return n.deleteGroup(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionTypeChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.options);return a.setOptionTypeFor(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupAssignment",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.options);return a.assignOptionToGroup(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupUnassignment",value:function(e){this.setState((function(t){var n=bt.a.clone(t.options);return n.unassignGroup(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionDelete",value:function(e){this.setState((function(t){var n=bt.a.clone(t.options);return n.deleteOption(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionValueChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.options);return a.setValueForOption(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleAddGroup",value:function(){this.setState((function(e){var t=bt.a.clone(e.options);return t.addGroup(),{options:t}}),this.handleChange.bind(this))}},{key:"handleConditionClick",value:function(e,t){var n;n=e===Zt.GROUP?this.state.options.optionGroupMap[t].appearingCondition:this.state.options.optionsMap[t].appearingCondition,wt(r.a.createElement(_t,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.setCondition.bind(this,t,e),onCancel:Nt.bind(this),condition:n}))}},{key:"setCondition",value:function(e,t,n){var a=this;this.setState((function(a){var r=bt.a.clone(a.options);if(t===Zt.GROUP){var o=r.optionGroupMap[e];o.appearingCondition||(o.appearingCondition=new ie),o.appearingCondition.setLiterals(n)}else if(t===Zt.OPTION){var i=r.optionsMap[e];i.appearingCondition||(i.appearingCondition=new ie),i.appearingCondition.setLiterals(n)}return{options:r}}),(function(){Nt(),a.handleChange()}))}},{key:"handleImportFromConstant",value:function(e){var t=this.props.constants.getConstant(e.value);console.log(e),console.log(t),t&&t.value instanceof de&&this.setState({options:de.fromJSON(de.toJSON(t.value))},this.handleChange.bind(this))}},{key:"render",value:function(){var e=this,t=this.props.constants.ConstantsArray.map((function(e){return{label:e.name,value:e.id}}));return r.a.createElement(ut.a,{fill:!0,vertical:!0},r.a.createElement(dt.b,null,"Import From Constant "),r.a.createElement(yt.a,{styles:Kt,options:t,onChange:this.handleImportFromConstant.bind(this)}),r.a.createElement(pt.a,null),r.a.createElement(dt.b,null,"Export To Constant"),r.a.createElement(mt.a,{placeholder:"Constant name",inputRef:function(t){return e.constantNameInputRef=t}}),r.a.createElement(ht.b,{onClick:this.makeConstant.bind(this)},"Export"),r.a.createElement(pt.a,null),r.a.createElement(dt.b,null,"Make From Text"),r.a.createElement(ft.a,{inputRef:function(t){return e.makeFromTextInputRef=t}}),r.a.createElement(ht.b,{onClick:this.makeOptionsFromText.bind(this)},"Make From Text"),r.a.createElement(rn,{defaultType:this.props.defaultOptionType,groups:this.state.options.optionGroupMap?Object.values(this.state.options.optionGroupMap):[],handleGroupAssignment:this.handleGroupAssignment.bind(this),handleOptionTypeChange:this.handleOptionTypeChange.bind(this),handleAddNewOption:this.handleAddNewOption.bind(this),handleOptionDelete:this.handleOptionDelete.bind(this),handleConditionClick:this.handleConditionClick.bind(this,Zt.OPTION),handleOptionValueChange:this.handleOptionValueChange.bind(this),options:this.state.options.optionsMap?Object.values(this.state.options.optionsMap):[]}),r.a.createElement(pt.a,null),r.a.createElement(on,{handleAddGroup:this.handleAddGroup.bind(this),handleGroupUnassignment:this.handleGroupUnassignment.bind(this),handleGroupAssignment:this.handleGroupAssignment.bind(this),handleGroupNameChange:this.handleGroupNameChange.bind(this),handleGroupDelete:this.handleGroupDelete.bind(this),handleGroupConditionClick:this.handleConditionClick.bind(this,Zt.GROUP),options:this.state.options.optionsMap?Object.values(this.state.options.optionsMap):[],groups:this.state.options.optionGroupMap?Object.values(this.state.options.optionGroupMap):[]}))}}]),t}(r.a.Component),rn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={options:n.props.options},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.options.length!==this.props.options.length||e.groups.length!==this.props.groups.length}},{key:"generateAddGroupInput",value:function(e){var t=this,n=this.props.groups.map((function(e){return{value:e.name,label:e.name}})),a=n.find((function(t){return t.value===e.groupName}));return r.a.createElement(Et.a,{value:a||null,styles:Kt,options:n,onChange:function(n){t.props.handleGroupAssignment&&t.props.handleGroupAssignment([e.id],n.value)}})}},{key:"handleAddNewOption",value:function(){this.props.handleAddNewOption&&this.props.handleAddNewOption()}},{key:"handleConditionEdit",value:function(e){this.props.handleConditionClick&&this.props.handleConditionClick(e)}},{key:"handleAddGroupInput",value:function(e){}},{key:"handleOptionDelete",value:function(e){this.props.handleOptionDelete&&this.props.handleOptionDelete(e)}},{key:"handleOptionTypeChange",value:function(e,t){this.props.handleOptionTypeChange&&this.props.handleOptionTypeChange(e,t)}},{key:"handleOptionValueChange",value:function(e,t){this.props.handleOptionValueChange&&this.props.handleOptionValueChange(e,t.value)}},{key:"render",value:function(){var e=this;return r.a.createElement(vt.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Condition"),r.a.createElement("th",null,"Group"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.options.map((function(t,n){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null),r.a.createElement("td",null,t.id),r.a.createElement("td",null,r.a.createElement(nn,{answerType:t.type,onChange:function(n){return e.handleOptionTypeChange(t.id,n)}})),r.a.createElement("td",null,r.a.createElement(Lt,{onChange:e.handleOptionValueChange.bind(e,t.id),defaultValue:t.value,type:t.type})),r.a.createElement("td",null,r.a.createElement(ht.b,{onClick:e.handleConditionEdit.bind(e,t.id),style:{color:"red",width:20},icon:"key"})),r.a.createElement("td",null,e.generateAddGroupInput(t)),r.a.createElement("td",null,r.a.createElement(ht.b,{style:{width:20},onClick:e.handleOptionDelete.bind(e,t.id),icon:"cross"})))})),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ht.b,{style:{width:20},icon:"add",onClick:this.handleAddNewOption.bind(this)})),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null))))}}]),t}(r.a.Component);rn.defaultProps={options:[],groups:[]};var on=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleGroupAssignment",value:function(e,t){if(e){var n=e.map((function(e){return e.value}));console.log(n),this.props.handleGroupAssignment&&this.props.handleGroupAssignment(n,t)}}},{key:"render",value:function(){var e=this;return r.a.createElement(vt.a,null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Group Name"),r.a.createElement("th",null,"Group Items"),r.a.createElement("th",null,"Appearing Condition"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.groups.map((function(t,n){var a=e.props.options.map((function(e){return{value:e.id,label:e.id}})),o=t.members.map((function(e){return e.id})),i=a.filter((function(e){return o.includes(e.value)}));return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement(mt.a,{key:t.id,type:"text",className:"form-control",defaultValue:t.name,onChange:function(n){e.props.handleGroupNameChange&&e.props.handleGroupNameChange(t.name,n.target.value)}})),r.a.createElement("td",null,r.a.createElement(yt.a,{styles:Kt,onChange:function(n,a){if("remove-value"===a.action){var r=a.removedValue.value;e.props.handleGroupUnassignment&&e.props.handleGroupUnassignment([r])}e.handleGroupAssignment(n,t.name)},value:i,isMulti:!0,options:a})),r.a.createElement("td",null,r.a.createElement(ht.b,{style:{width:20},icon:"key",onClick:function(){e.props.handleGroupConditionClick&&e.props.handleGroupConditionClick(t.name)}})),r.a.createElement("td",null,r.a.createElement(ht.b,{style:{width:20},icon:"cross",onClick:function(){e.props.handleGroupDelete&&e.props.handleGroupDelete(t.name)}})))})),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(ht.b,{style:{width:20},icon:"add",onClick:function(){e.props.handleAddGroup&&e.props.handleAddGroup()}})),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null),r.a.createElement("td",null))))}}]),t}(r.a.Component),sn=n(152),ln=n(899),cn=n(898),un=n(466),dn=n.n(un),pn=n(879),mn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(pn.a,{isOpen:this.props.isOpen})}}]),t}(r.a.Component),hn=n(897),fn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleNodeClick=function(e,t,a){n.props.handleNodeClick&&n.props.handleNodeClick(e,t,a)},n.handleNodeCollapse=function(e,t,a){n.props.handleNodeCollapse&&n.props.handleNodeCollapse(e,t,a)},n.handleNodeExpand=function(e,t,a){n.props.handleNodeExpand&&n.props.handleNodeExpand(e,t,a)},n.state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getNodeFromQuestionOrSection",value:function(e,t,n,a){var r=this,o={id:e.id,icon:void 0,label:"",isSelected:n.includes(e.id),isExpanded:a.includes(e.id)};return e instanceof Oe?(o.icon="document",o.label="".concat(t," ").concat(e.questionContent.content||"Question")):e instanceof ke&&(o.icon="folder-close",o.label="".concat(t," ").concat(e.name||"Section"),o.childNodes=e.content.map((function(e,o){return r.getNodeFromQuestionOrSection(e,t+"."+(o+1),n,a)}))),o}},{key:"generateITNodeTree",value:function(e,t,n){var a=this;return[{id:e.id,hasCaret:!0,icon:"folder-close",label:"Root",isExpanded:n.includes(e.id),isSelected:t.includes(e.id),childNodes:e.content.map((function(e,r){return a.getNodeFromQuestionOrSection(e,(r+1).toString(),t,n)}))}]}},{key:"render",value:function(){return console.log(this.props.root_),r.a.createElement(hn.a,{contents:this.generateITNodeTree(this.props.root_,this.props.selectedNodes,this.props.expandedNodes),onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeCollapse,onNodeExpand:this.handleNodeExpand,className:Tt.a.ELEVATION_0})}}]),t}(r.a.Component),vn=n(468),gn=n.n(vn),bn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={isEnabled:n.props.isEnabled,condition:n.props.condition,duplicateTimes:n.props.duplicateTimes},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleQuestionRefChange",value:function(e){this.setState({duplicateTimes:{value:e.value,type:"questionRef"}})}},{key:"handleNumberTimesChange",value:function(e){this.setState({duplicateTimes:{value:e,type:"number"}})}},{key:"handleTypeChange",value:function(e){this.setState((function(t){return{duplicateTimes:{value:"",type:e.value}}}))}},{key:"handleEnabledChange",value:function(){this.setState((function(e){return{isEnabled:!e.isEnabled}}))}},{key:"generateValueComponent",value:function(e){var t=this;if("questionRef"===e){var n=Object.values(this.props.definedQuestions).map((function(e){return{value:e.id,label:e.questionContent.content}})),a="questionRef"===this.state.duplicateTimes.type?n.find((function(e){return e.value===t.state.duplicateTimes.value})):void 0;return r.a.createElement(yt.a,{styles:Kt,options:n,defaultValue:a,onChange:this.handleQuestionRefChange.bind(this)})}return r.a.createElement("input",{defaultValue:"number"===this.state.duplicateTimes.type?this.state.duplicateTimes.value:"",type:"number",className:"form-control",onChange:function(e){return t.handleNumberTimesChange(e.target.value)}})}},{key:"handleSave",value:function(){bt.a.values(this.state).every(bt.a.isEmpty)||this.props.handleSave({isEnabled:this.state.isEnabled,condition:this.state.condition,duplicateTimes:this.state.duplicateTimes})}},{key:"render",value:function(){var e=this,t=[{value:"number",label:"Number"},{value:"questionRef",label:"AnswerValue"}],n=t.find((function(t){return t.value===e.state.duplicateTimes.type}));return r.a.createElement(ut.a,{className:gn()(Tt.a.ELEVATION_2,Tt.a.DARK),vertical:!0,fill:!0},r.a.createElement(St.a,{onChange:this.handleEnabledChange.bind(this),defaultChecked:this.props.isEnabled},"Enabled"),r.a.createElement(pt.a,null),r.a.createElement(yt.a,{menuContainerStyle:{zIndex:99999},styles:Kt,onChange:function(t){return e.handleTypeChange(t)},options:t,defaultValue:n}),this.generateValueComponent(this.state.duplicateTimes.type),r.a.createElement(pt.a,null),r.a.createElement(ut.a,{fill:!0},r.a.createElement(ht.b,{onClick:this.handleSave.bind(this)},"Save"),r.a.createElement(ht.b,{onClick:this.props.handleCancel},"Cancel")))}}]),t}(r.a.Component),yn=n(467),En=function(e){var t=Object(a.useState)(!1),n=Object(y.a)(t,2),o=n[0],i=n[1];return r.a.createElement(ut.a,{style:{paddingBottom:"20px"},fill:!0,vertical:!0},r.a.createElement(ut.a,null,r.a.createElement(ht.b,{onClick:function(){return e.handleMoveUp(e.questionId,e.path)},style:{height:50,width:20},icon:"arrow-up"}),r.a.createElement(ht.b,{style:{height:50},onClick:function(){return i(!o)},alignText:"left",rightIcon:o?"chevron-up":"chevron-down"},"Q ",r.a.createElement("span",null,e.readablePath," ")," ",r.a.createElement("span",null," ",e.questionTitle," ")),r.a.createElement(ht.b,{onClick:function(){return e.handleDeletion(e.questionId,e.path)},style:{height:50,width:20},alignText:"left",rightIcon:"cross"})),r.a.createElement(yn.a,{keepChildrenMounted:!1,isOpen:o},e.children))},On=n(891),Cn=n(214),Sn=function(e){var t=Object(a.useState)(!1),n=Object(y.a)(t,2),o=n[0],i=n[1];return r.a.createElement(ut.a,{style:{paddingBottom:"20px"},fill:!0,vertical:!0},r.a.createElement(ut.a,null,r.a.createElement(ht.b,{style:{width:20},icon:"arrow-up",onClick:function(){return e.handleMoveUp(e.sectionId,e.path)}}),r.a.createElement(On.a,null,r.a.createElement(On.a.Group,{align:Cn.a.LEFT},r.a.createElement(dt.b,null,r.a.createElement("span",null,e.readablePath," "),r.a.createElement(cn.a,{onChange:e.handleSectionNameChange,placeholder:"Section",defaultValue:e.sectionName}," "))),r.a.createElement(On.a.Group,{align:Cn.a.RIGHT},r.a.createElement(cn.a,{onChange:e.handleCustomIdChange,placeholder:"Custom Id",defaultValue:e.customId}," "),r.a.createElement(ht.b,{icon:"key",onClick:function(){return e.handleOpenConditionSettings()}}),r.a.createElement(ht.b,{onClick:function(){return i(!o)},icon:"cog"}),r.a.createElement(ht.b,{icon:"folder-open",onClick:function(){return e.onClick(e.sectionId,e.path)}}))),r.a.createElement(ht.b,{style:{width:20},icon:"cross",onClick:function(){return e.handleDeletion(e.sectionId,e.path)}})),r.a.createElement(yn.a,{isOpen:o,keepChildrenMounted:!1},e.children))},kn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleQuestionChange",value:function(e,t){this.props.handleQuestionChange&&this.props.handleQuestionChange(e,t)}},{key:"handleDuplicatingSettingsSave",value:function(e,t){this.props.handleSectionDuplicatingSettingsChange&&this.props.handleSectionDuplicatingSettingsChange(e,t)}},{key:"handleDuplicatingSettingsCancel",value:function(){}},{key:"openConditionSettings",value:function(e){var t=this,n=e.appearingCondition;wt(r.a.createElement(_t,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:function(n){t.props.handleSectionConditionChange(e.id,n),Nt()},onCancel:Nt.bind(this),condition:n}))}},{key:"render",value:function(){var e,t=this,n=ye(this.props.parentPath);return n&&(n+="."),e=this.props.section.content.map((function(e,a){var o=t.props.parentPath.concat(a);return e instanceof Oe?r.a.createElement(En,{questionTitle:e.questionContent.content,handleMoveUp:t.props.handleMoveUp,path:o,questionId:e.id,handleDeletion:t.props.handleDeleteChildSectionOrQuestion,readablePath:n+(a+1),key:e.id,isExpanded:!1},r.a.createElement(Yt,{constants:t.props.constants,definedQuestions:t.props.definedQuestions,onChange:function(e){return t.handleQuestionChange(e,o)},question:e})):e instanceof ke?r.a.createElement(Sn,{customId:e.customId,handleCustomIdChange:function(n){return t.props.handleSectionCustomIdChange(e.id,n)},handleMoveUp:t.props.handleMoveUp,sectionName:e.name,handleSectionNameChange:function(n){return t.props.handleSectionNameChange(e.id,n)},path:o,handleDeletion:t.props.handleDeleteChildSectionOrQuestion,sectionId:e.id,readablePath:n+(a+1),handleOpenConditionSettings:function(){return t.openConditionSettings(e)},key:e.id,onClick:t.props.handleSectionClick},r.a.createElement(bn,Object.assign({definedQuestions:t.props.definedQuestions,handleSave:function(n){return t.handleDuplicatingSettingsSave(e.id,n)},handleCancel:t.handleDuplicatingSettingsCancel},e.duplicatingSettings))):null})),r.a.createElement(ut.a,{fill:!0,vertical:!0},e)}}]),t}(r.a.Component),jn=[{type:"button",name:"up-one-level",icon:"arrow-up",text:""},{type:"button",name:"save-root",icon:"floppy-disk",text:"Save Form"},{type:"button",name:"add-section",icon:"box",text:"Add Section"},{type:"button",name:"add-question",icon:"document",text:"Add Question"},{type:"button",name:"copy-state",icon:"clipboard",text:"Copy State"}],wn=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){this.props.handleItemClick&&this.props.handleItemClick(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(On.a,{fixedToTop:!0},r.a.createElement(On.a.Group,{align:Cn.a.LEFT},this.props.children,jn.map((function(t){return r.a.createElement(ht.b,{onClick:e.handleClick.bind(e,t.name),key:t.name,icon:t.icon,text:t.text,className:"bp3-minimal"})}))))}}]),t}(r.a.Component),Nn=(n(751),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selectedNodes:[],expandedNodes:[n.props.root.id],root:n.props.root||new Ne,activeSection:n.props.root,activeSectionPath:[0],constants:new ge},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"getAllEntries",value:function(e,t,n,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5?arguments[5]:void 0;if(o||(o=[]),!(e.length<=0)){var i=Ne.getFromPath(e,[n]);if(i){for(var s=t;s<i.content.length;s++){var l=i.content[s];l instanceof Oe?a!==Se.QUESTION&&a||o.push(l):l instanceof ke&&(a!==Se.SECTION&&a||o.push(l),this.getAllEntries(e.concat(s),0,n,a,!1,o))}if(r){var c=e.slice(0),u=c.pop();"number"===typeof u&&this.getAllEntries(c,u,n,a,!0,o)}return o}}}},{key:"handleAddSection",value:function(){var e=this;this.setState((function(t){var n=bt.a.clone(t.root);return n.addSection(e.state.activeSectionPath),{root:n}}),(function(){e.props.onChange&&e.props.onChange(e.state.root)}))}},{key:"handleAddQuestion",value:function(){var e=this;this.setState((function(t){var n=bt.a.clone(t.root);return n.addQuestion(e.state.activeSectionPath),{root:n}}),(function(){e.props.onChange&&e.props.onChange(e.state.root)}))}},{key:"handleDeleteQuestionOrSection",value:function(e,t){var n=this;this.setState((function(a){var r=a.activeSection,o=a.activeSectionPath,i=t.slice(0,t.length-1),s=bt.a.clone(a.root),l=Ne.getFromPath(t,[n.state.root]);if(l&&e!==l.id)throw new Error("cannot delete, id mismatch");if(l instanceof Oe)s.removeQuestion(l.id,t);else if(l instanceof ke&&(s.removeSection(l.id,t),l.id===a.activeSection.id)){var c=Ne.getFromPath(i,[n.state.root]);!c||c instanceof Oe||(r=c,o=i)}return{root:s,activeSection:r,activeSectionPath:o}}),(function(){n.props.onChange&&n.props.onChange(n.state.root)}))}},{key:"handleUpOneLevel",value:function(){if(this.state.activeSectionPath.length>1){var e=this.state.activeSectionPath.slice(0,this.state.activeSectionPath.length-1),t=Ne.getFromPath(e,[this.state.root]);!t||t instanceof Oe||this.setState((function(n){return{activeSection:t?t instanceof Oe?n.activeSection:t:n.activeSection,activeSectionPath:e}}))}}},{key:"handleSave",value:function(){this.props.onSave&&this.props.onSave(this.state.root)}},{key:"handleToolbarItemClick",value:function(e){switch(e){case"add-section":this.handleAddSection();break;case"add-question":this.handleAddQuestion();break;case"up-one-level":this.handleUpOneLevel();break;case"save-root":this.handleSave();break;case"copy-state":var t=JSON.stringify(Ne.toJSON(this.state.root));dn()(t);var n={message:"Copied state to clipboard",icon:"tick",intent:sn.a.SUCCESS};this.toasterRef.show(n)}}},{key:"handleQuestionUpdate",value:function(e,t){var n=this;this.setState((function(a){var r=bt.a.clone(a.root),o=t.slice(0,t.length-1);Ne.getFromPath(o,[r])instanceof Oe||n.state.root.questions[e.id].updateFromQuestion(e);return{root:r}}),(function(){n.props.onChange&&n.props.onChange(n.state.root)}))}},{key:"handleFormTreeNodeExpand",value:function(e,t,n){e.isExpanded=!0;var a=Ne.getFromPath(t,[this.state.root]);a&&this.setState((function(e){return{expandedNodes:a?bt.a.union([a.id],e.expandedNodes):e.expandedNodes}}))}},{key:"handleFormTreeNodeCollapse",value:function(e){this.setState((function(t){return{expandedNodes:t.expandedNodes.filter((function(t){return e.id!==t}))}}))}},{key:"handleFormTreeNodeClick",value:function(e,t,n){var a=Ne.getFromPath(t,[this.state.root]);!a||a instanceof Oe?a&&this.setState((function(e){var n=t.length>1?t.slice(0,t.length-1):t,a=Ne.getFromPath(n,[e.root]),r=Ne.getFromPath(t,[e.root]),o=e.expandedNodes,i=r?[r.id]:e.selectedNodes;return!a||a instanceof Oe||(o=bt.a.union([a.id],o),i.push(a.id)),{expandedNodes:o,selectedNodes:i,activeSection:!a||a instanceof Oe?e.activeSection:a,activeSectionPath:n}})):this.setState((function(e){var n=a?bt.a.union([a.id],e.expandedNodes):e.expandedNodes;return{selectedNodes:a?[a.id]:e.selectedNodes,expandedNodes:n,activeSection:!a||a instanceof Oe?e.activeSection:a,activeSectionPath:t}}))}},{key:"handleRootNameChange",value:function(e){var t=this;this.setState((function(t){var n=bt.a.clone(t.root);return n.name=e,{root:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.root)}))}},{key:"handleSectionChange",value:function(e,t){this.setState((function(e){var n=Ne.getFromPath(t,[e.root]),a=e.expandedNodes,r=[];return n&&n instanceof ke&&(a=bt.a.union([n.id],a),r.push(n.id)),{expandedNodes:a,selectedNodes:r,activeSection:!n||n instanceof Oe?e.activeSection:n,activeSectionPath:t}}))}},{key:"handleDuplicatingSettingsChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.root);return a.sections[e].setDuplicatingSettings(t),{root:a}}))}},{key:"handleSectionNameChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.root);return a.sections[e].name=t,{root:a}}))}},{key:"handleMoveUp",value:function(e,t){this.setState((function(e){var n=bt.a.clone(e.root),a=bt.a.clone(t);return a[a.length-1]>0&&(a[a.length-1]=a[a.length-1]-1),n.moveItem(t,a),{root:n}}))}},{key:"handleSectionConditionChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.root);return a.sections[e].appearingCondition.setLiterals(t),{root:a}}))}},{key:"handleSectionCustomIdChange",value:function(e,t){this.setState((function(n){var a=bt.a.clone(n.root);return a.sections[e].customId=t,{root:a}}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ln.a,{ref:function(t){return t?e.toasterRef=t:null}}),r.a.createElement(mn,{isOpen:!1}),r.a.createElement(wn,{handleItemClick:this.handleToolbarItemClick.bind(this)},r.a.createElement(cn.a,{value:this.state.root.name,onChange:this.handleRootNameChange.bind(this)})),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",padding:16},className:"builder-container"},r.a.createElement("div",{style:{background:"transparent",marginRight:20},className:"builder-sidebar"},r.a.createElement("div",{className:"tree-sidebar-wrapper"},r.a.createElement(fn,{expandedNodes:this.state.expandedNodes,selectedNodes:this.state.selectedNodes,handleNodeExpand:this.handleFormTreeNodeExpand.bind(this),handleNodeCollapse:this.handleFormTreeNodeCollapse.bind(this),handleNodeClick:this.handleFormTreeNodeClick.bind(this),root_:this.state.root}))),r.a.createElement("div",{style:{width:"100%"},className:""},r.a.createElement(kn,{handleSectionCustomIdChange:this.handleSectionCustomIdChange.bind(this),handleSectionConditionChange:this.handleSectionConditionChange.bind(this),handleMoveUp:this.handleMoveUp.bind(this),constants:this.state.constants,handleSectionNameChange:this.handleSectionNameChange.bind(this),definedQuestions:this.state.root.questions,handleSectionDuplicatingSettingsChange:this.handleDuplicatingSettingsChange.bind(this),handleSectionClick:this.handleSectionChange.bind(this),handleDeleteChildSectionOrQuestion:this.handleDeleteQuestionOrSection.bind(this),parentPath:this.state.activeSectionPath,handleQuestionChange:this.handleQuestionUpdate.bind(this),section:this.state.activeSection}))))}}]),t}(r.a.Component)),In=(r.a.Component,n(201)),Tn=n(200);function Fn(){var e=Object(Pe.a)(["\n    mutation SaveForm($saveFile: FormFileInput!){\n        saveForm(form: $saveFile){\n          id\n        }\n      }"]);return Fn=function(){return e},e}function An(){var e=Object(Pe.a)(["\n    query GetForm($formId:[String!]){\n        forms(id: $formId){\n          id\n          name\n          content\n        }\n      } \n"]);return An=function(){return e},e}var xn=Be()(An()),Dn=Be()(Fn());var qn=n(477),Pn=n(881);function Rn(e){switch(e.question.type.name){case ve.NUMBER:return r.a.createElement(Le.a,{key:"form-input"+e.fieldProps.input.name,value:e.fieldProps.input.value,onChange:e.fieldProps.input.onChange,type:"number"});case ve.STRING:return r.a.createElement(Le.a,{key:"form-input"+e.fieldProps.input.name,value:e.fieldProps.input.value,onChange:e.fieldProps.input.onChange,type:"text"});case ve.GEOLOCATION:return r.a.createElement(Le.a,{key:"form-input"+e.fieldProps.input.name,value:e.fieldProps.input.value,onChange:e.fieldProps.input.onChange,type:"number"});case ve.DATE:return r.a.createElement(Pn.a,Object.assign({key:"form-input"+e.fieldProps.input.name},e.fieldProps.input));case ve.SELECT:return r.a.createElement(Gn,{value:e.fieldProps.input.value,key:"form-input"+e.fieldProps.input.name,options:e.question.options,onChange:e.fieldProps.input.onChange})}}var Mn={display:"block",height:"30px",lineHeight:"30px"};function Gn(e){return r.a.createElement(Ge.a.Group,{value:e.value,onChange:e.onChange},e.options.map((function(e){return r.a.createElement(Ge.a,{style:Mn,key:e.id,value:e.id},e.text)})))}var Vn=n(109),Ln=n(439),Qn=n(256),Un=n(170);function _n(e){return r.a.createElement(Un.a,{placement:"top",title:e.title},r.a.createElement(Qe.a,{onClick:e.onClick,className:"float ".concat(e.className),type:e.type,shape:e.shape,icon:e.icon}))}var Bn=n(355);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hn=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"checkIfQuestionHasCondition",value:function(e){if(e.appearingCondition.literals.length>0)return!0;var t=e.options&&e.options.SortedOptions,n=t.groups,a=t.rootOptions;return!!n.find((function(e){return e.appearingCondition.literals.length>0}))||!!a.find((function(e){return e.appearingCondition.literals.length>0}))}},{key:"makeTree",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n[t.id]=$n({},t,{childNodes:[],_type:t instanceof ke?"section":"root"}),n[t.id].childNodes=[];for(var a=0;a<n[t.id].content.length;a++){var r=n[t.id].content[a];r.hasOwnProperty("content")?(e.makeTree(r,n),n[t.id].childNodes.push(r.id)):(n[r.id]=$n({},r,{_type:"question"}),n[t.id].childNodes.push(r.id))}return delete n[t.id].content,n}},{key:"transformValueToType",value:function(e,t){switch(e.name){case ve.BOOLEAN:return Boolean(t);case ve.DATE:return new Date(t);case ve.NUMBER:return parseFloat(t);case ve.STRING:return t;case ve.TIME:return new Date(t)}return t}},{key:"evaluateCondition",value:function(t,n,a){var r=!0,o=null;return t?(t.literals&&t.literals.forEach((function(t){var i=e.isLiteralValid(t,n,a);if(o){if(o)switch(o){case Y.AND:r=r&&i;break;case Y.OR:r=r||i}}else r=i,o=t.followingOperator})),r):r}},{key:"findValue",value:function(t,n){if(t)for(var a=Object.keys(t),r=0;r<a.length;r++){var o=a[r],i=t[o];if(Array.isArray(i)){var s=e.findValue(i[i.length-1],n);if(s)return s}else if(o===n)return i}}},{key:"getProgress",value:function(e){var t=0,n=0;return Object.keys(e).forEach((function(a){var r=e[a];t+=r.filled,n+=r.required})),t/n}},{key:"getDupeTimes",value:function(t,n){if(!t)return-1;if(t.isEnabled){var a=t.duplicateTimes;if("number"===a.type)return parseInt(a.value);var r=a.value,o=e.findValue(n,r);return o?parseInt(o):0}return-1}},{key:"collectDependencies",value:function(e){var t=[],n=[],a=[],r=[],o=null;if(e instanceof Oe||"question"===e._type){t=e&&e.appearingCondition&&e.appearingCondition.literals?e.appearingCondition.literals.map((function(e){return e.questionRef})):void 0,e.autoAnswer.answeringConditions.forEach((function(e){return e.condition.literals.forEach((function(e){return r.push(e.questionRef)}))}));var i=Object.values(e.options.optionsMap).filter((function(e){return!e.groupName}));Object.values(e.options.optionGroupMap).forEach((function(e){return e.appearingCondition&&e.appearingCondition.literals.forEach((function(e){return n.push(e.questionRef)}))})),i.forEach((function(e){return e.appearingCondition&&e.appearingCondition.literals.forEach((function(e){return a.push(e.questionRef)}))}))}else if(e instanceof ke||"section"===e._type){t=e&&e.appearingCondition&&e.appearingCondition.literals?e.appearingCondition.literals.map((function(e){return e.questionRef})):void 0,o=e.duplicatingSettings.isEnabled&&"questionRef"===e.duplicatingSettings.duplicateTimes.type?e.duplicatingSettings.duplicateTimes.value:null}var s=new Set([].concat(t,n,a,o?[o]:[]));return{all:Array.from(s),autoFillConditions:Array.from(new Set(t)),groupConditions:Array.from(new Set(n)),rootOptionConditions:Array.from(new Set(a)),duplicationRef:o}}}]),e}();Hn.isLiteralValid=function(e,t,n){var a=!0,r=t[e.questionRef],o=n[e.questionRef];if(!o)throw new Error("No question was provided");var i=Hn.transformValueToType(o.answerType,e.comparisonValue.content),s=Hn.transformValueToType(o.answerType,r);switch(e.comparisonOperator){case me.Equal:a=s===i;break;case me.Greater_Than:a=s>i;break;case me.Greater_Than_Or_Equal:a=s>=i;break;case me.Less_Than:a=s<i;break;case me.Less_Than_Or_Equal:a=s>=i}return a};var Kn=n(438);var zn=n(155),Yn=n.n(zn),Zn=n(441),Wn=n(45),Xn=function(e,t){return e.rootForms},ea=function(e,t){return t.rootId},ta=function(e,t){return e.filledForms},na=function(e,t){return e},aa=function(e,t){return t.valueLocationName||t.locationName},ra=Object(Wn.createSelector)([ta,function(e,t,n){return t.formId||n}],(function(e,t){return e.byId[t]})),oa=n(351),ia=n.n(oa),sa=function(e){return e?void 0:"Required field."},la=Object(Wn.createSelector)([Xn,ea],(function(e,t){return e.byId[t]})),ca=(Object(Wn.createSelector)([la],(function(e){return e.questions})),Object(Wn.createSelector)([la],(function(e){return e.sections}))),ua=Object(Wn.createSelector)([ca,function(e,t){return t.sectionId}],(function(e,t){return e[t]})),da=(Object(Wn.createSelector)([ua],(function(e){return e.duplicatingSetings})),ia()([ea,ta],(function(e,t){var n=[];return Object.values(t.byId).forEach((function(t){t.formId===e&&n.push(t.id)})),n}))((function(e,t){return t.rootId}))),pa=Object(Wn.createSelector)([function(e,t){return t.formId},na],(function(e,t){return Object(Zn.a)(e)(t)})),ma=Object(Wn.createSelector)([la,function(e,t){return t.questionId||t.id}],(function(e,t){return e[t]})),ha=Object(Wn.createSelector)([ma],(function(e){return e.options})),fa=Object(Wn.createSelector)([ha],(function(e){return{rootOptions:Object.values(e.optionsMap).filter((function(e){return!e.groupName})),groups:Object.values(e.optionGroupMap)}})),va=Object(Wn.createSelector)([fa],(function(e){var t=e.groups,n=e.rootOptions,a=[];return t.forEach((function(e){a=a.concat(e.appearingCondition?e.appearingCondition.literals.map((function(e){return e.questionRef})):[])})),n.forEach((function(e){a=a.concat(e.appearingCondition?e.appearingCondition.literals.map((function(e){return e.questionRef})):[])})),Array.from(new Set(a))})),ga=Object(Wn.createSelector)([aa,va,pa],(function(e,t,n){var a={};if(!n)return a;var r=Yn.a.toPath(e);return t.forEach((function(e){var t=function e(t,n,a){if(0!==n.length){var r=n.slice(0);r.splice(n.length-1,1,a);var o=Yn.a.get(t,r);return o||(r.splice(r.length-1,1),e(t,r,a))}}(n,r,e);t&&(a[e]=t)})),a})),ba=(Object(Wn.createSelector)([ma],(function(e){return e.questionContent.content})),Object(Wn.createSelector)([ma],(function(e){return e.answerType})),Object(Wn.createSelector)([fa,ga,la],(function(e,t,n){var a=e.groups,r=e.rootOptions;return{groups:a.filter((function(e){return Hn.evaluateCondition(e.appearingCondition,t,n)})),rootOptions:r.filter((function(e){return Hn.evaluateCondition(e.appearingCondition,t,n)}))}}))),ya=Object(Wn.createSelector)(ba,(function(e){var t=e.groups,n=e.rootOptions,a=[];return t.forEach((function(e){return e.members.forEach((function(e){a.push({id:e.id,text:e.value})}))})),n.forEach((function(e){a.push({id:e.id,text:e.value})})),a})),Ea=ia()([aa,na,da],(function(e,t,n){var a=[];n.forEach((function(e){a.push(Object(Zn.a)(e)(t))}));var r=Yn.a.toPath(e),o={};return a.forEach((function(e){var t=Yn.a.get(e,r);t&&(t=t.trim(),o[t]?o[t].strength++:o[t]={text:t,strength:1})})),Object.values(o).sort((function(e,t){return t.strength-e.strength}))}))((function(e,t){return t.locationName})),Oa=(Object(Wn.createSelector)(ma,(function(e){var t=[];return e.isRequired&&t.push(sa),t})),Object(Wn.createSelector)([ra,Xn],(function(e,t){var n=e.formId;return t.byId[n]}))),Ca=Object(Wn.createSelector)([Oa,function(e,t,n){return n||t.id||t.sectionId||t.questionId}],(function(e,t){return e[t]})),Sa=Object(Wn.createSelector)([Ca],(function(e){return e._type})),ka=(Object(Wn.createSelector)([Ca],(function(e){return e.name})),Object(Wn.createSelector)([Ca],(function(e){return e.childNodes}))),ja=Object(Wn.createSelector)([ra,Oa],(function(e,t){return t[e.formId]})),wa=(Object(Wn.createSelector)([ja],(function(e){return e.childNodes})),Object(Wn.createSelector)([Ca],(function(e){return e.duplicatingSettings}))),Na=Object(Wn.createSelector)([wa,aa,pa],(function(e,t,n){if(e&&e.isEnabled){var a=e.duplicateTimes;if("number"===a.type)return parseInt(a.value);var r=function e(t,n){if(!t)return;for(var a=Object.keys(t),r=0;r<a.length;r++){var o=a[r],i=t[o];if(Array.isArray(i)){var s=e(i[i.length-1],n);if(s)return s}else if(o===n)return i}return}(n,a.value);return r?parseInt(r):0}return-1})),Ia=Object(Wn.createSelector)([Oa,pa,ea],(function(e,t,n){var a={};return function e(t,n,a,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!t.appearingCondition||Hn.evaluateCondition(t.appearingCondition,n,a);o[t.id]||(o[t.id]={filled:0,required:0,unfilled:[],dupe:-1});if(s){var l=Hn.getDupeTimes(t.duplicatingSettings,n),c=-1===l?1:l;o[t.id].dupe=l;for(var u=function(s){t.childNodes.forEach((function(l,c){var u=i?[l]:Yn.a.toPath(r).concat(s.toString(),l);"question"===a[l]._type?!a[l].isRequired||(!!Yn.a.get(n,u)?o[t.id].filled++:o[t.id].unfilled.push(u),o[t.id].required++):e(a[l],n,a,u,o)}))},d=0;d<c;d++)u(d)}}(e[n],t,e,"",a,!0),a}));Object(Wn.createSelector)([ta,na,Xn],(function(e,t,n){return Object.keys(e.byId).map((function(a){var r=e.byId[a].formId,o=Object(Zn.a)(a)(t),i=n.byId[r].name;return{formId:a,rootId:r,startedDate:e.byId[a].startedDate,count:Ia(t,{formId:a,rootId:r}),submitted:e.byId[a].submitted,values:o,formName:i||"Main Form"}}))}));var Ta=Object(Wn.createSelector)([na,function(e,t){return t}],(function(e,t){return function(n){return Sa(e,t,n)}})),Fa=Object(f.b)((function(e,t){var n=Ca(e,t),a=n.answerType,r=n.questionContent.content,o=Hn.collectDependencies(n);return{isRequired:n.isRequired,autoCompleteData:Ea(e,t),isDependent:o.all.length>0,dependencies:o,title:r,type:a,options:a.name===ve.SELECT?ya(e,t):[]}}),null)((function(e){var t=Object(a.useContext)($a),n=e.isRequired,o=e.autoCompleteData,i=e.options,s=e.type,l=e.dependencies,c=e.title,u=e.path;return r.a.createElement(Kn.a,{key:"field"+e.locationName,name:e.locationName,props:{isRequired:n,autoCompleteData:o,options:i,type:s,dependencies:l,title:c,path:u},component:t.renderQuestion})}));function Aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aa(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Da=function(e,t){return t.map((function(t,n){return function(e){var t=e.formId,n=e.rootId,a=e.typeChecker,o=e.path,i=e.locationName,s=e.id,l=e.index,c=e.iteration,u=e.hideIterationInPath,d=e.isInRootNode,p=u?o.concat(l):o.concat(c,l),m=d?s:i.concat("[".concat(c,"].").concat(s));return"section"===a(s)?r.a.createElement(Ra,{formId:t,rootId:n,key:m,id:s,path:p,locationName:m}):r.a.createElement(Fa,{key:m,formId:t,rootId:n,id:s,path:p,locationName:m})}(xa({},e,{index:n,id:t}))}))},qa=function(e,t,n){return r.a.createElement(Bn.a,{defaultActiveKey:"0",tabPosition:"top"},Object(et.a)(Array(n).keys()).map((function(n){return r.a.createElement(Bn.a.TabPane,{tab:"Record-".concat(n),key:n.toString()},r.a.createElement("div",{style:{maxHeight:580,overflow:"auto"}},Da(xa({},e,{iteration:n}),t)))})))};function Pa(){return r.a.createElement(In.a,{image:In.a.PRESENTED_IMAGE_SIMPLE,description:"Not Required to Fill"})}var Ra=Object(f.b)((function(e,t){var n=Na(e,t),a=Ca(e,t,t.id);return{childNodes:ka(e,t),name:a.name,duplicateTimes:n,typeChecker:Ta(e,t)}}),null)((function(e){var t=Object(a.useContext)($a);return r.a.createElement(Te.a,{style:{marginTop:16}},t.renderSectionHeader(e.name,e.path,e.rootId===e.id?"root":"section"),function(t){var n={formId:e.formId,rootId:e.rootId,typeChecker:e.typeChecker,path:e.path,locationName:e.locationName,iteration:0,hideIterationInPath:!0,isInRootNode:e.rootId===e.id,index:void 0,id:void 0};return-1!==t?0===t?r.a.createElement(Pa,{key:"nr"+e.locationName}):qa(xa({},n,{hideIterationInPath:!1}),e.childNodes,t):Da(n,e.childNodes)}(e.duplicateTimes))}));function Ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ma(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Va(){var e=Object(Pe.a)(["\nquery GetForm($id: [String]!){\n    forms(id:$id){\n      id\n      content\n      name\n      \n  \n    }\n  }\n  "]);return Va=function(){return e},e}function La(){var e=Object(Pe.a)(["\nquery getFilled($ids: [String]!){\n    getFilledFormById(ids:$ids){\n      id\n      formId\n      answerStore\n      completedDate\n      startedDate\n      filledBy{\n          firstName\n          lastName\n          email\n      }\n    }\n  }"]);return La=function(){return e},e}function Qa(){var e=Object(Pe.a)(["\nmutation SaveForm($filledForm: FilledFormInput!){\n    saveFilledForm(filledForm: $filledForm){\n        completedDate\n    }\n}"]);return Qa=function(){return e},e}var Ua=Be()(Qa()),_a=Be()(La()),Ba=Be()(Va());var Ja=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).client=void 0,n.state={isSaveConfirmVisible:!1},n.toggleSaveConfirmVisibility=function(){n.setState({isSaveConfirmVisible:!n.state.isSaveConfirmVisible})},n.saveForm=function(){n.props.handleSubmit((function(e){var t=Object(L.a)(n.props.filledForm,(function(t){delete t.filledBy,t.answerStore=JSON.stringify(e)}));n.client.mutate({mutation:Ua,variables:{filledForm:t}}).then((function(e){Me.a.success("Form has been submitted."),n.toggleSaveConfirmVisibility()})).catch((function(e){throw Me.a.error("Something went wrong, try again later!"),new Qn.a({_error:"Could not save the form!"})}))}))()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=new URLSearchParams(this.props.location.search),n=t.get("rootId"),a=t.get("formId");Promise.all([this.client.query({query:_a,variables:{ids:[a]}}),this.client.query({query:Ba,variables:{id:[n]}})]).then((function(t){var r=t[0].data,o=t[1].data;if(r.getFilledFormById[0]&&o.forms){var i=o.forms[0];"string"===typeof i.content&&(i.content=JSON.parse(i.content));var s=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Ga({},t,{_type:t instanceof ke?"section":"root",childNodes:[]}),r=0;r<t.content.length;r++){var o=t.content[r];if(o instanceof ke)a.childNodes.push(o.id),e(o,n);else{a.childNodes.push(o.id);var i=Ga({},o,{_type:"question"});n[o.id]=i}}return n[t.id]=a,n}(Ne.fromJSON(i));e.handleRootFormAdd(n,s);var l=r.getFilledFormById[0];"string"===typeof l.answerStore&&(l.answerStore=JSON.parse(l.answerStore)),e.initializeForm(a,l.answerStore);var c={formId:l.formId,id:l.id,completedDate:l.completedDate,filledBy:l.filledBy,startedDate:l.startedDate};e.handleFilledFormAdd(a,c)}}))}},{key:"render",value:function(){var e=this,t=new URLSearchParams(this.props.location.search),n=t.get("rootId"),a=t.get("formId"),o=this.props,i="";if(o.rootForm&&o.rootForm[n]){var s=o.rootForm[n];"root"===s._type&&(i=s.name)}return r.a.createElement(Re.a,null,(function(t){return e.client=t,r.a.createElement($a.Provider,{value:{renderQuestion:o.renderQuestion,renderSectionHeader:o.renderSectionHeader}},o.filledForm&&o.rootForm&&o.renderRootSectionHeader&&o.renderRootSectionHeader(o.filledForm,i),r.a.createElement(nt.a,{spinning:!o.filledForm||!o.rootForm},o.filledForm&&o.rootForm&&r.a.createElement(Ra,{rootId:n,id:n,formId:a,path:[0],locationName:""})),r.a.createElement(rt.a,{title:"Are you sure you want to make the changes?",visible:e.state.isSaveConfirmVisible,onConfirm:e.saveForm,onCancel:e.toggleSaveConfirmVisibility,placement:"left"},r.a.createElement(_n,{onClick:e.toggleSaveConfirmVisibility,title:"Save Form",type:"primary",shape:"circle",icon:"save"})))}))}}]),t}(r.a.Component),$a=r.a.createContext({renderSectionHeader:function(e,t){return null},renderQuestion:function(){return null}}),Ha=Object(Ln.a)({destroyOnUnmount:!1})(Ja),Ka=Object(f.b)((function(e,t){var n=new URLSearchParams(t.location.search),a=n.get("formId"),r=n.get("rootId");return{form:a,filledForm:e.filledForms.byId[a],rootForm:e.rootForms.byId[r]}}),(function(e){return{handleRootFormAdd:function(t,n){return e({type:S,payload:{id:t,root:n}})},handleFilledFormAdd:function(t,n){return e(function(e,t){return{type:C,payload:{id:e,filledForm:t}}}(t,n))},initializeForm:function(t,n){return e(Object(Vn.b)(t,n))}}}))(Ha),za=Object(g.i)(Ka),Ya=n(122),Za=n(476),Wa=n(354),Xa=n.n(Wa),er=n(887);function tr(){var e=Object(Pe.a)(["\n    mutation MakeUnavailable($formIds:[String]!,$surveyors:[String]!){\n        makeFormsUnavailableFor(formIds:$formIds, surveyorEmails:$surveyors){\n            message\n        }\n    }\n"]);return tr=function(){return e},e}function nr(){var e=Object(Pe.a)(["\n    mutation MakeAvailable($formIds:[String]!,$surveyors:[String]!){\n        makeFormsAvailableFor(formIds:$formIds, surveyorEmails:$surveyors){\n            message\n        }\n    }\n"]);return nr=function(){return e},e}function ar(){var e=Object(Pe.a)(["\n    query($ids: [String]){\n        forms(id: $ids){\n          name\n          assignedTo{\n              _id\n              email\n             \n          }\n        }\n      } \n"]);return ar=function(){return e},e}function rr(){var e=Object(Pe.a)(["query{\n    users{\n      _id\n      firstName\n      lastName\n      email\n      accountType\n      availableForms{\n        id\n        name\n      }\n    }\n  }"]);return rr=function(){return e},e}var or=Be()(rr()),ir=Be()(ar()),sr=Be()(nr()),lr=Be()(tr());function cr(e){var t=Object(a.useState)([]),n=Object(y.a)(t,2),o=n[0],i=n[1],s=Object(a.useState)([]),l=Object(y.a)(s,2),c=l[0],u=l[1],d=Object(tt.b)(or,{}),p=d.data,m=(d.error,d.loading),h=Object(tt.b)(ir,{variables:{ids:[e.formId]},onCompleted:function(e){u(e.forms[0]?e.forms[0].assignedTo.map((function(e){return e.email})):[]),i(e.forms[0]?e.forms[0].assignedTo.map((function(e){return e.email})):[])}}),f=h.data,v=(h.error,h.loading),g=Object(tt.a)(sr),b=Object(y.a)(g,1)[0],E=Object(tt.a)(lr),O=Object(y.a)(E,1)[0],C=function(){var t=Object(qe.a)(we.a.mark((function t(){var n,a,r,i;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=o,a=[],c.forEach((function(e){n.includes(e)||a.push(e)})),r=b({variables:{formIds:[e.formId],surveyors:n}}),i=O({variables:{formIds:[e.formId],surveyors:a}}),Promise.all([r,i]).then((function(t){Me.a.success("Sucessfully made changes."),e.onOk&&e.onOk()})).catch((function(e){Me.a.error("Something went wrong, please try again later.")}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(x.a,{visible:e.visible,onCancel:function(){e.onCancel&&e.onCancel()},onOk:C},r.a.createElement(nt.a,{spinning:m||v},r.a.createElement(er.a,{titles:["All Users","Available To"],dataSource:f&&p?p.users.filter((function(e){return"surveyor"===e.accountType})).map((function(e){return{key:e.email,title:e.firstName+" "+e.lastName,email:e.email}})):[],targetKeys:o,onChange:function(e){i(e)},render:function(e){return r.a.createElement(Un.a,{placement:"top",title:e.email},r.a.createElement(Ue.a.Text,null,e.title))}})))}var ur=function(e){var t=Object(a.useState)(null),n=Object(y.a)(t,2),o=n[0],i=n[1],s=Object(tt.a)(Dn),l=Object(y.a)(s,2),c=l[0],u=(l[1].data,Object(a.useState)("")),d=Object(y.a)(u,2),p=(d[0],d[1]),m=function(){var t=Object(qe.a)(we.a.mark((function t(){var n,a,r,s,l;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=o)||p("Form Name cannot be empty"),a=(new Ne).setName(n),(r=Ne.toJSON(a)).content=JSON.stringify(r.content),t.next=7,c({variables:{saveFile:r}});case 7:if(s=t.sent,l=s.errors,s.data,!l){t.next=13;break}return e.onCreationFailed&&e.onCreationFailed(l),t.abrupt("return");case 13:i(""),e.onCreationSuccess&&e.onCreationSuccess(a.id);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement(x.a,{destroyOnClose:!0,centered:!0,okText:"Create",title:"Create New Form",onCancel:function(){i(""),e.onCancel&&e.onCancel()},onOk:m,visible:e.isOpen},r.a.createElement(Ve.a.Item,{label:"Form Name"},r.a.createElement(Le.a,{onChange:function(e){return i(e.currentTarget.value)}})))};function dr(){var e=Object(Pe.a)(["\n      mutation($formIds: [String]!){\n          deleteForm(id:$formIds){\n              message\n          }\n      }\n"]);return dr=function(){return e},e}function pr(){var e=Object(Pe.a)(["\n    query{\n        forms{\n          id\n          name\n          createdAt\n          updatedAt\n          assignedTo{\n              _id\n              firstName\n              lastName\n          }\n        }\n      } \n\n"]);return pr=function(){return e},e}var mr=Be()(pr()),hr=Be()(dr());function fr(e){return r.a.createElement(In.a,{image:In.a.PRESENTED_IMAGE_DEFAULT,description:r.a.createElement("span",null,"No Forms found!")},r.a.createElement(Qe.a,{onClick:e.onCreateClick,type:"primary"},"Create Form"))}var vr=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Statisctics"))}}]),t}(a.Component),gr=n(882);n(822);function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){Object(U.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Er(){var e=Object(Pe.a)(["mutation(\n    $email: String!\n    $firstName: String!\n    $lastName: String!\n    $password: String!\n    $createdBy: String!\n  ) {\n    register(\n      user: {\n        email: $email\n        firstName: $firstName\n        lastName: $lastName\n        password: $password\n        accountType: "," \n        createdBy: $createdBy\n      }\n    ) {\n      _id\n    }\n  }\n  "]);return Er=function(){return e},e}var Or=function(e){return Be()(Er(),e)};var Cr=function(e){var t=e.input,n=e.label,a=e.type,o=e.meta,i=o.touched,s=o.error,l=o.warning;return r.a.createElement(Ve.a.Item,null,r.a.createElement(Le.a,Object.assign({placeholder:n,autoComplete:"autocomplete_off_hack_xfr4!k"},t,{type:a})),i&&(s&&r.a.createElement("span",{style:{color:"red",top:0,bottom:0}},s)||l&&r.a.createElement("span",null,l)))};var Sr=Object(f.b)((function(e,t){return{userId:e.user.id}}),null)((function(e){var t=Object(tt.a)(Or(e.signUpType),{errorPolicy:"none"}),n=Object(y.a)(t,2),a=n[0],o=(n[1],e.handleSubmit),i=(e.pristine,e.reset,e.submitting),s=function(){var t=Object(qe.a)(we.a.mark((function t(n){var r;return we.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=yr({},n,{createdBy:e.userId}),t.abrupt("return",a({variables:r}).then((function(e){return Me.a.success("".concat(r.firstName," has been signed up!")),!0})).catch((function(e){throw new Qn.a({_error:e.message.split(":")[1]})})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(Te.a,null,r.a.createElement(nt.a,{spinning:i},r.a.createElement("form",{onSubmit:o(s)},r.a.createElement(Kn.a,{name:"firstName",label:"First Name",type:"text",component:Cr}),r.a.createElement(Kn.a,{name:"lastName",type:"text",label:"Last Name",component:Cr}),r.a.createElement(Kn.a,{name:"email",component:Cr,type:"text",label:"Email Address"}),r.a.createElement(Kn.a,{name:"password",label:"Password",type:"password",component:Cr}),e.error&&r.a.createElement("strong",{className:"error"},e.error),r.a.createElement(Qe.a,{style:{width:"100%"},disabled:i,htmlType:"submit",icon:"user-add"},"Submit"))))})),kr=Object(Ln.a)({form:"signUpUser",validate:function(e){var t={};return e.firstName?e.firstName.length<2&&(t.firstName="Must be 2 characters or more"):t.firstName="Required",e.lastName||(t.lastName="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",t},asyncBlurFields:["firstName","lastName","email","password"]})(Sr);function jr(){var e=Object(Pe.a)(["query{\n    users{\n      _id\n      firstName\n      lastName\n      email\n      accountType\n      filledForms{\n        id\n        \n      }\n      createdForms{\n        id\n        name\n      }\n      availableForms{\n        id\n        name\n      }\n    }\n  }"]);return jr=function(){return e},e}var wr,Nr,Ir=Ue.a.Paragraph,Tr=Be()(jr());!function(e){e.ADMIN="admin",e.SURVEYOR="surveyor"}(wr||(wr={})),function(e){e.ADMIN="admin",e.SURVEYOR="surveyor",e.ALL="all"}(Nr||(Nr={}));var Fr=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedTab:wr.SURVEYOR,signUpType:wr.SURVEYOR,isSignUpDialogOpen:!1,filterType:Nr.ALL},n.handleTabChange=function(e){n.setState({selectedTab:e})},n.toggleSignUpDialog=function(){n.setState((function(e){return{isSignUpDialogOpen:!e.isSignUpDialogOpen}}))},n.handleAddUserClick=function(e){n.setState({signUpType:e},(function(){n.toggleSignUpDialog()}))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getAddUserButton",value:function(){return r.a.createElement(Qe.a,{onClick:this.toggleSignUpDialog,icon:"user"},"admin"===this.state.selectedTab?"Add Admin":"Add Surveyor")}},{key:"filterUsersByType",value:function(e){this.setState({filterType:e})}},{key:"render",value:function(){var e=this;return r.a.createElement(Te.a,{style:{width:"100%",height:"100%"}},r.a.createElement(Fe.a,{title:"Users",style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[r.a.createElement(Qe.a,{onClick:function(){return e.handleAddUserClick(wr.SURVEYOR)},icon:"user-add",type:"primary",key:"3"},"Add Surveyor"),r.a.createElement(Qe.a,{onClick:function(){return e.handleAddUserClick(wr.ADMIN)},icon:"user-add",type:"primary",key:"2"},"Add Admin")],avatar:{src:"https://avatars1.githubusercontent.com/u/8186664?s=460&v=4"}},r.a.createElement("div",null,this.Content)),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ar,{filterUsersByType:this.state.filterType})),r.a.createElement(x.a,{centered:!0,destroyOnClose:!0,onCancel:this.toggleSignUpDialog,visible:this.state.isSignUpDialogOpen,title:"Create ".concat(this.state.selectedTab)},r.a.createElement(kr,{signUpType:this.state.signUpType})))}},{key:"Content",get:function(){return r.a.createElement("div",{className:"user-content"},r.a.createElement(Ir,null,"Create surveyor and assign them the forms you created."),r.a.createElement(Ir,null,"Or create admin users who can collaborate with you on creating forms and managing the collected data."),r.a.createElement(Tn.a,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},r.a.createElement(Ya.a,{span:12},r.a.createElement(Le.a.Search,{type:"",size:"large",placeholder:"Find Users..."}))))}}]),t}(a.Component);function Ar(e){var t=Object(tt.b)(Tr,{pollInterval:2e3}),n=t.loading,a=t.data,o=(t.error,[{key:"name",title:"Name",dataIndex:"name",sorter:function(e,t){return e.name.length-t.name.length},ellipsis:!0},{key:"email",title:"Email",dataIndex:"email",sorter:function(e,t){return e.name.length-t.name.length},filteredValue:[e.filterUsersByType]},{key:"role",title:"Role",dataIndex:"role",filters:[{text:"Admins",value:"admin"},{text:"Surveyors",value:"surveyor"}],onFilter:function(e,t){return t.role.includes(e)}},{key:"filledforms",title:"Filled Forms",dataIndex:"filledFormsCount"},{key:"assignedForms",title:"Assigned Forms",dataIndex:"assignedForms",render:function(e,t,n){return r.a.createElement("span",{key:"assignedForms"+n},e.map((function(e){return r.a.createElement(Za.a,{key:e.id,title:e.name},e.name)})))}}]);return function(){var e=[];return a&&a.users&&(e=a.users.map((function(e){return{name:e.firstName+" "+e.lastName,email:e.email,filledFormsCount:e.filledForms.length,assignedForms:e.availableForms,role:e.accountType}}))),r.a.createElement(nt.a,{spinning:n},r.a.createElement(gr.a,{pagination:{pageSize:50},scroll:{y:400},key:"surveyorstable",rowKey:function(e){return e._id},columns:o,dataSource:e}))}()}var xr=n(885),Dr=n(287),qr=n(2),Pr=n.n(qr),Rr=xr.a.TreeNode,Mr=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderTreeNode=function(e){return"question"===e._type?r.a.createElement(Rr,{className:Pr()("tree-question-node","c-tree-node"),icon:r.a.createElement(D.a,{type:"form"}),title:r.a.createElement(Ue.a.Text,{ellipsis:!0},e.questionContent.content),key:e.id}):e.childNodes?r.a.createElement(Rr,{className:"c-tree-node",title:r.a.createElement(Ue.a.Text,{ellipsis:!0},e.name),key:e.id},e.childNodes.map((function(e){return n.renderTreeNode(n.props.tree[e])}))):void 0},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tree,n=e.rootId;return r.a.createElement(Te.a,null,r.a.createElement(xr.a,{showLine:!0,switcherIcon:r.a.createElement(D.a,{type:"down"}),defaultExpandAll:!0,onSelect:this.props.onSelect},this.renderTreeNode(t[n])))}}]),t}(a.Component),Gr=(E.a.Header,E.a.Footer),Vr=(E.a.Sider,E.a.Content,xr.a.TreeNode,{name:"Root",id:Ee("root-"),childNodes:[],_type:"root"}),Lr=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={selectedNode:null,tree:Object(U.a)({},Vr.id,Vr),rootId:Vr.id,currentSectionId:Vr.id},n.onSelect=function(e){console.log(e)},n.handleActionMenuItemClick=function(e){var t=e.key;if("add-section"===t){var a={_type:"section",appearingCondition:void 0,childNodes:[],customId:void 0,id:Ee("section-"),duplicatingSettings:void 0,name:""};n.props.handleAddItemInForm&&n.props.handleAddItemInForm(n.props.formId,a,n.state.currentSectionId)}else if("add-question"===t)Ee("root-")},n.renderMenu=r.a.createElement(O.a,{onClick:n.handleActionMenuItemClick},r.a.createElement(O.a.Item,{key:"add-section"},"Section"),r.a.createElement(O.a.Item,{key:"add-question"},"Question")),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(Te.a,null,r.a.createElement(Tn.a,null,r.a.createElement(Tn.a,{type:"flex",style:{padding:20,minHeight:50}},r.a.createElement(Ya.a,{span:6},r.a.createElement("div",{style:{padding:"0px 12px",display:"flex",justifyContent:"space-between"}},r.a.createElement(Dr.a,{overlay:this.renderMenu},r.a.createElement(Qe.a,null,"Add ",r.a.createElement(D.a,{type:"down"}))),r.a.createElement(Qe.a,{type:"danger",icon:"delete"}))),r.a.createElement(Ya.a,{span:18},"content header")),r.a.createElement(Tn.a,{style:{minHeight:700,padding:20}},r.a.createElement(Ya.a,{span:6},r.a.createElement(Mr,{tree:this.state.tree,rootId:this.state.rootId,onSelect:function(){console.log("clicked")}}),r.a.createElement(Ie.a,{type:"vertical"})),r.a.createElement(Ya.a,{span:18},"content"))),r.a.createElement(Gr,null,"Stats"))}}]),t}(r.a.Component),Qr=[{title:"Forms",routeKey:"/forms",icon:"form",component:r.a.createElement((function(e){var t=Object(tt.b)(mr,{pollInterval:1e3}),n=t.loading,o=t.error,i=t.data,s=Object(tt.a)(hr),l=Object(y.a)(s,2),c=l[0],u=(l[1].data,Object(a.useState)(!1)),d=Object(y.a)(u,2),p=d[0],m=d[1],h=Object(a.useState)(null),f=Object(y.a)(h,2),g=f[0],b=f[1],E=function(){var e=Object(qe.a)(we.a.mark((function e(t){var n;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{formIds:t}});case 2:n=e.sent,n.data,n.errors?Me.a.error("Could not delete the form file, try again later!"):Me.a.success("Successfully deleted!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=r.a.createElement("div",{className:"form-content"},r.a.createElement(Xa.a,null,"Manage your forms and assign or unassign to your surveyors."),r.a.createElement(Xa.a,null),r.a.createElement(Tn.a,{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end"}},r.a.createElement(Ya.a,{span:12},r.a.createElement(Le.a.Search,{type:"",size:"large",placeholder:"Find Users..."}))));return n||!o&&i&&0!==i.forms.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(cr,{onOk:function(){return b(null)},onCancel:function(){return b(null)},formId:g,visible:!!g}),r.a.createElement(ur,{onCancel:function(){return m(!1)},isOpen:p,onCreationSuccess:function(){m(!1)}}),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{title:"Forms",style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[r.a.createElement(Qe.a,{onClick:function(){return m(!0)},icon:"file",type:"primary",key:"3"},"Create Form")],avatar:{icon:"file"}},r.a.createElement("div",null,O)),r.a.createElement(at.a,{loading:n,itemLayout:"horizontal",dataSource:i&&i.forms||[],renderItem:function(e){return r.a.createElement(at.a.Item,{actions:[r.a.createElement(Qe.a,{onClick:function(){b(e.id)},type:"primary",icon:"user-add",key:"add-user"}),r.a.createElement(rt.a,{placement:"left",arrowPointAtCenter:!0,title:"Are you sure you want to delete this form?",onCancel:function(){},onConfirm:function(){return E([e.id])}},r.a.createElement(Qe.a,{type:"danger",icon:"delete",key:"delete"}))]},r.a.createElement(ot.a,{loading:n,active:!0,avatar:!0},r.a.createElement(at.a.Item.Meta,{avatar:r.a.createElement(it.a,{shape:"square",size:64,icon:"file-text"}),title:r.a.createElement(v.b,{to:"/formbuilder?id=".concat(e.id)},e.name),description:new Date(parseInt(e.updatedAt)).toLocaleTimeString()}),r.a.createElement("div",null,e.assignedTo.map((function(e){return r.a.createElement(Za.a,{key:e._id},e.firstName+" "+e.lastName)})))))}}))):r.a.createElement(fr,{onCreateClick:function(){return m(!0)}})}),null),children:[]},{title:"Surveyors",routeKey:"/surveyors",icon:"user",component:r.a.createElement(Fr,null),children:[]},{title:"Statistics",routeKey:"/statistics",icon:"pie-chart",component:r.a.createElement(vr,null),children:[]},{title:"Form Builder",routeKey:"/formbuilder",hideOnSidebar:!0,icon:"form",children:[],component:r.a.createElement((function(){var e=new URLSearchParams(Object(g.h)().search),t=Object(tt.a)(Dn),n=Object(y.a)(t,2),o=n[0],i=(n[1].data,Object(a.useState)(!1)),s=Object(y.a)(i,2),l=s[0],c=s[1],u=Object(g.g)(),d=function(){var e=Object(qe.a)(we.a.mark((function e(t){var n,a;return we.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=11;break}return(n=Ne.toJSON(t)).content=JSON.stringify(n.content),c(!0),e.next=6,o({variables:{saveFile:n}});case 6:a=e.sent,a.data,a.errors?Me.a.error("Form could not be saved"):Me.a.success("Form has been saved"),c(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=e.get("id"),m=Object(tt.b)(xn,{variables:{formId:[p]}}),h=m.data,f=m.loading,v=m.error;return r.a.createElement(Re.a,null,(function(e){return r.a.createElement(nt.a,{spinning:f},function(e){if(!f&&(v||!h))return r.a.createElement(In.a,{image:In.a.PRESENTED_IMAGE_DEFAULT,description:"Please create a new Form by going back to Home"},r.a.createElement(Qe.a,{icon:"home",onClick:function(){return u.replace("/forms")}}," Home"));if(f)return r.a.createElement(Tn.a,{style:{marginTop:60}});var t;if(0===h.forms.length)Me.a.success("Started a new form!"),t=new Ne;else{var n=h.forms[0];n.content="string"===typeof n.content?JSON.parse(n.content):n.content,t=Ne.fromJSON(n)}return r.a.createElement(Nn,{token:"",onChange:function(){},onSave:d,root:t})}())}))}),null)},{title:"Filled Forms",routeKey:"/filledForms",hideOnSidebar:!1,icon:"form",children:[],component:r.a.createElement((function(e){var t=Object(tt.b)(ct,{variables:{pagination:{offset:0,limit:5}}}),n=t.data,a=t.loading,o=(t.error,t.fetchMore),i=function(e){var t=e.key,a=e.index,o=e.style,i=n.getFilledForms.forms[a];return i||(i={loading:!0,id:"",updatedAt:"",completedDate:"",filledBy:{}}),i.loading?r.a.createElement(nt.a,{style:o,key:t}):r.a.createElement(at.a.Item,{key:"li"+t,style:o,actions:[r.a.createElement(rt.a,{placement:"left",arrowPointAtCenter:!0,title:"Are you sure you want to delete this form?",onCancel:function(){},onConfirm:function(){i.id}},r.a.createElement(Qe.a,{type:"danger",icon:"delete",key:"delete"}))]},r.a.createElement(ot.a,{loading:i.loading,avatar:!0},r.a.createElement(at.a.Item.Meta,{avatar:r.a.createElement(it.a,{shape:"square",size:64,icon:"file-text"}),title:r.a.createElement(v.b,{to:"/formviewer?formId=".concat(i.id,"&rootId=").concat(i.formId)},i.id),description:r.a.createElement(Ae.a,{layout:"vertical",size:"small"},r.a.createElement(Ae.a.Item,{label:"Surveyor Name"},i.filledBy.firstName+" "+i.filledBy.lastName),r.a.createElement(Ae.a.Item,{label:"Email"},i.filledBy.email),r.a.createElement(Ae.a.Item,{label:"Completed Date"},new Date(parseInt(i.completedDate)).toDateString()))})))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{title:"Filled forms",style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[],avatar:{icon:"file"}},r.a.createElement("div",null,r.a.createElement(Ue.a.Paragraph,null,"Review submitted forms and make changes to the form if necessary."))),r.a.createElement(nt.a,{spinning:a},r.a.createElement(st.b,{isRowLoaded:function(e){var t=e.index;return n&&n.getFilledForms&&!!n.getFilledForms.forms[t]},loadMoreRows:function(){return o({variables:{pagination:{offset:n&&n.getFileldForms?n.getFilledForms.forms.length:0,limit:5}},updateQuery:function(e,t){var n=t.fetchMoreResult;return n?Object(L.a)(e,(function(t){t.getFilledForms.forms=[].concat(Object(et.a)(e.getFilledForms.forms),Object(et.a)(n.getFilledForms.forms)),t.getFilledForms.totalCount=n.getFilledForms.totalCount})):e}})},rowCount:n&&n.getFilledForms&&n.getFilledForms.totalCount||0},(function(e){var t=e.onRowsRendered,a=e.registerChild;return r.a.createElement(st.a,{disableHeight:!0},(function(e){var o=e.width;return r.a.createElement(st.c,{height:600,onRowsRendered:t,ref:a,rowCount:n&&n.getFilledForms&&n.getFilledForms.totalCount||0,rowRenderer:i,width:o,rowHeight:100})}))})))))}),null)},{title:"Manage Database",routeKey:"/database_management",hideOnSidebar:!1,icon:"database",children:[],component:r.a.createElement(Xe,null)},{title:"New Form Builder",routeKey:"/newFormBuilder",hideOnSidebar:!1,icon:"form",children:[],component:r.a.createElement(Lr,null)},{title:"Form Builder",routeKey:"/formviewer",hideOnSidebar:!0,icon:"form",children:[],component:r.a.createElement(za,{renderSectionHeader:function(e,t,n){return"root"===n?null:r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(De.a,{level:"section"===n?4:3},"".concat(ye(t)," ").concat(e)),r.a.createElement(Ie.a,{type:"horizontal"}))},renderQuestion:function(e){e.input,e.meta;var t=Object(qn.a)(e,["input","meta"]),n=r.a.createElement("div",null,r.a.createElement("strong",null,ye(t.path)," ",t.title," ",e.isRequired?"*":""));return r.a.createElement(Ve.a.Item,{key:"form-item"+e.input.name},n,r.a.createElement(Rn,{key:"form-question"+e.input.name,question:t,path:t.path,fieldProps:e}))},renderRootSectionHeader:function(e,t){return console.log(e),r.a.createElement(Te.a,null,r.a.createElement(Fe.a,{title:t,style:{border:"1px solid rgb(235, 237, 240)"},subTitle:"",extra:[],avatar:{icon:"file"}},r.a.createElement("div",null,r.a.createElement(Ae.a,{title:"Surveyor Information"},r.a.createElement(Ae.a.Item,{label:"Name"},e.filledBy.firstName+" "+e.filledBy.lastName),r.a.createElement(Ae.a.Item,{label:"Started Date"},new Date(parseInt("".concat(e.startedDate))).toLocaleDateString()),r.a.createElement(Ae.a.Item,{label:"Completed Date"},new Date(parseInt("".concat(e.completedDate))).toLocaleDateString())))))}})}],Ur=O.a.SubMenu;Ue.a.Title;function _r(e){return e.isVisible?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(Ue.a.Title,{ellipsis:!0,style:{color:"white"}},"Datapali")),r.a.createElement(O.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},function e(t){return t.items.map((function(n){return n.hideOnSidebar?null:n.children.length>0?r.a.createElement(Ur,{key:t.parentRouteKey+n.routeKey,title:n.title},e({parentRouteKey:t.parentRouteKey+n.routeKey,items:n.children})):r.a.createElement(O.a.Item,{key:t.parentRouteKey+n.routeKey},r.a.createElement(D.a,{type:n.icon}),r.a.createElement("span",null,n.title),r.a.createElement(v.b,{to:t.parentRouteKey+n.routeKey}))}))}({parentRouteKey:"",items:Qr}))):r.a.createElement(r.a.Fragment,null)}var Br=E.a.Header,Jr=E.a.Footer,$r=E.a.Sider,Hr=E.a.Content;O.a.SubMenu;function Kr(e){var t=Object(g.h)(),n=Object(a.useState)(!1),o=Object(y.a)(n,2),i=o[0],s=o[1];t.pathname;return r.a.createElement(v.a,null,r.a.createElement(E.a,null,r.a.createElement($r,{trigger:null,collapsible:!0,collapsed:i},r.a.createElement(_r,{isVisible:!0})),r.a.createElement(E.a,null,r.a.createElement(Br,{style:{background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between"}},r.a.createElement(ae,{isSidebarCollapsed:i,setSidebarCollapsed:s})),r.a.createElement(Hr,{style:{padding:16}},function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.forEach((function(t){var o=a+t.routeKey;n.push(r.a.createElement(g.b,{key:t.routeKey,exact:!0,path:o,children:t.component||r.a.createElement("h2",null,t.routeKey)})),t.children.length>0&&e(t.children,n,o)})),n}(Qr)),r.a.createElement(Jr,null))))}var zr={serverURL:"https://datapali.com/graphql",localServerURL:"http://localhost:5000/graphql"};var Yr=Object(f.b)((function(e,t){return{authToken:e.user.token}}),null)((function(e){var t=new h.a({uri:zr.serverURL,request:function(t){t.setContext({headers:{authorization:e.authToken||""}})}});return r.a.createElement(Re.b,{client:t},e.children)})),Zr=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showPassword:!1,hasError:!1},n.togglePasswordHide=function(){n.setState((function(e){return{showPassword:!e.showPassword}}))},n.createSubmitFunction=function(e){return function(t){var a=n.props,r=a.handleSubmit,o=a.customSubmit;o&&r(o(e))().then((function(e){n.props.onLoggedIn&&n.props.onLoggedIn(e)})),t.preventDefault()}},n.clearErrors=function(){n.state.hasError&&n.setState({hasError:!1})},n.renderEmailInput=function(e){return r.a.createElement(Le.a,Object.assign({tabIndex:2,prefix:r.a.createElement(D.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",type:"email"},e.input))},n.renderPasswordInput=function(e){return r.a.createElement(Le.a,Object.assign({tabIndex:2,prefix:r.a.createElement(D.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password",type:n.state.showPassword?"text":"password"},e.input))},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.authToken&&this.props.onLoggedIn&&this.props.onLoggedIn(this.props.authToken)}},{key:"renderPasswordHideButton",value:function(){return r.a.createElement(Un.a,{title:"".concat(this.state.showPassword?"Hide":"Show"," Password")},r.a.createElement(Qe.a,{icon:this.state.showPassword?"eye-open":"eye-off",tabIndex:99,onClick:this.togglePasswordHide}))}},{key:"render",value:function(){var e=this;return r.a.createElement(Re.a,null,(function(t){return r.a.createElement(Te.a,{className:"login-form"},r.a.createElement("h5",null,"Login"),r.a.createElement("form",{onSubmit:e.createSubmitFunction(t)},r.a.createElement(Ve.a.Item,null,r.a.createElement(Kn.a,{name:"email",type:"text",component:e.renderEmailInput})),r.a.createElement(Ve.a.Item,null,r.a.createElement(Kn.a,{name:"password",type:"password",component:e.renderPasswordInput})),e.props.error&&r.a.createElement("strong",{className:"error"},"Incorrect email or password"),r.a.createElement(Ve.a.Item,null,r.a.createElement(Qe.a,{style:{width:"100%"},type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))))}))}}]),t}(r.a.Component);function Wr(){var e=Object(Pe.a)(["\nquery Login($email: String!, $password: String!){\n    login(email: $email, password: $password){\n      token\n      user{\n          _id\n          firstName\n          lastName\n          accountType\n        availableForms{\n          name\n          id\n          content\n        }\n        filledForms{\n          id\n          startedDate\n          completedDate\n          formId\n          filledBy\n          answerStore\n        }\n      }\n    }\n  }\n"]);return Wr=function(){return e},e}var Xr=Be()(Wr()),eo=Object(f.b)((function(e,t){return{authToken:e.user.token}}),(function(e){return{customSubmit:function(t){return function(){var n=Object(qe.a)(we.a.mark((function n(a){return we.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.query({query:Xr,variables:{email:a.email,password:a.password},errorPolicy:"none"}).then((function(t){var n=t.data.login,a={id:n.user._id,token:n.token,availableForms:n.user.availableForms.map((function(e){return e.id})),firstName:n.user.firstName,lastName:n.user.lastName,filledForms:n.user.filledForms.map((function(e){return e.id})),accountType:n.user.accountType,createdForms:n.user.createdForms?n.user.createdForms.map((function(e){return e.id})):[]},r={};n.user.availableForms.forEach((function(e){"string"===typeof e.content&&(e.content=JSON.parse(e.content)),r[e.id]=e.content}));var o={};return n.user.filledForms.forEach((function(e){"string"===typeof e.answerStore&&(e.answerStore=JSON.parse(e.answerStore)),o[e.id]={completedDate:parseInt(e.completedDate),filledBy:e.filledBy,formId:e.formId,id:e.id,startedDate:parseInt(e.startedDate),submitted:!0}})),e(A(a)),n.user.token})).catch((function(e){throw new Qn.a({_error:"Incorrect email or password"})})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}}))(Zr),to=Object(Ln.a)({form:"login",onChange:function(e,t,n){return t(Object(Vn.a)("login"))}})(eo),no=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.props.authToken)return r.a.createElement(g.b,this.props);return r.a.createElement(g.b,Object.assign({},this.props,{component:function(){return r.a.createElement(g.a,{to:{pathname:"/login"}})},render:void 0}))}}]),t}(g.b),ao=Object(f.b)((function(e,t){return{authToken:e.user.token}}),(function(){return{}}))(no),ro=new h.a({uri:zr.serverURL}),oo=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={theme:J.DARK},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"changeTheme",value:function(e){this.setState({theme:e})}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(f.a,{store:te},r.a.createElement(b.a,{onBeforeLift:function(){return console.log(te.getState())},loading:null,persistor:ne},r.a.createElement(Yr,{client:ro},r.a.createElement(p.b,{locale:m.a},r.a.createElement("div",{className:"main-wrapper "},r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/login",render:function(e){var t=e.history,n=e.location;return r.a.createElement(to,{onLoggedIn:function(){var e=(n.state||{from:{pathname:"/"}}).from;t.replace(e)}})}}),r.a.createElement(g.b,{path:"/"},r.a.createElement(ao,{component:Kr})))),r.a.createElement("div",{id:"modal-container"}))))))}},{key:"Theme",get:function(){switch(this.state.theme){case J.DARK:return"bp3-dark";case J.LIGHT:return""}}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(oo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[507,1,2]]]);