(window["webpackJsonpdatapali-dashboard"]=window["webpackJsonpdatapali-dashboard"]||[]).push([[0],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(114),o=n(113),i=n(67),r=n(78),s=n(98),l=function(){function e(){this.content=[],this.customId="",this.autoAnswer={isEnabled:!1,answeringConditions:[]},this.options=new o.AnswerOptions,this.id=r.getRandomId("q-"),this.questionContent={content:"",type:a.QAType.String}}return e.toJSON=function(e){return{id:e.id,isRequired:e.isRequired,appearingCondition:i.QACondition.toJSON(e.appearingCondition),questionContent:{content:e.questionContent.content,type:e.questionContent.type},autoAnswer:p(e.autoAnswer),options:o.AnswerOptions.toJSON(e.options),answerType:e.answerType?s.answerTypeToJSON(e.answerType):void 0,customId:e.customId}},e.fromJSON=function(t){var n=new e;return n.id=t.id,n.isRequired=t.isRequired,n.appearingCondition=i.QACondition.fromJSON(t.appearingCondition),n.questionContent=t.questionContent,t.options&&(n.options=o.AnswerOptions.fromJSON(t.options)),t.answerType&&(n.answerType=s.answerTypeFromJSON(t.answerType)),t.autoAnswer&&(n.autoAnswer=d(t.autoAnswer)),t.customId=n.customId||"",n},e.prototype.updateFromQuestion=function(e){return this.isRequired=e.isRequired,this.appearingCondition=e.appearingCondition,this.questionContent=e.questionContent,this.autoAnswer=e.autoAnswer,this.options=e.options,this.answerType=e.answerType,this},e.prototype.setIsRequired=function(e){return this.isRequired=e,this},e.prototype.setAppearingCondition=function(e){return this.appearingCondition=e,this},e.prototype.setAutoAnswer=function(e){return this.autoAnswer=e,this},e.prototype.setQuestionContent=function(e){return this.questionContent=e,this},e.prototype.setCreationDate=function(e){return this.creationDate=e||(new Date).getTime(),this},e.prototype.setAutoAnswerEnabled=function(e){return this.autoAnswer.isEnabled=e||!0,this},e.prototype.addAutoAnswerCondition=function(e){return this.autoAnswer.answeringConditions.push(e),this},e.prototype.setAnswerType=function(e){return this.answerType=e,this},e.prototype.setOptions=function(e){return this.options=e,this},e}();function u(e){return{condition:i.QACondition.toJSON(e.condition),ifTrue:e.ifTrue,ifFalse:e.ifFalse}}function c(e){return{condition:i.QACondition.fromJSON(e.condition),ifFalse:e.ifFalse,ifTrue:e.ifTrue}}function p(e){if(e)return{isEnabled:e.isEnabled,answeringConditions:e.answeringConditions.map((function(e){return u(e)}))}}function d(e){return{isEnabled:e.isEnabled,answeringConditions:e.answeringConditions.map((function(e){return c(e)}))}}t.QAQuestion=l,t.answerConditionToJSON=u,t.answerConditionFromJSON=c,t.autoAnswerToJSON=p,t.autoAnswerFromJSON=d},113:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(77)),i=n(67),r=n(98),s=function(){function e(){this.optionsMap={},this.optionGroupMap={},this.options=[],this.opt_count=0,this.group_count=0}return e.toJSON=function(e){return{optionsMap:e&&e.optionsMap?o.default.mapValues(e.optionsMap,(function(e){return c(e)})):{},optionGroupMap:e&&e.optionGroupMap?o.default.mapValues(e.optionGroupMap,(function(e){return l(e)})):{}}},e.fromJSON=function(t){var n=new e;return n.optionsMap=t.optionsMap?o.default.mapValues(t.optionsMap,(function(e){return u(e)})):{},n.optionGroupMap=t.optionGroupMap?o.default.mapValues(t.optionGroupMap,(function(e){return{id:e.id,name:e.name,appearingCondition:i.QACondition.fromJSON(e.appearingCondition),members:e.members.map((function(e){return n.optionsMap[e.id]}))}})):{},n},Object.defineProperty(e.prototype,"SortedOptions",{get:function(){var e=Object.values(this.optionsMap).filter((function(e){return!e.groupName}));return{groups:Object.values(this.optionGroupMap),rootOptions:e}},enumerable:!0,configurable:!0}),e.prototype.addOption=function(e){e||(e={id:"opt-"+this.opt_count,value:void 0,groupName:void 0}),this.optionsMap[e.id]=e;var t=e.groupName;if(t){var n=this.optionGroupMap[t];n||(n={id:"opt-grp-"+this.group_count,name:t,appearingCondition:void 0,members:[e]},this.optionGroupMap[t]=n,this.group_count++);var a=null;e&&e.id&&(a=n.members.find((function(t){return!!e&&t.id===e.id}))),a||n.members.push(e)}return this.opt_count++,this},e.prototype.addGroup=function(e){var t={id:"opt-grp"+this.group_count,name:e||"group-"+this.group_count,appearingCondition:void 0,members:[]};return this.optionGroupMap[t.name]=t,this.group_count++,t},e.prototype.setValueForOption=function(e,t){var n=this.optionsMap[e];return n&&(n.value=t),this},e.prototype.deleteOption=function(e){var t=this.optionsMap[e];if(t){delete this.optionsMap[e];var n=t.groupName;if(n){var a=this.optionGroupMap[n];if(a){var o=a.members.findIndex((function(t){return t.id===e}));o>-1&&a.members.splice(o,1)}}}return this},e.prototype.assignOptionToGroup=function(e,t){var n=this.optionGroupMap[t];n||(n=this.addGroup(t),this.optionGroupMap[n.name]=n);for(var a=function(t){var a=e[t],i=o.optionsMap[a],r=i.groupName&&o.optionGroupMap[i.groupName];if(n.members.find((function(e){return e.id===a})))return"continue";if(r){var s=r.members.findIndex((function(e){return e.id===i.id}));s>-1&&r.members.splice(s,1)}i.groupName=n.name,n.members.push(i)},o=this,i=0;i<e.length;i++)a(i);return this},e.prototype.setConditionForOption=function(e,t){var n=this.optionsMap[e];return n&&(n.appearingCondition=t),this},e.prototype.setConditionForGroup=function(e,t){var n=this.optionGroupMap[e];return n&&(n.appearingCondition=t),this},e.prototype.unassignGroup=function(e){var t=this;e.forEach((function(e){var n=t.optionsMap[e],a=n.groupName;if(n&&a){var o=t.optionGroupMap[a];if(o){var i=o.members.findIndex((function(t){return t.id===e}));o.members.splice(i,1)}}n&&(n.groupName=void 0)}))},e.prototype.changeGroupName=function(e,t){var n=this,a=this.optionGroupMap[e],i=a.members.map((function(e){return e.id}));if(i&&i.forEach((function(e){var a=n.optionsMap[e];a&&(a.groupName=t)})),a){a.name=t;var r=o.default.clone(a);delete this.optionGroupMap[e],this.optionGroupMap[t]=r}},e.prototype.deleteGroup=function(e){var t=this,n=this.optionGroupMap[e];if(!n)return this;var a=n.members.map((function(e){return e.id}));a&&a.forEach((function(e){var n=t.optionsMap[e];n&&(n.groupName=void 0)})),delete this.optionGroupMap[e]},e.prototype.setOptionTypeFor=function(e,t){var n=this.optionsMap[e];n&&(n.type=t,n.value=void 0)},e}();function l(e){return{id:e.id,name:e.name,appearingCondition:i.QACondition.toJSON(e.appearingCondition),members:e.members.map((function(e){return c(e)}))}}function u(e){return{groupName:e.groupName,appearingCondition:i.QACondition.fromJSON(e.appearingCondition),id:e.id,value:e.value,type:r.answerTypeFromJSON(e.type)}}function c(e){return{appearingCondition:i.QACondition.toJSON(e.appearingCondition),type:e.type?r.answerTypeToJSON(e.type):void 0,id:e.id,value:e.value,groupName:e.groupName}}t.AnswerOptions=s,t.optionGroupToJSON=l,t.optionFromJSON=u,t.optionToJSON=c},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.content=e}return Object.defineProperty(e.prototype,"Condition",{get:function(){return this.condition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Content",{get:function(){return this.content},enumerable:!0,configurable:!0}),e.prototype.setContent=function(e){return this.content=e,this},e.prototype.setCondition=function(e){return this.condition=e,this},e}();t.Answer=a,function(e){e.Less_Than_Or_Equal="<=",e.Greater_Than_Or_Equal=">=",e.Less_Than="<",e.Greater_Than=">",e.Equal="=="}(t.QAComparisonOperator||(t.QAComparisonOperator={})),function(e){e.String="String",e.Boolean="Boolean",e.Date="Date",e.Time="Time",e.Number="Number",e.Select="Select"}(t.AnswerType||(t.AnswerType={})),function(e){e.String="string",e.html="html"}(t.QAType||(t.QAType={}))},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(100),o=n(67),i=n(78),r=n(99),s=function(){function e(){this.customId="",this.id=i.getRandomId("ss-"),this.duplicatingSettings={condition:void 0,isEnabled:!1,duplicateTimes:{value:"",type:"number"}},this.content=[],this.appearingCondition=new o.QACondition}return e.toJSON=function(t){return{name:t.name,id:t.id,appearingCondition:o.QACondition.toJSON(t.appearingCondition),customId:t.customId,content:t.content.map((function(t){return t instanceof e?e.toJSON(t):t instanceof a.QAQuestion?a.QAQuestion.toJSON(t):void 0})),duplicatingSettings:r.dupeSettingsToJSON(t.duplicatingSettings)}},e.prototype.setID=function(e){return this.id=e,this},e.prototype.setName=function(e){return this.name=e,this},e.prototype.setContent=function(e){return this.content=e,this},e.prototype.addContent=function(e){return this.content.push(e),this},e.prototype.deleteContent=function(e){var t=this.content.findIndex((function(t){return t.id===e}));t>-1&&this.content.splice(t,1)},e.prototype.setDuplicatingSettings=function(e){return this.duplicatingSettings=e,this},e}();t.QuestionSection=s},145:function(e,t,n){e.exports=n(198)},150:function(e,t,n){},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOOLEAN="boolean",e.STRING="string",e.DATE="date",e.TIME="time",e.NUMBER="number",e.RANGE="range",e.SELECT="select",e.GEOLOCATION="geolocation"}(t.ANSWER_TYPES||(t.ANSWER_TYPES={}))},152:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(77)),i=function(){function e(){this.consts={},this.count=0}return e.fromJSON=function(e){},e.toJSON=function(e){},Object.defineProperty(e.prototype,"ConstantsArray",{get:function(){return Object.values(this.consts)},enumerable:!0,configurable:!0}),e.prototype.getConstant=function(e){return o.default.cloneDeep(this.consts[e])},e.prototype.addConstant=function(e){return e||(e={name:"",id:"constant-"+this.count,type:void 0,value:""}),this.consts[e.id]=e,this},e.prototype.removeConstant=function(e){return this.consts[e]&&delete this.consts[e],this},e}();t.Constants=i},153:function(e,t,n){"use strict";var a=this&&this.__generator||function(e,t){var n,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(o=2&i[0]?a.return:i[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,i[1])).done)return o;switch(a=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(o=(o=r.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){r.label=i[1];break}if(6===i[0]&&r.label<o[1]){r.label=o[1],o=i;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(i);break}o[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(s){i=[6,s],a=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(77),r=n(67),s=n(99),l=n(100),u=n(115),c=n(78),p=function(){function e(){this.questions={},this.sections={},this.content=[],this.name="",this.id=c.getRandomId("root-")}return e.getFromPath=function(t,n){var a=n[t[0]];return 1===t.length?a:a.content?e.getFromPath(t.slice(1),a.content):void 0},e.prototype.descendants=function(e){!function t(n,a){for(var o=0;o<n.content.length;o++){var r=n.content[o];if(r){var s=e(r,a.concat(o),n);r instanceof u.QuestionSection&&(i.isNil(s)||!0===s)&&t(r,a.concat(o))}}}(this,[0])},e.Entries=function(t,n,a,i){var r=[],s=[],u=n.slice(0);r.push({path:n,startIndex:a});for(var c=0;c<n.length-1;c++)r.push({path:u.slice(0,u.length-1),startIndex:u[u.length-1]+1}),u.pop();for(;r.length>0;){var p=r.shift();if(p){var d=e.getFromPath(p.path,[t]);if(d)for(c=p.startIndex;c<d.content.length;c++){var h=d.content[c];h instanceof l.QAQuestion?i&&i!==o.QUESTION||s.push({path:p.path.concat(c),data:h}):(i&&i!==o.SECTION||s.push({path:p.path.concat(c),data:h}),r.push({path:p.path.concat(c),startIndex:0}))}}}return s},e.prototype.addQuestion=function(t,n){n||(n=[new l.QAQuestion]);for(var a=e.getFromPath(t,[this]),o=0;o<n.length;o++){var i=n[o];if(this.questions[i.id])throw new Error("Question id conflict");this.questions[i.id]=i,!a||a instanceof l.QAQuestion||a.content.push(i)}return this},e.prototype.addSection=function(t,n){n||(n=[new u.QuestionSection]);for(var a=e.getFromPath(t,[this]),o=0;o<n.length;o++){var i=n[o];if(this.questions[i.id])throw new Error("Section id conflict");this.sections[i.id]=i,!a||a instanceof l.QAQuestion||a.content.push(i)}return this},e.prototype.removeQuestion=function(t,n){var a=e.getFromPath(n.slice(0,n.length-1),[this]);if(a&&!(a instanceof l.QAQuestion)){var o=a.content.findIndex((function(e){return e.id===t}));o>-1&&(a.content.splice(o,1),delete this.questions[t])}return this},e.prototype.removeSection=function(t,n){var a=e.getFromPath(n.slice(0,n.length-1),[this]);if(a&&!(a instanceof l.QAQuestion)){var o=a.content.findIndex((function(e){return e.id===t}));o>-1&&(a.content.splice(o,1),delete this.sections[t])}return this},e.prototype.moveItem=function(t,n){var a=e.getFromPath(t,[this]),o=n.slice(0,n.length-1),i=t.slice(0,t.length-1),r=e.getFromPath(o,[this]),s=e.getFromPath(i,[this]);if(s&&r&&a){var c=s.content.findIndex((function(e){return e.id===a.id}));if(c>-1&&!(s instanceof l.QAQuestion)){var p=s.content.splice(c,1);if(!(r instanceof l.QAQuestion)){var d=n[n.length-1];p[0]instanceof u.QuestionSection?r.content.splice(d,0,this.sections[p[0].id]):p[0]instanceof l.QAQuestion&&r.content.splice(d,0,this.questions[p[0].id])}return this}}},e.toJSON=function(e){return{id:e.id,name:e.name,content:e.content.map((function(e){return e instanceof u.QuestionSection?u.QuestionSection.toJSON(e):e instanceof l.QAQuestion?l.QAQuestion.toJSON(e):void 0}))}},e.fromJSON=function(t){var n=new e;n.id=t.id,n.name=t.name;var a=[0];return t.content.forEach((function(e,t){return function e(t,a,o){if(t.hasOwnProperty("content")){var i=new u.QuestionSection;i.id=t.id,i.name=t.name,i.customId=t.customId||"",t.customId&&(i.customId=t.customId),t.appearingCondition&&(i.appearingCondition=r.QACondition.fromJSON(t.appearingCondition)),i.duplicatingSettings=s.dupeSettingsFromJSON(t.duplicatingSettings),n.addSection(a,[i]),t.content.forEach((function(t,n){return e(t,a.concat(o),n)}))}else{var c=l.QAQuestion.fromJSON(t);n.addQuestion(a,[c])}}(e,a,t)})),n},e.prototype.Iterator2=function(t,n,i){var r,s,c,p,d,h;return a(this,(function(a){switch(a.label){case 0:if(0===t.length)return[2,!0];if(!(r=e.getFromPath(t,[this]))||r instanceof l.QAQuestion)return[3,16];a.label=1;case 1:return n<r.content.length?(s=r.content[n])instanceof l.QAQuestion?i!==o.QUESTION&&i?[3,3]:[4,{path:t.concat(n),data:s}]:[3,4]:[3,11];case 2:a.sent(),a.label=3;case 3:return n++,[3,10];case 4:return s instanceof u.QuestionSection?i!==o.SECTION&&i?[3,6]:[4,{path:t.concat(n),data:s}]:[3,10];case 5:a.sent(),a.label=6;case 6:n++,c=0,p=this.Iterator2(t.concat(n),0,i),a.label=7;case 7:return c<p.length?[4,p[c]]:[3,10];case 8:a.sent(),a.label=9;case 9:return c++,[3,7];case 10:return[3,1];case 11:if(!(t&&t.length>0))return[3,15];n=t[t.length-1]+1,d=0,h=this.Iterator2(t,n,i),a.label=12;case 12:return d<h.length?[4,h[d]]:[3,15];case 13:a.sent(),a.label=14;case 14:return d++,[3,12];case 15:return[2,!0];case 16:return[2]}}))},e}();t.RootSection=p,function(e){e[e.QUESTION=1]="QUESTION",e[e.SECTION=2]="SECTION"}(o=t.QORS||(t.QORS={}))},154:function(e,t,n){},198:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(24),r=n.n(i),s=(n(150),n(17)),l=n(16),u=n(19),c=n(18),p=n(20),d=n(5),h=(n(154),n(59)),f=n(221),m=n(222),g=n(128),v=n.n(g),C=n(12),E=n.n(C),b=n(208),y=n(204),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(y.a,{isOpen:this.props.isOpen})}}]),t}(o.a.Component),O=n(223),T=n(65),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleNodeClick=function(e,t,a){n.props.handleNodeClick&&n.props.handleNodeClick(e,t,a)},n.handleNodeCollapse=function(e,t,a){n.props.handleNodeCollapse&&n.props.handleNodeCollapse(e,t,a)},n.handleNodeExpand=function(e,t,a){n.props.handleNodeExpand&&n.props.handleNodeExpand(e,t,a)},n.state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getNodeFromQuestionOrSection",value:function(e,t,n,a){var o=this,i={id:e.id,icon:void 0,label:"",isSelected:n.includes(e.id),isExpanded:a.includes(e.id)};return e instanceof d.QAQuestion?(i.icon="document",i.label="".concat(t," ").concat(e.questionContent.content||"Question")):e instanceof d.QuestionSection&&(i.icon="folder-close",i.label="".concat(t," ").concat(e.name||"Section"),i.childNodes=e.content.map((function(e,i){return o.getNodeFromQuestionOrSection(e,t+"."+(i+1),n,a)}))),i}},{key:"generateITNodeTree",value:function(e,t,n){var a=this;return[{id:e.id,hasCaret:!0,icon:"folder-close",label:"Root",isExpanded:n.includes(e.id),isSelected:t.includes(e.id),childNodes:e.content.map((function(e,o){return a.getNodeFromQuestionOrSection(e,(o+1).toString(),t,n)}))}]}},{key:"render",value:function(){return console.log(this.props.root_),o.a.createElement(O.a,{contents:this.generateITNodeTree(this.props.root_,this.props.selectedNodes,this.props.expandedNodes),onNodeClick:this.handleNodeClick,onNodeCollapse:this.handleNodeCollapse,onNodeExpand:this.handleNodeExpand,className:T.a.ELEVATION_0})}}]),t}(o.a.Component),A=n(137);function k(e){var t=document.getElementById("dp-modal");t||((t=document.createElement("div")).setAttribute("id","dp-modal"),document.body.appendChild(t)),r.a.render(e,t)}function w(){var e=document.getElementById("dp-modal");e&&r.a.unmountComponentAtNode(e)}var Q=n(214),j=n(215),R=n(207),I=n(89),P=n.n(I),M=n(47),G=n(48),F=n(38),_=n(210),q=n(211),x=n(212),D=n(206);function V(e){e||(e="");var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e+(t()+t()+"-")+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}var J=n(130),L=n(141),U=n(213),Y=n(111),W=n(54),B=n(218),z=n(76),$=n(220),H=n(199),K=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"parseRangeValue",value:function(e){var t=e.split("-");return{min:t[0],max:t[1]}}},{key:"handleInputChange",value:function(e){var t=e.min+"-"+e.max;switch(this.props.type&&this.props.type.name){case d.ANSWER_TYPES.TIME:case d.ANSWER_TYPES.DATE:case d.ANSWER_TYPES.NUMBER:default:this.props.onChange&&this.props.onChange(t)}}},{key:"render",value:function(){var e=this,t=null,n=this.props.type?this.props.type.name:void 0,a=this.parseRangeValue(this.props.value);switch(n){case d.ANSWER_TYPES.TIME:t=o.a.createElement(te,{range:a,onChange:this.handleInputChange});break;case d.ANSWER_TYPES.DATE:var i=a.min?new Date(a.min):void 0,r=a.max?new Date(a.max):void 0;t=o.a.createElement(B.a,{shortcuts:!1,defaultValue:[i,r],onChange:function(t){return e.handleInputChange({min:t[0]?t[0].toString():"",max:t[1]?t[1].toString():""})}});break;case d.ANSWER_TYPES.NUMBER:t=o.a.createElement(Z,{range:a,onChange:function(t){return e.handleInputChange}})}return t}}]),t}(o.a.Component),X={range:{min:"",max:""},onChange:function(){}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=Object(a.useState)(e?e.range.min:""),n=Object(W.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(e?e.range.max:""),l=Object(W.a)(s,2),u=l[0],c=l[1];return o.a.createElement(A.a,null,o.a.createElement("input",{className:"form-control",defaultValue:e&&e.range.min&&e.range.min.toString(),onChange:function(t){r(t.target.value),e&&e.onChange&&e.onChange({min:i,max:u})},placeholder:"Minimum",id:"numberRange-min",type:"number"}),o.a.createElement(H.a,null),o.a.createElement("input",{className:"form-control",defaultValue:e&&e.range.max&&e.range.max.toString(),onChange:function(t){c(t.target.value),e&&e.onChange&&e.onChange({min:i,max:u})},placeholder:"Maximum",id:"numberRange-max",type:"number"}))},ee={range:{min:"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time",max:"Sat Aug 31 2019 13:35:27 GMT-0230 (Newfoundland Daylight Time"},onChange:function(){}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=Object(a.useState)(e?e.range.min:void 0),n=Object(W.a)(t,2),i=n[0],r=n[1],s=Object(a.useState)(e?e.range.max:void 0),l=Object(W.a)(s,2),u=l[0],c=l[1];return console.log(u),console.log(i),o.a.createElement(A.a,{className:"bp3-dark"},o.a.createElement(z.a,{precision:z.b.MINUTE,useAmPm:!0,defaultValue:i?new Date(i):void 0,onChange:function(t){r(t.toLocaleDateString()),e.onChange&&e.onChange({min:i,max:u})}}),o.a.createElement(H.a,null),o.a.createElement(z.a,{precision:z.b.MINUTE,useAmPm:!0,defaultValue:u?new Date(u):void 0,onChange:function(t){c(t.toLocaleDateString()),e.onChange({min:i,max:u})}}))},ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,null,[{key:"defaultProps",get:function(){return{defaultValue:"",onChange:function(e){console.log(e)},type:{name:d.ANSWER_TYPES.STRING}}}}]),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=null;switch(this.props.type.name){case d.ANSWER_TYPES.NUMBER:t=o.a.createElement("input",{defaultValue:this.props.defaultValue,className:"form-control",type:"number",onChange:function(t){e.props.onChange&&e.props.onChange({value:t.target.value})}});break;case d.ANSWER_TYPES.SELECT:t=o.a.createElement(ae,{type:this.props.type.ofType,defaultValue:this.props.defaultValue,options:this.props.options,onChange:function(t){e.props.onChange&&e.props.onChange(t)}});break;case d.ANSWER_TYPES.BOOLEAN:var n=[{value:"true",label:"YES"},{value:"false",label:"No"}],a=n.find((function(t){return t.value===e.props.defaultValue}));t=o.a.createElement(F.a,{styles:Oe,defaultValue:a,options:n,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.value})}});break;case d.ANSWER_TYPES.DATE:var i=this.props.defaultValue?new Date(this.props.defaultValue):void 0;t=o.a.createElement($.a,{formatDate:function(e){return e.toLocaleDateString()},parseDate:function(e){return new Date(e)},closeOnSelection:!0,defaultValue:i,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.toLocaleDateString()})}});break;case d.ANSWER_TYPES.RANGE:this.props.type.ofType&&(t=o.a.createElement(K,{value:this.props.defaultValue,type:this.props.type.ofType,onChange:function(t){e.props.onChange&&e.props.onChange({value:t})}}));break;case d.ANSWER_TYPES.STRING:t=o.a.createElement("input",{className:"form-control",type:"text",defaultValue:this.props.defaultValue,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.target.value})}});break;case d.ANSWER_TYPES.TIME:var r=this.props.defaultValue?new Date(this.props.defaultValue):void 0;t=o.a.createElement(z.a,{precision:z.b.MINUTE,useAmPm:!0,defaultValue:r,onChange:function(t){e.props.onChange&&e.props.onChange({value:t.toString()})}})}return t}}]),t}(o.a.Component),ae=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){console.log(e),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=[];if(this.props.options){var t,n=this.props.options.SortedOptions,a=n.rootOptions,i=n.groups,r=[];i&&i.length>0&&(r=i.map((function(e){return{label:e.name,options:e.members.map((function(e){return{label:e.value,value:e.id}}))}}))),t=a.map((function(e){return{label:e.value,value:e.id}})),e=[].concat(Object(Y.a)(r),Object(Y.a)(t))}var s=function(e,t){for(var n=null,a=0;a<e.length;a++){var o=e[a];if(o.options&&o.options.length>0){if(n=o.options.find((function(e){return e.value===t})))break}else if(n=o&&o.value===t?o:void 0)break}return n}(e,this.props.defaultValue);return o.a.createElement(F.a,{styles:Oe,options:e,onChange:this.handleChange.bind(this),defaultValue:s})}}]),t}(o.a.Component),oe=n(205),ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={aConditions:n.props.autoAnswer.answeringConditions||[],isEnabled:n.props.autoAnswer.isEnabled},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"editIfTrueFalseValue",value:function(e,t,n){var a=this;this.setState((function(o){var i=void 0,r=E.a.clone(o.aConditions),s=r[t];return a.props.options&&a.props.answerType.name===d.ANSWER_TYPES.SELECT?(i=a.props.options.optionsMap[n],"true"===e?s.ifTrue=i.id:"false"===e&&(s.ifFalse=i.id)):("true"===e&&(s.ifTrue=n),"false"===e&&(s.ifFalse=n)),{aConditions:r}}),(function(){a.props.onChange&&a.props.onChange({isEnabled:a.state.isEnabled,answeringConditions:a.state.aConditions})}))}},{key:"openConditionModal",value:function(e){var t=this.state.aConditions[e];k(o.a.createElement(ke,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.editCondition.bind(this,e),onCancel:w.bind(this),condition:t.condition}))}},{key:"changeEnabled",value:function(){var e=this;this.setState((function(e){return{isEnabled:!e.isEnabled}}),(function(){e.props.onChange&&e.props.onChange({isEnabled:e.state.isEnabled,answeringConditions:e.state.aConditions})}))}},{key:"addAutoFillCondition",value:function(){var e=this;this.setState((function(e){var t=E.a.clone(e.aConditions),n={condition:new d.QACondition,ifTrue:void 0,ifFalse:void 0};return t.push(n),{aConditions:t}}),(function(){e.props.onChange&&e.props.onChange({isEnabled:e.state.isEnabled,answeringConditions:e.state.aConditions})}))}},{key:"editCondition",value:function(e,t){var n=this,a=E.a.clone(this.state.aConditions);a[e].condition||(a[e].condition=new d.QACondition),a[e].condition.setLiterals(t),this.setState({aConditions:a},(function(){w(),n.props.onChange&&n.props.onChange({isEnabled:n.state.isEnabled,answeringConditions:n.state.aConditions})}))}},{key:"removeAutofillCondition",value:function(e){var t=this;this.setState((function(t){var n=E.a.clone(t.aConditions);return n.splice(e,1),{aConditions:n}}),(function(){t.props.onChange&&t.props.onChange({isEnabled:t.state.isEnabled,answeringConditions:t.state.aConditions})}))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(oe.a,{checked:this.state.isEnabled,onChange:this.changeEnabled.bind(this),label:"Enabled"}),o.a.createElement(D.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Condition"),o.a.createElement("th",null," if True"),o.a.createElement("th",null," if False"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.state.aConditions.map((function(t,n){var a=function(a){return o.a.createElement(ne,{key:a,onChange:function(t){return e.editIfTrueFalseValue(a,n,t.value)},options:e.props.options,defaultValue:"true"===a?t.ifTrue:t.ifFalse&&t.ifFalse,type:e.props.answerType})};return o.a.createElement("tr",{key:"af".concat(n)},o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement(R.a,{type:"button",onClick:function(){return e.openConditionModal(n)},size:"sm"},o.a.createElement(G.a,{size:"sm",icon:M.b}))),o.a.createElement("td",null,a("true")),o.a.createElement("td",null,a("false")),o.a.createElement("td",null,o.a.createElement(R.a,{size:"sm",onClick:function(){e.removeAutofillCondition(n)}}," ",o.a.createElement(G.a,{icon:M.d}))))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(R.a,{size:"sm",onClick:function(){return e.addAutoFillCondition()},type:"button"},o.a.createElement(G.a,{icon:M.c}))),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)))))}}]),t}(o.a.Component),re=n(209),se=[{value:d.ANSWER_TYPES.BOOLEAN,label:"YES/NO"},{value:d.ANSWER_TYPES.STRING,label:"Text"},{value:d.ANSWER_TYPES.TIME,label:"Time"},{value:d.ANSWER_TYPES.DATE,label:"Date"},{value:d.ANSWER_TYPES.NUMBER,label:"Number"},{value:d.ANSWER_TYPES.RANGE,label:"Range"},{value:d.ANSWER_TYPES.SELECT,label:"Multiple Choice"},{value:d.ANSWER_TYPES.GEOLOCATION,label:"Geo location"}],le=se.filter((function(e){return e.value&&e.value!==d.ANSWER_TYPES.SELECT})),ue=[d.ANSWER_TYPES.TIME,d.ANSWER_TYPES.NUMBER,d.ANSWER_TYPES.DATE,d.ANSWER_TYPES.TIME],ce=se.filter((function(e){return ue.includes(e.value)})),pe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={answerType:n.props.answerType},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleAnswerTypeChange",value:function(e){var t=this;this.setState((function(t){var n=E.a.clone(t.answerType);return n.name=e.value,n.ofType=void 0,{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"handleSecondSelectChange",value:function(e){var t=this;this.setState((function(t){var n=E.a.clone(t.answerType);return n.ofType={name:e.value,ofType:void 0},n.ofType.ofType&&(n.ofType.ofType=void 0),{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"handleThirdSelectChange",value:function(e){var t=this;this.setState((function(t){var n=E.a.clone(t.answerType);return n.ofType&&(n.ofType.ofType=e.value),{answerType:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.answerType)}))}},{key:"render",value:function(){var e=this,t=this.state.answerType.name===d.ANSWER_TYPES.SELECT||this.state.answerType.name===d.ANSWER_TYPES.RANGE,n=this.state.answerType.ofType&&this.state.answerType.ofType.name===d.ANSWER_TYPES.RANGE,a=this.state.answerType.name===d.ANSWER_TYPES.SELECT?le:this.state.answerType.name===d.ANSWER_TYPES.RANGE?ce:[],i=this.state.answerType.ofType&&this.state.answerType.ofType.name===d.ANSWER_TYPES.RANGE?ce:[];return o.a.createElement(b.a,null,o.a.createElement(re.a,null,o.a.createElement("label",null,"Value Type"),o.a.createElement(F.a,{onChange:this.handleAnswerTypeChange.bind(this),styles:Oe,options:se,value:se.find((function(t){return t.value===e.state.answerType.name}))})),t&&o.a.createElement(re.a,null,o.a.createElement("label",null,"of type"),o.a.createElement(F.a,{onChange:this.handleSecondSelectChange.bind(this),styles:Oe,options:a,value:a.find((function(t){return e.state.answerType.ofType&&t.value===e.state.answerType.ofType.name}))})),n&&o.a.createElement(re.a,null,o.a.createElement("label",null,"of type"),o.a.createElement(F.a,{onChange:this.handleThirdSelectChange.bind(this),styles:Oe,options:i,value:i.find((function(t){return e.state.answerType.ofType&&e.state.answerType.ofType.ofType&&t.value===e.state.answerType.ofType.ofType.name}))})))}}]),t}(o.a.Component);pe.defaultProps={answerType:{name:void 0,ofType:void 0}};var de,he=n(88),fe=n(64),me=n(139);!function(e){e[e.OPTION=1]="OPTION",e[e.GROUP=2]="GROUP"}(de||(de={}));var ge=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={options:n.props.options||[]},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(){this.props.onChange&&this.props.onChange(this.state.options)}},{key:"handleAddNewOption",value:function(){this.setState((function(e){var t=E.a.clone(e.options);return t.addOption(),{options:t}}),this.handleChange.bind(this))}},{key:"handleGroupNameChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.options);return a.changeGroupName(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupDelete",value:function(e){this.setState((function(t){var n=E.a.clone(t.options);return n.deleteGroup(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionTypeChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.options);return a.setOptionTypeFor(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupAssignment",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.options);return a.assignOptionToGroup(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleGroupUnassignment",value:function(e){this.setState((function(t){var n=E.a.clone(t.options);return n.unassignGroup(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionDelete",value:function(e){this.setState((function(t){var n=E.a.clone(t.options);return n.deleteOption(e),{options:n}}),this.handleChange.bind(this))}},{key:"handleOptionValueChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.options);return a.setValueForOption(e,t),{options:a}}),this.handleChange.bind(this))}},{key:"handleAddGroup",value:function(){this.setState((function(e){var t=E.a.clone(e.options);return t.addGroup(),{options:t}}),this.handleChange.bind(this))}},{key:"handleConditionClick",value:function(e,t){var n;n=e===de.GROUP?this.state.options.optionGroupMap[t].appearingCondition:this.state.options.optionsMap[t].appearingCondition,k(o.a.createElement(ke,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.setCondition.bind(this,t,e),onCancel:w.bind(this),condition:n}))}},{key:"setCondition",value:function(e,t,n){var a=this;this.setState((function(a){var o=E.a.clone(a.options);if(t===de.GROUP){var i=o.optionGroupMap[e];i.appearingCondition||(i.appearingCondition=new d.QACondition),i.appearingCondition.setLiterals(n)}else if(t===de.OPTION){var r=o.optionsMap[e];r.appearingCondition||(r.appearingCondition=new d.QACondition),r.appearingCondition.setLiterals(n)}return{options:o}}),(function(){w(),a.handleChange()}))}},{key:"handleImportFromConstant",value:function(e){var t=this.props.constants.getConstant(e.value);console.log(e),console.log(t),t&&t.value instanceof d.AnswerOptions&&this.setState({options:t.value},this.handleChange.bind(this))}},{key:"render",value:function(){var e=this.props.constants.ConstantsArray.map((function(e){return{label:e.name,value:e.name}}));return o.a.createElement(A.a,{fill:!0,vertical:!0},o.a.createElement(he.b,null,"Import From Constant "),o.a.createElement(F.a,{styles:Oe,options:e,onChange:this.handleImportFromConstant.bind(this)}),o.a.createElement(ve,{groups:this.state.options.optionGroupMap?Object.values(this.state.options.optionGroupMap):[],handleGroupAssignment:this.handleGroupAssignment.bind(this),handleOptionTypeChange:this.handleOptionTypeChange.bind(this),handleAddNewOption:this.handleAddNewOption.bind(this),handleOptionDelete:this.handleOptionDelete.bind(this),handleConditionClick:this.handleConditionClick.bind(this,de.OPTION),handleOptionValueChange:this.handleOptionValueChange.bind(this),options:this.state.options.optionsMap?Object.values(this.state.options.optionsMap):[]}),o.a.createElement(H.a,null),o.a.createElement(Ce,{handleAddGroup:this.handleAddGroup.bind(this),handleGroupUnassignment:this.handleGroupUnassignment.bind(this),handleGroupAssignment:this.handleGroupAssignment.bind(this),handleGroupNameChange:this.handleGroupNameChange.bind(this),handleGroupDelete:this.handleGroupDelete.bind(this),handleGroupConditionClick:this.handleConditionClick.bind(this,de.GROUP),options:this.state.options.optionsMap?Object.values(this.state.options.optionsMap):[],groups:this.state.options.optionGroupMap?Object.values(this.state.options.optionGroupMap):[]}))}}]),t}(o.a.Component),ve=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={options:n.props.options},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.options.length!==this.props.options.length||e.groups.length!==this.props.groups.length}},{key:"generateAddGroupInput",value:function(e){var t=this,n=this.props.groups.map((function(e){return{value:e.name,label:e.name}})),a=n.find((function(t){return t.value===e.groupName}));return o.a.createElement(me.a,{value:a||null,styles:Oe,options:n,onChange:function(n){t.props.handleGroupAssignment&&t.props.handleGroupAssignment([e.id],n.value)}})}},{key:"handleAddNewOption",value:function(){this.props.handleAddNewOption&&this.props.handleAddNewOption()}},{key:"handleConditionEdit",value:function(e){this.props.handleConditionClick&&this.props.handleConditionClick(e)}},{key:"handleAddGroupInput",value:function(e){}},{key:"handleOptionDelete",value:function(e){this.props.handleOptionDelete&&this.props.handleOptionDelete(e)}},{key:"handleOptionTypeChange",value:function(e,t){this.props.handleOptionTypeChange&&this.props.handleOptionTypeChange(e,t)}},{key:"handleOptionValueChange",value:function(e,t){this.props.handleOptionValueChange&&this.props.handleOptionValueChange(e,t.value)}},{key:"render",value:function(){var e=this;return o.a.createElement(D.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Id"),o.a.createElement("th",null,"Type"),o.a.createElement("th",null,"Value"),o.a.createElement("th",null,"Condition"),o.a.createElement("th",null,"Group"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.props.options.map((function(t,n){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null),o.a.createElement("td",null,t.id),o.a.createElement("td",null,o.a.createElement(pe,{answerType:t.type,onChange:function(n){return e.handleOptionTypeChange(t.id,n)}})),o.a.createElement("td",null,o.a.createElement(ne,{onChange:e.handleOptionValueChange.bind(e,t.id),defaultValue:t.value,type:t.type})),o.a.createElement("td",null,o.a.createElement(fe.b,{onClick:e.handleConditionEdit.bind(e,t.id),style:{color:"red",width:20},icon:"key"})),o.a.createElement("td",null,e.generateAddGroupInput(t)),o.a.createElement("td",null,o.a.createElement(fe.b,{style:{width:20},onClick:e.handleOptionDelete.bind(e,t.id),icon:"cross"})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(fe.b,{style:{width:20},icon:"add",onClick:this.handleAddNewOption.bind(this)})),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null))))}}]),t}(o.a.Component);ve.defaultProps={options:[],groups:[]};var Ce=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleGroupAssignment",value:function(e,t){if(e){var n=e.map((function(e){return e.value}));console.log(n),this.props.handleGroupAssignment&&this.props.handleGroupAssignment(n,t)}}},{key:"render",value:function(){var e=this;return o.a.createElement(D.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null),o.a.createElement("th",null,"Group Name"),o.a.createElement("th",null,"Group Items"),o.a.createElement("th",null,"Appearing Condition"),o.a.createElement("th",null))),o.a.createElement("tbody",null,this.props.groups.map((function(t,n){var a=e.props.options.map((function(e){return{value:e.id,label:e.id}})),i=t.members.map((function(e){return e.id})),r=a.filter((function(e){return i.includes(e.value)}));return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null),o.a.createElement("td",null,o.a.createElement("input",{key:t.id,type:"text",className:"form-control",defaultValue:t.name,onChange:function(n){e.props.handleGroupNameChange&&e.props.handleGroupNameChange(t.name,n.target.value)}})),o.a.createElement("td",null,o.a.createElement(F.a,{styles:Oe,onChange:function(n,a){if("remove-value"===a.action){var o=a.removedValue.value;e.props.handleGroupUnassignment&&e.props.handleGroupUnassignment([o])}e.handleGroupAssignment(n,t.name)},value:r,isMulti:!0,options:a})),o.a.createElement("td",null,o.a.createElement(fe.b,{style:{width:20},icon:"key",onClick:function(){e.props.handleGroupConditionClick&&e.props.handleGroupConditionClick(t.name)}})),o.a.createElement("td",null,o.a.createElement(fe.b,{style:{width:20},icon:"cross",onClick:function(){e.props.handleGroupDelete&&e.props.handleGroupDelete(t.name)}})))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(fe.b,{style:{width:20},icon:"add",onClick:function(){e.props.handleAddGroup&&e.props.handleAddGroup()}})),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null))))}}]),t}(o.a.Component);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(J.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=document.getElementById("root")||document.body;P.a.setAppElement(ye);var Se,Oe={container:function(e,t){return be({},e,{border:(t.isFocused,null),background:"transparent",transition:"border-color 0.2s ease, box-shadow 0.2s ease, padding 0.2s ease","&:hover":{boxShadow:"0 2px 4px 0 rgba(41, 56, 78, 0.1)"}})},control:function(e,t){return be({},e,{background:"transparent",borderColor:t.isFocused?Te:e.borderColor,"&:hover":{borderColor:t.isFocused?Te:e.borderColor}})},valueContainer:function(e,t){return be({},e,{background:"transparent",color:"white"})},menu:function(e,t){return be({},e,{background:"black",borderColor:"#e14eca",zIndex:"999999999999999999 !important"})},menuList:function(e,t){return console.log(t),be({},e,{background:"#525f7f",color:"white"})},singleValue:function(e,t){return be({},e,{color:"white"})},input:function(e,t){return be({},e,{color:"white"})},option:function(e,t){return be({},e,{background:t.isSelected?"lightblue":t.isFocused?"hotpink":"#525f7f"})}},Te="#46beed",Ne=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={question:n.props.question},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"handleChange",value:function(){this.props.onChange&&this.props.onChange(this.state.question)}},{key:"handleRequiredChange",value:function(e){this.setState((function(e){var t=C.clone(e.question);return t.setIsRequired(!t.isRequired),{question:t}}),this.handleChange.bind(this))}},{key:"openAppearingConditionModal",value:function(){k(o.a.createElement(ke,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:this.editAppearingCondition.bind(this),onCancel:w.bind(this),condition:this.state.question.appearingCondition}))}},{key:"editAppearingCondition",value:function(e){var t=this;this.setState((function(t){var n=C.clone(t.question);return n.appearingCondition||n.setAppearingCondition(new d.QACondition),n.appearingCondition.setLiterals(e),console.log(d.QACondition.toJSON(n.appearingCondition)),{question:n}}),(function(){w(),t.handleChange()}))}},{key:"handleQuestionChange",value:function(e){this.setState((function(t){var n=C.clone(t.question);return n.setQuestionContent({type:d.QAType.String,content:e}),{question:n}}),this.handleChange.bind(this))}},{key:"handleAnswerTypeChange",value:function(e){this.setState((function(t){var n=C.clone(t.question);return n.setAnswerType(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleOptionsChange",value:function(e){this.setState((function(t){var n=C.clone(t.question);return n.setOptions(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleAutoFillChange",value:function(e){this.setState((function(t){var n=C.clone(t.question);return n.setAutoAnswer(e),{question:n}}),this.handleChange.bind(this))}},{key:"handleCustomIdChange",value:function(e){this.setState((function(t){var n=C.clone(t.question);return n.customId=e,{question:n}}),this.handleChange.bind(this))}},{key:"render",value:function(){var e=this;return o.a.createElement(L.a,null,o.a.createElement("div",null,o.a.createElement(_.a,null,o.a.createElement(q.a,null,o.a.createElement("h5",{className:"title"},"Add Question")),o.a.createElement(x.a,null,o.a.createElement(U.a,null,o.a.createElement("label",{htmlFor:"customid"},"Custom ID"),o.a.createElement("input",{defaultValue:this.state.question.customId,className:"form-control",onChange:function(t){return e.handleCustomIdChange(t.target.value)},id:"custom_id",name:"custom_id",placeholder:"Custom id"})),o.a.createElement(U.a,null,o.a.createElement("label",{htmlFor:"question"},"Question"),o.a.createElement("textarea",{defaultValue:this.state.question.questionContent.content,className:"form-control",onChange:function(t){return e.handleQuestionChange(t.target.value)},id:"question",name:"question",placeholder:""})),o.a.createElement(U.a,null,o.a.createElement(oe.a,{defaultChecked:this.state.question.isRequired,label:"Required",onChange:this.handleRequiredChange.bind(this)})),o.a.createElement(U.a,null,o.a.createElement(pe,{answerType:this.state.question.answerType,onChange:this.handleAnswerTypeChange.bind(this)})),this.state.question.answerType&&this.state.question.answerType.name===d.ANSWER_TYPES.SELECT&&this.state.question.answerType.ofType&&o.a.createElement(U.a,null,o.a.createElement("label",null,"Add Options"),o.a.createElement(_.a,null,o.a.createElement(ge,{constants:this.props.constants,definedQuestions:this.props.definedQuestions,onChange:this.handleOptionsChange.bind(this),defaultOptionType:this.state.question.answerType,options:this.state.question.options}))),o.a.createElement(U.a,null,o.a.createElement("label",{htmlFor:"type"},"Appearing Condition"),o.a.createElement("div",null,o.a.createElement(R.a,{type:"button",onClick:this.openAppearingConditionModal.bind(this),size:"sm"},o.a.createElement(G.a,{size:"sm",icon:M.b})))),o.a.createElement(U.a,null,o.a.createElement(U.a,null,o.a.createElement("label",{htmlFor:"type"},"Add Autofill Conditions"),o.a.createElement(ie,{autoAnswer:this.state.question.autoAnswer,definedQuestions:this.props.definedQuestions,onChange:this.handleAutoFillChange.bind(this),answerType:this.state.question.answerType,options:this.state.question.options})))))))}}]),t}(o.a.Component);Ne.defaultProps={question:new d.QAQuestion},function(e){e[e.QuestionRef=1]="QuestionRef",e[e.ComparisonOperator=2]="ComparisonOperator",e[e.ComparisonValue=3]="ComparisonValue",e[e.FollowingOperator=4]="FollowingOperator"}(Se||(Se={}));var Ae=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).columns=void 0,n.state={literals:n.props.condition?n.props.condition.literals:[]},n.columns=[{dataField:"id",text:"Literal ID"},{dataField:"questionRef",text:"Question Reference"},{dataField:"comparisonOperator",text:"Comparison Operator"},{dataField:"comparisonValue",text:"Comparison Value"},{dataField:"followingOperator",text:"Following Operator"}],n}return Object(p.a)(t,e),Object(l.a)(t,null,[{key:"defaultProps",get:function(){return{onChange:function(){}}}}]),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setLiteralsSetter&&this.props.setLiteralsSetter(this.setLiterals.bind(this))}},{key:"setLiterals",value:function(e){this.setState({literals:e})}},{key:"addLiteral",value:function(e){var t=this;e||(e={literalId:V("lit-"),questionRef:void 0,comparisonOperator:void 0,comparisonValue:void 0,followingOperator:void 0}),this.setState((function(t){var n=E.a.clone(t.literals);return e&&n.push(e),{literals:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.literals)}))}},{key:"moveLiteralUp",value:function(e){this.setState((function(t){var n=E.a.clone(t.literals),a=function(e,t){var n;return((e-1)%(n=t)+n)%n}(e,n.length),o=[n[a],n[e]];return n[e]=o[0],n[a]=o[1],{literals:n}}),this.forceUpdate.bind(this))}},{key:"handleDataChange",value:function(e,t,n){var a=this;this.setState((function(a){var o=E.a.clone(a.literals),i=o[e];switch(t){case Se.QuestionRef:i.questionRef=n&&n.value?n.value:void 0;break;case Se.ComparisonOperator:var r,s;for(r in d.QAComparisonOperator)if(d.QAComparisonOperator[r]===n.value){s=r,i.comparisonOperator=d.QAComparisonOperator[s];break}break;case Se.ComparisonValue:var l={content:n.value,type:d.QAType.String};i.comparisonValue=l;break;case Se.FollowingOperator:i.followingOperator=n.value===d.QAFollowingOperator.AND?d.QAFollowingOperator.AND:d.QAFollowingOperator.OR}return{literals:o}}),(function(){a.props.onChange&&a.props.onChange(a.state.literals)}))}},{key:"getQuestion",value:function(e){return e&&this.props.definedQuestions&&!E.a.isEmpty(this.props.definedQuestions)?this.props.definedQuestions[e]:null}},{key:"removeLiteral",value:function(e){var t=this;this.setState((function(t){var n=E.a.clone(t.literals);return n.splice(e,1),{literals:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.literals)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(_.a,null,o.a.createElement(q.a,null,"".concat(this.props.condition?"Edit":"Add"," Condtion")),o.a.createElement(x.a,null,o.a.createElement(b.a,null,o.a.createElement(D.a,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{key:"th-first"},""),this.columns.map((function(e,t){return o.a.createElement("th",{key:t},e.text)})),o.a.createElement("th",{key:"th-last"},""))),o.a.createElement("tbody",null,this.state.literals.map((function(t,n){var a=e.props.definedQuestions?Object.values(e.props.definedQuestions).map((function(e){return{value:e.id,label:e.questionContent.content}})):[],i=o.a.createElement(F.a,{key:"literalq-".concat(n,"-").concat(t.literalId),styles:Oe,options:a,value:a.find((function(e){return e.value===t.questionRef})),onChange:function(t){return e.handleDataChange(n,Se.QuestionRef,t)}}),r=function(e){var t=Object.values(d.QAComparisonOperator);switch(e&&e.name){case d.ANSWER_TYPES.BOOLEAN:case d.ANSWER_TYPES.DATE:case d.ANSWER_TYPES.STRING:case d.ANSWER_TYPES.TIME:return t.filter((function(e){return e===d.QAComparisonOperator.Equal}));case d.ANSWER_TYPES.NUMBER:default:return t}}(t.questionRef&&e.props.definedQuestions&&e.props.definedQuestions[t.questionRef]?e.props.definedQuestions[t.questionRef].answerType:void 0).map((function(e,t){return{value:e,label:e}})),s=o.a.createElement(F.a,{key:"literalo-".concat(n,"-").concat(t.literalId),styles:Oe,options:r,value:r.find((function(e,n){return e.value===t.comparisonOperator})),onChange:e.handleDataChange.bind(e,n,Se.ComparisonOperator)}),l=e.getQuestion(t.questionRef),u=l?l.answerType:void 0,c=l&&l.options?l.options:void 0,p=o.a.createElement(ne,{options:c,key:"literalv-".concat(n,"-").concat(t.literalId),onChange:e.handleDataChange.bind(e,n,Se.ComparisonValue),defaultValue:t.comparisonValue&&t.comparisonValue.content,type:u}),h=Object.keys(d.QAFollowingOperator).map((function(e){return{label:e,value:"AND"===e?d.QAFollowingOperator.AND:"OR"===e?d.QAFollowingOperator.OR:""}})),f=o.a.createElement(F.a,{key:"literalfo-".concat(n,"-").concat(t.literalId),styles:Oe,options:h,value:h.find((function(e){return e.value===t.followingOperator})),onChange:e.handleDataChange.bind(e,n,Se.FollowingOperator)});return o.a.createElement("tr",{key:"tr_"+n},o.a.createElement("td",null,o.a.createElement(R.a,{type:"button",size:"sm",onClick:function(){return e.moveLiteralUp(n)}},o.a.createElement(G.a,{icon:M.a}))),o.a.createElement("td",null,"l",o.a.createElement("sub",null,n)),o.a.createElement("td",{className:"questionRef"},i),o.a.createElement("td",{className:"comparisonOperator"},s),o.a.createElement("td",{className:"comparisonValue"},p),o.a.createElement("td",{className:"followingOperator"},f),o.a.createElement("td",null,o.a.createElement(R.a,{size:"sm",onClick:function(){e.removeLiteral(n)}}," ",o.a.createElement(G.a,{icon:M.d}))))})),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement(R.a,{size:"sm",onClick:function(){return e.addLiteral()},type:"button"},o.a.createElement(G.a,{icon:M.c}))),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null),o.a.createElement("td",null)))))))}}]),t}(o.a.Component),ke=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).createCondition_=void 0,n.handleChange=function(e){n.setState({errors:[],literals:e})},n.primaryButtonHandler=function(){var e=(new d.QACondition).setLiterals(n.state.literals);d.QACondition.checkIfValid(e)?n.props.onSubmit&&n.props.onSubmit(n.state.literals):n.setState({errors:[{message:"Condition is not valid!"}]})},n.secondaryButtonHandler=function(){n.props.onCancel&&n.props.onCancel(n.state.literals)},n.state={isOpen:n.props.isOpen,literals:n.props.condition&&n.props.condition.literals?n.props.condition.literals:[],errors:[]},n.createCondition_=o.a.createRef(),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(P.a,{style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",minHeight:"400px",backgroundColor:"#27293d"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.50)"}},isOpen:this.props.isOpen},o.a.createElement(Q.a,null,this.props.isOpen&&o.a.createElement(Ae,{definedQuestions:this.props.definedQuestions,condition:this.props.condition?this.props.condition:void 0,ref:this.createCondition_,onChange:function(t){return e.handleChange(t)}}),o.a.createElement(b.a,null,o.a.createElement("div",{className:"btn-danger"},this.state.errors.map((function(e){return e.message}))))),o.a.createElement(j.a,null,o.a.createElement(R.a,{color:"primary",onClick:this.primaryButtonHandler},"Submit"),o.a.createElement(R.a,{color:"secondary",onClick:this.secondaryButtonHandler},"Cancel")))}}]),t}(o.a.Component);ke.defaultProps={isOpen:!1,condition:new d.QACondition};var we=n(7),Qe=n.n(we),je=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={isEnabled:n.props.isEnabled,condition:n.props.condition,duplicateTimes:n.props.duplicateTimes},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleQuestionRefChange",value:function(e){this.setState({duplicateTimes:{value:e.value,type:"questionRef"}})}},{key:"handleNumberTimesChange",value:function(e){this.setState({duplicateTimes:{value:e,type:"number"}})}},{key:"handleTypeChange",value:function(e){this.setState((function(t){return{duplicateTimes:{value:"",type:e.value}}}))}},{key:"handleEnabledChange",value:function(){this.setState((function(e){return{isEnabled:!e.isEnabled}}))}},{key:"generateValueComponent",value:function(e){var t=this;if("questionRef"===e){var n=Object.values(this.props.definedQuestions).map((function(e){return{value:e.id,label:e.questionContent.content}})),a="questionRef"===this.state.duplicateTimes.type?n.find((function(e){return e.value===t.state.duplicateTimes.value})):void 0;return o.a.createElement(F.a,{styles:Oe,options:n,defaultValue:a,onChange:this.handleQuestionRefChange.bind(this)})}return o.a.createElement("input",{defaultValue:"number"===this.state.duplicateTimes.type?this.state.duplicateTimes.value:"",type:"number",className:"form-control",onChange:function(e){return t.handleNumberTimesChange(e.target.value)}})}},{key:"handleSave",value:function(){E.a.values(this.state).every(E.a.isEmpty)||this.props.handleSave({isEnabled:this.state.isEnabled,condition:this.state.condition,duplicateTimes:this.state.duplicateTimes})}},{key:"render",value:function(){var e=this,t=[{value:"number",label:"Number"},{value:"questionRef",label:"AnswerValue"}],n=t.find((function(t){return t.value===e.state.duplicateTimes.type}));return o.a.createElement(A.a,{className:Qe()(T.a.ELEVATION_2,T.a.DARK),vertical:!0,fill:!0},o.a.createElement(oe.a,{onChange:this.handleEnabledChange.bind(this),defaultChecked:this.props.isEnabled},"Enabled"),o.a.createElement(H.a,null),o.a.createElement(F.a,{menuContainerStyle:{zIndex:99999},styles:Oe,onChange:function(t){return e.handleTypeChange(t)},options:t,defaultValue:n}),this.generateValueComponent(this.state.duplicateTimes.type),o.a.createElement(H.a,null),o.a.createElement(A.a,{fill:!0},o.a.createElement(fe.b,{onClick:this.handleSave.bind(this)},"Save"),o.a.createElement(fe.b,{onClick:this.props.handleCancel},"Cancel")))}}]),t}(o.a.Component),Re=n(216),Ie=n(129),Pe=function(e){var t=Object(a.useState)(!1),n=Object(W.a)(t,2),i=n[0],r=n[1];return o.a.createElement(A.a,{className:"bp3-dark",style:{paddingBottom:"20px"},fill:!0,vertical:!0},o.a.createElement(A.a,null,o.a.createElement(fe.b,{onClick:function(){return e.handleMoveUp(e.questionId,e.path)},style:{height:50,width:20},icon:"arrow-up"}),o.a.createElement(fe.b,{style:{height:50},onClick:function(){return r(!i)},alignText:"left",rightIcon:i?"chevron-up":"chevron-down"},o.a.createElement(Re.a,{color:"secondary"},"Q")," ",o.a.createElement("span",null,e.readablePath," ")," ",o.a.createElement("span",null," ",e.questionTitle," ")),o.a.createElement(fe.b,{onClick:function(){return e.handleDeletion(e.questionId,e.path)},style:{height:50,width:20},alignText:"left",rightIcon:"cross"})),o.a.createElement(Ie.a,{keepChildrenMounted:!1,isOpen:i},e.children))},Me=n(219),Ge=n(61),Fe=function(e){var t=Object(a.useState)(!1),n=Object(W.a)(t,2),i=n[0],r=n[1];return o.a.createElement(A.a,{className:"bp3-dark",style:{paddingBottom:"20px"},fill:!0,vertical:!0},o.a.createElement(A.a,null,o.a.createElement(fe.b,{style:{width:20},icon:"arrow-up",onClick:function(){return e.handleMoveUp(e.sectionId,e.path)}}),o.a.createElement(Me.a,null,o.a.createElement(Me.a.Group,{align:Ge.a.LEFT},o.a.createElement(he.b,null,o.a.createElement("span",null,e.readablePath," "),o.a.createElement(m.a,{onChange:e.handleSectionNameChange,placeholder:"Section",defaultValue:e.sectionName}," "))),o.a.createElement(Me.a.Group,{align:Ge.a.RIGHT},o.a.createElement(m.a,{onChange:e.handleCustomIdChange,placeholder:"Custom Id",defaultValue:e.customId}," "),o.a.createElement(fe.b,{icon:"key",onClick:function(){return e.handleOpenConditionSettings()}}),o.a.createElement(fe.b,{onClick:function(){return r(!i)},icon:"cog"}),o.a.createElement(fe.b,{icon:"folder-open",onClick:function(){return e.onClick(e.sectionId,e.path)}}))),o.a.createElement(fe.b,{style:{width:20},icon:"cross",onClick:function(){return e.handleDeletion(e.sectionId,e.path)}})),o.a.createElement(Ie.a,{isOpen:i,keepChildrenMounted:!1},e.children))},_e=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleQuestionChange",value:function(e,t){this.props.handleQuestionChange&&this.props.handleQuestionChange(e,t)}},{key:"handleDuplicatingSettingsSave",value:function(e,t){this.props.handleSectionDuplicatingSettingsChange&&this.props.handleSectionDuplicatingSettingsChange(e,t)}},{key:"handleDuplicatingSettingsCancel",value:function(){}},{key:"openConditionSettings",value:function(e){var t=this,n=e.appearingCondition;k(o.a.createElement(ke,{definedQuestions:this.props.definedQuestions,isOpen:!0,onSubmit:function(n){t.props.handleSectionConditionChange(e.id,n),w()},onCancel:w.bind(this),condition:n}))}},{key:"render",value:function(){var e,t=this,n=Object(d.getReadablePath)(this.props.parentPath);return n&&(n+="."),e=this.props.section.content.map((function(e,a){var i=t.props.parentPath.concat(a);return e instanceof d.QAQuestion?o.a.createElement(Pe,{questionTitle:e.questionContent.content,handleMoveUp:t.props.handleMoveUp,path:i,questionId:e.id,handleDeletion:t.props.handleDeleteChildSectionOrQuestion,readablePath:n+(a+1),key:e.id,isExpanded:!1},o.a.createElement(Ne,{constants:t.props.constants,definedQuestions:t.props.definedQuestions,onChange:function(e){return t.handleQuestionChange(e,i)},question:e})):e instanceof d.QuestionSection?o.a.createElement(Fe,{customId:e.customId,handleCustomIdChange:function(n){return t.props.handleSectionCustomIdChange(e.id,n)},handleMoveUp:t.props.handleMoveUp,sectionName:e.name,handleSectionNameChange:function(n){return t.props.handleSectionNameChange(e.id,n)},path:i,handleDeletion:t.props.handleDeleteChildSectionOrQuestion,sectionId:e.id,readablePath:n+(a+1),handleOpenConditionSettings:function(){return t.openConditionSettings(e)},key:e.id,onClick:t.props.handleSectionClick},o.a.createElement(je,Object.assign({definedQuestions:t.props.definedQuestions,handleSave:function(n){return t.handleDuplicatingSettingsSave(e.id,n)},handleCancel:t.handleDuplicatingSettingsCancel},e.duplicatingSettings))):null})),o.a.createElement(A.a,{fill:!0,vertical:!0},e)}}]),t}(o.a.Component),qe=[{type:"button",name:"up-one-level",icon:"arrow-up",text:""},{type:"button",name:"save-root",icon:"floppy-disk",text:"Save Form"},{type:"button",name:"add-section",icon:"box",text:"Add Section"},{type:"button",name:"add-question",icon:"document",text:"Add Question"},{type:"button",name:"copy-state",icon:"clipboard",text:"Copy State"}],xe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleClick",value:function(e){this.props.handleItemClick&&this.props.handleItemClick(e)}},{key:"render",value:function(){var e=this;return o.a.createElement(Me.a,{className:"bp3-dark",fixedToTop:!0},o.a.createElement(Me.a.Group,{align:Ge.a.LEFT},this.props.children,qe.map((function(t){return o.a.createElement(fe.b,{onClick:e.handleClick.bind(e,t.name),key:t.name,icon:t.icon,text:t.text,className:"bp3-minimal"})}))))}}]),t}(o.a.Component),De="http://142.93.151.160:5000/graphql",Ve=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).toasterRef=void 0,n.state={selectedNodes:[],expandedNodes:[n.props.root.id],root:n.props.root,activeSection:n.props.root,activeSectionPath:[0],constants:new d.Constants},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.loadForm()}},{key:"loadForm",value:function(){var e=this,t=this.props.token;return Object(d.request)(De,"forms",{query:"\n            query GetForm($formId: [String]!){\n                forms(id: $formId){\n                  id\n                  name\n                  content\n                }\n              }",variables:{formId:"root-53c37497-3808-cfd8-c886-1361dbaab171"}},"Could not delete the game file",t).then((function(t){if(t=t[0]){t.content=JSON.parse(t.content),console.log(t.id);var n=d.RootSection.fromJSON(t),a=e.getAllEntries([0,1],6,n,null,!0,[]);console.log(a),e.setState({root:n,activeSection:n,activeSectionPath:[0]})}}))}},{key:"getAllEntries",value:function(e,t,n,a){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5?arguments[5]:void 0;if(i||(i=[]),!(e.length<=0)){var r=d.RootSection.getFromPath(e,[n]);if(r){for(var s=t;s<r.content.length;s++){var l=r.content[s];l instanceof d.QAQuestion?a!==d.QORS.QUESTION&&a||i.push(l):l instanceof d.QuestionSection&&(a!==d.QORS.SECTION&&a||i.push(l),this.getAllEntries(e.concat(s),0,n,a,!1,i))}if(o){var u=e.slice(0),c=u.pop();"number"===typeof c&&this.getAllEntries(u,c,n,a,!0,i)}return i}}}},{key:"handleAddSection",value:function(){var e=this;this.setState((function(t){var n=E.a.clone(t.root);return n.addSection(e.state.activeSectionPath),{root:n}}),(function(){e.props.onChange&&e.props.onChange(e.state.root)}))}},{key:"handleAddQuestion",value:function(){var e=this;this.setState((function(t){var n=E.a.clone(t.root);return n.addQuestion(e.state.activeSectionPath),{root:n}}),(function(){e.props.onChange&&e.props.onChange(e.state.root)}))}},{key:"handleDeleteQuestionOrSection",value:function(e,t){var n=this;this.setState((function(a){var o=a.activeSection,i=a.activeSectionPath,r=t.slice(0,t.length-1),s=E.a.clone(a.root),l=d.RootSection.getFromPath(t,[n.state.root]);if(l&&e!==l.id)throw new Error("cannot delete, id mismatch");if(l instanceof d.QAQuestion)s.removeQuestion(l.id,t);else if(l instanceof d.QuestionSection&&(s.removeSection(l.id,t),l.id===a.activeSection.id)){var u=d.RootSection.getFromPath(r,[n.state.root]);!u||u instanceof d.QAQuestion||(o=u,i=r)}return{root:s,activeSection:o,activeSectionPath:i}}),(function(){n.props.onChange&&n.props.onChange(n.state.root)}))}},{key:"handleUpOneLevel",value:function(){if(this.state.activeSectionPath.length>1){var e=this.state.activeSectionPath.slice(0,this.state.activeSectionPath.length-1),t=d.RootSection.getFromPath(e,[this.state.root]);!t||t instanceof d.QAQuestion||this.setState((function(n){return{activeSection:t?t instanceof d.QAQuestion?n.activeSection:t:n.activeSection,activeSectionPath:e}}))}}},{key:"handleSave",value:function(){var e=d.RootSection.toJSON(this.state.root);e.content=JSON.stringify(e.content),e.name||(e.name="Main Form");var t={query:"\n            mutation SaveForm($saveFile: FormFileInput!){\n                saveForm(form: $saveFile){\n                  id\n                }\n              }",variables:{saveFile:e}},n=this.props.token;return Object(d.request)(De,"saveForm",t,"Could not save the  file",n).then((function(e){return console.log(e)}))}},{key:"handleToolbarItemClick",value:function(e){switch(e){case"add-section":this.handleAddSection();break;case"add-question":this.handleAddQuestion();break;case"up-one-level":this.handleUpOneLevel();break;case"save-root":this.handleSave();break;case"copy-state":var t=JSON.stringify(d.RootSection.toJSON(this.state.root));v()(t);var n={message:"Copied state to clipboard",icon:"tick",intent:h.a.SUCCESS};this.toasterRef.show(n)}}},{key:"handleQuestionUpdate",value:function(e,t){var n=this;this.setState((function(a){var o=E.a.clone(a.root),i=t.slice(0,t.length-1);d.RootSection.getFromPath(i,[o])instanceof d.QAQuestion||n.state.root.questions[e.id].updateFromQuestion(e);return{root:o}}),(function(){n.props.onChange&&n.props.onChange(n.state.root)}))}},{key:"handleFormTreeNodeExpand",value:function(e,t,n){e.isExpanded=!0;var a=d.RootSection.getFromPath(t,[this.state.root]);a&&this.setState((function(e){return{expandedNodes:a?E.a.union([a.id],e.expandedNodes):e.expandedNodes}}))}},{key:"handleFormTreeNodeCollapse",value:function(e){this.setState((function(t){return{expandedNodes:t.expandedNodes.filter((function(t){return e.id!==t}))}}))}},{key:"handleFormTreeNodeClick",value:function(e,t,n){var a=d.RootSection.getFromPath(t,[this.state.root]);!a||a instanceof d.QAQuestion?a&&this.setState((function(e){var n=t.length>1?t.slice(0,t.length-1):t,a=d.RootSection.getFromPath(n,[e.root]),o=d.RootSection.getFromPath(t,[e.root]),i=e.expandedNodes,r=o?[o.id]:e.selectedNodes;return!a||a instanceof d.QAQuestion||(i=E.a.union([a.id],i),r.push(a.id)),{expandedNodes:i,selectedNodes:r,activeSection:!a||a instanceof d.QAQuestion?e.activeSection:a,activeSectionPath:n}})):this.setState((function(e){var n=a?E.a.union([a.id],e.expandedNodes):e.expandedNodes;return{selectedNodes:a?[a.id]:e.selectedNodes,expandedNodes:n,activeSection:!a||a instanceof d.QAQuestion?e.activeSection:a,activeSectionPath:t}}))}},{key:"handleRootNameChange",value:function(e){var t=this;this.setState((function(t){var n=E.a.clone(t.root);return n.name=e,{root:n}}),(function(){t.props.onChange&&t.props.onChange(t.state.root)}))}},{key:"handleSectionChange",value:function(e,t){this.setState((function(e){var n=d.RootSection.getFromPath(t,[e.root]),a=e.expandedNodes,o=[];return n&&n instanceof d.QuestionSection&&(a=E.a.union([n.id],a),o.push(n.id)),{expandedNodes:a,selectedNodes:o,activeSection:!n||n instanceof d.QAQuestion?e.activeSection:n,activeSectionPath:t}}))}},{key:"handleDuplicatingSettingsChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.root);return a.sections[e].setDuplicatingSettings(t),{root:a}}))}},{key:"handleSectionNameChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.root);return a.sections[e].name=t,{root:a}}))}},{key:"handleMoveUp",value:function(e,t){this.setState((function(e){var n=E.a.clone(e.root),a=E.a.clone(t);return a[a.length-1]>0&&(a[a.length-1]=a[a.length-1]-1),n.moveItem(t,a),{root:n}}))}},{key:"handleSectionConditionChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.root);return a.sections[e].appearingCondition.setLiterals(t),{root:a}}))}},{key:"handleSectionCustomIdChange",value:function(e,t){this.setState((function(n){var a=E.a.clone(n.root);return a.sections[e].customId=t,{root:a}}))}},{key:"render",value:function(){var e=this;return o.a.createElement(b.a,null,o.a.createElement(f.a,{ref:function(t){return t?e.toasterRef=t:null}}),o.a.createElement(S,{isOpen:!1}),o.a.createElement(xe,{handleItemClick:this.handleToolbarItemClick.bind(this)},o.a.createElement(m.a,{value:this.state.root.name,onChange:this.handleRootNameChange.bind(this)})),o.a.createElement("div",{className:"container"},o.a.createElement("div",{style:{background:"transparent"},className:"sidebar"},o.a.createElement("div",{className:"sidebar-wrapper"},o.a.createElement(N,{expandedNodes:this.state.expandedNodes,selectedNodes:this.state.selectedNodes,handleNodeExpand:this.handleFormTreeNodeExpand.bind(this),handleNodeCollapse:this.handleFormTreeNodeCollapse.bind(this),handleNodeClick:this.handleFormTreeNodeClick.bind(this),root_:this.state.root}))),o.a.createElement("div",{className:"content"},o.a.createElement(_e,{handleSectionCustomIdChange:this.handleSectionCustomIdChange.bind(this),handleSectionConditionChange:this.handleSectionConditionChange.bind(this),handleMoveUp:this.handleMoveUp.bind(this),constants:this.state.constants,handleSectionNameChange:this.handleSectionNameChange.bind(this),definedQuestions:this.state.root.questions,handleSectionDuplicatingSettingsChange:this.handleDuplicatingSettingsChange.bind(this),handleSectionClick:this.handleSectionChange.bind(this),handleDeleteChildSectionOrQuestion:this.handleDeleteQuestionOrSection.bind(this),parentPath:this.state.activeSectionPath,handleQuestionChange:this.handleQuestionUpdate.bind(this),section:this.state.activeSection})),o.a.createElement(b.a,{style:{position:"fixed",height:"60px",bottom:0,width:"100%",margin:"0 auto"},className:"fixed-footer"})))}}]),t}(o.a.Component),Je=n(217),Le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).usernameRef=void 0,n.passwordRef=void 0,n.state={},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleLogin",value:function(){var e=this,t={query:"\n            query Login($email: String!, $password: String!){\n                login(email: $email, password: $password){\n                  token\n                }\n              }",variables:{email:this.usernameRef&&this.usernameRef.value,password:this.passwordRef&&this.passwordRef.value}};return Object(d.request)(De,"login",t,"Could not login","").then((function(t){console.log(t),e.props.onLoggedIn&&e.props.onLoggedIn(t.token)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(Je.a,{style:{alignContent:"center",margin:"0 auto"}},o.a.createElement(b.a,null,o.a.createElement(U.a,null,o.a.createElement("label",null," username "),o.a.createElement("input",{ref:function(t){return e.usernameRef=t},type:"text"}))),o.a.createElement(b.a,null,o.a.createElement(U.a,null,o.a.createElement("label",null," password "),o.a.createElement("input",{ref:function(t){return e.passwordRef=t},type:"password"}))),o.a.createElement(b.a,null,o.a.createElement(R.a,{onClick:this.handleLogin.bind(this)},"Submit")))}}]),t}(o.a.Component),Ue=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).state={isLoggedIn:!1,token:null},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){this.setState({form:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"wrapper"},!this.state.isLoggedIn&&o.a.createElement(Le,{onLoggedIn:function(t){return e.setState({token:t,isLoggedIn:!0})}}),this.state.isLoggedIn&&o.a.createElement("div",{className:"main-panel"},o.a.createElement("div",{className:"content"},o.a.createElement(Ve,{token:this.state.token,root:new d.RootSection,onChange:this.handleChange.bind(this)}))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ye=n(50),We=n(224),Be=n(140),ze=Object(Ye.a)();Object(Be.whyDidYouUpdate)(o.a,{groupByComment:!0,collapseComponentGroups:!1}),r.a.render(o.a.createElement(We.c,{history:ze},o.a.createElement(We.d,null,o.a.createElement(We.b,{path:"/admin",render:function(e){return o.a.createElement(Ue,e)}}),o.a.createElement(We.a,{from:"/",to:"/admin/dashboard"}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},5:function(e,t,n){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),a(n(113)),a(n(114)),a(n(151)),a(n(67)),a(n(152)),a(n(99)),a(n(100)),a(n(115)),a(n(153)),a(n(78)),a(n(98))},67:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(77)),i=function(){function e(){this.literals=Array()}return e.fromJSON=function(t){if(!t)return new e;var n=new e,a=t.literals;return n.setLiterals(a),n},e.toJSON=function(e){if(e)return{literals:JSON.parse(JSON.stringify(e.literals))}},e.checkIfValid=function(e){if(!e.literals)return!1;var t=!0;return e.literals.forEach((function(e){Object.values(e).every((function(e){return!o.default.isNil(e)}))||(t=!1)})),console.log(t),t},e.Clone=function(t){return new e},e.prototype.setLiterals=function(e){return this.literals=e,this},e.prototype.getClause=function(){var e=this,t="";return this.literals.forEach((function(n,a){t+="l"+a+(a===e.literals.length-1?n.followingOperator:"")})),t},Object.defineProperty(e.prototype,"Literals",{get:function(){return this.literals},enumerable:!0,configurable:!0}),e.prototype.addLiteral=function(e){this.literals.push(e),console.log(this.literals)},e.prototype.deleteLiteral=function(e){return this.literals.splice(e,1),this},e}();t.QACondition=i,function(e){e.OR="||",e.AND="&"}(t.QAFollowingOperator||(t.QAFollowingOperator={}))},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=function(e,t,n,a,o){var i={"Content-Type":"application/json"};return o&&(i.Authorization=o),fetch(e,{method:"POST",body:JSON.stringify(n),headers:i}).then((function(e){if(200!==e.status)throw new Error(a||"Failed");return e.json()})).then((function(e){if(e.errors)throw e.errors[0];if(e.data&&e.data[t])return e.data[t]})).catch((function(e){throw e}))},t.getReadablePath=function(e){return e.slice(1).map((function(e){return e+1})).join(".")},t.getRandomId=function(e){e||(e="");var t=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e+(t()+t()+"-")+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},98:function(e,t,n){"use strict";function a(e){if(e)return{name:e.name,ofType:o(e.ofType)}}function o(e){if(e)return{name:e.name,ofType:o(e.ofType)}}Object.defineProperty(t,"__esModule",{value:!0}),t.ofTypeToJSON=a,t.answerTypeToJSON=function(e){return{name:e.name,ofType:a(e.ofType)}},t.ofTypeFromJSON=o,t.answerTypeFromJSON=function(e){return{name:e.name,ofType:o(e.ofType)}}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(67);t.dupeSettingsToJSON=function(e){return{isEnabled:e.isEnabled,condition:a.QACondition.toJSON(e.condition),duplicateTimes:{value:e.duplicateTimes.value,type:e.duplicateTimes.type}}},t.dupeSettingsFromJSON=function(e){return{isEnabled:e.isEnabled,duplicateTimes:{value:e.duplicateTimes.value,type:e.duplicateTimes.type},condition:a.QACondition.fromJSON(e.condition)}}}},[[145,1,2]]]);
//# sourceMappingURL=main.60908b51.chunk.js.map